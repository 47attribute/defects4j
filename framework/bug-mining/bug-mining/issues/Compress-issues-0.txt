<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Sat Mar 24 03:57:57 UTC 2018

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+Compress+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="200" total="246"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[COMPRESS-446] Resource Leak in ParallelScatterZipCreator#writeTo(ZipArchiveOutputStream)</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-446</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Before it does anything else, &lt;tt&gt;ParallelScatterZipCreator#writeTo(ZipArchiveOutputStream)&lt;/tt&gt; loops over all futures returned by the creator`s executor service and calls &lt;tt&gt;Future#get()&lt;/tt&gt;. This will block until the future&apos;s computation is completed, respectively - i.e., until all entries have been written to the thread-local scatter streams.&lt;/p&gt;

&lt;p&gt;However, if the computation of a future fails, then &lt;tt&gt;Future#get()&lt;/tt&gt; can also throw an exception. This exception escapes &lt;tt&gt;ParallelScatterZipCreator#writeTo(ZipArchiveOutputStream)&lt;/tt&gt; before the executor service is shut down. The latter means that also the thread-local variables in the executor service&apos;s threads and all objects referenced by them continue to exist and cannot be reclaimed by the GC.&lt;/p&gt;

&lt;p&gt;I encountered this situation when - while processing an archive with 130,000 documents - the JVM threw an &lt;tt&gt;OutOfMemoryError&lt;/tt&gt;. The application was not able to recover from this OOM error because most of the heap was occupied by objects reachable from the executor service&apos;s threads.&lt;/p&gt;

&lt;p&gt;Of course, the OOM is mostly the fault of my own code; I will be able to work around the &quot;leaked&quot; executor service because I supply it in the first place and can therefore shut it down if I detect an error situation.  &lt;/p&gt;

&lt;p&gt;The effect would be the same, though, if, say, &lt;tt&gt;Future#get()&lt;/tt&gt; throws an &lt;tt&gt;InterruptedException&lt;/tt&gt;. Therefore, &lt;tt&gt;ParallelScatterZipCreator#writeTo(ZipArchiveOutputStream)&lt;/tt&gt;  should either shut down and release all resources if it cannot complete its task due to an Exception thrown by a future or it should offer a reasonable recovery strategy. &lt;/p&gt;</description>
                <environment>&lt;p&gt;The application was running inside a Docker container, the JVM had about 1.7 GByte heap space.&lt;/p&gt;</environment>
        <key id="13145982">COMPRESS-446</key>
            <summary>Resource Leak in ParallelScatterZipCreator#writeTo(ZipArchiveOutputStream)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ludwigc">Christoph Ludwig</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Mar 2018 20:24:00 +0000</created>
                <updated>Tue, 20 Mar 2018 13:22:34 +0000</updated>
                                            <version>1.16.1</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16405985" author="bodewig" created="Tue, 20 Mar 2018 09:13:42 +0000"  >&lt;p&gt;This is ugly. An alternative would be to shutdown the executor in a finally block. Would that be sufficient?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krosenvold&quot; class=&quot;user-hover&quot; rel=&quot;krosenvold&quot;&gt;Kristian Rosenvold&lt;/a&gt; any ideas?&lt;/p&gt;</comment>
                            <comment id="16406315" author="ludwigc" created="Tue, 20 Mar 2018 13:22:34 +0000"  >&lt;p&gt;I think shutting down the executor service in a finally block is fine - this way all threads are closed and the objects reachable from there get a chance to be re-claimed.&lt;/p&gt;

&lt;p&gt;In addition, I think it would be worthwhile to document explicitly that the ZIP creation fails irrecoverably if any of the  futures  throws an exception. It does not come as a surprise, of course, but It helps if the documentation is clear on this.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Mar 2018 09:13:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rg6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COMPRESS-444] Version to extract incorrect in Local File Header</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-444</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;A friend is&#160;generating ZIP files with Maven&#160;Assembly Plugin, which uses Plexus Archiver, which uses Commons Compress. One of his files tripped a validation check in SharpZipLib, see&#160;&lt;a href=&quot;https://github.com/KSP-CKAN/CKAN/issues/2285&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/KSP-CKAN/CKAN/issues/2285&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here&apos;s a link to the ZIP:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/rleroy/CivilianPopulation/releases/download/2.0.12/ksp-civilian-population-mod-2.0.12.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rleroy/CivilianPopulation/releases/download/2.0.12/ksp-civilian-population-mod-2.0.12.zip&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The LFH in question starts:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;00000400 74 69 6c 69 74 79 2f 50 4b 03 04 &lt;b&gt;0a 00&lt;/b&gt; 08 08 &lt;b&gt;08&lt;/b&gt; |tility/PK.......|&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Note the&#160;&lt;b&gt;highlighted&lt;/b&gt; bytes. The &lt;b&gt;0a 00&lt;/b&gt; means that the version to extract is PKZip 1.0. The &lt;b&gt;08&lt;/b&gt; means that the compression method is DEFLATED. These values are not compatible; by Commons Compress&apos;s own code logic, DEFLATED should require version 2.0, which would appear in the LFH as &lt;b&gt;14 00&lt;/b&gt;. Notably, the CFH for this same file&#160;&lt;em&gt;does&lt;/em&gt; have version 2.0:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;00e0e5f0 73 2f 55 74 69 6c 69 74 79 2f 50 4b 01 02 14 03 |s/Utility/PK....|&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;00e0e600 &lt;b&gt;14&lt;/b&gt; &lt;b&gt;00&lt;/b&gt; 08 08 08 00 ab b8 30 4c 43 fa a3 ea 50 00 |........0LC...P.|&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; &#160; &#160; &#160;^^ ^^&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I have not yet been able to identify the cause of this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13139531">COMPRESS-444</key>
            <summary>Version to extract incorrect in Local File Header</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="HebaruSan">Paul Hebble</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Feb 2018 21:57:23 +0000</created>
                <updated>Tue, 20 Feb 2018 05:25:35 +0000</updated>
                            <resolved>Tue, 20 Feb 2018 05:06:37 +0000</resolved>
                                                    <fixVersion>1.15</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="16369722" author="bodewig" created="Tue, 20 Feb 2018 05:06:37 +0000"  >&lt;p&gt;This has been fixed with the last release of Compress already.&lt;/p&gt;</comment>
                            <comment id="16369723" author="hebarusan" created="Tue, 20 Feb 2018 05:09:02 +0000"  >&lt;p&gt;Thanks! That would explain why I couldn&apos;t find the problem from auditing the current code.&lt;/p&gt;

&lt;p&gt;Could I trouble you to elaborate slightly, which version exactly has the fix? I would like to check the dependencies of the packages involved to verify that an older version was used to generate the problem ZIPs.&lt;/p&gt;

&lt;p&gt;EDIT: Nevermind, I see there&apos;s a field for this, which says 1.16. That should work for my purposes. Thanks again!&lt;/p&gt;</comment>
                            <comment id="16369727" author="bodewig" created="Tue, 20 Feb 2018 05:17:12 +0000"  >&lt;p&gt;Actually I just had a second look at our changelog. The fix is in 1.15 (and later versions, of course). The latest version is 1.16.1 which only fixes the OSGi manifest when compared to 1.16.&lt;/p&gt;</comment>
                            <comment id="16369732" author="hebarusan" created="Tue, 20 Feb 2018 05:25:35 +0000"  >&lt;p&gt;Makes sense; my locally installed version is 1.13, and I suspect the same is true for the original source. Sorry for the duplicate!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13071786">COMPRESS-394</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Feb 2018 05:06:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qcvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-442] Wrong OSGi import blocks resolving</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-442</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-423&quot; title=&quot;Add support for Facebook&amp;#39;s ZStandard&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-423&quot;&gt;&lt;del&gt;COMPRESS-423&lt;/del&gt;&lt;/a&gt; has introduced a new import with wrong syntax. Actually commons-compress is not resolvable anymore. &lt;/p&gt;

&lt;p&gt;is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Import-Package&amp;gt;&lt;/span&gt;org.tukaani.xz;resolution:=optional,org.brotli.dec;resolution:=optional,com.github.luben.zstd;resolution=optional&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Import-Package&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Import-Package&amp;gt;&lt;/span&gt;org.tukaani.xz;resolution:=optional,org.brotli.dec;resolution:=optional,com.github.luben.zstd;resolution:=optional&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Import-Package&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13136587">COMPRESS-442</key>
            <summary>Wrong OSGi import blocks resolving</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="graben">Benjamin Graf</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Feb 2018 15:15:27 +0000</created>
                <updated>Wed, 7 Feb 2018 06:29:35 +0000</updated>
                            <resolved>Tue, 6 Feb 2018 15:33:34 +0000</resolved>
                                    <version>1.16</version>
                                    <fixVersion>1.16.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16354011" author="bodewig" created="Tue, 6 Feb 2018 15:30:01 +0000"  >&lt;p&gt;Ouch, sorry for that.&lt;/p&gt;

&lt;p&gt;I really wish there was an easy way to unit-test the jar is actually a valid OSGi bundle. This is not the first time I have broken something just because I don&apos;t use OSGi myself.&lt;/p&gt;</comment>
                            <comment id="16354014" author="bodewig" created="Tue, 6 Feb 2018 15:33:34 +0000"  >&lt;p&gt;fixed with commit c70dc2e&lt;/p&gt;

&lt;p&gt;Thanks for reporting the issue and sorry again.&lt;/p&gt;</comment>
                            <comment id="16354020" author="bodewig" created="Tue, 6 Feb 2018 15:41:00 +0000"  >&lt;p&gt;could you build master the master branch and see it is now really fixed? If so I&apos;ll propose to cut a 1.16.1 release very soon.&lt;/p&gt;</comment>
                            <comment id="16354077" author="graben" created="Tue, 6 Feb 2018 16:11:14 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bodewig&quot; class=&quot;user-hover&quot; rel=&quot;bodewig&quot;&gt;Stefan Bodewig&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;build from master works with this fix. Go for 1.16.1.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Benjamin&lt;/p&gt;</comment>
                            <comment id="16354119" author="bodewig" created="Tue, 6 Feb 2018 16:49:51 +0000"  >&lt;p&gt;Thank you for verifying &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=graben&quot; class=&quot;user-hover&quot; rel=&quot;graben&quot;&gt;Benjamin Graf&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Feb 2018 15:30:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pupr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-439] Compressing and decompressing using Pack200 does not produce the original input</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-439</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;tI just tested different compressors using &lt;a href=&quot;https://github.com/pholser/junit-quickcheck&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JUnitQuickcheck&lt;/a&gt;.&lt;br/&gt;
The tests should compress and then decompress some input and the result should be equal to the input.&lt;br/&gt;
For gzip, bzip2, deflate and xz, this works as intended but pack200 seems to have some problems.&lt;br/&gt;
I will attach the testcase I wrote.&lt;br/&gt;
It seems that for empty input, the result won&apos;t be empty.&lt;/p&gt;

&lt;p&gt;Test output:&lt;br/&gt;
```&lt;br/&gt;
input.length = 0&lt;br/&gt;
input = []&lt;br/&gt;
compressed.length = 19&lt;br/&gt;
compressed = &lt;span class=&quot;error&quot;&gt;&amp;#91;-54, -2, -48, 13, 7, -106, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 3, 45, 0&amp;#93;&lt;/span&gt;&lt;br/&gt;
decompressed.length = 29&lt;br/&gt;
decompressed = &lt;span class=&quot;error&quot;&gt;&amp;#91;80, 75, 5, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 80, 65, 67, 75, 50, 48, 48&amp;#93;&lt;/span&gt;&lt;br/&gt;
```&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;java -version&lt;br/&gt;
java version &quot;1.8.0_151&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_151-b12)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.151-b12, mixed mode)&lt;/li&gt;
&lt;/ol&gt;
</environment>
        <key id="13129824">COMPRESS-439</key>
            <summary>Compressing and decompressing using Pack200 does not produce the original input</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vbrandl">Valentin Brandl</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Jan 2018 11:51:39 +0000</created>
                <updated>Fri, 12 Jan 2018 16:28:23 +0000</updated>
                            <resolved>Wed, 10 Jan 2018 12:03:03 +0000</resolved>
                                    <version>1.14</version>
                    <version>1.15</version>
                                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16320140" author="bodewig" created="Wed, 10 Jan 2018 12:03:03 +0000"  >&lt;p&gt;This is due to the pack220 algorithm, please see the first paragraph in &lt;a href=&quot;http://commons.apache.org/proper/commons-compress/pack200.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-compress/pack200.html&lt;/a&gt; - your expectation that a pack200 cycle creates the exact same result is unfortunately not true. The result of the cycle is a functionally identical jar file, but it can and will be different at the byte level.&lt;/p&gt;</comment>
                            <comment id="16320141" author="bodewig" created="Wed, 10 Jan 2018 12:05:05 +0000"  >&lt;p&gt;Please also note that pack200 is not a general purpose compression format and really isn&apos;t useful for anything that&apos;s not a JAR,&lt;/p&gt;</comment>
                            <comment id="16323665" author="vbrandl" created="Fri, 12 Jan 2018 07:49:32 +0000"  >&lt;p&gt;Thanks for the heads up and sorry for not reading the documentation well enough.&lt;/p&gt;</comment>
                            <comment id="16324193" author="bodewig" created="Fri, 12 Jan 2018 16:28:23 +0000"  >&lt;p&gt;no need to apologize. It is not obvious if you don&apos;t really know pack200.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12905440" name="Test.java" size="3168" author="vbrandl" created="Wed, 10 Jan 2018 11:51:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Jan 2018 12:03:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oqhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-436] ZipArchiveInputStream#getNextZipEntry should verify compressed size is known for bzip2, implode etc.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-436</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (current.entry.getCompressedSize() != ArchiveEntry.SIZE_UNKNOWN) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (current.entry.getMethod() == ZipMethod.UNSHRINKING.getCode()) {
                current.in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UnshrinkingInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BoundedInputStream(in, current.entry.getCompressedSize()));
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (current.entry.getMethod() == ZipMethod.IMPLODING.getCode()) {
                current.in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ExplodingInputStream(
                        current.entry.getGeneralPurposeBit().getSlidingDictionarySize(),
                        current.entry.getGeneralPurposeBit().getNumberOfShannonFanoTrees(),
                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BoundedInputStream(in, current.entry.getCompressedSize()));
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (current.entry.getMethod() == ZipMethod.BZIP2.getCode()) {
                current.in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BZip2CompressorInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BoundedInputStream(in, current.entry.getCompressedSize()));
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;never sets &lt;tt&gt;current.in&lt;/tt&gt; if the compressed size is unknown which probably leads to a NullPointerException in &lt;tt&gt;read&lt;/tt&gt; later. We should fail early with a useful error message instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13128723">COMPRESS-436</key>
            <summary>ZipArchiveInputStream#getNextZipEntry should verify compressed size is known for bzip2, implode etc.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                            <label>zip</label>
                    </labels>
                <created>Fri, 5 Jan 2018 06:37:52 +0000</created>
                <updated>Sun, 14 Jan 2018 11:13:51 +0000</updated>
                            <resolved>Sun, 14 Jan 2018 11:13:51 +0000</resolved>
                                    <version>1.15</version>
                                    <fixVersion>1.16</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="16312715" author="bodewig" created="Fri, 5 Jan 2018 08:38:21 +0000"  >&lt;p&gt;Most likely this is invalid. The compressed size should be known unless a data descriptor is used, in which case &lt;tt&gt;read&lt;/tt&gt; will throw the proper exception for the methods we don&apos;t support data descriptors for. Most likely we&apos;ve explicitly decided to move all exceptions about unsupported constellations to &lt;tt&gt;read&lt;/tt&gt; so that you can skip over unreadable entries.&lt;/p&gt;

&lt;p&gt;So I&apos;ve changed the title and think it would be better to&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;return &lt;tt&gt;false&lt;/tt&gt; in &lt;tt&gt;canReadEntryData&lt;/tt&gt; if the compressed size is unknown for any of the methods that currently require it&lt;/li&gt;
	&lt;li&gt;throw an exception in &lt;tt&gt;read&lt;/tt&gt; in such a situation&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ojqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-433] Wrong class name in TarArchiveOutputStream constructor</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-433</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The constructor comments of TarArchiveOutputStream say TarInputStream. Fix attached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13126842">COMPRESS-433</key>
            <summary>Wrong class name in TarArchiveOutputStream constructor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gerardw">Gerard Weatherby</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Fri, 22 Dec 2017 16:27:44 +0000</created>
                <updated>Fri, 22 Dec 2017 18:03:27 +0000</updated>
                            <resolved>Fri, 22 Dec 2017 18:03:27 +0000</resolved>
                                    <version>1.15</version>
                                    <fixVersion>1.16</fixVersion>
                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16301740" author="bodewig" created="Fri, 22 Dec 2017 18:03:27 +0000"  >&lt;p&gt;committed, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12903429" name="TarArchiveOutputStream.java" size="25476" author="gerardw" created="Fri, 22 Dec 2017 16:26:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Dec 2017 18:03:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o867:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-432] Permanent Hang creating ZipFile(File)</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-432</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;While using Tika-1.15 and 1.17 to detect file types, it hangs when creating an instance of ZipFile with the attached corrupted zip file. Taking a thread dump shows the app is looping at the following point:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
        at org.apache.commons.compress.archivers.zip.X0017_StrongEncryptionHeader.parseCentralDirectoryFormat(X0017_StrongEncryptionHeader.java:313)
        at org.apache.commons.compress.archivers.zip.X0017_StrongEncryptionHeader.parseFromCentralDirectoryData(X0017_StrongEncryptionHeader.java:380)
        at org.apache.commons.compress.archivers.zip.ExtraFieldUtils.parse(ExtraFieldUtils.java:181)
        at org.apache.commons.compress.archivers.zip.ZipArchiveEntry.setCentralDirectoryExtra(ZipArchiveEntry.java:598)
        at org.apache.commons.compress.archivers.zip.ZipFile.readCentralDirectoryEntry(ZipFile.java:706)
        at org.apache.commons.compress.archivers.zip.ZipFile.populateFromCentralDirectory(ZipFile.java:618)
        at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:290)
        at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:213)
        at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:196)
        at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:157)
        at org.apache.tika.parser.pkg.ZipContainerDetector.detectZipFormat(ZipContainerDetector.java:132)
        at org.apache.tika.parser.pkg.ZipContainerDetector.detect(ZipContainerDetector.java:88)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows 10 x64, jre 1.8.0_151&lt;/p&gt;</environment>
        <key id="13125952">COMPRESS-432</key>
            <summary>Permanent Hang creating ZipFile(File)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lfcnassif">Luis Filipe Nassif</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Dec 2017 15:53:18 +0000</created>
                <updated>Fri, 16 Mar 2018 08:48:12 +0000</updated>
                            <resolved>Wed, 27 Dec 2017 14:17:29 +0000</resolved>
                                    <version>1.14</version>
                                    <fixVersion>1.16</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16296998" author="lfcnassif" created="Tue, 19 Dec 2017 15:57:27 +0000"  >&lt;p&gt;Problematic file&lt;/p&gt;</comment>
                            <comment id="16301761" author="bodewig" created="Fri, 22 Dec 2017 18:22:52 +0000"  >&lt;p&gt;The archive most likely is corrupt as InfoZIP&apos;s unzip says all of the entries have got CRC mismatches. Of course ZipFile shouldn&apos;t hang but rather detect the corruption. Am looking into it.&lt;/p&gt;</comment>
                            <comment id="16301788" author="bodewig" created="Fri, 22 Dec 2017 18:39:49 +0000"  >&lt;p&gt;git commit 2a2f1dc4 fixes the problem (the loop variable was an int, but the the upper bound was a long so the loop wouldn&apos;t terminate if the upper bound was bigger than MAX_INT).&lt;/p&gt;

&lt;p&gt;Now reading the archive dies with an &lt;tt&gt;ArrayIndexOutOfBoundsException&lt;/tt&gt; in &lt;tt&gt;parseFileFormat&lt;/tt&gt; as the &quot;ivSize&quot; is too big. I&apos;d prefer to turn this into a more useful exception but the method is public and declares no checked exception, so &lt;tt&gt;ZipException&lt;/tt&gt; cannot be used. I&apos;m not sure which RuntimeException would be more appropriate - if any.&lt;/p&gt;</comment>
                            <comment id="16301814" author="garydgregory" created="Fri, 22 Dec 2017 18:59:17 +0000"  >&lt;p&gt;An &lt;tt&gt;IllegalStateException&lt;/tt&gt; sounds good since the state of the zip is bad.&lt;/p&gt;</comment>
                            <comment id="16301840" author="lfcnassif" created="Fri, 22 Dec 2017 19:20:12 +0000"  >&lt;p&gt;Thanks, Stefan!&lt;/p&gt;</comment>
                            <comment id="16304564" author="bodewig" created="Wed, 27 Dec 2017 14:17:29 +0000"  >&lt;p&gt;I don&apos;t think &lt;tt&gt;IllegalStateException&lt;/tt&gt; is really correct here as it&apos;s not a matter of state of the stream or the field but rather a function of the input. I think leaving things at &lt;tt&gt;ArrayIndexOutOufBounds&lt;/tt&gt; is good for now.&lt;/p&gt;</comment>
                            <comment id="16401602" author="bodewig" created="Fri, 16 Mar 2018 08:48:12 +0000"  >&lt;p&gt;It was later realized this issue can be used to mount a denial of service attack against services using Commons Compress which then became CVE-2018-1324&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12902889" name="difflist_fsbwserver.f-secure.com_80_583109529_2.zip" size="416772" author="lfcnassif" created="Tue, 19 Dec 2017 15:56:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Dec 2017 18:22:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o2pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-430] Synchronize iteration on synchronized list in ParallelScatterZipCreator</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-430</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Following what is defined in the &lt;a href=&quot;https://docs.oracle.com/javase/9/docs/api/java/util/Collections.html#synchronizedList(java.util.List)&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Collections javadoc&lt;/a&gt;, it might be a good idea to synchronize when iterating the stream list, that is created with Collections.synchronizedList.&lt;/p&gt;

&lt;p&gt;This work originated after the pull request submitted to &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-434&quot; title=&quot;Field does not synchronize iteration on synchronized list&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-434&quot;&gt;&lt;del&gt;VALIDATOR-434&lt;/del&gt;&lt;/a&gt;, and searching other components in commons using similar method to create lists but not synchronizing the iteration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13120716">COMPRESS-430</key>
            <summary>Synchronize iteration on synchronized list in ParallelScatterZipCreator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kinow">Bruno P. Kinoshita</reporter>
                        <labels>
                            <label>concurrency</label>
                    </labels>
                <created>Sat, 25 Nov 2017 10:00:35 +0000</created>
                <updated>Sat, 25 Nov 2017 15:58:44 +0000</updated>
                            <resolved>Sat, 25 Nov 2017 15:58:26 +0000</resolved>
                                    <version>1.15</version>
                                    <fixVersion>1.16</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16265654" author="githubbot" created="Sat, 25 Nov 2017 10:02:44 +0000"  >&lt;p&gt;GitHub user kinow opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/57&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/57&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-430&quot; title=&quot;Synchronize iteration on synchronized list in ParallelScatterZipCreator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-430&quot;&gt;&lt;del&gt;COMPRESS-430&lt;/del&gt;&lt;/a&gt;: Synchronize iteration of synchronized list&lt;/p&gt;

&lt;p&gt;    Synchronize the iteration as per Javadocs &lt;a href=&quot;http://docs.oracle.com/javase/9/docs/api/java/util/Collections.html#synchronizedList%28java.util.List&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/9/docs/api/java/util/Collections.html#synchronizedList%28java.util.List&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    JIRA ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-430&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COMPRESS-430&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kinow/commons-compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/kinow/commons-compress&lt;/a&gt; synchronize-iteration-of-synchronized-list-1&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/57.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/57.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #57&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c0499042c2778161d6cecd54357adb6ea9595132&lt;br/&gt;
Author: Bruno P. Kinoshita &amp;lt;brunodepaulak@yahoo.com.br&amp;gt;&lt;br/&gt;
Date:   2017-11-25T09:57:30Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-430&quot; title=&quot;Synchronize iteration on synchronized list in ParallelScatterZipCreator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-430&quot;&gt;&lt;del&gt;COMPRESS-430&lt;/del&gt;&lt;/a&gt;: Synchronize iteration of synchronized list&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16265655" author="githubbot" created="Sat, 25 Nov 2017 10:05:09 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/57&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/57&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/14361284/badge)](https://coveralls.io/builds/14361284&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/14361284/badge)](https://coveralls.io/builds/14361284&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.05%) to 85.932% when pulling *&lt;b&gt;c0499042c2778161d6cecd54357adb6ea9595132 on kinow:synchronize-iteration-of-synchronized-list-1&lt;/b&gt;* into *&lt;b&gt;10ff1c341d37da1cdb2a9ecb280a7e73670c00f5 on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="16265656" author="githubbot" created="Sat, 25 Nov 2017 10:05:09 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/57&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/57&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/14361284/badge)](https://coveralls.io/builds/14361284&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/14361284/badge)](https://coveralls.io/builds/14361284&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.05%) to 85.932% when pulling *&lt;b&gt;c0499042c2778161d6cecd54357adb6ea9595132 on kinow:synchronize-iteration-of-synchronized-list-1&lt;/b&gt;* into *&lt;b&gt;10ff1c341d37da1cdb2a9ecb280a7e73670c00f5 on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="16265746" author="githubbot" created="Sat, 25 Nov 2017 15:57:32 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/57&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/57&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16265747" author="bodewig" created="Sat, 25 Nov 2017 15:58:26 +0000"  >&lt;p&gt;Good catch, many thanks!&lt;/p&gt;</comment>
                            <comment id="16265749" author="githubbot" created="Sat, 25 Nov 2017 15:58:44 +0000"  >&lt;p&gt;Github user bodewig commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/57&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/57&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thank you Bruno&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Nov 2017 10:02:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n6kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-427] ZipFile.getEntries() returns WinZip entries separated by backslash</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-427</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Archives created by WinZip on Windows 10 display recurring &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-176&quot; title=&quot;ArchiveInputStream#getNextEntry(): Problems with WinZip directories with Umlauts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-176&quot;&gt;&lt;del&gt;COMPRESS-176&lt;/del&gt;&lt;/a&gt; behaviour, with a new twist.&lt;/p&gt;

&lt;p&gt;Attached example archive is created by latest WinZip version 22 build 12663.&lt;br/&gt;
It may have been experienced also for WinZip version 18 build 10661 on Windows 10.&lt;/p&gt;

&lt;p&gt;ZipFile.getEntries() for the attached example zip archive return the list of entries with the following ZipArchiveEntry.getName():&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;test/
test\\file &#8212; mdash.txt
test/&#228;.txt
test/sub/
test/sub\\file &#8212; mdash2.txt
test/sub\\&#228;2.txt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ZipArchiveEntry.getPlatform() was essential for the &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-176&quot; title=&quot;ArchiveInputStream#getNextEntry(): Problems with WinZip directories with Umlauts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-176&quot;&gt;&lt;del&gt;COMPRESS-176&lt;/del&gt;&lt;/a&gt; workaround.&lt;br/&gt;
It returns 0 for all entries in the example archive, except for two entries containing mdash. Those return 11.&lt;/p&gt;

&lt;p&gt;Tested with version 1.10 and updating to current 1.15.&lt;br/&gt;
The backslash names seem to originate in the Unicode extra fields.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13116575">COMPRESS-427</key>
            <summary>ZipFile.getEntries() returns WinZip entries separated by backslash</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yana.lebedeva">Yana Lebedeva</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Nov 2017 03:33:48 +0000</created>
                <updated>Sun, 28 Jan 2018 11:16:54 +0000</updated>
                            <resolved>Sun, 28 Jan 2018 11:16:54 +0000</resolved>
                                    <version>1.10</version>
                    <version>1.15</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16245339" author="bodewig" created="Thu, 9 Nov 2017 08:02:23 +0000"  >&lt;p&gt;According to &lt;a href=&quot;https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT&lt;/a&gt; section 4.4.2&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;11 - MVS (OS/390 - Z/OS)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16266977" author="bodewig" created="Mon, 27 Nov 2017 15:56:26 +0000"  >&lt;p&gt;I don&apos;t think we should add special handling for this case as the OS indicator is wrong as well and I really woudln&apos;t want to assume anything about archives created on z/OS (real ones). This looks like a bug in WinZIP and I don&apos;t see any easy workaround we could apply.&lt;/p&gt;</comment>
                            <comment id="16342529" author="bodewig" created="Sun, 28 Jan 2018 11:16:54 +0000"  >&lt;p&gt;The problem is WinZip and there is no good indicator we could use to identify a&#160; name really has been broken by WinZip.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12896337" name="mdash-and-umlaut.zip" size="1106" author="yana.lebedeva" created="Tue, 7 Nov 2017 03:35:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Nov 2017 08:02:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mh3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-424] [bzip2] Multiple ArrayIndexOutOfBoundsException(s) when decompressing malformed input</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-424</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Encountered multiple unchecked exceptions thrown from &lt;tt&gt;BZip2CompressorInputStream.&amp;lt;init&amp;gt;&lt;/tt&gt; when parsing malformed files. &lt;/p&gt;

&lt;p&gt;&lt;tt&gt;ArrayIndexOutOfBoundsException&lt;/tt&gt; is an unchecked exception that is not documented in this API; therefore, such exceptions can cause stability issues in applications that are not expecting them. Instead, an &lt;tt&gt;IOException&lt;/tt&gt; should be thrown indicating that the input stream contains malformed data.&lt;/p&gt;

&lt;p&gt;Stack traces for three distinct (but possibly related) sources of exceptions follow:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ArrayIndexOutOfBoundsException: 65536
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.hbCreateDecodeTables(BZip2CompressorInputStream.java:422)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.createHuffmanDecodingTables(BZip2CompressorInputStream.java:546)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.recvDecodingTables(BZip2CompressorInputStream.java:518)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.getAndMoveToFrontDecode(BZip2CompressorInputStream.java:555)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.initBlock(BZip2CompressorInputStream.java:324)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.&amp;lt;init&amp;gt;(BZip2CompressorInputStream.java:135)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.&amp;lt;init&amp;gt;(BZip2CompressorInputStream.java:112)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ArrayIndexOutOfBoundsException: 6
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.recvDecodingTables(BZip2CompressorInputStream.java:493)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.getAndMoveToFrontDecode(BZip2CompressorInputStream.java:555)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.initBlock(BZip2CompressorInputStream.java:324)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.&amp;lt;init&amp;gt;(BZip2CompressorInputStream.java:135)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.&amp;lt;init&amp;gt;(BZip2CompressorInputStream.java:112)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ArrayIndexOutOfBoundsException: 18002
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.getAndMoveToFrontDecode(BZip2CompressorInputStream.java:605)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.initBlock(BZip2CompressorInputStream.java:324)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.&amp;lt;init&amp;gt;(BZip2CompressorInputStream.java:135)
	at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.&amp;lt;init&amp;gt;(BZip2CompressorInputStream.java:112)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The inputs were found by mutating random bytes in a simple well-formed file (a compressed string of zeros).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13110581">COMPRESS-424</key>
            <summary>[bzip2] Multiple ArrayIndexOutOfBoundsException(s) when decompressing malformed input</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rohanpadhye">Rohan Padhye</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Oct 2017 06:25:52 +0000</created>
                <updated>Sat, 30 Dec 2017 09:58:10 +0000</updated>
                            <resolved>Sat, 30 Dec 2017 09:58:10 +0000</resolved>
                                    <version>1.14</version>
                    <version>1.15</version>
                                    <fixVersion>1.16</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16266973" author="bodewig" created="Mon, 27 Nov 2017 15:54:17 +0000"  >&lt;p&gt;The code is a kind of hand-optimized mimic C as close as possible port and I&apos;m afraid adding explicit bounds checks would slow it down considerably - at least once we&apos;d get far enough to enter the decompression part and reach code that is run repeatedly. While I could tweak the three cases you&apos;ve found easily there probably are a few (or not so few) more cases where indexes get derived from input data.&lt;/p&gt;

&lt;p&gt;Maybe we should catch &lt;tt&gt;ArrayIndexOutOfBounds&lt;/tt&gt; inside the constructor and and &lt;tt&gt;read&lt;/tt&gt; and turn it into {{IOException}}s?&lt;/p&gt;</comment>
                            <comment id="16267172" author="rohanpadhye" created="Mon, 27 Nov 2017 18:12:46 +0000"  >&lt;p&gt;To be fair, the JVM does insert those bounds checks anyway in order to decide whether or not throw an exception, so I am not sure how &lt;em&gt;considerable&lt;/em&gt; the slow down would be with additional bounds check in Java.&lt;/p&gt;

&lt;p&gt;That said, if several sources of &lt;tt&gt;ArrayIndexOutOfBounds&lt;/tt&gt; are expected, then indeed catching them and throwing an &lt;tt&gt;IOException&lt;/tt&gt; instead would make the implementation consistent with the API specification. My primary concern is that applications that process user-derived input files should expect the decompression to either succeed or to fail using an &lt;tt&gt;IOException&lt;/tt&gt;, such that they can handle either case in an application-specific way (e.g. show an error message to the end-user). Throwing an undocumented unchecked exception would probably lead such an application to crash unexpectedly or log the error in a top-level exception handling mechanism instead of gracefully interacting with the end-user. Consequently, developers using the bzip2 API would be forced to explicitly handle &lt;tt&gt;ArrayIndexOutOfBounds&lt;/tt&gt;, but this seems like an implementation detail that is being leaked outside.&lt;/p&gt;

&lt;p&gt;The risk with this approach, of course, is that any &lt;tt&gt;ArrayIndexOutOfBounds&lt;/tt&gt; would be wrapped in an &lt;tt&gt;IOException&lt;/tt&gt;, even if there was a genuine bug in processing a well-formed file (and would thus make such a hypothetical bug slightly harder to detect).&lt;/p&gt;</comment>
                            <comment id="16268989" author="bodewig" created="Tue, 28 Nov 2017 16:24:17 +0000"  >&lt;p&gt;Well, my &quot;considerable&quot; is a guess and maybe I should just try it (I do have a JMH setup to look at the effects). For three places you&apos;ve found there is no big problem to expect as this is setup code that is run once per &quot;block&quot; of 900kB so the effects are probably minor.&lt;/p&gt;

&lt;p&gt;For the code that really gets hit a lot we&apos;ll need some time to review it, it is not an easy read and it&apos;s been quite some time since I last tried to wrap my head around it.&lt;/p&gt;

&lt;p&gt;I understand where you are coming from but won&apos;t rule out you may find similar errors within the other compressors or archivers as well.&lt;/p&gt;</comment>
                            <comment id="16305571" author="bodewig" created="Thu, 28 Dec 2017 16:21:12 +0000"  >&lt;p&gt;for some reason I cannot explain the effect - if one exists - rather says things have sped up &lt;a href=&quot;https://github.com/bodewig/commons-compress-benchmarks/wiki/COMPRESS-424&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/bodewig/commons-compress-benchmarks/wiki/COMPRESS-424&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The change is &lt;a href=&quot;https://github.com/apache/commons-compress/commit/ccf4ce767a6cc07f1a88a0c33393e394af3c328b&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/commit/ccf4ce767a6cc07f1a88a0c33393e394af3c328b&lt;/a&gt; which I&apos;ll need to triple-check before merging it to master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12892996" name="bad1.bz2" size="32" author="rohanpadhye" created="Thu, 19 Oct 2017 06:26:47 +0000"/>
                            <attachment id="12892995" name="bad2.bz2" size="32" author="rohanpadhye" created="Thu, 19 Oct 2017 06:26:52 +0000"/>
                            <attachment id="12892994" name="bad3.bz2" size="32" author="rohanpadhye" created="Thu, 19 Oct 2017 06:26:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Nov 2017 15:54:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lg6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-421] TarUtils.parseName does not follow the spec</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-421</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;TarUtils.parseName does not stop at the first NUL byte, resulting in non-empty strings where they should be empty.&lt;/p&gt;

&lt;p&gt;This manifests if the tar file contains a star_header struct instead of a posix_header as defined in &lt;a href=&quot;https://www.gnu.org/software/tar/manual/html_node/Standard.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://www.gnu.org/software/tar/manual/html_node/Standard.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The javadoc on parseName states &quot;Parse an entry name from a buffer. Parsing stops when a NUL is found or the buffer length is reached.&quot;&lt;/p&gt;

&lt;p&gt;However, the implementation starts at the end of the buffer and stops when the first non-NUL is found.&lt;/p&gt;

&lt;p&gt;The solution is to replace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; len = length;
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (; len &amp;gt; 0; len--) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (buffer[offset + len - 1] != 0) {
      &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;by&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; len = 0;
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = offset; len &amp;lt; length &amp;amp;&amp;amp; buffer[i] != 0; i++, len++);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This has been introduce in commit &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=commons-compress.git;a=commitdiff;h=69ceb4e14feb6273c06c1e35ba116b6783bb3278&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=commons-compress.git;a=commitdiff;h=69ceb4e14feb6273c06c1e35ba116b6783bb3278&lt;/a&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13106090">COMPRESS-421</key>
            <summary>TarUtils.parseName does not follow the spec</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="r.spilker">Roel Spilker</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Sep 2017 16:59:38 +0000</created>
                <updated>Fri, 6 Oct 2017 17:12:34 +0000</updated>
                            <resolved>Fri, 6 Oct 2017 17:12:34 +0000</resolved>
                                    <version>1.4</version>
                    <version>1.14</version>
                                    <fixVersion>1.15</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16186085" author="r.spilker" created="Fri, 29 Sep 2017 17:01:48 +0000"  >&lt;p&gt;Valid .tar.gz file, according to all other readers, that exposes the bug in commons-compress&lt;/p&gt;</comment>
                            <comment id="16193823" author="githubbot" created="Thu, 5 Oct 2017 22:09:12 +0000"  >&lt;p&gt;GitHub user rspilker opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/53&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/53&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Let parseName stop at first NUL&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-421&quot; title=&quot;TarUtils.parseName does not follow the spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-421&quot;&gt;&lt;del&gt;COMPRESS-421&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rspilker/commons-compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rspilker/commons-compress&lt;/a&gt; patch-1&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/53.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/53.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #53&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 321aac3f6f053431416af3b1f644bf4bebd6bebc&lt;br/&gt;
Author: Roel Spilker &amp;lt;r.spilker@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-10-05T22:07:21Z&lt;/p&gt;

&lt;p&gt;    Let parseName stop at first NUL&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-421&quot; title=&quot;TarUtils.parseName does not follow the spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-421&quot;&gt;&lt;del&gt;COMPRESS-421&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16193868" author="githubbot" created="Thu, 5 Oct 2017 22:51:14 +0000"  >&lt;p&gt;Github user rspilker closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/53&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/53&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16193873" author="githubbot" created="Thu, 5 Oct 2017 22:53:20 +0000"  >&lt;p&gt;GitHub user rspilker opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/54&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/54&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Let parseName stop at first NUL&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-421&quot; title=&quot;TarUtils.parseName does not follow the spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-421&quot;&gt;&lt;del&gt;COMPRESS-421&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rspilker/commons-compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rspilker/commons-compress&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/54.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/54.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #54&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b2f89807e7a93ce7197fe935531a5158c8ef880a&lt;br/&gt;
Author: Roel Spilker &amp;lt;r.spilker@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-10-05T22:50:23Z&lt;/p&gt;

&lt;p&gt;    Let parseName stop at first NUL&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-421&quot; title=&quot;TarUtils.parseName does not follow the spec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-421&quot;&gt;&lt;del&gt;COMPRESS-421&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16194875" author="githubbot" created="Fri, 6 Oct 2017 17:12:16 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/54&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/54&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16194876" author="bodewig" created="Fri, 6 Oct 2017 17:12:34 +0000"  >&lt;p&gt;Pull Request merged, many thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12889715" name="foo.tar.gz" size="112350" author="r.spilker" created="Fri, 29 Sep 2017 17:00:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Oct 2017 22:09:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kq07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-420] Entry missing from ZIP</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-420</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;There seems to be some regression introduced in v1.13 which means that the second entry in the attached ZIP is no longer exposed via: &apos;&lt;tt&gt;zipFile.getEntries();&lt;/tt&gt;&apos;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13103814">COMPRESS-420</key>
            <summary>Entry missing from ZIP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="luke-nuix">Luke Quinane</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Sep 2017 05:17:35 +0000</created>
                <updated>Tue, 2 Jan 2018 03:38:18 +0000</updated>
                            <resolved>Fri, 29 Dec 2017 18:56:24 +0000</resolved>
                                    <version>1.13</version>
                    <version>1.14</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16174324" author="bodewig" created="Thu, 21 Sep 2017 06:16:59 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ zip -Tv ~/Downloads/missing-entry.zip 
	zip warning: expected 3 entries but found 0

zip error: Zip file structure invalid (/home/stefan/Downloads/missing-entry.zip)
$ java -jar target/commons-compress-1.15-SNAPSHOT.jar ~/Downloads/missing-entry.zip 
Analysing /home/stefan/Downloads/missing-entry.zip
Created org.apache.commons.compress.archivers.zip.ZipArchiveInputStream@452b3a41
chop/
chop/slap-chop.png
chop/slap.jpg
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I see three entries with &lt;tt&gt;ZipArchiveInputStream&lt;/tt&gt; (which is what &lt;tt&gt;Lister&lt;/tt&gt; uses) but the archive doesn&apos;t seem to be valid at all. At least that&apos;s what InfoZIP says.&lt;/p&gt;

&lt;p&gt;When I use &lt;tt&gt;ZipFile&lt;/tt&gt; of 1.14 (or the current git master) I get an &lt;tt&gt;EOFException&lt;/tt&gt; at the point where we start reading the central directory. It looks as if the offset inside the &quot;end of central directory header&quot; was wrong. Looking at it with a hex editor I see the offset is encoded as 0x11 0x48 0x02 0x00 which turns into 0x24811 or 149521 in decimal. Given the archive is less than 70k in size this offset points outside of the archive, which also explains why InfoZIP says it cannot find any entries.&lt;/p&gt;

&lt;p&gt;So in short, your archive is corrupt, there is no regression in &lt;tt&gt;ZipFile&lt;/tt&gt;. Has this archive been created by Commons Compress?&lt;/p&gt;</comment>
                            <comment id="16174374" author="luke-nuix" created="Thu, 21 Sep 2017 07:27:40 +0000"  >&lt;p&gt;I suspected that the ZIP was corrupt, I think that ZIP was created with WinZIP from memory. &lt;/p&gt;

&lt;p&gt;Even though it is corrupt, both entries can still be extracted though:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;luke@fireblanket:/tmp/test$ unzip missing-entry.zip 
Archive:  missing-entry.zip
error [missing-entry.zip]:  missing 81920 bytes in zipfile
 (attempting to process anyway)
  creating: chop/
 inflating: chop/slap-chop.png      
 inflating: chop/slap.jpg           
luke@fireblanket:/tmp/test$ cd chop/
luke@fireblanket:/tmp/test/chop$ md5sum *
3164953cca668532a2f18868c908a1d6  slap-chop.png
d73326f4aee9d22a4ef3f99ce2fac6f4  slap.jpg&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And both entries were accessible in commons compress 1.12, and are accessible in 7z. Given that, would it be possible to warn about the corruption, but still attempt to read the entries out?&lt;/p&gt;</comment>
                            <comment id="16174436" author="bodewig" created="Thu, 21 Sep 2017 08:30:43 +0000"  >&lt;p&gt;This is &lt;tt&gt;unzip&lt;/tt&gt; working the same way &lt;tt&gt;ZipArchiveInputStream&lt;/tt&gt; does: start reading from the beginning of the archive and keep going until you hit a problem. You should be able to read the archive using the stream API.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;ZipFile&lt;/tt&gt; really depends on being able to read the central directory, there is no easy way around it and in the end it would just mimic the stream implementation. It would be doable but then the class wouldn&apos;t provide any benefit over the streaming API (random access, maybe, but that would take quite a bit of work).&lt;/p&gt;</comment>
                            <comment id="16178446" author="luke-nuix" created="Mon, 25 Sep 2017 02:15:19 +0000"  >&lt;p&gt;It looks like I was a bit confused. My project already had some code to handle the corruption earlier in the workflow, and it appears that is where the regression is. It uses ZipArchiveInputStream to stream as many entries as possible into a new ZIP file, and then that is read using zipFile.getEntries().&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a new test case which works with 1.12, but fails with 1.14:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\work\temp\test&amp;gt;java -cp commons-compress-1.12.jar;commons-io-2.2.jar;. Test
Read: chop/
Read: chop/slap-chop.png
Read: chop/slap.jpg
Copied: 3&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\work\temp\test&amp;gt;java -cp commons-compress-1.14.jar;commons-io-2.2.jar;. Test
Read: chop/
Read: chop/slap-chop.png
Error: Unexpected record signature: 0XC2ED9440
java.util.zip.ZipException: Unexpected record signature: 0XC2ED9440
        at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.getNextZipEntry(ZipArchiveInputStream.java:251)
        at Test.main(Test.java:26)
Copied: 2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Debugging through the ZipArchiveInputStream code, it looks like it reads slightly too far past the second entry. When the signature for the third entry is checked, it&apos;s invalid because the offset is off.&lt;/p&gt;</comment>
                            <comment id="16178567" author="bodewig" created="Mon, 25 Sep 2017 05:54:31 +0000"  >&lt;p&gt;Many thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=luke-nuix&quot; class=&quot;user-hover&quot; rel=&quot;luke-nuix&quot;&gt;Luke Quinane&lt;/a&gt;, I&apos;ll look into it.&lt;/p&gt;

&lt;p&gt;Both &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-364&quot; title=&quot;ZipArchiveInputStream.closeEntry does not properly advance to next entry if there are junk bytes at end of data section&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-364&quot;&gt;&lt;del&gt;COMPRESS-364&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-367&quot; title=&quot;ZipArchiveInputStream.getNextZipEntry() should differentiate between &amp;quot;invalid entry encountered&amp;quot; and &amp;quot;no more entries&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-367&quot;&gt;&lt;del&gt;COMPRESS-367&lt;/del&gt;&lt;/a&gt; could be the reason. Given that we know the archive is corrupt, I&apos;d guess it is &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-367&quot; title=&quot;ZipArchiveInputStream.getNextZipEntry() should differentiate between &amp;quot;invalid entry encountered&amp;quot; and &amp;quot;no more entries&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-367&quot;&gt;&lt;del&gt;COMPRESS-367&lt;/del&gt;&lt;/a&gt; but will need some time to verify it.&lt;/p&gt;</comment>
                            <comment id="16187140" author="bodewig" created="Sat, 30 Sep 2017 16:07:35 +0000"  >&lt;p&gt;So yes, it is &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-367&quot; title=&quot;ZipArchiveInputStream.getNextZipEntry() should differentiate between &amp;quot;invalid entry encountered&amp;quot; and &amp;quot;no more entries&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-367&quot;&gt;&lt;del&gt;COMPRESS-367&lt;/del&gt;&lt;/a&gt; - Compress now throws a &lt;tt&gt;ZipException&lt;/tt&gt; when it detects a corrupt archive where it used to silently stop reading.&lt;/p&gt;

&lt;p&gt;In general I think this change is a sensible one, most of the time you want to know the archive is corrupt and not have the library pretend everything was fine.&lt;/p&gt;

&lt;p&gt;I wonder if there is anything we can do to adapt this for your use-case. Right now I don&apos;t really see what we could do. You could adapt your code to catch &lt;tt&gt;ZipException&lt;/tt&gt; s thrown from &lt;tt&gt;getNextEntry&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16272721" author="bodewig" created="Thu, 30 Nov 2017 14:24:23 +0000"  >&lt;p&gt;I&apos;m leaning towards WONTFIX.&lt;/p&gt;</comment>
                            <comment id="16278023" author="luke-nuix" created="Tue, 5 Dec 2017 05:09:59 +0000"  >&lt;p&gt;In our case, we&apos;ve already detected that the ZIP is corrupted, and this is our fallback code trying to pull out as much information as possible. Essentially a &apos;data-recovery&apos; mode. As you can see in the attached test code, even catching Exception doesn&apos;t allow that second file to be extracted, so it really is a regression for us.&lt;/p&gt;

&lt;p&gt;Perhaps there is some way we could call the API or flag to the ZIP code that we&apos;re really not worried about whether the file is corrupt, we just want to get as much data as possible. Or alternately, if you could register a listener to receive errors as the extraction is occurring, and flag whether to stop or not?&lt;/p&gt;</comment>
                            <comment id="16286233" author="bodewig" created="Mon, 11 Dec 2017 16:51:27 +0000"  >&lt;p&gt;I guess I need to find some time to play with your archive again.&lt;/p&gt;

&lt;p&gt;If &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-367&quot; title=&quot;ZipArchiveInputStream.getNextZipEntry() should differentiate between &amp;quot;invalid entry encountered&amp;quot; and &amp;quot;no more entries&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-367&quot;&gt;&lt;del&gt;COMPRESS-367&lt;/del&gt;&lt;/a&gt; is the change then you&apos;d get an exception where &lt;tt&gt;getNextExntry&lt;/tt&gt; used to return &lt;tt&gt;null&lt;/tt&gt; - in either case reading would end here. If you are now seeing the exception in a place where the method used to return something else, then it must be a different change.&lt;/p&gt;

&lt;p&gt;Under the assumption &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-367&quot; title=&quot;ZipArchiveInputStream.getNextZipEntry() should differentiate between &amp;quot;invalid entry encountered&amp;quot; and &amp;quot;no more entries&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-367&quot;&gt;&lt;del&gt;COMPRESS-367&lt;/del&gt;&lt;/a&gt; introduced what you are seeing the stream simply is positioned in a place where &lt;tt&gt;ZipArchveInputStream&lt;/tt&gt; cannot proceed. Having a callback wouldn&apos;t help here as all recoverable data has already been read.&lt;/p&gt;</comment>
                            <comment id="16305587" author="bodewig" created="Thu, 28 Dec 2017 16:53:02 +0000"  >&lt;p&gt;It looks as if I was wrong and it is not &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-267&quot; title=&quot;ArchiveStreamFactory throws &amp;quot;No Archiver found for the stream signature&amp;quot; on 7z files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-267&quot;&gt;&lt;del&gt;COMPRESS-267&lt;/del&gt;&lt;/a&gt; alone. If I change the code to return &lt;tt&gt;null&lt;/tt&gt; rather than throw the exception introduced with &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835792/0001-COMPRESS-367-Throw-ZipException-on-invalid-entry-wit.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835792/0001-COMPRESS-367-Throw-ZipException-on-invalid-entry-wit.patch&lt;/a&gt; you still only get two entries. So the result is the same as catching the exception.&lt;/p&gt;

&lt;p&gt;I need to find out why you&apos;ve been able to get further than the second entry in 1.12, time for some bisecting.&lt;/p&gt;</comment>
                            <comment id="16305602" author="bodewig" created="Thu, 28 Dec 2017 17:16:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-364&quot; title=&quot;ZipArchiveInputStream.closeEntry does not properly advance to next entry if there are junk bytes at end of data section&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-364&quot;&gt;&lt;del&gt;COMPRESS-364&lt;/del&gt;&lt;/a&gt; it is, &lt;a href=&quot;https://github.com/apache/commons-compress/commit/658812c85fe762e361c998161cfb61bd477e1b24#diff-85a791752878b8d112262d1e05888b5f&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/commit/658812c85fe762e361c998161cfb61bd477e1b24#diff-85a791752878b8d112262d1e05888b5f&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The local file header of &quot;chop/slap-chop.png&quot; says the compressed size would be 49312 bytes, the deflater signaled end of the deflated stream after 49299 bytes and with 1.13 the remaining 13 bytes get consumed while the stream used to be left at the place where the deflater stopped reading in 1.12. &lt;/p&gt;</comment>
                            <comment id="16306460" author="bodewig" created="Fri, 29 Dec 2017 18:55:19 +0000"  >&lt;p&gt;After looking through the archive once again I realized the LFH does actually contain the correct compressed size, so something must have changed it. A longish round of debugging later I realized it is your test code.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                    zipOutputStream.putArchiveEntry(entry);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;puts the same &lt;tt&gt;ZipArchiveEntry&lt;/tt&gt; instance to the output stream that is used by the input stream. When &lt;tt&gt;zipOutputStream.closeArchiveEntry()&lt;/tt&gt; is called, the compressed size is overwritten (and is slightly different from the original) and then the calculation in the input stream fails.&lt;/p&gt;

&lt;p&gt;If you change your code to&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                    zipOutputStream.putArchiveEntry(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveEntry(entry));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;all three entries get extracted properly with 1.13 as well as the current master branch.&lt;/p&gt;</comment>
                            <comment id="16307472" author="sebb@apache.org" created="Mon, 1 Jan 2018 15:40:59 +0000"  >&lt;p&gt;Maybe the docs need to be updated to make it clear that the entry should not be reused in this way?&lt;/p&gt;</comment>
                            <comment id="16307485" author="bodewig" created="Mon, 1 Jan 2018 16:15:26 +0000"  >&lt;p&gt;This probably applies to all archivers. The output streams may modify the {{*ArchiveEntry}}s at their whim and this will confuse the input streams. I&apos;m not sure where we would add information like that and ensure people will actually find it.&lt;/p&gt;</comment>
                            <comment id="16307651" author="luke-nuix" created="Tue, 2 Jan 2018 03:38:18 +0000"  >&lt;p&gt;Hi Stefan,&lt;/p&gt;

&lt;p&gt;The work-around you&apos;ve provided works for me. Thank you for looking into this issue.&lt;/p&gt;

&lt;p&gt;Cheers, Luke&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12888210" name="missing-entry.zip" size="67905" author="luke-nuix" created="Thu, 21 Sep 2017 05:17:53 +0000"/>
                            <attachment id="12888763" name="test.zip" size="1171997" author="luke-nuix" created="Mon, 25 Sep 2017 02:11:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Sep 2017 06:16:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kc1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-418] ZipArchiveEntry duplicates the size field from ZipEntry</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-418</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I create an archive using Apache Compress. I can read the archive fine using 7zip and JAR (from the JDK).&lt;/p&gt;

&lt;p&gt;When I read the same archive using Apache Compress libraries, I get a NegativeArraySizeException on every entry.&lt;/p&gt;

&lt;p&gt;When I read any other archive using Apache Compress libraries, I do not get the NegativeArraySizeException on entries.&lt;/p&gt;

&lt;p&gt;When I debug this, I see that the ZipArchiveEntry object has two instance variables named size (one it defines, which contains the correct size, and one it inherits from ZipEntry which is -1). And it seems that, on Apache Compress-created archives, it&apos;s always returning the inherited value and not the one defined by ZipArchiveEntry.&lt;/p&gt;

&lt;p&gt;In my code, I am only use instances of ZipArchiveEntry.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.8.0_131&lt;br/&gt;
Apache Compress 1.14&lt;/p&gt;</environment>
        <key id="13087932">COMPRESS-418</key>
            <summary>ZipArchiveEntry duplicates the size field from ZipEntry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mcpierce">Darryl L. Pierce</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jul 2017 13:29:24 +0000</created>
                <updated>Tue, 25 Jul 2017 14:23:16 +0000</updated>
                            <resolved>Tue, 25 Jul 2017 14:23:16 +0000</resolved>
                                    <version>1.14</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16091558" author="mcpierce" created="Tue, 18 Jul 2017 13:44:08 +0000"  >&lt;p&gt;Code for creating the archive:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        ZipArchiveOutputStream zoutput = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
        {
            zoutput = (ZipArchiveOutputStream )&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArchiveStreamFactory().createArchiveOutputStream(ArchiveStreamFactory.ZIP,
                                                                                                    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(filename));

            &lt;span class=&quot;code-comment&quot;&gt;// TODO write the comic meta-data to the archive
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index = 0;
                 index &amp;lt; source.getPageCount();
                 index++)
            {
                &lt;span class=&quot;code-comment&quot;&gt;// TODO &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the page is deleted, then skip it
&lt;/span&gt;                Page page = source.getPage(index);
                ZipArchiveEntry entry = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveEntry(page.getFilename());
                entry.setMethod(ZipArchiveEntry.DEFLATED);
                logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Adding entry: &quot;&lt;/span&gt; + page.getFilename() + &lt;span class=&quot;code-quote&quot;&gt;&quot; size=&quot;&lt;/span&gt; + page.getContent().length);
                entry.setSize(page.getContent().length);
                zoutput.putArchiveEntry(entry);
                zoutput.write(page.getContent());
                zoutput.closeArchiveEntry();
            }

            &lt;span class=&quot;code-comment&quot;&gt;// zoutput.close();
&lt;/span&gt;        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException
               | ArchiveException error)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArchiveLoaderException(&lt;span class=&quot;code-quote&quot;&gt;&quot;error creating comic archive&quot;&lt;/span&gt;, error);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Code for reading the archive:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        File file = validateFile(comic);

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
        {
            FileInputStream istream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(file);
            ZipArchiveInputStream input = (ZipArchiveInputStream )&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArchiveStreamFactory().createArchiveInputStream(ArchiveStreamFactory.ZIP,
                                                                                                                      istream);
            ZipArchiveEntry entry = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] result = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((entry = input.getNextZipEntry()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            {
                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; filename = entry.getName();
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entryName == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || entryName.equals(filename))
                {
                    &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] content = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.loadContent(entry.getName(), entry.getSize(), input);
                    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we were looking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a file, then we&apos;re done
&lt;/span&gt;                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entryName != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                    {
                        logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Return content &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; entry&quot;&lt;/span&gt;);
                        result = content;
                        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
                    }
                    &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                    {
                        logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Processing entry content&quot;&lt;/span&gt;);
                        processContent(comic, filename, content);
                    }
                }
            }

            input.close();
            istream.close();

            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException
               | ArchiveException error)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArchiveLoaderException(&lt;span class=&quot;code-quote&quot;&gt;&quot;unable to open file: &quot;&lt;/span&gt; + file.getAbsolutePath(), error);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="16091691" author="bodewig" created="Tue, 18 Jul 2017 15:13:53 +0000"  >&lt;p&gt;Hmm, I don&apos;t think it is related to &lt;tt&gt;ZipArchiveEntry&lt;/tt&gt; shadowing its parent&apos;s field, &lt;tt&gt;getSize&lt;/tt&gt; should always return &lt;tt&gt;ZipArchiveEntry&lt;/tt&gt;&apos;s value.&lt;/p&gt;

&lt;p&gt;What I think is happening here is that when creating the archive, the size has been stored inside the data descriptor after the entry contents, so &lt;tt&gt;getSize&lt;/tt&gt; won&apos;t give you a correct answer until the content has been read completely. See &lt;a href=&quot;http://commons.apache.org/proper/commons-compress/zip.html#ZipArchiveInputStream_vs_ZipFile&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-compress/zip.html#ZipArchiveInputStream_vs_ZipFile&lt;/a&gt; and &lt;a href=&quot;http://commons.apache.org/proper/commons-compress/javadocs/api-release/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html#getSize--&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-compress/javadocs/api-release/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html#getSize--&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;d recommend using &lt;tt&gt;ZipFile&lt;/tt&gt; when reading the archive as you are reading from a file anyway.&lt;/p&gt;</comment>
                            <comment id="16097648" author="bodewig" created="Sun, 23 Jul 2017 14:40:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcpierce&quot; class=&quot;user-hover&quot; rel=&quot;mcpierce&quot;&gt;Darryl L. Pierce&lt;/a&gt; any news on trying with &lt;tt&gt;ZipFile&lt;/tt&gt; instead?&lt;/p&gt;</comment>
                            <comment id="16098289" author="mcpierce" created="Mon, 24 Jul 2017 12:26:46 +0000"  >&lt;p&gt;Yes, using ZipFile instead of ZipArchiveinputStream works as expected.&lt;/p&gt;

&lt;p&gt;Though I do think it&apos;s still a bug that ZAIS does not work as desired; i.e., using the Java debugger I do see the two instance variables and, though one holds the entry&apos;s size, the getSize() method always returns -1 on archives created by the Compress libraries.&lt;/p&gt;</comment>
                            <comment id="16099793" author="bodewig" created="Tue, 25 Jul 2017 09:48:30 +0000"  >&lt;p&gt;You will find it returns a value different from -1 once the entry&apos;s content has been read. This is an effect of the way size is stored in ZIP archives, depending on how the archive has been created, size is stored after the content rather than inside the &quot;local file header&quot; that sits in front of the actual data. &lt;tt&gt;ZipFile&lt;/tt&gt; can use random access so is able to read all metadata for an entry.&lt;/p&gt;

&lt;p&gt;If you see this behavior only in achives created by Commons Compress than it is because of the way the archive is created. If &lt;tt&gt;ZipArchiveOutputStream&lt;/tt&gt; knows it is writing to a file, it will use random access under the covers and add the size information to the metadata in front of the entry&apos;s content. The same is true if the &lt;tt&gt;ZipArchiveEntry&lt;/tt&gt; already knows its size (compressed and uncompressed) before you start writing, but in general you don&apos;t know the compressed size.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;ZipArchiveEntry&lt;/tt&gt; hides the &lt;tt&gt;size&lt;/tt&gt; field of &lt;tt&gt;ZipEntry&lt;/tt&gt; as &lt;del&gt;the later can only store an &lt;tt&gt;int&lt;/tt&gt; while zip entries using ZIP64 extensions can store entries with sizes that exceed &lt;tt&gt;Integer.MAX_VALUE&lt;/tt&gt; - at least it used to be an int prior to Java7, I haven&apos;t checked it afterwards (Java7 added rudimentary support for ZIP64).&lt;/del&gt; &lt;tt&gt;ZipEntry#setSize&lt;/tt&gt; threw an exception prior to Java7. Given that Compress now requires Java7, we could probably revert this.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure how you can see the inherited size field in &lt;tt&gt;ZipEntry&lt;/tt&gt; get the correct value as &lt;tt&gt;ZipArchiveInputStream&lt;/tt&gt;  never sets it.&lt;/p&gt;</comment>
                            <comment id="16099816" author="bodewig" created="Tue, 25 Jul 2017 10:03:51 +0000"  >&lt;p&gt;No, we can&apos;t revert our hiding, unfortunately. From &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/util/zip/package-summary.html#zip64&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/8/docs/api/java/util/zip/package-summary.html#zip64&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;An implementation may optionally support the ZIP64(tm) format extensions defined by the PKWARE ZIP File Format Specification.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;and &lt;tt&gt;setSize&lt;/tt&gt; still throws an exception for sizes bigger than 2GB if the Java implementation doesn&apos;t support ZIP64. As Compress implements ZIP64 support itself, we must not make ourselves depend on the Java implementation supporting it.&lt;/p&gt;</comment>
                            <comment id="16099964" author="mcpierce" created="Tue, 25 Jul 2017 12:29:42 +0000"  >&lt;p&gt;I see the overridden field while in the debugger in Eclipse; i.e., there are two fields named size visible, one with -1 and one with the correct value.&lt;/p&gt;

&lt;p&gt;But, at any rate, I guess we can consider this bug resolved in that I can work around it at least. Thank you.&lt;/p&gt;</comment>
                            <comment id="16100095" author="bodewig" created="Tue, 25 Jul 2017 14:21:02 +0000"  >&lt;p&gt;Hmm, I&apos;d expect the field inside &lt;tt&gt;ZipEntry&lt;/tt&gt; to remain -1 all the time and the one in &lt;tt&gt;ZipArchiveEntry&lt;/tt&gt; to hold the correct value after the data has been read.&lt;/p&gt;

&lt;p&gt;Anyway, I&apos;ll close this for now. Thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jul 2017 15:13:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hnpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-417] Decompress tar.gz file failed. java.io.Exception:Error detected parsing the header</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-417</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void deGzipArchive(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; filepath,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; dir)
            &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File input = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(filepath);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InputStream is = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(input);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CompressorInputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GzipCompressorInputStream(is, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        TarArchiveInputStream tin = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream(in);
        TarArchiveEntry entry = tin.getNextTarEntry();
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (entry != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            File archiveEntry = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(dir, entry.getName());
            archiveEntry.getParentFile().mkdirs();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry.isDirectory()) {
                archiveEntry.mkdir();
                entry = tin.getNextTarEntry();
                &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
            }
            OutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(archiveEntry);
            IOUtils.copy(tin, out);
            out.close();
            entry = tin.getNextTarEntry();
        }
        in.close();
        tin.close();
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        Gztest.deGzipArchive(&lt;span class=&quot;code-quote&quot;&gt;&quot;D:/20000102.0000+0800-20000102.0015+0800_0.tar.gz&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;D:/&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the tar.gz file can be decompressed in linux environment use &apos;tar&apos; command.&lt;/p&gt;

&lt;p&gt;The error log:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.io.IOException: Error detected parsing the header&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:286)&lt;br/&gt;
	at gztest.deGzipArchive(gztest.java:23)&lt;br/&gt;
	at gztest.main(gztest.java:149)&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException: Invalid byte 100 at offset 0 in &apos;dos&lt;/p&gt;
{NUL}
{NUL}
{NUL}
&lt;p&gt;&apos; len=8&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:141)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctalOrBinary(TarUtils.java:171)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:1128)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:1091)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:368)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:284)&lt;br/&gt;
	... 2 more&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13087916">COMPRESS-417</key>
            <summary>Decompress tar.gz file failed. java.io.Exception:Error detected parsing the header</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alphacome">alphacome</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Tue, 18 Jul 2017 12:22:48 +0000</created>
                <updated>Tue, 25 Jul 2017 09:34:12 +0000</updated>
                            <resolved>Sun, 23 Jul 2017 14:34:42 +0000</resolved>
                                    <version>1.14</version>
                                    <fixVersion>1.15</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16091480" author="alphacome" created="Tue, 18 Jul 2017 12:24:18 +0000"  >&lt;p&gt;the tar.gz file!&lt;/p&gt;</comment>
                            <comment id="16091703" author="bodewig" created="Tue, 18 Jul 2017 15:19:18 +0000"  >&lt;p&gt;Many thanks. Have you tried unarchiving the file without gzip compression, i.e. gunzip on the command line and read the resulting tar? That way we may know whether gzip or tar is to blame.&lt;/p&gt;

&lt;p&gt;I should be able to look into this sometime later this week, but maybe the experiment may provide a useful workaround.&lt;/p&gt;</comment>
                            <comment id="16092403" author="alphacome" created="Wed, 19 Jul 2017 00:35:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bodewig&quot; class=&quot;user-hover&quot; rel=&quot;bodewig&quot;&gt;Stefan Bodewig&lt;/a&gt; yes, &apos;gunzip&apos; commoand is worked, and then use &apos;tar&apos; command to deachive the result tar file also ok.&lt;/p&gt;</comment>
                            <comment id="16092923" author="bodewig" created="Wed, 19 Jul 2017 10:54:27 +0000"  >&lt;p&gt;I didn&apos;t mean to use the tar command, but rather &lt;tt&gt;TarArchiveInputStream&lt;/tt&gt;, I&apos;ll have a look myself.&lt;/p&gt;

&lt;p&gt;The somewhat good news is I can reproduce the error.&lt;/p&gt;

&lt;p&gt;Does the archive containing anything sensitive or would it be OK to ship it with Compress&apos; unit tests?&lt;/p&gt;</comment>
                            <comment id="16092928" author="bodewig" created="Wed, 19 Jul 2017 10:57:19 +0000"  >&lt;p&gt;The problem is inside the tar package as&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Untargz {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File input = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(args[0]);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream is = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(input);
             CompressorInputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GzipCompressorInputStream(is, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
             OutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo.tar&quot;&lt;/span&gt;)) {
            IOUtils.copy(in, out);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream is = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo.tar&quot;&lt;/span&gt;);
             TarArchiveInputStream tin = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream(is)) {
            TarArchiveEntry entry = tin.getNextTarEntry();
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (entry != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                File archiveEntry = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(entry.getName());
                archiveEntry.getParentFile().mkdirs();
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry.isDirectory()) {
                    archiveEntry.mkdir();
                    entry = tin.getNextTarEntry();
                    &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
                }
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (OutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(archiveEntry)) {
                    IOUtils.copy(tin, out);
                }
                entry = tin.getNextTarEntry();
            }
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fails for me and &lt;tt&gt;foo.tar&lt;/tt&gt; is a valid archive.&lt;/p&gt;</comment>
                            <comment id="16092936" author="bodewig" created="Wed, 19 Jul 2017 11:10:44 +0000"  >&lt;p&gt;The archive contains the value &quot;dos&quot; where the &quot;major device number&quot; is expected in ustar tar archives. After reading what the GNU tar and BSD tar pages say, we should probably ignore devmajor and devminor unless the file type is a character or block special file.&lt;/p&gt;</comment>
                            <comment id="16092944" author="bodewig" created="Wed, 19 Jul 2017 11:19:48 +0000"  >&lt;p&gt;fixed in master branch, maybe you can try a recent 1.15-SNAPSHOT. I&apos;ll close this issue once I&apos;ve got a unit test. It should be easy to create one myself should your archive contain sensitive data.&lt;/p&gt;</comment>
                            <comment id="16094014" author="alphacome" created="Thu, 20 Jul 2017 00:39:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bodewig&quot; class=&quot;user-hover&quot; rel=&quot;bodewig&quot;&gt;Stefan Bodewig&lt;/a&gt;, I &apos;ve tried 1.15-SNAPSHOT.  issue is fixed. many thx for your support. &lt;/p&gt;</comment>
                            <comment id="16099724" author="aks_apache" created="Tue, 25 Jul 2017 08:50:13 +0000"  >&lt;p&gt;I am also getting the similar issue, 1.15-SNAPSHOT will work in my case . if so, how to download it ?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Untaring %s to dir %s.D:\ddc_data\010617.tar.gz D:\ddc_data
java.io.IOException: Error detected parsing the header
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:286)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextEntry(TarArchiveInputStream.java:600)
	at Main.unTar(Main.java:40)
	at Main.extractTarGzFile(Main.java:79)
	at Main.main(Main.java:108)
Caused by: java.lang.IllegalArgumentException: At offset 124, 12 byte binary number exceeds maximum signed long value
	at org.apache.commons.compress.archivers.tar.TarUtils.parseBinaryBigInteger(TarUtils.java:213)
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctalOrBinary(TarUtils.java:177)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:1108)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:1091)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:368)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:284)
	... 4 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16099773" author="bodewig" created="Tue, 25 Jul 2017 09:34:12 +0000"  >&lt;p&gt;It is available from the Apache Snapshots repository: &lt;a href=&quot;https://repository.apache.org/snapshots/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/snapshots/&lt;/a&gt; - more specifically &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/commons/commons-compress/1.15-SNAPSHOT/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/commons/commons-compress/1.15-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Any version built after 2017-07-20 should do.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jul 2017 15:19:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hnlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-416] Tests failing under jdk 9 : one reflection issue, one change to ZipEntry related issue</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-416</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;X5455_ExtendedTimestampTest is failing under JDK 9 , due to what appears to be a bogus value returned from getTime().  It seems like the test failure might be due to the changes introduced for this: &lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8073497&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8073497&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tests were run using intelliJ TestRunner, using the openjdk9 build from the tip of the jdk9 tree (not dev).  I believe that this is at most one commit away from what will be the RC (which was delayed at the last minute due to two issues, one of which was javadoc related, and the other hotspot. &lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 9 ( jdk9 tree tip - I believe this is what will be the RC, or if not, what would have been RC). &lt;/p&gt;

&lt;p&gt;    java.runtime.version = 9-internal+0-adhoc.ses.jdk9&lt;br/&gt;
    java.specification.version = 9&lt;br/&gt;
    java.version = 9-internal&lt;br/&gt;
    java.vm.specification.version = 9&lt;br/&gt;
    os.arch = amd64&lt;br/&gt;
    os.name = Linux&lt;br/&gt;
    os.version = 4.4.0-81-generic&lt;/p&gt;</environment>
        <key id="13083540">COMPRESS-416</key>
            <summary>Tests failing under jdk 9 : one reflection issue, one change to ZipEntry related issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sesuncedu">Simon Spero</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Jun 2017 18:11:59 +0000</created>
                <updated>Thu, 6 Jul 2017 06:59:36 +0000</updated>
                            <resolved>Thu, 6 Jul 2017 06:59:36 +0000</resolved>
                                    <version>1.14</version>
                    <version>1.15</version>
                                    <fixVersion>1.15</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16068752" author="garydgregory" created="Thu, 29 Jun 2017 18:28:22 +0000"  >&lt;p&gt;When I build with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java version &quot;9-ea&quot;
Java(TM) SE Runtime Environment (build 9-ea+174)
Java HotSpot(TM) 64-Bit Server VM (build 9-ea+174, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T12:39:06-07:00)
Maven home: C:\Java\apache-maven-3.5.0\bin\..
Java version: 9-ea, vendor: Oracle Corporation
Java home: C:\Program Files\Java\jdk-9
Default locale: en_US, platform encoding: Cp1252
OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests in error:
  ArchiveReadTest.testArchive:112-&amp;gt;AbstractTestCase.checkArchiveContent:290-&amp;gt;AbstractTestCase.checkArchiveContent:303-&amp;gt;AbstractTestCase.checkArchiveContent:322 &#9559; ServiceConfiguration
  ArchiveReadTest.testArchive:112-&amp;gt;AbstractTestCase.checkArchiveContent:290-&amp;gt;AbstractTestCase.checkArchiveContent:303-&amp;gt;AbstractTestCase.checkArchiveContent:322 &#9559; ServiceConfiguration
  DetectArchiverTestCase.testEmptyJarArchive:120-&amp;gt;checkEmptyArchive:133-&amp;gt;AbstractTestCase.createEmptyArchive:235 &#9559; ServiceConfiguration
  DetectArchiverTestCase.testEmptyZipArchive:129-&amp;gt;checkEmptyArchive:133-&amp;gt;AbstractTestCase.createEmptyArchive:235 &#9559; ServiceConfiguration
  IOMethodsTest.testReadJar:98-&amp;gt;compareReads:146-&amp;gt;AbstractTestCase.createSingleEntryArchive:262 &#9559; ServiceConfiguration
  IOMethodsTest.testReadZip:108-&amp;gt;compareReads:146-&amp;gt;AbstractTestCase.createSingleEntryArchive:262 &#9559; ServiceConfiguration
  IOMethodsTest.testWriteJar:70-&amp;gt;compareWrites:115 &#9559; ServiceConfiguration sun.ut...
  IOMethodsTest.testWriteZip:83-&amp;gt;compareWrites:115 &#9559; ServiceConfiguration sun.ut...
  ArchiveOutputStreamTest.testCallSequenceJar:127-&amp;gt;doCallSequence:145 &#9559; ServiceConfiguration
  ArchiveOutputStreamTest.testCallSequenceZip:137-&amp;gt;doCallSequence:145 &#9559; ServiceConfiguration
  ArchiveOutputStreamTest.testFinish:45 &#9559; ServiceConfiguration sun.util.locale.p...
  ArchiveOutputStreamTest.testOptionalFinish:95 &#9559; ServiceConfiguration sun.util....
  ArchiveStreamFactoryTest.testEncodingOutputStream:357-&amp;gt;getOutputStreamFor:431 &#9559; ServiceConfiguration
  JarTestCase.testJarArchiveCreation:43 &#9559; ServiceConfiguration sun.util.locale.p...
  JarTestCase.testJarUnarchive:63 &#9559; ServiceConfiguration sun.util.locale.provide...
  JarTestCase.testJarUnarchiveAll:94 &#9559; ServiceConfiguration sun.util.locale.prov...
  LongPathTest.testArchive:160-&amp;gt;AbstractTestCase.checkArchiveContent:303-&amp;gt;AbstractTestCase.checkArchiveContent:322 &#9559; ServiceConfiguration
  LongPathTest.testArchive:160-&amp;gt;AbstractTestCase.checkArchiveContent:303-&amp;gt;AbstractTestCase.checkArchiveContent:322 &#9559; ServiceConfiguration
  LongPathTest.testArchive:160-&amp;gt;AbstractTestCase.checkArchiveContent:303-&amp;gt;AbstractTestCase.checkArchiveContent:322 &#9559; ServiceConfiguration
  LongPathTest.testArchive:160-&amp;gt;AbstractTestCase.checkArchiveContent:303-&amp;gt;AbstractTestCase.checkArchiveContent:322 &#9559; ServiceConfiguration
  LongPathTest.testArchive:160-&amp;gt;AbstractTestCase.checkArchiveContent:303-&amp;gt;AbstractTestCase.checkArchiveContent:322 &#9559; ServiceConfiguration
  LongPathTest.testArchive:160-&amp;gt;AbstractTestCase.checkArchiveContent:303-&amp;gt;AbstractTestCase.checkArchiveContent:322 &#9559; ServiceConfiguration
  SevenZTestCase.testSevenZArchiveCreationUsingBZIP2:52-&amp;gt;testSevenZArchiveCreation:70 &#9559; ServiceConfiguration
  SevenZTestCase.testSevenZArchiveCreationUsingCopy:37-&amp;gt;testSevenZArchiveCreation:70 &#9559; ServiceConfiguration
  SevenZTestCase.testSevenZArchiveCreationUsingDeflate:57-&amp;gt;testSevenZArchiveCreation:70 &#9559; ServiceConfiguration
  SevenZTestCase.testSevenZArchiveCreationUsingLZMA:42-&amp;gt;testSevenZArchiveCreation:70 &#9559; ServiceConfiguration
  SevenZTestCase.testSevenZArchiveCreationUsingLZMA2:47-&amp;gt;testSevenZArchiveCreation:70 &#9559; ServiceConfiguration
  ZipTestCase.testCopyRawEntriesFromFile:369-&amp;gt;createReferenceFile:444 &#9559; ServiceConfiguration
  ZipTestCase.testCopyRawZip64EntryFromFile:402 &#9559; ServiceConfiguration sun.util....
  ZipTestCase.testDirectoryEntryFromFile:293 &#9559; ServiceConfiguration sun.util.loc...
  ZipTestCase.testExplicitDirectoryEntry:329 &#9559; ServiceConfiguration sun.util.loc...
  ZipTestCase.testExplicitFileEntry:565 &#9559; ServiceConfiguration sun.util.locale.p...
  ZipTestCase.testFileEntryFromFile:520 &#9559; ServiceConfiguration sun.util.locale.p...
  ZipTestCase.testListAllFilesWithNestedArchive:255 &#9559; ServiceConfiguration sun.u...
  ZipTestCase.testSkipEntryWithUnsupportedCompressionMethod:220 &#9559; ServiceConfiguration
  ZipTestCase.testSkipsPK00Prefix:184-&amp;gt;AbstractTestCase.checkArchiveContent:303-&amp;gt;AbstractTestCase.checkArchiveContent:322 &#9559; ServiceConfiguration
  ZipTestCase.testSupportedCompressionMethod:201 &#9559; ServiceConfiguration sun.util...
  ZipTestCase.testUnixModeInAddRaw:428 &#9559; ServiceConfiguration sun.util.locale.pr...
  ZipTestCase.testZipArchiveCreation:66 &#9559; ServiceConfiguration sun.util.locale.p...
  ZipTestCase.testZipArchiveCreationInMemory:128 &#9559; ServiceConfiguration sun.util...
  ZipTestCase.testZipUnarchive:165 &#9559; ServiceConfiguration sun.util.locale.provid...
  ArjArchiveInputStreamTest.testReadingOfAttributesDosVersion:64 &#9559; ServiceConfiguration
  ArjArchiveInputStreamTest.testReadingOfAttributesUnixVersion:78 &#9559; ServiceConfiguration
  JarArchiveOutputStreamTest.testJarMarker:44 &#9559; ServiceConfiguration sun.util.lo...
  SevenZNativeHeapTest.initializationError &#9559; Objenesis java.lang.reflect.Invocat...
  SevenZOutputFileTest.testDirectoriesAndEmptyFiles:61 &#9559; ServiceConfiguration su...
  SevenZOutputFileTest.testEightEmptyFiles:204-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  SevenZOutputFileTest.testEightFilesSomeNotEmpty:209-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  SevenZOutputFileTest.testNineEmptyFiles:214-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  SevenZOutputFileTest.testNineFilesSomeNotEmpty:219-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  SevenZOutputFileTest.testSevenEmptyFiles:194-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  SevenZOutputFileTest.testSevenFilesSomeNotEmpty:199-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  SevenZOutputFileTest.testSixEmptyFiles:184-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  SevenZOutputFileTest.testSixFilesSomeNotEmpty:189-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  SevenZOutputFileTest.testTwentyNineEmptyFiles:224-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  SevenZOutputFileTest.testTwentyNineFilesSomeNotEmpty:229-&amp;gt;testCompress252:386-&amp;gt;addDir:414 &#9559; ServiceConfiguration
  TarArchiveInputStreamTest.datePriorToEpochInGNUFormat:131-&amp;gt;datePriorToEpoch:146 &#9559; ServiceConfiguration
  TarArchiveInputStreamTest.datePriorToEpochInPAXFormat:137-&amp;gt;datePriorToEpoch:146 &#9559; ServiceConfiguration
  TarArchiveOutputStreamTest.testOldEntryPosixMode:299 &#9559; ServiceConfiguration su...
  TarArchiveOutputStreamTest.testOldEntryStarMode:266 &#9559; ServiceConfiguration sun...
  DataDescriptorTest.doesntWriteDataDescriptorForDeflatedEntryOnSeekableOutput:95 &#9559; ServiceConfiguration
  DataDescriptorTest.doesntWriteDataDescriptorWhenAddingRawEntries:137 &#9559; ServiceConfiguration
  DataDescriptorTest.writesDataDescriptorForDeflatedEntryOnUnseekableOutput:55 &#9559; ServiceConfiguration
  EncryptedArchiveTest.testReadPasswordEncryptedEntryViaStream:62 &#9559; ServiceConfiguration
  EncryptedArchiveTest.testReadPasswordEncryptedEntryViaZipFile:38 &#9559; ServiceConfiguration
  ExplodeSupportTest.testArchiveWithImplodeCompression4K2Trees:56-&amp;gt;testArchiveWithImplodeCompression:38 &#9559; ServiceConfiguration
  ExplodeSupportTest.testArchiveWithImplodeCompression8K3Trees:61-&amp;gt;testArchiveWithImplodeCompression:38 &#9559; ServiceConfiguration
  ExplodeSupportTest.testTikaTestArchive:66-&amp;gt;testArchiveWithImplodeCompression:38 &#9559; ServiceConfiguration
  ExplodeSupportTest.testTikaTestStream:99-&amp;gt;testZipStreamWithImplodeCompression:71 &#9559; ServiceConfiguration
  ExplodeSupportTest.testZipStreamWithImplodeCompression4K2Trees:89-&amp;gt;testZipStreamWithImplodeCompression:71 &#9559; ServiceConfiguration
  ExplodeSupportTest.testZipStreamWithImplodeCompression8K3Trees:94-&amp;gt;testZipStreamWithImplodeCompression:71 &#9559; ServiceConfiguration
  Maven221MultiVolumeTest.testRead7ZipMultiVolumeArchiveForStream:80 &#9559; ServiceConfiguration
  ParallelScatterZipCreatorTest.callableApi:76 &#9559; ServiceConfiguration sun.util.l...
  ParallelScatterZipCreatorTest.concurrent:60 &#9559; ServiceConfiguration sun.util.lo...
  ScatterSampleTest.testSample:39-&amp;gt;createFile:55 &#9559; ServiceConfiguration sun.util...
  ScatterZipOutputStreamTest.putArchiveEntry:64 &#9559; ServiceConfiguration sun.util....
  UTF8ZipFilesTest.testASCIIFileRoundtripExplicitUnicodeExtra:64-&amp;gt;testFileRoundtrip:249-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testASCIIFileRoundtripImplicitUnicodeExtra:88-&amp;gt;testFileRoundtrip:249-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testCP437FileRoundtripExplicitUnicodeExtra:58-&amp;gt;testFileRoundtrip:249-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testCP437FileRoundtripImplicitUnicodeExtra:82-&amp;gt;testFileRoundtrip:249-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testRawNameReadFromStream:234 &#9559; ServiceConfiguration sun.util...
  UTF8ZipFilesTest.testRawNameReadFromZipFile:219 &#9559; ServiceConfiguration sun.uti...
  UTF8ZipFilesTest.testRead7ZipArchive:102 &#9559; ServiceConfiguration sun.util.local...
  UTF8ZipFilesTest.testRead7ZipArchiveForStream:118 &#9559; ServiceConfiguration sun.u...
  UTF8ZipFilesTest.testReadWinZipArchive:137 &#9559; ServiceConfiguration sun.util.loc...
  UTF8ZipFilesTest.testReadWinZipArchiveForStream:165 &#9559; ServiceConfiguration sun...
  UTF8ZipFilesTest.testUtf8FileRoundtripExplicitUnicodeExtra:46-&amp;gt;testFileRoundtrip:249-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testUtf8FileRoundtripImplicitUnicodeExtra:70-&amp;gt;testFileRoundtrip:249-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testUtf8FileRoundtripNoEFSExplicitUnicodeExtra:52-&amp;gt;testFileRoundtrip:249-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testUtf8FileRoundtripNoEFSImplicitUnicodeExtra:76-&amp;gt;testFileRoundtrip:249-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testUtf8Interoperability:392-&amp;gt;testFile:340 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testZipArchiveInputStreamReadsUnicodeFields:202-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  UTF8ZipFilesTest.testZipFileReadsUnicodeFields:181-&amp;gt;createTestFile:265 &#9559; ServiceConfiguration
  X5455_ExtendedTimestampTest.testBitsAreSetWithTime &#9559; NoClassDefFound Could not...
  X5455_ExtendedTimestampTest.testGetHeaderId &#9559; NoClassDefFound Could not initia...
  X5455_ExtendedTimestampTest.&amp;lt;clinit&amp;gt;:54 &#9559; ServiceConfiguration sun.util.locale...
  X5455_ExtendedTimestampTest.testMisc &#9559; NoClassDefFound Could not initialize cl...
  X5455_ExtendedTimestampTest.testParseReparse &#9559; NoClassDefFound Could not initi...
  X5455_ExtendedTimestampTest.testSampleFile &#9559; NoClassDefFound Could not initial...
  X5455_ExtendedTimestampTest.testWriteReadRoundtrip &#9559; NoClassDefFound Could not...
  X7875_NewUnixTest.testSampleFile:53 &#9559; ServiceConfiguration sun.util.locale.pro...
  ZipArchiveEntryTest.isUnixSymlinkIsFalseIfMoreThanOneFlagIsSet:278 &#9559; ServiceConfiguration
  ZipArchiveEntryTest.testCompressionMethod:213 &#9559; ServiceConfiguration sun.util....
  ZipArchiveInputStreamTest.properUseOfInflater:70 &#9559; ServiceConfiguration sun.ut...
  ZipArchiveInputStreamTest.shouldConsumeArchiveCompletely:94 &#9559; ServiceConfiguration
  ZipArchiveInputStreamTest.shouldReadNestedZip:114-&amp;gt;extractZipInputStream:124 &#9559; ServiceConfiguration
  ZipArchiveInputStreamTest.testMessageWithCorruptFileName:185 &#9559; ServiceConfiguration
  ZipArchiveInputStreamTest.testOffsets:263 &#9559; ServiceConfiguration sun.util.loca...
  ZipArchiveInputStreamTest.testReadingOfFirstStoredEntry:170 &#9559; ServiceConfiguration
  ZipArchiveInputStreamTest.testUnshrinkEntry:137 &#9559; ServiceConfiguration sun.uti...
  ZipArchiveInputStreamTest.testUnzipBZip2CompressedEntry:200 &#9559; ServiceConfiguration
  ZipArchiveInputStreamTest.testWithBytesAfterData:222 &#9559; ServiceConfiguration su...
  ZipArchiveInputStreamTest.winzipBackSlashWorkaround:51 &#9559; ServiceConfiguration ...
  ZipFileTest.testCDOrder:59-&amp;gt;readOrderTest:665 &#9559; ServiceConfiguration sun.util....
  ZipFileTest.testCDOrderInMemory:93 &#9559; ServiceConfiguration sun.util.locale.prov...
  ZipFileTest.testConcurrentReadFile:379 &#9559; ServiceConfiguration sun.util.locale....
  ZipFileTest.testConcurrentReadSeekable:349 &#9559; ServiceConfiguration sun.util.loc...
  ZipFileTest.testDelayedOffsetsAndSizes:430 &#9559; ServiceConfiguration sun.util.loc...
  ZipFileTest.testDoubleClose:151-&amp;gt;readOrderTest:665 &#9559; ServiceConfiguration sun....
  ZipFileTest.testDuplicateEntry:268 &#9559; ServiceConfiguration sun.util.locale.prov...
  ZipFileTest.testEntryAlignment:470 &#9559; ServiceConfiguration sun.util.locale.prov...
  ZipFileTest.testEntryAlignmentExceed &#9559;  Unexpected exception, expected&amp;lt;java.la...
  ZipFileTest.testExcessDataInZip64ExtraField:288 &#9559; ServiceConfiguration sun.uti...
  ZipFileTest.testOffsets:412 &#9559; ServiceConfiguration sun.util.locale.provider.Lo...
  ZipFileTest.testPhysicalOrder:122-&amp;gt;readOrderTest:665 &#9559; ServiceConfiguration su...
  ZipFileTest.testReadingOfFirstStoredEntry:324 &#9559; ServiceConfiguration sun.util....
  ZipFileTest.testReadingOfStoredEntry:168 &#9559; ServiceConfiguration sun.util.local...
  ZipFileTest.testSkipsPK00Prefix:217 &#9559; ServiceConfiguration sun.util.locale.pro...
  ZipFileTest.testUnixSymlinkSampleFile:246 &#9559; ServiceConfiguration sun.util.loca...
  ZipFileTest.testUnshrinking:297 &#9559; ServiceConfiguration sun.util.locale.provide...
  ZipFileTest.testUnzipBZip2CompressedEntry:334 &#9559; ServiceConfiguration sun.util....
  ZipFileTest.testWinzipBackSlashWorkaround:204 &#9559; ServiceConfiguration sun.util....
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ZipUtilTest.setUp:40 &#9559; ServiceConfiguration sun.util.locale.provider.LocaleDat...
  ChangeSetTestCase.testAddAllreadyExistingWithReplaceFalse:1258-&amp;gt;AbstractTestCase.createArchive:174 &#9559; ServiceConfiguration
  ChangeSetTestCase.testAddAllreadyExistingWithReplaceTrue:1213-&amp;gt;AbstractTestCase.createArchive:174 &#9559; ServiceConfiguration
  ChangeSetTestCase.testAddToEmptyArchive:1068-&amp;gt;AbstractTestCase.createEmptyArchive:235 &#9559; ServiceConfiguration
  ChangeSetTestCase.testDeleteAddToOneFileArchive:1114-&amp;gt;AbstractTestCase.createSingleEntryArchive:262 &#9559; ServiceConfiguration
  ChangeSetTestCase.testDeleteFromAndAddToJar:929 &#9559; ServiceConfiguration sun.uti...
  ChangeSetTestCase.testDeleteFromAndAddToZip:550-&amp;gt;AbstractTestCase.createArchive:174 &#9559; ServiceConfiguration
  ChangeSetTestCase.testDeleteFromAndAddToZipUsingZipFilePerform:597-&amp;gt;AbstractTestCase.createArchive:174 &#9559; ServiceConfiguration
  ChangeSetTestCase.testDeleteFromJar:835 &#9559; ServiceConfiguration sun.util.locale...
  ChangeSetTestCase.testDeleteFromZip:754 &#9559; ServiceConfiguration sun.util.locale...
  ChangeSetTestCase.testDeletePlusAddSame:367-&amp;gt;AbstractTestCase.createArchive:174 &#9559; ServiceConfiguration
  Pack200TestCase.testJarArchiveCreationInMemory:98-&amp;gt;jarArchiveCreation:115 &#9559; ServiceConfiguration
  Pack200TestCase.testJarArchiveCreationTempFile:103-&amp;gt;jarArchiveCreation:115 &#9559; ServiceConfiguration
  Pack200TestCase.testJarUnarchiveAllFileArgInMemory:54-&amp;gt;jarUnarchiveAll:77 &#9559; ServiceConfiguration
  Pack200TestCase.testJarUnarchiveAllFileTempFile:64-&amp;gt;jarUnarchiveAll:77 &#9559; ServiceConfiguration
  Pack200TestCase.testJarUnarchiveAllInMemory:49-&amp;gt;jarUnarchiveAll:77 &#9559; ServiceConfiguration
  Pack200TestCase.testJarUnarchiveAllTempFile:59-&amp;gt;jarUnarchiveAll:77 &#9559; ServiceConfiguration
  Pack200UtilsTest.testNormalize:47 &#9559; ServiceConfiguration sun.util.locale.provi...
  Pack200UtilsTest.testNormalizeInPlace:93 &#9559; ServiceConfiguration sun.util.local...
  FramedSnappyCompressorInputStreamTest.readIWAFile:154 &#9559; ServiceConfiguration s...
  ZCompressorInputStreamTest.testFailsToCreateZCompressorInputStreamAndThrowsIOException &#9559;

Tests run: 841, Failures: 0, Errors: 162, Skipped: 4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16069451" author="sesuncedu" created="Fri, 30 Jun 2017 04:22:30 +0000"  >&lt;p&gt;Greg - can you attach the sure xml , or something with stacktraces? There seems to be something going on in the locate setup , and I think many of those places are setting up encoders.  I think I read some  descriptions of something  similar (which didn&apos;t stick in brain L2).  &lt;/p&gt;

&lt;p&gt;(I do have access to a windows environment, but I&apos;ll be in trouble if my partner wakes up and catches me (say - if I install cygwin and sshd, her laptop only has an SSD, so  there&apos;s no HD rattling to give me away.. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;It&apos;s probably  safer to see if I can get a travis jdk9  to produce the same errors from maven (the branch with travis tweaking has mvnw for  3.5.0;   I forgot which version of 9  is in the new trusty stable container on travis, but I think it&apos;s the last  oracle ea).  &lt;/p&gt;</comment>
                            <comment id="16069586" author="garydgregory" created="Fri, 30 Jun 2017 06:35:22 +0000"  >&lt;p&gt;I think I need a Java 9 that implements &lt;tt&gt;--permit-illegal-access&lt;/tt&gt;. I&apos;ll attache my surefire reports.&lt;/p&gt;</comment>
                            <comment id="16070536" author="sesuncedu" created="Fri, 30 Jun 2017 18:33:57 +0000"  >&lt;p&gt;The issues are being caused by jacoco making a class unloadable by twiddling with a final field outside a constructor. &lt;/p&gt;

&lt;p&gt;This is fixed by using a newer version of jacoco. &lt;/p&gt;

&lt;p&gt;I have made a few changes to the enhanced travis branch, which reduces the, er, non-successes to three tests.  &lt;br/&gt;
See: &lt;a href=&quot;https://github.com/apache/commons-compress/pull/43&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/43&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Some of these are changes to outdated plugin versions. I blame the parents.&lt;/p&gt;

&lt;p&gt;There are two &quot;failures&quot; and one &quot;error&quot;. Quotation marks are used because one of the failures is actually an error.&lt;/p&gt;

&lt;p&gt;The real failure is the change in the handling of zip dates in the jdk ZipEntry.  This is an actual incompatibility. &lt;/p&gt;

&lt;p&gt;The second failure is really an illegal access from a mocker; it just happens to take place in test for an expected exception.   This  presents as  a warning in the (probable) RC -&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Running org.apache.commons.compress.compressors.z.ZCompressorInputStreamTest
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.mockito.cglib.core.ReflectUtils$2 (file:/home/ses/.m2/repository/org/mockito/mockito-core/1.10.19/mockito-core-1.10.19.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)
WARNING: Please consider reporting this to the maintainers of org.mockito.cglib.core.ReflectUtils$2
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m not sure how I feel about having to locate the maintainers of an anonymous inner class &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;
</comment>
                            <comment id="16070616" author="sesuncedu" created="Fri, 30 Jun 2017 19:28:49 +0000"  >&lt;p&gt;I&apos;ve replaced the use of mocks in SevenZNativeHeapTest with delegation.  I&apos;m not sure whether this test is really testing much, but it&apos;s easy enough to just convert a couple of anonymous classes to named package private ones, and to generate trivial delegates. &lt;/p&gt;

&lt;p&gt;I can see where the bad code is in the mock libs, but that&apos;s not my problem anymore &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;All JDK 9 changes are going into the fixed travis tree, since I&apos;ve learned my lesson and won&apos;t try splitting PRs that depend on other  dependencies.&lt;/p&gt;</comment>
                            <comment id="16070835" author="garydgregory" created="Fri, 30 Jun 2017 23:06:12 +0000"  >&lt;p&gt;After GitHub PR #43 I only have:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Failed tests:
  X5455_ExtendedTimestampTest.testSampleFile:185 expected:&amp;lt;[2105-01-01/00:00:02] +0000&amp;gt; but was:&amp;lt;[1968-11-24/17:31:45] +0000&amp;gt;
Tests in error:
  ZCompressorInputStreamTest.testFailsToCreateZCompressorInputStreamAndThrowsIOException &#9559;

Tests run: 842, Failures: 1, Errors: 1, Skipped: 4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16072408" author="sesuncedu" created="Mon, 3 Jul 2017 13:07:25 +0000"  >&lt;p&gt;I think I mostly understand the issue now.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;There are three different formats in which Zip can store times&lt;/li&gt;
	&lt;li&gt;Two of these formats will overflow  around  the year 2107-8&lt;/li&gt;
	&lt;li&gt;JDK 9 transparently switches from using dos times or xtra dos times to using NTFS times&lt;/li&gt;
	&lt;li&gt;JDK 9 now switches over to NTFS times at the end of 2099.&lt;/li&gt;
	&lt;li&gt;Since some of this logic is in the set code, there may be a bogus timestamp stored.&lt;/li&gt;
	&lt;li&gt;I haven&apos;t checked to see if the problem can happen with java utils  ZipInputStream on the same test file, or if the problem comes from commons-compress.  If the problem  occurs  using the test file with the java libs, then it&apos;s definitely a jdk bug.&lt;/li&gt;
	&lt;li&gt;If the test is hacked to say that xtended time is always used, the tests all pass.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16072529" author="bodewig" created="Mon, 3 Jul 2017 14:36:33 +0000"  >&lt;p&gt;Note, this is the unit test for the extended time stamp extra field so it will be sensitive to changes of the underlying ZipEntry code of the JDK. This sounds a lot like the change I&apos;ve adjusted to with &lt;a href=&quot;https://github.com/apache/commons-compress/commit/a2cda30be14b3da01cbbbedc41b70daf6d88da8b&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/commit/a2cda30be14b3da01cbbbedc41b70daf6d88da8b&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I haven&apos;t had the time to look into it in more detail so far.&lt;/p&gt;</comment>
                            <comment id="16072561" author="sesuncedu" created="Mon, 3 Jul 2017 14:53:00 +0000"  >&lt;p&gt;From the mercurial logs I think this it is definitely related - possibly&lt;br/&gt;
fixing a performance regression there was an issue with locales being&lt;br/&gt;
initialized too eagerly.&lt;/p&gt;

&lt;p&gt;It is indeed very sensitive to jdk(since it seems to be randomized each&lt;br/&gt;
release). The extended header  is parsed correctly (and the zip entry&lt;br/&gt;
itself has the right FileTime). It&apos;s the dosxtime that seems  messed up.&lt;br/&gt;
Now to see where that&apos;s set (of course, extended header test should be OK&lt;br/&gt;
just testing itself).&lt;/p&gt;

&lt;p&gt;If this wasn&apos;t the only known jdk9 fail issue it wouldn&apos;t be bugging me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

</comment>
                            <comment id="16072647" author="sesuncedu" created="Mon, 3 Jul 2017 15:34:50 +0000"  >&lt;p&gt;It&apos;s an oracle issue. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testJUZTimes() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File archive = getFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;COMPRESS-210_unix_time_zip_test.zip&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (java.util.zip.ZipFile zf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.util.zip.ZipFile(archive)) {
          ZipEntry entry =  zf.getEntry(&lt;span class=&quot;code-quote&quot;&gt;&quot;COMPRESS-210_unix_time_zip_test/2105&quot;&lt;/span&gt;);
            Calendar girl = Calendar.getInstance(TimeZone.getTimeZone(&lt;span class=&quot;code-quote&quot;&gt;&quot;GMT&quot;&lt;/span&gt;));
            girl.setTime(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date(entry.getTime()));
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; year = girl.get(Calendar.YEAR);
            assertEquals(2105,year);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;java.lang.AssertionError: &lt;br/&gt;
Expected :2105&lt;br/&gt;
Actual   :1968  &lt;/p&gt;

&lt;p&gt;1968-11-24T00:00:00.000Z to be precise.   So I&apos;m weeks away from being conceived, and the  Nixon transition team is busy picking out hidden tape recorders.&lt;/p&gt;</comment>
                            <comment id="16072706" author="garydgregory" created="Mon, 3 Jul 2017 16:50:35 +0000"  >&lt;p&gt;At time point, we could bring this up on core-libs-dev@openjdk.java.net. Would you (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sesuncedu&quot; class=&quot;user-hover&quot; rel=&quot;sesuncedu&quot;&gt;Simon Spero&lt;/a&gt;) like to do the honors since you authored the failing test?&lt;/p&gt;

&lt;p&gt;I added &lt;tt&gt;org.apache.commons.compress.archivers.zip.Java9ZipEntryTimeTest&lt;/tt&gt; as a standalone class depending only on the Zip file test fixture.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16072714" author="sesuncedu" created="Mon, 3 Jul 2017 16:58:54 +0000"  >&lt;p&gt;I have a draft  open in another window. One special cause for speculation:  zip file parsing moved from C to java in JDK 9.  &lt;br/&gt;
Also, I discovered that I had off-by-one src.zips in my jdk9 build, which explains why debugging was confusing the heck out of me.  &lt;br/&gt;
So I&apos;m rebuilding so I can check to see what&apos;s going on in the central directory parse.&lt;/p&gt;

&lt;p&gt;Worst thing about trying to debug j.u.z.* is loading stuff from jars.&lt;/p&gt;</comment>
                            <comment id="16072730" author="garydgregory" created="Mon, 3 Jul 2017 17:12:00 +0000"  >&lt;p&gt;Roger that. Keep us posted.&lt;/p&gt;</comment>
                            <comment id="16072764" author="sesuncedu" created="Mon, 3 Jul 2017 17:43:02 +0000"  >&lt;p&gt;Found it! Changed a method signature from long to int and didn&apos;t deal with sign extension.  Now I can finish the bug report.&lt;/p&gt;</comment>
                            <comment id="16072786" author="sesuncedu" created="Mon, 3 Jul 2017 18:10:18 +0000"  >&lt;p&gt;But... after going back to the original path, I see that the actual definition of the extended timestamps states that:&lt;br/&gt;
So COMMONS-COMPRESS and the Oracle JDK were both doing it wrong.&lt;/p&gt;

&lt;p&gt;So this goes back to the original patch in COMMONS-220 &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;The time values are in standard Unix signed-long format, indicating  the number of seconds since 1 January 1970 00:00:00.  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://opensource.apple.com/source/zip/zip-6/unzip/unzip/proginfo/extra.fld&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://opensource.apple.com/source/zip/zip-6/unzip/unzip/proginfo/extra.fld&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16072800" author="sesuncedu" created="Mon, 3 Jul 2017 18:24:45 +0000"  >&lt;p&gt;&lt;a href=&quot;http://hg.openjdk.java.net/jdk9/jdk9/jdk/rev/48b296b645bd#l1.103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hg.openjdk.java.net/jdk9/jdk9/jdk/rev/48b296b645bd#l1.103&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Not mentioned in the commit log, not backported to jdk8 &lt;/p&gt;</comment>
                            <comment id="16072968" author="githubbot" created="Mon, 3 Jul 2017 23:15:33 +0000"  >&lt;p&gt;GitHub user sesuncedu opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/48&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/48&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-416&quot; title=&quot;Tests failing under jdk 9 : one reflection issue, one change to ZipEntry related issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-416&quot;&gt;&lt;del&gt;COMPRESS-416&lt;/del&gt;&lt;/a&gt;    Extended times for Zip should be signed values&lt;/p&gt;

&lt;p&gt;    This has fixed code, and almost fixed tests (fixed for jdk9;  haven&apos;t removed all the invalid checks for jdk8). &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sesuncedu/commons-compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sesuncedu/commons-compress&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-416&quot; title=&quot;Tests failing under jdk 9 : one reflection issue, one change to ZipEntry related issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-416&quot;&gt;&lt;del&gt;COMPRESS-416&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/48.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/48.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #48&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e39151c1db4784e517fc139c0ee37ab9f035aa0b&lt;br/&gt;
Author: Simon Spero &amp;lt;sesuncedu@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-07-03T22:24:55Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-416&quot; title=&quot;Tests failing under jdk 9 : one reflection issue, one change to ZipEntry related issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-416&quot;&gt;&lt;del&gt;COMPRESS-416&lt;/del&gt;&lt;/a&gt; Add signed 32bit int constructor and accessor to ZipLong&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Simon Spero &amp;lt;sesuncedu@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;commit da5fa04a69d6c039376f26d0d5896995cecddc65&lt;br/&gt;
Author: Simon Spero &amp;lt;sesuncedu@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-07-03T23:10:10Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-416&quot; title=&quot;Tests failing under jdk 9 : one reflection issue, one change to ZipEntry related issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-416&quot;&gt;&lt;del&gt;COMPRESS-416&lt;/del&gt;&lt;/a&gt; Use signed integers for extended timestamps, per spec&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Simon Spero &amp;lt;sesuncedu@gmail.com&amp;gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16073213" author="bodewig" created="Tue, 4 Jul 2017 07:02:30 +0000"  >&lt;p&gt;I&apos;m currently looking into the test failures of Simon&apos;s pull request (I only get one locally, so it seems to depend on the time zone).&lt;/p&gt;</comment>
                            <comment id="16073353" author="githubbot" created="Tue, 4 Jul 2017 08:56:57 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/48&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/48&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16073364" author="bodewig" created="Tue, 4 Jul 2017 09:10:13 +0000"  >&lt;p&gt;OK, the extended timestamp issue should bow be resolved, many thanks Simon.&lt;/p&gt;

&lt;p&gt;And I&apos;ve disabled the failing powermock test for now. I&apos;m not sure it is worth porting over, IMHO we can close this now.&lt;/p&gt;</comment>
                            <comment id="16073504" author="sesuncedu" created="Tue, 4 Jul 2017 11:29:00 +0000"  >&lt;p&gt;There was an oddity before with IBM java 8,which is earlier, but it was an&lt;br/&gt;
incredibly suspicious off by a second thing, with a little timezone too. I&lt;br/&gt;
will see if it all behaves.&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13081239">COMPRESS-413</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12875191" name="surefire-reports.zip" size="297345" author="garydgregory" created="Fri, 30 Jun 2017 06:35:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Jun 2017 18:28:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            37 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gwq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-415] Wrong class name in one example in the documentation of CPIO format</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-415</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Documentation link:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://commons.apache.org/proper/commons-compress/javadocs/api-release/org/apache/commons/compress/archivers/cpio/CpioArchiveInputStream.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://commons.apache.org/proper/commons-compress/javadocs/api-release/org/apache/commons/compress/archivers/cpio/CpioArchiveInputStream.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In the example section, the following class name is used: &lt;tt&gt;CPIOArchiveInputStream&lt;/tt&gt;, where it should be &lt;tt&gt;CpioArchiveInputStream&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Similar thing with &lt;tt&gt;CPIOArchiveEntry&lt;/tt&gt; &amp;#8211; proper class name seems to be &lt;tt&gt;CpioArchiveEntry&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13082738">COMPRESS-415</key>
            <summary>Wrong class name in one example in the documentation of CPIO format</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cyraesil">Grzegorz Antoniak</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Jun 2017 08:06:18 +0000</created>
                <updated>Tue, 27 Jun 2017 08:52:40 +0000</updated>
                            <resolved>Tue, 27 Jun 2017 08:52:40 +0000</resolved>
                                    <version>1.14</version>
                                    <fixVersion>1.15</fixVersion>
                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16064489" author="bodewig" created="Tue, 27 Jun 2017 08:52:40 +0000"  >&lt;p&gt;Thanks! Seems to be a wide spread error, result of copy and paste &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Fixed with git commit 446843e but I haven&apos;t re-generated the master javadocs of the site, yet.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 27 Jun 2017 08:52:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            38 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3grs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-412] NullPointerException defect in ChecksumCalculatingInputStream#getValue()</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-412</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;NullPointerException defect in ChecksumCalculatingInputStream#getValue() detected as stated in pull request 33: &lt;a href=&quot;https://github.com/apache/commons-compress/pull/33&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/33&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Furthermore the following test describes the problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test(expected = NullPointerException.class) &lt;span class=&quot;code-comment&quot;&gt;//I assume &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; behaviour to be a bug or at least a defect.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testGetValueThrowsNullPointerException() {

        ChecksumCalculatingInputStream checksumCalculatingInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ChecksumCalculatingInputStream(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);

        checksumCalculatingInputStream.getValue();


    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13080478">COMPRESS-412</key>
            <summary>NullPointerException defect in ChecksumCalculatingInputStream#getValue()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hausegger.michael@googlemail.com">Michael Hausegger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Jun 2017 18:31:56 +0000</created>
                <updated>Sat, 17 Jun 2017 18:35:14 +0000</updated>
                            <resolved>Sat, 17 Jun 2017 18:32:57 +0000</resolved>
                                                    <fixVersion>1.15</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16052279" author="hausegger.michael@googlemail.com" created="Fri, 16 Jun 2017 19:05:34 +0000"  >&lt;p&gt;Issue is fixed.&lt;/p&gt;

&lt;p&gt;What did I do?&lt;br/&gt;
Modified the constructor to assure the input parameters are not null.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ChecksumCalculatingInputStream(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Checksum checksum, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InputStream in) {
        &lt;span class=&quot;code-comment&quot;&gt;//New
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( checksum == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ){
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NullPointerException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Parameter checksum must not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;);
        }
        &lt;span class=&quot;code-comment&quot;&gt;//New
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( in == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ){
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NullPointerException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Parameter in must not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.checksum = checksum;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.in = in;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Due to the fact that when the in parameter is null the same problem would happen the same check as for the checksum parameter was built in.&lt;/p&gt;

&lt;p&gt;A manual verification in conjunction with raising an explicit NullPointerExeception over verification using an assert framework was chosen due to the fact that this - after code inspection - turned out to obviously beeing the standard approach in the current project.&lt;/p&gt;

&lt;p&gt;Hope this helps.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="16052281" author="hausegger.michael@googlemail.com" created="Fri, 16 Jun 2017 19:06:27 +0000"  >&lt;p&gt;Anybody please assign me as assignee.&lt;br/&gt;
Can&apos;t do this on my own, thanks.&lt;/p&gt;</comment>
                            <comment id="16052303" author="githubbot" created="Fri, 16 Jun 2017 19:28:07 +0000"  >&lt;p&gt;Github user TheRealHaui commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/33&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/33&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bodewig &lt;br/&gt;
    Thank you for your kind response!&lt;br/&gt;
    Really appreciate that!&lt;/p&gt;

&lt;p&gt;    Therefore I&apos;ve made all the changes you requested/proposed.&lt;br/&gt;
    And of course added myself as a contributor as heavily requested by you.&lt;br/&gt;
    Really couldn&apos;t disappoint you regarding that special topic. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    Furthermore I&apos;ve created a Jira Task for the bespoken bug: &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-412&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COMPRESS-412&lt;/a&gt;&lt;br/&gt;
    And fixed it in an own branch which I&apos;ve commited, created tests for and pushed too.&lt;br/&gt;
    And which pull request I am going to link here in the next comment after I&apos;ve created it.&lt;/p&gt;
</comment>
                            <comment id="16052311" author="githubbot" created="Fri, 16 Jun 2017 19:32:24 +0000"  >&lt;p&gt;GitHub user TheRealHaui opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/35&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/35&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Compress 412&lt;/p&gt;

&lt;p&gt;    Fixed Jira issue Compress 412: &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-412&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COMPRESS-412&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/TheRealHaui/commons-compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/TheRealHaui/commons-compress&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-412&quot; title=&quot;NullPointerException defect in ChecksumCalculatingInputStream#getValue()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-412&quot;&gt;&lt;del&gt;COMPRESS-412&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/35.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/35.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #35&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2f45456527f2631ef8b4bb09aa0ad30afda02b5f&lt;br/&gt;
Author: Michael Hausegger &amp;lt;michael.hausegger@tugraz.at&amp;gt;&lt;br/&gt;
Date:   2017-06-13T21:47:50Z&lt;/p&gt;

&lt;p&gt;    add-some-Unit-Tests Added some Unit Tests to increase code coverage.&lt;/p&gt;

&lt;p&gt;commit 96ca8ceeddbd20ec38b9211260b4b91107b0be2d&lt;br/&gt;
Author: Michael Hausegger &amp;lt;michael.hausegger@tugraz.at&amp;gt;&lt;br/&gt;
Date:   2017-06-16T18:12:20Z&lt;/p&gt;

&lt;p&gt;    add-some-Unit-Tests Removed @author tags in comments.&lt;/p&gt;

&lt;p&gt;commit 5e5dc7f032ffb5b3818410e23d7881a8def46f3d&lt;br/&gt;
Author: Michael Hausegger &amp;lt;michael.hausegger@tugraz.at&amp;gt;&lt;br/&gt;
Date:   2017-06-16T18:22:10Z&lt;/p&gt;

&lt;p&gt;    add-some-Unit-Tests Removed test testGetValueThrowsNullPointerException in class ChecksumCalculatingInputStreamTest. Test represented a bug/defect which is going to be fixed in a different branch.&lt;/p&gt;

&lt;p&gt;commit be0f11f4dbffb5ca1f903a6f07de744687d303c3&lt;br/&gt;
Author: Michael Hausegger &amp;lt;michael.hausegger@tugraz.at&amp;gt;&lt;br/&gt;
Date:   2017-06-16T18:38:00Z&lt;/p&gt;

&lt;p&gt;    add-some-Unit-Tests Minor variable renaming.&lt;/p&gt;

&lt;p&gt;commit 3b46bb5dc3aeb3ca68062c10589e049c9eb8551d&lt;br/&gt;
Author: Michael Hausegger &amp;lt;michael.hausegger@tugraz.at&amp;gt;&lt;br/&gt;
Date:   2017-06-16T18:44:40Z&lt;/p&gt;

&lt;p&gt;    add-some-Unit-Tests Added myself as contributor to pom.xml as &quot;requested&quot; by Stefan Bodewig.&lt;/p&gt;

&lt;p&gt;commit a0e5dd80b9ec43c315021701f9c2334be45c6271&lt;br/&gt;
Author: Michael Hausegger &amp;lt;michael.hausegger@tugraz.at&amp;gt;&lt;br/&gt;
Date:   2017-06-16T19:30:03Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-412&quot; title=&quot;NullPointerException defect in ChecksumCalculatingInputStream#getValue()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-412&quot;&gt;&lt;del&gt;COMPRESS-412&lt;/del&gt;&lt;/a&gt; NullPointerException defect in ChecksumCalculatingInputStream#getValue() fixed.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16052314" author="hausegger.michael@googlemail.com" created="Fri, 16 Jun 2017 19:34:16 +0000"  >&lt;p&gt;Link to the pull request which solves the issue: &lt;a href=&quot;https://github.com/apache/commons-compress/pull/35&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/35&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16052317" author="githubbot" created="Fri, 16 Jun 2017 19:38:03 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/35&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/35&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://:/builds/12009215/badge)](https://:/builds/12009215&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://:/builds/12009215/badge)](https://:/builds/12009215&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.2%) to 84.678% when pulling *&lt;b&gt;a0e5dd80b9ec43c315021701f9c2334be45c6271 on TheRealHaui:&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-412&quot; title=&quot;NullPointerException defect in ChecksumCalculatingInputStream#getValue()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-412&quot;&gt;&lt;del&gt;COMPRESS-412&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;7254daa3f84a2b7780050da936304ea42db324ef on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="16052934" author="bodewig" created="Sat, 17 Jun 2017 18:32:57 +0000"  >&lt;p&gt;Many thanks!&lt;/p&gt;

&lt;p&gt;Our workflow is that we mark an issue as resolved once the commit has been pushed to the ASF repo - and the reporter may close it or not. I don&apos;t think we really ever assign issues. Too few people who&apos;d actually work on an issue, it is easier to coordinate on the dev list.&lt;/p&gt;</comment>
                            <comment id="16052935" author="githubbot" created="Sat, 17 Jun 2017 18:35:14 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/35&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/35&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Jun 2017 19:28:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-compress/pull/33]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gdvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-411] TarUtils.formatLongOctalOrBinaryBytes never uses result of formatLongBinary</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-411</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;if the length &amp;lt; 9, formatLongBinary is executed, then overwritten by the results of formatBigIntegerBinary. &lt;/p&gt;

&lt;p&gt;If the results are not ignored, a unit test would fail.&lt;/p&gt;

&lt;p&gt;Also, do the binary hacks  need to support negative numbers? &lt;/p&gt;</description>
                <environment></environment>
        <key id="13079596">COMPRESS-411</key>
            <summary>TarUtils.formatLongOctalOrBinaryBytes never uses result of formatLongBinary</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sesuncedu">Simon Spero</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Jun 2017 23:10:49 +0000</created>
                <updated>Thu, 21 Sep 2017 06:22:24 +0000</updated>
                            <resolved>Thu, 21 Sep 2017 06:22:24 +0000</resolved>
                                    <version>1.14</version>
                                    <fixVersion>1.15</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16052382" author="sesuncedu" created="Fri, 16 Jun 2017 20:56:25 +0000"  >&lt;p&gt;I have fixed various issues in the handling of base256 encoded long numbers (I saw that negative numbers are used for STAR timestamps from before the epoch).&lt;/p&gt;

&lt;p&gt;One of the issues involved the maximum size of a number.  The number of bits available to represent the number is one less than the total number of bits available.  Thus, an eight byte field can hold up to a 63 bit 2&apos;s-complement integer.  &lt;br/&gt;
Further, the range of such a number is from -2 &lt;sup&gt;n-1&lt;/sup&gt; to 2 &lt;sup&gt;n-1&lt;/sup&gt; -1 , which can cause range overflows.  &lt;/p&gt;</comment>
                            <comment id="16052967" author="bodewig" created="Sat, 17 Jun 2017 19:44:27 +0000"  >&lt;p&gt;We deliberately store negative numbers in binary fields, yes.&lt;/p&gt;

&lt;p&gt;You are certainly correct the code looks weird, &lt;tt&gt;formatBigIntegerBinary&lt;/tt&gt; should probably be executed inside an &lt;tt&gt;else&lt;/tt&gt; branch.&lt;/p&gt;

&lt;p&gt;It&apos;s been a long time since I&apos;ve last looked at the way binary numbers are stored, but looking at the code we don&apos;t use the most significant bit to signal negative numbers but the first byte - which is 0xff for negative numbers and only the remaining 7 bytes are used. But we can use all 56 bits of these 7 bytes (assuming length is 8). &lt;/p&gt;

&lt;p&gt;As we are calculating the twos-complement in &lt;tt&gt;formatLongBinary&lt;/tt&gt; I think we should be safe, if we did it correctly &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Fix will be available soon.&lt;/p&gt;

&lt;p&gt;Also&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; val = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(value);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is going to result in a negative value for &lt;tt&gt;Long.MIN_VALUE&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16052974" author="bodewig" created="Sat, 17 Jun 2017 19:49:53 +0000"  >&lt;p&gt;I think the binary encoding should now be correct, the major problem was using &lt;tt&gt;0xff&amp;lt;&amp;lt;bits&lt;/tt&gt; rather than &lt;tt&gt;0xffl&amp;lt;&amp;lt;bits&lt;/tt&gt; when we wanted to set the most significant byte.&lt;/p&gt;</comment>
                            <comment id="16053045" author="sesuncedu" created="Sun, 18 Jun 2017 01:46:35 +0000"  >&lt;p&gt;I have a full set of fixes (apart from checking when decoding  that for base256 values the most significant bytes for lengths &amp;gt; 8 octets are just sign extension (i.e. 0x080 + 0x00&lt;/p&gt;
{p} or 0xff + 0xff{p}
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;The changes are mixed in with a bunch of other changes to TarUtils that are needed for direct encoding/decoding to ByteBuffers. I needed to make sure the byte array versions were behaving correctly as they are needed for tests.  Unfortunately most of the methods in TarUtils are declared public, as is the class, so the API has to be maintained, but my plan is to deprecate them, move their bodies into a package private class in test, and delegate the functionality to the new methods, which can remain package private (I doubt there is any especially pressing need for classes outside of the tar implementation to call these methods. &lt;/p&gt;</comment>
                            <comment id="16053047" author="sesuncedu" created="Sun, 18 Jun 2017 02:10:37 +0000"  >&lt;p&gt;Can you grant me &lt;tt&gt;Assign issues&lt;/tt&gt;, &lt;tt&gt;Assignable user&lt;/tt&gt;, &lt;tt&gt;Transition issues&lt;/tt&gt;, and &lt;tt&gt;Resolve issues&lt;/tt&gt; on the project (assuming that the review and commit/merge phase of the workflow take place  starting in RESOLVED). This doesn&apos;t include  &lt;tt&gt;Close issues&lt;/tt&gt;.  &lt;br/&gt;
&lt;a href=&quot;https://confluence.atlassian.com/adminjiraserver073/managing-project-permissions-861253293.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://confluence.atlassian.com/adminjiraserver073/managing-project-permissions-861253293.html&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;I keep wanting  to self assign and mark &quot;IN PROGRESS&quot;, so that effort isn&apos;t duplicated. &lt;br/&gt;
I &lt;em&gt;thing&lt;/em&gt; that  requires assign,assignable &amp;amp;  transition, though it depends on how the  workflow is set up. &lt;/p&gt;</comment>
                            <comment id="16053067" author="bodewig" created="Sun, 18 Jun 2017 03:56:52 +0000"  >&lt;p&gt;I agree that &lt;tt&gt;TarUtils&lt;/tt&gt; and all its methods being public is more of a historical accident than something that was really required. It&apos;s been that way since the very first version of the tar package I&apos;m aware of: &lt;a href=&quot;https://github.com/apache/ant/commit/bf94e2fb091644d9c249322d9574ab6bb1e6a3d8&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/ant/commit/bf94e2fb091644d9c249322d9574ab6bb1e6a3d8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We&apos;ve never used JIRA workflows in any structured way for this project. In particular we almost never assign issues. And RESOLVED is the state when the code has reached the ASF repo, not when a patch is available. Usually effort isn&apos;t duplicated by virtue of not enough people being around who would work on an issue anyway. If you intend to work on an issue, just leave a comment.&lt;/p&gt;</comment>
                            <comment id="16053266" author="sesuncedu" created="Sun, 18 Jun 2017 17:26:51 +0000"  >&lt;p&gt;Everything I&apos;ve opened so far has been something I&apos;m working on, or will be shortly  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Annoyingly, JIRA doesn&apos;t support workflow triggers from github integration until a Pull-Request is created (which the examples discuss as being suitable for moving into an &quot;In Review&quot; state  (merging a PR is the closeout state).  I&apos;m not sure if that works if the merge is done wrt the asf git (I&apos;ve always just assumed the github repository is a one-way mirror). &lt;/p&gt;

&lt;p&gt;What I really want is some way to only not receive a billion different notifications for every commit or comment -  I really wish I hadn&apos;t found the rat issue that was breaking coveralls &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://confluence.atlassian.com/adminjiraserver071/configuring-workflow-triggers-802592811.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://confluence.atlassian.com/adminjiraserver071/configuring-workflow-triggers-802592811.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16053527" author="bodewig" created="Mon, 19 Jun 2017 06:39:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;Everything I&apos;ve opened so far has been something I&apos;m working on, or will be shortly &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This may be true in your case but for most JIRAs the reporter is not the one who&apos;s going to provide the changes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The issue of where to discuss things is bothering me as well. github is a read-only mirror but PRs are becoming more important than patches attached to JIRA lately. Comments on PRs get reflected in JIRA but not the other way around, so for review comments I prefer to use github. For discussion about the content of the issue itself - what is the problem, is there a problem at all? - I prefer JIRA. And then there are things that may need a bigger audience than two people involved in a single JIRA ticket in order to get them resolved, this where I really prefer the mailing list over any tracker.&lt;/p&gt;</comment>
                            <comment id="16053720" author="sesuncedu" created="Mon, 19 Jun 2017 09:48:00 +0000"  >&lt;p&gt;The mailing list suffers from the billions of duplicated emails from jira&lt;br/&gt;
vs github (featuring coveralls).&lt;br/&gt;
Wait  - I think I see your point. The volume is such that I have missed&lt;br/&gt;
important emails that need reply (eg I need to reply to an email of yours&lt;br/&gt;
about how users would identify versions to report in OSGI situations (it&lt;br/&gt;
really needs illustration from Kafka /Felix (which in turn requires a faux&lt;br/&gt;
compress to add multi versions, and multi issues.)&lt;/p&gt;

&lt;p&gt;The conclusolory statement that &quot;its not a problem&quot; is not helpful. Showing&lt;br/&gt;
what would be sent is.&lt;br/&gt;
The real confusion comes from bad declarations ; other issues comes from&lt;br/&gt;
failed resolution. This former can be pom tracing hell ; the latter is&lt;br/&gt;
interpreting constraint satisfaction problem errors. Both get better with&lt;br/&gt;
more precise versions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; But that&apos;s just me saying that.&lt;/p&gt;

</comment>
                            <comment id="16053800" author="bodewig" created="Mon, 19 Jun 2017 10:58:02 +0000"  >&lt;p&gt;I&apos;m afraid this is the wrong place to discuss the meta question &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I had not noticed how dev@ had become, see &lt;a href=&quot;https://lists.apache.org/thread.html/16e6144c52c8639aca9da1b2be0acc40e6b29469c21a64d062b4c39c@%3Cdev.commons.apache.org%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://lists.apache.org/thread.html/16e6144c52c8639aca9da1b2be0acc40e6b29469c21a64d062b4c39c@%3Cdev.commons.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m not saying &quot;its not a problem&quot; would be a helpful response, but &quot;I don&apos;t see the problem, please explain it to me, convince me&quot; is.&lt;/p&gt;</comment>
                            <comment id="16097647" author="bodewig" created="Sun, 23 Jul 2017 14:36:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sesuncedu&quot; class=&quot;user-hover&quot; rel=&quot;sesuncedu&quot;&gt;Simon Spero&lt;/a&gt; are you still planning to add anything on top of my fix or can we close this?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 17 Jun 2017 19:44:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g8fj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-406] BUILDING.md is missing license header </title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-406</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;There is no license header in BUILDING.md. &lt;br/&gt;
This angers the rat&lt;/p&gt;</description>
                <environment></environment>
        <key id="13078957">COMPRESS-406</key>
            <summary>BUILDING.md is missing license header </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sesuncedu">Simon Spero</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Jun 2017 16:40:36 +0000</created>
                <updated>Mon, 12 Jun 2017 14:19:46 +0000</updated>
                            <resolved>Mon, 12 Jun 2017 14:19:46 +0000</resolved>
                                                    <fixVersion>1.15</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16046028" author="githubbot" created="Sun, 11 Jun 2017 16:43:57 +0000"  >&lt;p&gt;GitHub user sesuncedu opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-406&quot; title=&quot;BUILDING.md is missing license header &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-406&quot;&gt;&lt;del&gt;COMPRESS-406&lt;/del&gt;&lt;/a&gt; BUILDING.md is missing license header&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Simon Spero &amp;lt;sesuncedu@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sesuncedu/commons-compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sesuncedu/commons-compress&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-406&quot; title=&quot;BUILDING.md is missing license header &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-406&quot;&gt;&lt;del&gt;COMPRESS-406&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/29.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/29.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #29&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 135b0b7743633427b09c6c7c90d7809749c9a2fa&lt;br/&gt;
Author: Simon Spero &amp;lt;sesuncedu@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-06-11T16:43:36Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-406&quot; title=&quot;BUILDING.md is missing license header &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-406&quot;&gt;&lt;del&gt;COMPRESS-406&lt;/del&gt;&lt;/a&gt; BUILDING.md is missing license header&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Simon Spero &amp;lt;sesuncedu@gmail.com&amp;gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16046029" author="githubbot" created="Sun, 11 Jun 2017 16:48:52 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/29&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/11922155/badge)](https://coveralls.io/builds/11922155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/11922155/badge)](https://coveralls.io/builds/11922155&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Changes Unknown when pulling *&lt;b&gt;135b0b7743633427b09c6c7c90d7809749c9a2fa on sesuncedu:&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-406&quot; title=&quot;BUILDING.md is missing license header &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-406&quot;&gt;&lt;del&gt;COMPRESS-406&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into ** on apache:master**.&lt;/p&gt;
</comment>
                            <comment id="16046033" author="githubbot" created="Sun, 11 Jun 2017 16:55:16 +0000"  >&lt;p&gt;Github user sesuncedu commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Pleasing the rat has awakened the coveralls. &lt;/p&gt;
</comment>
                            <comment id="16046606" author="githubbot" created="Mon, 12 Jun 2017 14:19:42 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/29&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16046607" author="bodewig" created="Mon, 12 Jun 2017 14:19:46 +0000"  >&lt;p&gt;fixed, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 11 Jun 2017 16:43:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g5cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-401] Index out of bound when using FramedLZ4CompressorOutputStream or BlockLZ4CompressorOutputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-401</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The following java snippets fail with an index out of bound exception&lt;/p&gt;

&lt;p&gt;    FileInputStream fis = new FileInputStream(new File(&quot;P:\\Data&lt;br class=&quot;atl-forced-newline&quot; /&gt;orders_5m.csv&quot;));&lt;br/&gt;
        FileOutputStream fos = new FileOutputStream(new File(&quot;P:\\Data&lt;br class=&quot;atl-forced-newline&quot; /&gt;orders_5m.csv.lz4&quot;));&lt;/p&gt;

&lt;p&gt;        BufferedOutputStream out = new BufferedOutputStream(fos);&lt;br/&gt;
        FramedLZ4CompressorOutputStream lzOut = new FramedLZ4CompressorOutputStream(out);&lt;/p&gt;

&lt;p&gt;        final byte[] buffer = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;1 * 1024 * 1024&amp;#93;&lt;/span&gt;;&lt;br/&gt;
        int n = 0;&lt;br/&gt;
        while (-1 != (n = fis.read(buffer))) &lt;/p&gt;
{
            lzOut.write(buffer, 0, n);
        }
&lt;p&gt;        lzOut.close();&lt;br/&gt;
        fis.close();&lt;/p&gt;


&lt;p&gt;Also the Lz4 Example in &lt;a href=&quot;https://commons.apache.org/proper/commons-compress/examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://commons.apache.org/proper/commons-compress/examples.html&lt;/a&gt; contains errors&lt;/p&gt;</description>
                <environment></environment>
        <key id="13076805">COMPRESS-401</key>
            <summary>Index out of bound when using FramedLZ4CompressorOutputStream or BlockLZ4CompressorOutputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manuel.pagliai.visokio">Manuel Pagliai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Jun 2017 10:10:41 +0000</created>
                <updated>Tue, 13 Jun 2017 15:26:41 +0000</updated>
                            <resolved>Tue, 13 Jun 2017 15:22:21 +0000</resolved>
                                    <version>1.14</version>
                                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16034457" author="bodewig" created="Fri, 2 Jun 2017 10:24:52 +0000"  >&lt;p&gt;This very likely depends on the input. Can you share the file that causes the exception?&lt;/p&gt;

&lt;p&gt;It would be good if you could provide the stack trace of the exception you receive.&lt;/p&gt;

&lt;p&gt;As for the examples, it would help if you could point out the errors a bit more explicitly &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16036685" author="manuel.pagliai.visokio" created="Mon, 5 Jun 2017 08:51:39 +0000"  >&lt;p&gt;Hi Stefan thank you for your help,&lt;/p&gt;

&lt;p&gt;It is not an issue for me to share the file, but unfortunately the file used in the example is quite large ~ 320MB, and Jira does not allow me to upload it. Is there another way I can upload the file ?&lt;/p&gt;

&lt;p&gt;As far as the examples go: In the LZ4 section, second example line &lt;/p&gt;

&lt;p&gt;BufferedOutputStream out = new BufferedInputStream(out);&lt;/p&gt;

&lt;p&gt;should really be: &lt;/p&gt;

&lt;p&gt;BufferedOutputStream out = new BufferedOutputStream(fout);&lt;/p&gt;

&lt;p&gt;Also the declaration of the variable buffersize is missing.&lt;/p&gt;

&lt;p&gt;thanks, Manuel&lt;/p&gt;</comment>
                            <comment id="16044219" author="bodewig" created="Fri, 9 Jun 2017 09:36:34 +0000"  >&lt;p&gt;Sorry for the radio silence, took a few days off.&lt;/p&gt;

&lt;p&gt;Many thanks for the hint for the documentation, I had seen the &lt;tt&gt;fout&lt;/tt&gt;-case myself after you raised this ticket and fixed it with git commit 223b5d9 but haven&apos;t regenerated the site since then. The missing declaration of &lt;tt&gt;buffersize&lt;/tt&gt; is deliberate as only you can now a proper buffer size for your use case.&lt;/p&gt;

&lt;p&gt;Can you compress the file in question with something efficient like xz or bzip2 or just gzip to make it smaller? I would have suggested you send it to my by email but several 100 MB is quite big. Can you place it anywhere for me to download? Drop me an email and we can try to go from there.&lt;/p&gt;</comment>
                            <comment id="16044366" author="manuel.pagliai.visokio" created="Fri, 9 Jun 2017 12:26:11 +0000"  >&lt;p&gt;The file used to reproduce the issue&lt;/p&gt;</comment>
                            <comment id="16044368" author="manuel.pagliai.visokio" created="Fri, 9 Jun 2017 12:27:45 +0000"  >&lt;p&gt;Hello Stefan, I uploaded a 7zip archive containing the csv file to reproduce the issue.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;Manuel&lt;/p&gt;</comment>
                            <comment id="16045638" author="bodewig" created="Sat, 10 Jun 2017 18:06:42 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=manuel.pagliai.visokio&quot; class=&quot;user-hover&quot; rel=&quot;manuel.pagliai.visokio&quot;&gt;Manuel Pagliai&lt;/a&gt;, unfortunately I don&apos;t get any exception when compressing the file (using your code, except I&apos;m doing a try-with-resources):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileInputStream fis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;orders_5m.csv&quot;&lt;/span&gt;);
             FileOutputStream fos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;orders_5m.csv.lz4&quot;&lt;/span&gt;));
             BufferedOutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedOutputStream(fos);
             FramedLZ4CompressorOutputStream lzOut = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FramedLZ4CompressorOutputStream(out)) {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] buffer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[1024 * 1024];
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n = 0;
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (-1 != (n = fis.read(buffer))) {
                lzOut.write(buffer, 0, n);
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it takes almost an hour on my machine but finishes without any exception.&lt;/p&gt;

&lt;p&gt;Can you show us the stack trace you see?&lt;/p&gt;</comment>
                            <comment id="16048012" author="manuel.pagliai.visokio" created="Tue, 13 Jun 2017 15:22:00 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I have tried again, and this time I had no exceptions.... (I downloaded the jars again from the website). Maybe there was an error with my setup... &lt;/p&gt;

&lt;p&gt;thank you for your help anyway.&lt;/p&gt;

&lt;p&gt;Manuel&lt;/p&gt;</comment>
                            <comment id="16048023" author="bodewig" created="Tue, 13 Jun 2017 15:26:41 +0000"  >&lt;p&gt;I&apos;m glad it now works for you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12872253" name="orders_5m.7z" size="35321132" author="manuel.pagliai.visokio" created="Fri, 9 Jun 2017 12:26:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Jun 2017 10:24:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fsun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-399] OSGI package versions are overly pessimistic, except when they&apos;re overly optimisic </title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-399</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The OSGI versions in the current distributions are not being correctly generated.  OSGI relies on package version numbers following semantic version properly for correct resolution.  &lt;/p&gt;

&lt;p&gt;Current version numbers have been generated from the maven version. This has lead to new minor version increases for packages that have no API changed; it has also concealed   major (breaking) changes to several packages since 1.0.&lt;/p&gt;

&lt;p&gt;I have created two branches that address the issue.&lt;br/&gt;
Both add the bundle:baseline goal to the verify phase of the build. &lt;br/&gt;
The also both have packageinfo files added to every package, containing the package version. These are picked up by the bundle manifest generator, and are used if no explicit version is given in the &quot;Export-Package&quot; command. &lt;/p&gt;

&lt;p&gt;Both branches bump the major version number for packages with any minor changes to 2.0.0.  This makes the bundle correct, but does not fix improper import declarations made by users of earlier bundles.   &lt;/p&gt;

&lt;p&gt;One branch uses the version number  from the oldest version that has no changes when compared to HEAD, and which has not had any breaking changes since 1.0.0.  This will fail the build because version numbers should be increasing, and may cause issues if an importing bundle uses a range that requires an identical, but higher numbered version of the package&lt;/p&gt;

&lt;p&gt;The other branch uses version 1.14.0 for all packages with no major changes. &lt;/p&gt;

&lt;p&gt;A third alternative, which I didn&apos;t add, is to just set all packages be version 1.14.0, and just bump major versions when required going forward. The bulk of the major changes happened a good few versions back,  so it&apos;s not as bad as it could be. &lt;/p&gt;

&lt;p&gt;If you have a preferred option, I can create a pull request on Github &lt;/p&gt;</description>
                <environment></environment>
        <key id="13076696">COMPRESS-399</key>
            <summary>OSGI package versions are overly pessimistic, except when they&apos;re overly optimisic </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sesuncedu">Simon Spero</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Jun 2017 00:39:57 +0000</created>
                <updated>Sun, 23 Jul 2017 14:35:17 +0000</updated>
                                            <version>1.14</version>
                                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="0">0h</timeoriginalestimate>
                            <timeestimate seconds="0">0h</timeestimate>
                                        <comments>
                            <comment id="16034292" author="bodewig" created="Fri, 2 Jun 2017 07:47:29 +0000"  >&lt;p&gt;I must admit that OSGi has been a low priority for us, likely neither of the people working on Compress uses OSGi.&lt;/p&gt;

&lt;p&gt;Personally I&apos;d go with your third option. Is there some sort of tooling that would tell us we are changing a package in an incompatible way so we&apos;d know when to bump anything? We do run japicmp &lt;a href=&quot;http://commons.apache.org/proper/commons-compress/japicmp.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-compress/japicmp.html&lt;/a&gt; but I&apos;m not sure it is reliable enough.&lt;/p&gt;

&lt;p&gt;At first I was afraid using new major versions would cause trouble when/if we ever wanted to create a Compress 2.0, but then again we would change the base package to be org.apache.commons.compress2 for this release.&lt;/p&gt;</comment>
                            <comment id="16034816" author="sesuncedu" created="Fri, 2 Jun 2017 14:55:06 +0000"  >&lt;p&gt;I ended up doing the third option, which probably needs a squashing. &lt;/p&gt;

&lt;p&gt;There&apos;s a tool to tell you when to bump... it&apos;s a different goal  (baseline) of the plugin you&apos;e already using. &lt;/p&gt;

&lt;p&gt;It&apos;s already set up in all three branches, and will fail the build at the verify stage if the version numbers are mismatched. &lt;/p&gt;

&lt;p&gt;[For semantic versioning, major versions  are needed for any  breaking api changes.  Breaking apis is usually not a good thing, but it&apos;s better to make it obvious than to hide it.&lt;/p&gt;

&lt;p&gt; The good thing about osgi modularity is that internal changes to private packages don&apos;t count.  Also, when resolving a module, as long as there&apos;s some set of versions of every required dependency packages that are consistent with all package version constraints,  a bundle can be resolved.  So if my module needs to use packages from modules A and B, with the former requiring a package from Compress between 1.4 and 2, and the latter requiring one between 1.5 and 2, the system will use package version 1.5.  This is fine, as long as only non-breaking changes happened.  &lt;/p&gt;

&lt;p&gt; The trouble with OSGI is that until you understand why it does things the way it does, it just seems ridiculously complicated, and until you learn about the bits that are there to take care of the complexity for you (e.g. Declarative Services), handling the dynamic of the environment is painful. &lt;br/&gt;
I hated it until I started trying to work with Jigsaw early last year. The issues with jigsaw help explain a  lot of the design decisions in OSGI  ]&lt;/p&gt;</comment>
                            <comment id="16035088" author="githubbot" created="Fri, 2 Jun 2017 17:30:07 +0000"  >&lt;p&gt;GitHub user sesuncedu opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-399&quot; title=&quot;OSGI package versions are overly pessimistic, except when they&amp;#39;re overly optimisic &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-399&quot;&gt;COMPRESS-399&lt;/a&gt; OSGI package versions are overly pessimistic, except when they&apos;re overly optimisic&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add packageinfo files for per-package version settings.&lt;/li&gt;
	&lt;li&gt;Initialize to 1.14&lt;/li&gt;
	&lt;li&gt;Copy packageinfo files in resource phase.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Use latest bundle plugin.&lt;/li&gt;
	&lt;li&gt;Remove  headers from generate manifest.&lt;/li&gt;
	&lt;li&gt;Pretty-print the manifest.&lt;/li&gt;
	&lt;li&gt;Add bundle:baseline to the verify phase&lt;/li&gt;
	&lt;li&gt;Add bundle:baseline-report to the site phase&lt;/li&gt;
	&lt;li&gt;To change the base version from default (i.e. previous release) set comparisonVersion property&lt;/li&gt;
	&lt;li&gt;Change travis build to use verify instead of test&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Signed-off-by: Simon Spero &amp;lt;sesuncedu@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sesuncedu/commons-compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sesuncedu/commons-compress&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-399&quot; title=&quot;OSGI package versions are overly pessimistic, except when they&amp;#39;re overly optimisic &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-399&quot;&gt;COMPRESS-399&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/26.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #26&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16035115" author="sesuncedu" created="Fri, 2 Jun 2017 17:45:09 +0000"  >&lt;p&gt;(plus a on-line commit to add **/packageinfo to the rat excludes.  Gets me EVERY SINGLE TIME! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16035210" author="githubbot" created="Fri, 2 Jun 2017 18:38:19 +0000"  >&lt;p&gt;Github user garydgregory commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi,&lt;/p&gt;

&lt;p&gt;    Should any of this work also apply to commons-parent?&lt;/p&gt;

&lt;p&gt;    Gary&lt;/p&gt;</comment>
                            <comment id="16035372" author="githubbot" created="Fri, 2 Jun 2017 20:33:01 +0000"  >&lt;p&gt;Github user sesuncedu commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It&apos;s difficult to generalize, since the packageinfo files have to be put in&lt;br/&gt;
    with the source code. Since a  export header parameter with an explicit&lt;br/&gt;
    version overrides packageinfo and annotations, defaults can be problematic.&lt;/p&gt;

&lt;p&gt;    Adding the resource copy and rat excludes is good, as is keeping up with&lt;br/&gt;
    the felix bundle versions.&lt;/p&gt;

&lt;p&gt;    Adding a bundle:baseline goal to the parent verify phase is a really,&lt;br/&gt;
    really good idea if bundle headers are going to be generated. Package&lt;br/&gt;
    versions MUST  follow semver (bundle versions also, but to a lesser&lt;br/&gt;
    extent).&lt;/p&gt;


&lt;p&gt;    Maven versions theoretically ought to too, but dependencies are usually&lt;br/&gt;
    point versions not ranges.&lt;/p&gt;

&lt;p&gt;    (Of course, there&apos;s always guava, where version is a major release, except&lt;br/&gt;
    for bug fixes, which are minor.)&lt;/p&gt;

&lt;p&gt;    The real  work is getting the api and implementation(s) properly&lt;br/&gt;
    modularized so that the api isn&apos;t always affected by implementation&lt;br/&gt;
    changes.  At least jigsaw has gotten people to start thinking about&lt;br/&gt;
    modules. Not always sensibly....&lt;/p&gt;

&lt;p&gt;    On Jun 2, 2017 2:38 PM, &quot;Gary Gregory&quot; &amp;lt;notifications@github.com&amp;gt; wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; Hi,&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; Should any of this work also apply to commons-parent?&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; Gary&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; You are receiving this because you authored the thread.&lt;br/&gt;
    &amp;gt; Reply to this email directly, view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/commons-compress/pull/26#issuecomment-305876373&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26#issuecomment-305876373&lt;/a&gt;&amp;gt;,&lt;br/&gt;
    &amp;gt; or mute the thread&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/notifications/unsubscribe-auth/AAZIG7Xv74lnd98TXW3kzw9huxG2US7Rks5sAFaZgaJpZM4NukX5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/notifications/unsubscribe-auth/AAZIG7Xv74lnd98TXW3kzw9huxG2US7Rks5sAFaZgaJpZM4NukX5&lt;/a&gt;&amp;gt;&lt;br/&gt;
    &amp;gt; .&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16035516" author="githubbot" created="Fri, 2 Jun 2017 22:11:58 +0000"  >&lt;p&gt;Github user joehni commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Why are those packageinfo files in src/main/java instead of src/main/resources as it is common in Maven builds? Now you have to configure explicitly these files as resources. On top of it, I don&apos;t like the idea of modifying these files for each release manually. I&apos;d look for a solution that generates these files automatically into target/generated-resources. Such a plugin should not be difficult.&lt;/p&gt;</comment>
                            <comment id="16035682" author="githubbot" created="Sat, 3 Jun 2017 00:22:20 +0000"  >&lt;p&gt;Github user sesuncedu commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The packageinfo files are in the source tree because they&apos;re source files,&lt;br/&gt;
    and provide metadata for the package.&lt;br/&gt;
    You can also use a package annotation on package-info.java, which puts a&lt;br/&gt;
    Class Retention annotation on the packages package-info.class.&lt;/p&gt;

&lt;p&gt;    Examples:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/blob/trunk/dependencymanager/org.apache.felix.dependencymanager.annotation/src/org/apache/felix/dm/annotation/api/packageinfo&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/felix/blob/trunk/dependencymanager/org.apache.felix.dependencymanager.annotation/src/org/apache/felix/dm/annotation/api/packageinfo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/felix/blob/trunk/converter/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/felix/blob/trunk/converter/&lt;/a&gt;&lt;br/&gt;
    converter/src/main/java/org/apache/felix/converter/dto/package-info.java&lt;/p&gt;

&lt;p&gt;    (Requires provided / compileOnly dependency on the osgi annotation bundle).&lt;/p&gt;

&lt;p&gt;    On Fri, Jun 2, 2017 at 6:11 PM, J&#246;rg Schaible &amp;lt;notifications@github.com&amp;gt;&lt;br/&gt;
    wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; Why are those packageinfo files in src/main/java instead of&lt;br/&gt;
    &amp;gt; src/main/resources as it is common in Maven builds? Now you have to&lt;br/&gt;
    &amp;gt; configure explicitly these files as resources. On top of it, I don&apos;t like&lt;br/&gt;
    &amp;gt; the idea of modifying these files for each release manually. I&apos;d look for a&lt;br/&gt;
    &amp;gt; solution that generates these files automatically into&lt;br/&gt;
    &amp;gt; target/generated-resources. Such a plugin should not be difficult.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; You are receiving this because you authored the thread.&lt;br/&gt;
    &amp;gt; Reply to this email directly, view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/commons-compress/pull/26#issuecomment-305920965&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26#issuecomment-305920965&lt;/a&gt;&amp;gt;,&lt;br/&gt;
    &amp;gt; or mute the thread&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/notifications/unsubscribe-auth/AAZIGza5aeOCDCCwJhvZ1jufn0jZ7BkWks5sAIitgaJpZM4NukX5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/notifications/unsubscribe-auth/AAZIGza5aeOCDCCwJhvZ1jufn0jZ7BkWks5sAIitgaJpZM4NukX5&lt;/a&gt;&amp;gt;&lt;br/&gt;
    &amp;gt; .&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16035916" author="githubbot" created="Sat, 3 Jun 2017 09:47:30 +0000"  >&lt;p&gt;Github user joehni commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This is a Maven project and we follow Maven conventions. Anything that is processed by a Java compiler belongs into src/main/java (true for package-info.java files, not true for packageinfo files or package.html files). Anything else that should be collected in a jar file is a resource and belongs therefore into src/main/resources. The fact that you have to reconfigure the resources clearly demonstrates this.&lt;/p&gt;

&lt;p&gt;    Nevertheless, these files will make our release process even more cumbersome if they are checked in as sources. The nature and content of the files identifies them clearly as something that can be generated. We might even be able to use the antrun plugin directly. If we put it into a profile and activate it based on file existence, we might even move it into commons-parent.&lt;/p&gt;</comment>
                            <comment id="16037216" author="sesuncedu" created="Mon, 5 Jun 2017 17:03:20 +0000"  >&lt;p&gt;I have replaced the packageinfo files with the equivalent annotated package-info.java files. &lt;/p&gt;

&lt;p&gt;There seems to be some confusion about what these files are for, which is probably made worse by the choice made earlier in the work-log to &lt;em&gt;initialize&lt;/em&gt;  the files with the same  version number (1.14.0).  I&apos;ll see if I can explain some of the issues, using commons-lang as an example (since I happen to have some of the details handy; I&apos;m ignoring micro releases).&lt;/p&gt;

&lt;p&gt;OSGI uses semantic versioning for package versions.  Although it can have multiple versions of the same bundle loaded at the same time, each bundle can only use a single version of any given package.  If a client bundle wants to use two bundles, each of  which has a  different version range for a package, and which  expose their use of the package to the client, the resolver needs  to find a common version that satisfies both sets of constraints (If the package is only used internally to the bundle, and doesn&apos;t impose constraints on a package that is used in the api, it is less likely to cause problems). &lt;/p&gt;

&lt;p&gt;Between release 3.0 and 3.1 of commons-lang, the only binary-compatibility related api changes were minor level (backwards binary compatible), in two packages.&lt;br/&gt;
org.apache.commons.lang3 and org.apache.commons.lang3.exception. However, &lt;em&gt;all&lt;/em&gt;   package versions were bumped to 3.1.0 (matching the release number).  &lt;/p&gt;

&lt;p&gt;The effect of this would be to stop any bundles compiled against  release 3.1 from using the release 3.0 bundle, _even if they didn&apos;t use the two affected packages.&lt;/p&gt;

&lt;p&gt;For version 3.2, all package versions were again set to 3.2.0 to match the release.&lt;br/&gt;
 There were minor changes to several packages: a second minor level change to org.apache.commons.lang3, and initial minor changes to org.apache.commons.lang3.reflect, org.apache.commons.lang3.text, org.apache.commons.lang3.text.translate, and org.apache.commons.lang3.tuple.&lt;/p&gt;

&lt;p&gt;There was also a  &lt;b&gt;MAJOR&lt;/b&gt; (non binary-backwards-compatible) change to org.apache.commons.lang3.time.  Now,  instead of  versions being overly restrictive , there is hidden breaking change.&lt;/p&gt;

&lt;p&gt;Although it is possible to automatically bump package versions whenever an api change is detected, it is probably a  better practice to detect api changes in the verify stage,   and have the person who caused the api change  decide if such a change was intended, and if so change the package version number.&lt;/p&gt;

&lt;p&gt;This is the role of  the bundle:baseline goal. In addition to detecting changes, it also suggests alternative package versions. &lt;/p&gt;
</comment>
                            <comment id="16037794" author="githubbot" created="Mon, 5 Jun 2017 22:43:30 +0000"  >&lt;p&gt;Github user sesuncedu commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    A key point is that these  files that are not modified for each release.&lt;br/&gt;
    They are only changed when the package version changes, which only happens&lt;br/&gt;
    when  the API changes (and was supposed to).&lt;br/&gt;
    If the package API does  not change, then the package version should &lt;em&gt;not&lt;/em&gt;&lt;br/&gt;
    be modified.&lt;/p&gt;

&lt;p&gt;    Also, changing the package version number happens in the development phase&lt;br/&gt;
    of the lifecycle rather than the release phase.&lt;/p&gt;

&lt;p&gt;    On Mon, Jun 5, 2017, 6:26 PM J&#246;rg Schaible &amp;lt;notifications@github.com&amp;gt; wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; ... and again we have a bunch of files that we have to modify for every&lt;br/&gt;
    &amp;gt; release.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; You are receiving this because you authored the thread.&lt;br/&gt;
    &amp;gt; Reply to this email directly, view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/commons-compress/pull/26#issuecomment-306328119&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26#issuecomment-306328119&lt;/a&gt;&amp;gt;,&lt;br/&gt;
    &amp;gt; or mute the thread&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/notifications/unsubscribe-auth/AAZIGyAYQTfOaV8sY3a7k0YDqMx1qsoaks5sBICggaJpZM4NukX5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/notifications/unsubscribe-auth/AAZIGyAYQTfOaV8sY3a7k0YDqMx1qsoaks5sBICggaJpZM4NukX5&lt;/a&gt;&amp;gt;&lt;br/&gt;
    &amp;gt; .&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="16040125" author="githubbot" created="Wed, 7 Jun 2017 04:00:40 +0000"  >&lt;p&gt;Github user bodewig commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Sorry, I&apos;m currently swamped and won&apos;t find time to look into this for the coming days. @sesuncedu there is a discussion going on on the dev mailing list that you may want to join -&amp;gt; &lt;a href=&quot;https://lists.apache.org/thread.html/4a205ffad0ae0886113e76f358a6fbe59dfdf113f194c5fa687cdd69@%3Cdev.commons.apache.org%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://lists.apache.org/thread.html/4a205ffad0ae0886113e76f358a6fbe59dfdf113f194c5fa687cdd69@%3Cdev.commons.apache.org%3E&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Jun 2017 07:47:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fs6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COMPRESS-398] Uncorrect string terminal symbol in entry when creating Tar archive using TarArchiveOutputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-398</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I create Tar archive using TarArchiveOutputStream. And I&apos;ve got one contradiction in output achive file with Tar-file format specification.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.gnu.org/software/tar/manual/html_node/Standard.html#SEC186&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://www.gnu.org/software/tar/manual/html_node/Standard.html#SEC186&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Specification has next sentention for entry header fields:&lt;/p&gt;

&lt;p&gt;&quot;The name, linkname, magic, uname, and gname are null-terminated character strings. All other fields are zero-filled octal numbers in ASCII. Each numeric field of width w contains w minus 1 digits, and a null.&quot;&lt;/p&gt;

&lt;p&gt;But in file generated TarArchiveOutputStream octal numbers fields (mode, size, checksum etc) has terminated character not NULL (0x00) but SPACE (0x20), so some programs have problems while work with this files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13075179">COMPRESS-398</key>
            <summary>Uncorrect string terminal symbol in entry when creating Tar archive using TarArchiveOutputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="YaroslavTrymbach">Yaroslav Trymbach</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 May 2017 14:10:42 +0000</created>
                <updated>Sun, 23 Jul 2017 15:20:02 +0000</updated>
                            <resolved>Sun, 23 Jul 2017 15:20:02 +0000</resolved>
                                    <version>1.14</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16027756" author="bodewig" created="Sun, 28 May 2017 09:37:51 +0000"  >&lt;p&gt;Unfortunately the GNU tar page contradicts other sources, see &lt;a href=&quot;https://www.freebsd.org/cgi/man.cgi?query=tar&amp;amp;sektion=5&amp;amp;manpath=FreeBSD+8-current&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://www.freebsd.org/cgi/man.cgi?query=tar&amp;amp;sektion=5&amp;amp;manpath=FreeBSD+8-current&lt;/a&gt; for example.&lt;/p&gt;

&lt;p&gt;under &quot;Old style archive format&quot;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;     the mode,	uid, and gid fields must end in	a space	and a&lt;br/&gt;
     null byte;	the size and mtime fields must end in a	space; the checksum is&lt;br/&gt;
     terminated	by a null and a	space.	Early implementations filled the&lt;br/&gt;
     numeric fields with leading spaces.  This seems to	have been common prac-&lt;br/&gt;
     tice until	the IEEE Std 1003.1-1988 (``POSIX.1&apos;&apos;) standard	was released.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;under &quot;POSIX ustar Archives&quot;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;     POSIX requires numeric fields to be	zero-padded in&lt;br/&gt;
     the front,	and requires them to be	terminated with	either space or	NUL&lt;br/&gt;
     characters.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There are lots of dialects and we have special case codes for most of them. There are dialects that use binary values inside the size fields in order to represent sizes bigger than 8GiB for example. Any application that tries to read tar archives is bound to replicate the same set of heuristics in order to adapt to the multitude of dialects.&lt;/p&gt;

&lt;p&gt;Commons Compress by default uses the &quot;old ustar&quot; format as it is understood by most applications trying to read a tar and here a terminating SPACE has been the most common option.&lt;/p&gt;</comment>
                            <comment id="16027779" author="sebb@apache.org" created="Sun, 28 May 2017 10:42:19 +0000"  >&lt;p&gt;We should add more of this info to the archivers.tar package Javadoc &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Also maybe we need to optionally allow for different terminators on output.&lt;br/&gt;
Perhaps provide a config class that can be passed to constructors?&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://commons.apache.org/proper/commons-compress/javadocs/api-1.13/org/apache/commons/compress/archivers/tar/package-summary.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-compress/javadocs/api-1.13/org/apache/commons/compress/archivers/tar/package-summary.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16097683" author="bodewig" created="Sun, 23 Jul 2017 15:20:02 +0000"  >&lt;p&gt;I&apos;ve updated the documentation and created &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-419&quot; title=&quot;Make output format of tar configurable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-419&quot;&gt;COMPRESS-419&lt;/a&gt; as enhancement request for possible extensions.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 28 May 2017 09:37:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fitb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-396] Import-Package for XZ for Java is missing</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-396</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;It seems the bundle plugin only uses the last &lt;tt&gt;Import-Package&lt;/tt&gt; element and so the manifest of the 1.14 jar lacks the import for XZ for Java.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13074178">COMPRESS-396</key>
            <summary>Import-Package for XZ for Java is missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 May 2017 12:12:31 +0000</created>
                <updated>Tue, 23 May 2017 12:15:31 +0000</updated>
                            <resolved>Tue, 23 May 2017 12:15:31 +0000</resolved>
                                    <version>1.14</version>
                                    <fixVersion>1.15</fixVersion>
                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="16021116" author="bodewig" created="Tue, 23 May 2017 12:15:31 +0000"  >&lt;p&gt;fixed with Commit 6917adc&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            43 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fcmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-394] [Zip] Local `Version Needed To Extract` does not match Central Directory</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-394</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;This is followup on an issue reported on Plexus Archiver - &lt;a href=&quot;https://github.com/codehaus-plexus/plexus-archiver/issues/57&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/codehaus-plexus/plexus-archiver/issues/57&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Plexus Archiver uses &lt;tt&gt;ZipArchiveOutputStream&lt;/tt&gt; to create zip archives. It constructs the &lt;tt&gt;ZipArchiveOutputStream&lt;/tt&gt; using &lt;tt&gt;BufferedOutputStream&lt;/tt&gt;. As a result the output do not provide random access and additional data descriptor records are added. Unfortunately this leads to different values being set for &lt;tt&gt;version needed to extract&lt;/tt&gt; field in the local file header and in the central directory. It looks like that the root cause is the way the local header &lt;tt&gt;version needed to extract&lt;/tt&gt; field value is calculated:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (phased &amp;amp;&amp;amp;  !isZip64Required(entry.entry, zip64Mode)){
            putShort(INITIAL_VERSION, buf, LFH_VERSION_NEEDED_OFFSET);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            putShort(versionNeededToExtract(zipMethod, hasZip64Extra(ze)), buf, LFH_VERSION_NEEDED_OFFSET);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see the need for data descriptors is not taken into account. On other hand when the central directory is created the following is used to determine the minimum required version&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; versionNeededToExtract(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; zipMethod, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; zip64) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (zip64) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ZIP64_MIN_VERSION;
        }
        &lt;span class=&quot;code-comment&quot;&gt;// requires version 2 as we are going to store length info
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// in the data descriptor
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (isDeflatedToOutputStream(zipMethod)) ?
                DATA_DESCRIPTOR_MIN_VERSION :
                INITIAL_VERSION;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As a side note: I&apos;m not a zip expert by any means so I could be wrong, but my understanding is that if Deflate compression is used then the minimum required version should be 2.0 regardless if data descriptors are used or not.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13071786">COMPRESS-394</key>
            <summary>[Zip] Local `Version Needed To Extract` does not match Central Directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="plamenttv">Plamen Totev</reporter>
                        <labels>
                            <label>zip</label>
                    </labels>
                <created>Sat, 13 May 2017 21:52:07 +0000</created>
                <updated>Tue, 20 Feb 2018 05:06:37 +0000</updated>
                            <resolved>Mon, 22 May 2017 16:13:22 +0000</resolved>
                                                    <fixVersion>1.15</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16009525" author="garydgregory" created="Sat, 13 May 2017 22:18:47 +0000"  >&lt;p&gt;Hi Plamen,&lt;/p&gt;

&lt;p&gt;We are in the middle of releasing version 1.14 ATM, which should hit the site in a couple of days at the most.&lt;/p&gt;

&lt;p&gt;We welcome patches with unit tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16010701" author="bodewig" created="Mon, 15 May 2017 15:26:52 +0000"  >&lt;p&gt;One could argue the current implementation was right as you don&apos;t need to support data descriptors if you&apos;ve read the central directory. But I must admit I don&apos;t recall whether the current logic is as it is because of something like this or is that way by accident.&lt;/p&gt;

&lt;p&gt;If you look at section 4.4.3.3 in &lt;a href=&quot;https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT&lt;/a&gt; the last paragraph&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;        When using ZIP64 extensions, the corresponding value in the&lt;br/&gt;
        zip64 end of central directory record MUST also be set.  &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;this implies the values inside the local file header and the central directory can be different. Not sure why infozip compains about it. Anyway, we should probably make things consistent.&lt;/p&gt;

&lt;p&gt;And you are certainly correct, APPNOTE lists &quot;DEFLATE&quot; as version 2.0. I&apos;ve got no idea why we use 1.0, it&apos;s always been that way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="16010705" author="bodewig" created="Mon, 15 May 2017 15:27:56 +0000"  >&lt;p&gt;forget the part about 4.4.3.3 on second read I see it talks about the &quot;end of central directory record&quot;, not the central directory entry.&lt;/p&gt;</comment>
                            <comment id="16012724" author="bodewig" created="Tue, 16 May 2017 16:57:55 +0000"  >&lt;p&gt;git commit 8a6bb56 &quot;fixes&quot; the problem by using version 2.0 when DEFLATE is used. But this is only an incomplete solution and I&apos;ll tackle the rest together with &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-395&quot; title=&quot;[Zip] Do not add data descriptor record when CRC and size values are known&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-395&quot;&gt;&lt;del&gt;COMPRESS-395&lt;/del&gt;&lt;/a&gt; (if we don&apos;t write a data descriptor then we need to transport this information in some way).&lt;/p&gt;</comment>
                            <comment id="16012922" author="plamenttv" created="Tue, 16 May 2017 18:52:52 +0000"  >&lt;p&gt;Stefan, thank you for looking into this and &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-395&quot; title=&quot;[Zip] Do not add data descriptor record when CRC and size values are known&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-395&quot;&gt;&lt;del&gt;COMPRESS-395&lt;/del&gt;&lt;/a&gt;, really appreciate it and the fast reaction. I know that both does not have big impact but still some tools issue warnings about that. &lt;/p&gt;

&lt;p&gt;I really would love to help with patches but I&apos;m in the middle of writing my master thesis, so I afraid I don&apos;t have the time &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16013035" author="bodewig" created="Tue, 16 May 2017 20:09:50 +0000"  >&lt;p&gt;Don&apos;t worry, Plamen. Thank you for your detailed analysis.&lt;/p&gt;</comment>
                            <comment id="16019748" author="bodewig" created="Mon, 22 May 2017 16:13:22 +0000"  >&lt;p&gt;should be fixed in master, would be good if you could double-check.&lt;/p&gt;</comment>
                            <comment id="16020108" author="plamenttv" created="Mon, 22 May 2017 20:12:02 +0000"  >&lt;p&gt;Thanks. I&apos;ve tried it and the version fields are consistent.&lt;/p&gt;</comment>
                            <comment id="16020708" author="bodewig" created="Tue, 23 May 2017 06:43:08 +0000"  >&lt;p&gt;Thanks&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13139531">COMPRESS-444</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 13 May 2017 22:18:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            43 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3exwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-393] flush in LZMACompressorOutputStream destroys stream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-393</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The javadocs of `flush` say it wouldn&apos;t do anything, but this is not true, it causes the wrapped XZ stream to throw an exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13069782">COMPRESS-393</key>
            <summary>flush in LZMACompressorOutputStream destroys stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 May 2017 15:09:49 +0000</created>
                <updated>Sun, 7 May 2017 15:12:45 +0000</updated>
                            <resolved>Sun, 7 May 2017 15:12:44 +0000</resolved>
                                    <version>1.13</version>
                                    <fixVersion>1.14</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15999882" author="bodewig" created="Sun, 7 May 2017 15:12:45 +0000"  >&lt;p&gt;fixed with trivial commit abfdf35&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3elkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-389] Inconsistent increment of &apos;loc&apos; in ZipFile.BoundedInputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-389</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ZipFile.BoundedInputStream.read() always increments loc, even if no bytes are read.&lt;/p&gt;

&lt;p&gt;However ZipFile.BoundedInputStream.read(byte[] b, int off, int len) only increments the field if some bytes were read.&lt;/p&gt;

&lt;p&gt;This looks wrong.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13066187">COMPRESS-389</key>
            <summary>Inconsistent increment of &apos;loc&apos; in ZipFile.BoundedInputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 23 Apr 2017 16:45:25 +0000</created>
                <updated>Wed, 26 Apr 2017 04:25:34 +0000</updated>
                            <resolved>Wed, 26 Apr 2017 04:25:34 +0000</resolved>
                                                    <fixVersion>1.14</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15980537" author="sebb@apache.org" created="Sun, 23 Apr 2017 22:03:51 +0000"  >&lt;p&gt;It looks like the read() method is never called at logical EOF, so it always reads one byte.&lt;/p&gt;</comment>
                            <comment id="15984119" author="kvr" created="Wed, 26 Apr 2017 03:23:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;Sebb&lt;/a&gt;: This was significantly changed in recent commit, therefore this can be probably closed.&lt;/p&gt;</comment>
                            <comment id="15984146" author="bodewig" created="Wed, 26 Apr 2017 04:25:34 +0000"  >&lt;p&gt;fixed with commit 0ee8f1e&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Apr 2017 03:23:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dzdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-384] Tar File EOF not being detected</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-384</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I&apos;ve created both a zip and tar file, with the same contents using the latest version of 7zip. When I read both archives using code of the form:&lt;/p&gt;

&lt;p&gt;ArchiveStreamFactory().createArchiveInputStream(format, inputStream);&lt;/p&gt;

&lt;p&gt;I notice that both formats correctly list their contents, however the Tar Input doesn&apos;t return a &quot;null&quot; entry when it hits the EOF from archiveStream.getNextEntry() &lt;/p&gt;

&lt;p&gt;this makes it hard to distinguish between a genuine EOF or a file which is still being written to. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10, JDK 1.8&lt;/p&gt;</environment>
        <key id="13062746">COMPRESS-384</key>
            <summary>Tar File EOF not being detected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jasons2000">Jason Shattu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Apr 2017 21:12:24 +0000</created>
                <updated>Tue, 16 May 2017 13:31:40 +0000</updated>
                            <resolved>Wed, 26 Apr 2017 17:52:18 +0000</resolved>
                                    <version>1.13</version>
                                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15964304" author="bodewig" created="Tue, 11 Apr 2017 12:38:18 +0000"  >&lt;p&gt;Thanks for the report Jason&lt;/p&gt;

&lt;p&gt;you are absolutely right when you expect &lt;tt&gt;TarArchiveInputStream&lt;/tt&gt; to return &lt;tt&gt;null&lt;/tt&gt; on &lt;tt&gt;getNextEntry&lt;/tt&gt; - this is the contract of the method - and in general it does. At least in our tests. What does it do instead in your case? Throw an exception?&lt;/p&gt;

&lt;p&gt;Unfortunately the tar format is not really a format as much as a collection of dialects built on top of a format. Tar archives are supposed to end in two 512byte block of 0s, but this is not always true. Maybe the archive you&apos;ve created uses some variation we&apos;re not prepared for. Can you attach an example archive that doesn&apos;t contain any sensitive data and exhibits the problem?&lt;/p&gt;</comment>
                            <comment id="15964382" author="jshattu@gmail.com" created="Tue, 11 Apr 2017 13:43:44 +0000"  >&lt;p&gt;I&apos;ve included the tar file causing the problem.&lt;/p&gt;

&lt;p&gt;From memory it was returning -1.&lt;/p&gt;

&lt;p&gt;Thanks, for your quick response.&lt;/p&gt;
</comment>
                            <comment id="15964408" author="jasons2000" created="Tue, 11 Apr 2017 14:00:56 +0000"  >&lt;p&gt;I should add that I&apos;m intercepting the input stream, and pickup the -1, before I return back to apache compress. This doesn&apos;t happen with the Zip format, which works as expected returning a null when calling nextEntry,&lt;/p&gt;</comment>
                            <comment id="15979943" author="bodewig" created="Sat, 22 Apr 2017 14:10:05 +0000"  >&lt;p&gt;Sorry for the delay, Jason.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure I understand what you are doing. If I use &lt;tt&gt;org.apache.commons.compress.archivers.Lister&lt;/tt&gt; I see the expected behaviour (&lt;tt&gt;getNextEntry&lt;/tt&gt; returns &lt;tt&gt;null&lt;/tt&gt;) but we don&apos;t really try to read the entries themselves.&lt;/p&gt;

&lt;p&gt;Hmm after applying &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/src/main/java/org/apache/commons/compress/archivers/Lister.java b/src/main/java/org/apache/commons/compress/archivers/Lister.java
index 7df9591..232b2ed 100644
--- a/src/main/java/org/apache/commons/compress/archivers/Lister.java
+++ b/src/main/java/org/apache/commons/compress/archivers/Lister.java
@@ -22,6 +22,7 @@
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.InputStream;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Files;
+&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.utils.IOUtils;
 
 /**
  * Simple command line application that lists the contents of an archive.
@@ -49,7 +50,12 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
             &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Created &quot;&lt;/span&gt; + ais.toString());
             ArchiveEntry ae;
             &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((ae = ais.getNextEntry()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
-                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(ae.getName());
+                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.print(ae.getName());
+                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ae.isDirectory()) {
+                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot; is a directory&quot;&lt;/span&gt;);
+                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot; has size &quot;&lt;/span&gt; + IOUtils.toByteArray(ais).length);
+                }
             }
         }
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I seem to get reasonable sizes. Can you show a few lines of code where we can see what you are trying to do and where things go wrong?&lt;/p&gt;</comment>
                            <comment id="15979950" author="jasons2000" created="Sat, 22 Apr 2017 14:32:40 +0000"  >&lt;p&gt;Yep, i&apos;m doing something slightly novel, but I would expect to still be &lt;br/&gt;
supported by the library.&lt;/p&gt;

&lt;p&gt;so given something like&lt;/p&gt;

&lt;p&gt;     ArchiveInputStream archiveStream = new &lt;br/&gt;
ArchiveStreamFactory().createArchiveInputStream(format, stream);&lt;/p&gt;

&lt;p&gt;The stream I pass into the factory is not just a straightforward &lt;br/&gt;
FileInputStream, but a FileInputStream that is wrapped using a &lt;br/&gt;
FilterInputStream, which deliberately blocks if there is no more data.&lt;/p&gt;

&lt;p&gt;The reason I do this, is that I might have a separate slow running &lt;br/&gt;
process generating the tar file and the processing reading the tar file &lt;br/&gt;
doesn&apos;t know when it had ended. Perhaps there is a better way to do this &lt;br/&gt;
so please advise.&lt;/p&gt;

&lt;p&gt;In any case, this approach works nicely with Zip Archives but not with &lt;br/&gt;
Tar file.&lt;/p&gt;

&lt;p&gt;Does that make sense?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jason&lt;/p&gt;
</comment>
                            <comment id="15979965" author="bodewig" created="Sat, 22 Apr 2017 14:54:25 +0000"  >&lt;p&gt;Maybe I&apos;m starting to understand.&lt;/p&gt;

&lt;p&gt;So your FilterInputStream blocks on read if the underlying stream doesn&apos;t provide any data right now. What are you expecting the underlying stream to do, i.e. when are you blocking and when do you assume the stream has been exhausted and return -1 from read in the implementation of your own?&lt;/p&gt;</comment>
                            <comment id="15979977" author="jasons2000" created="Sat, 22 Apr 2017 15:30:40 +0000"  >&lt;p&gt;Well to be precise the FilterInputStream, reads the underlying input, if it&lt;br/&gt;
is -1 then it sleeps the thread for a small period and then tries again. If&lt;br/&gt;
it has some data it returns back to requesting the Input Stream.   It&lt;br/&gt;
repeats this indefinitely. Although I can configure it to timeout.&lt;/p&gt;

&lt;p&gt;If i sleep the thread then naturally the compression is blocked at the same&lt;br/&gt;
time.&lt;/p&gt;

&lt;p&gt;This is all to do with having flexibility to deal with very slow realtime&lt;br/&gt;
archive producers.&lt;/p&gt;

&lt;p&gt;Admittedly this is an advanced use case,but given the nature of streams I&lt;br/&gt;
think it should support this. It looks like the TAR format isn&apos;t dealing&lt;br/&gt;
with EOF in quite the same way as ZIP.&lt;/p&gt;

&lt;p&gt;Jason&lt;/p&gt;


&lt;p&gt;On 22 Apr 2017 15:55, &quot;Stefan Bodewig (JIRA)&quot; &amp;lt;jira@apache.org&amp;gt; wrote:&lt;/p&gt;


&lt;p&gt;    [ &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-384?page=&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COMPRESS-384?page=&lt;/a&gt;&lt;br/&gt;
com.atlassian.jira.plugin.system.issuetabpanels:comment-&lt;br/&gt;
tabpanel&amp;amp;focusedCommentId=15979965#comment-15979965 ]&lt;/p&gt;

&lt;p&gt;Stefan Bodewig commented on &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-384&quot; title=&quot;Tar File EOF not being detected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-384&quot;&gt;&lt;del&gt;COMPRESS-384&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
-----------------------------------------&lt;/p&gt;

&lt;p&gt;Maybe I&apos;m starting to understand.&lt;/p&gt;

&lt;p&gt;So your FilterInputStream blocks on read if the underlying stream doesn&apos;t&lt;br/&gt;
provide any data right now. What are you expecting the underlying stream to&lt;br/&gt;
do, i.e. when are you blocking and when do you assume the stream has been&lt;br/&gt;
exhausted and return -1 from read in the implementation of your own?&lt;/p&gt;


&lt;p&gt;latest version of 7zip. When I read both archives using code of the form:&lt;br/&gt;
Input doesn&apos;t return a &quot;null&quot; entry when it hits the EOF from&lt;br/&gt;
archiveStream.getNextEntry()&lt;br/&gt;
is still being written to.&lt;/p&gt;



&lt;p&gt;&amp;#8211;&lt;br/&gt;
This message was sent by Atlassian JIRA&lt;br/&gt;
(v6.3.15#6346)&lt;/p&gt;</comment>
                            <comment id="15980001" author="bodewig" created="Sat, 22 Apr 2017 15:54:24 +0000"  >&lt;p&gt;You are correct, tar and zip deal with EOF differently as zip has an internal structure that signals the end of the readable content while tar simply has to read until it hits EOF. Many archivers won&apos;t know when the archive is finished until they hit EOF, cpio or ar are in the same boat. 7zip on the other hand has a structure that allows it to know the archive is finished as well. What zip and 7zip share is some kind of table of contents stored internally while tar and others really are just a stream of consecutive entries without any relation to each other and they only know they are done when there is no next entry.&lt;/p&gt;

&lt;p&gt;I think I had it backwards at first, sorry. So your FilterInputStream is the one TarArchiveInputStream is reading from, right? Then you use getNextEntry to read entries from the tar stream wrapping your blocking stream.&lt;/p&gt;

&lt;p&gt;What exactly happens that you didn&apos;t expect? I&apos;m sorry if I sound stupid, but it still isn&apos;t clear to me.&lt;/p&gt;</comment>
                            <comment id="15980041" author="jasons2000" created="Sat, 22 Apr 2017 17:31:40 +0000"  >&lt;p&gt;ok, I thought you said earlier that an EOF tar file was marked by a &lt;br/&gt;
number of Zeros.&lt;/p&gt;

&lt;p&gt;But I accept your more general point that most of the Archives Formats &lt;br/&gt;
don&apos;t know when the Archive ends other than when their is no more data.&lt;/p&gt;

&lt;p&gt;Yes, my FilterInputStream is feeding the TarArchiveInputStream.&lt;/p&gt;

&lt;p&gt;With the Zip Format, getNextEntry() returns a null whereas for Tar it &lt;br/&gt;
just blocks, using my FilterInputStream. I presume this is because the &lt;br/&gt;
ZIP has already detected the end of the archive through its specific end &lt;br/&gt;
of archive marker.&lt;/p&gt;

&lt;p&gt;All your questions are sensible, and i&apos;m not explaining in that well, &lt;br/&gt;
because I&#8217;m not at the code and I&#8217;m doing it from memory.&lt;/p&gt;

&lt;p&gt;The scenario I&apos;m trying to cater for is as follows:-&lt;/p&gt;

&lt;p&gt;Process 1 -&amp;gt; Slowly creates a Large Archive on the File System.&lt;/p&gt;

&lt;p&gt;Process 2 -&amp;gt; Reads this Large Archive from the same File System.&lt;/p&gt;

&lt;p&gt;If Process 2 is Faster than Process 1 it will hit an EOF and assume &lt;br/&gt;
their are no more entries in the file. However, I need it to block until &lt;br/&gt;
Process 1 is finished. Hence to support this behaviour I need to &lt;br/&gt;
implement blocking with FilterInputStream. This works better with Zip &lt;br/&gt;
coz it knows when the archive has finished and can cleanup the blocking &lt;br/&gt;
reading process. Doesn&apos;t look we can be so clean with the Tar Archive &lt;br/&gt;
though.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Jason&lt;/p&gt;


</comment>
                            <comment id="15980046" author="bodewig" created="Sat, 22 Apr 2017 17:45:32 +0000"  >&lt;p&gt;Yes, I&apos;m afraid what you are doing won&apos;t work for general formats.&lt;/p&gt;

&lt;p&gt;For tar it should signal EOF after it has read two consecutive 512 byte blocks of zeros after an entry has been finished, but not all tar archivers create these blocks. Looking at you archive I see a lot of trailing zeros, so there maybe something strange going on here, I&apos;ll look into it.&lt;/p&gt;</comment>
                            <comment id="15980215" author="charles_honton@intuit.com" created="Sun, 23 Apr 2017 01:51:08 +0000"  >&lt;p&gt;I&apos;m not sure your scenario should be supported.  Using a file as the intermediate storage is fraught with complications like those you are experiencing.  Have you tried using a pipe between process 1 and process 2?&lt;/p&gt;</comment>
                            <comment id="15980327" author="bodewig" created="Sun, 23 Apr 2017 08:48:34 +0000"  >&lt;p&gt;I still need to look into why the tar stream doesn&apos;t detect EOF, but want to share an idea, Jason. While most archiving formats haven&apos;t got any way of knowing when the stream is finished, most compression formats do. gzip, xz, bzip2 all know when the compressed stream is finished, so if you can make your archive creator produce a tar.gz rather than a tar you should be able to work around the problem - at the cost of higher processing time on both sides.&lt;/p&gt;</comment>
                            <comment id="15980334" author="bodewig" created="Sun, 23 Apr 2017 09:18:12 +0000"  >&lt;p&gt;Oh my, tar dialects. Here is the full story.&lt;/p&gt;

&lt;p&gt;Tar archive consist of records (512 bytes each) grouped in blocks (usually 20 records, i.e. 10kB). The end of the tar archive is signalled by two consecutive records of zeros, your archive has such a trailer and &lt;tt&gt;TarArchiveInputStream&lt;/tt&gt; detects it. But your archive ends after those two records while &lt;tt&gt;TarArchiveInputStream&lt;/tt&gt; tries to finish reading the current block (there are still &amp;gt; 3500 bytes missing for the first block). So 7z uses one of the dialects that don&apos;t pad out the last block but &lt;tt&gt;TarArchiveInputStream&lt;/tt&gt; has to try to consume it and thus still tries to read when your archive is done.&lt;/p&gt;

&lt;p&gt;I&apos;m afraid there isn&apos;t anything we can do about it. See my suggestion from about half an hour ago for a workaround.&lt;/p&gt;</comment>
                            <comment id="15985260" author="bodewig" created="Wed, 26 Apr 2017 17:52:18 +0000"  >&lt;p&gt;I&apos;m sorry, but I&apos;m afraid there is no way to do things as you need them without sacrificing compatibility with some of the many dialects.&lt;/p&gt;</comment>
                            <comment id="16012374" author="jshattu@gmail.com" created="Tue, 16 May 2017 13:31:40 +0000"  >&lt;p&gt;thanks for your help on this, appreciate the project very much.&lt;/p&gt;

&lt;p&gt;just using a timeout to assume the end of file.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12862863" name="file.tar" size="6656" author="jshattu@gmail.com" created="Tue, 11 Apr 2017 13:43:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Apr 2017 12:38:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            44 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3derz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-383] ArrayIndexOutOfBoundsException in ZipArchiveInputStream.read</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-383</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The attached zip file was created on Mac OS X (10.11.6) and is unzippable on Mac OS X.&lt;/p&gt;

&lt;p&gt;The attached java program demonstrates a crash in ZipArchiveInputStream.read when it tries to read this zip file.&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS X 10.11.6, Java 1.8.0_72&lt;/p&gt;</environment>
        <key id="13043116">COMPRESS-383</key>
            <summary>ArrayIndexOutOfBoundsException in ZipArchiveInputStream.read</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mikewertheim">Mike Wertheim</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Feb 2017 23:28:37 +0000</created>
                <updated>Wed, 15 Feb 2017 08:48:04 +0000</updated>
                            <resolved>Wed, 15 Feb 2017 08:48:04 +0000</resolved>
                                    <version>1.13</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15867462" author="bodewig" created="Wed, 15 Feb 2017 08:38:34 +0000"  >&lt;p&gt;this is what I get when running the example using the current master (just so we&apos;ve got a stack trace):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;zip bytes: 12497722
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.ArrayIndexOutOfBoundsException
	at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.read(ZipArchiveInputStream.java:406)
	at ZipCrash.convertZipToTar(ZipCrash.java:30)
	at ZipCrash.convertZipToTar(ZipCrash.java:45)
	at ZipCrash.main(ZipCrash.java:14)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15867473" author="bodewig" created="Wed, 15 Feb 2017 08:47:30 +0000"  >&lt;p&gt;Ah, this is not a bug, unfortunately. It is the way ZIP archives work.&lt;/p&gt;

&lt;p&gt;The entry you are trying to read doesn&apos;t store the file size inside the local file header, which is valid. This is a case where the note in &lt;a href=&quot;http://commons.apache.org/proper/commons-compress/javadocs/api-1.13/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html#getSize(&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-compress/javadocs/api-1.13/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html#getSize(&lt;/a&gt;) applies:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ZipArchiveInputStream may create entries that return SIZE_UNKNOWN as long as the entry hasn&apos;t been read completely.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;SIZE_UNKNOWN&lt;/tt&gt; is -1 and so you invoke &lt;tt&gt;read&lt;/tt&gt; with a length of -1.&lt;/p&gt;

&lt;p&gt;If you really need to know the size, don&apos;t use &lt;tt&gt;ZipArchiveInputStream&lt;/tt&gt; but &lt;tt&gt;ZipFile&lt;/tt&gt; which reads the central directory located at the end of the archive (and thus not accessible for &lt;tt&gt;ZipArchiveInputStream&lt;/tt&gt;. It would likely be more robust to loop over multiple reads anyway as there is no guarantee you&apos;ll get the whole content of the entry with a single read, even if the size is known.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12852695" name="ZipCrash.java" size="1708" author="mikewertheim" created="Tue, 14 Feb 2017 23:46:40 +0000"/>
                            <attachment id="12852694" name="test.zip" size="12497722" author="mikewertheim" created="Tue, 14 Feb 2017 23:43:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Feb 2017 08:38:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a37r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-382] OutOfMemoryError from CompressorStreamFactory</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-382</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;While using Tika-1.14 to detect file types, the attached 1KB file triggered an OOME with 1GB heap. Tika calls CompressorStreamFactory.createCompressorInputStream(in) to detect if the file is a compressor stream, but CompressorStreamFactory erroneously detects it as a LZMACompressorInputStream and when the LZMACompressorInputStream is instanciated the OOME is thrown. This error does not happen with commons-compress versions prior to 1.10, when auto detecting LZMA streams was added. OOME stacktrace below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.OutOfMemoryError: Java heap space
	at org.tukaani.xz.lz.LZDecoder.&amp;lt;init&amp;gt;(Unknown Source) ~[xz-1.5.jar:1.5]
	at org.tukaani.xz.LZMAInputStream.initialize(Unknown Source) ~[xz-1.5.jar:1.5]
	at org.tukaani.xz.LZMAInputStream.initialize(Unknown Source) ~[xz-1.5.jar:1.5]
	at org.tukaani.xz.LZMAInputStream.&amp;lt;init&amp;gt;(Unknown Source) ~[xz-1.5.jar:1.5]
	at org.tukaani.xz.LZMAInputStream.&amp;lt;init&amp;gt;(Unknown Source) ~[xz-1.5.jar:1.5]
	at org.apache.commons.compress.compressors.lzma.LZMACompressorInputStream.&amp;lt;init&amp;gt;(LZMACompressorInputStream.java:48) ~[commons-compress-1.10.jar:1.10]
	at org.apache.commons.compress.compressors.CompressorStreamFactory.createCompressorInputStream(CompressorStreamFactory.java:251) ~[commons-compress-1.10.jar:1.10]
	at org.apache.tika.parser.pkg.ZipContainerDetector.detectCompressorFormat(ZipContainerDetector.java:109) ~[tika-parsers-1.14.jar:1.14]
	at org.apache.tika.parser.pkg.ZipContainerDetector.detect(ZipContainerDetector.java:95) ~[tika-parsers-1.14.jar:1.14]
	at org.apache.tika.detect.CompositeDetector.detect(CompositeDetector.java:77) ~[tika-core-1.14.jar:1.14]
	at dpf.sp.gpinf.indexer.process.task.SignatureTask.process(SignatureTask.java:50) ~[iped.jar:?]
	at dpf.sp.gpinf.indexer.process.task.AbstractTask.processMonitorTimeout(AbstractTask.java:203) ~[iped.jar:?]
	at dpf.sp.gpinf.indexer.process.task.AbstractTask.processAndSendToNextTask(AbstractTask.java:152) ~[iped.jar:?]
	at dpf.sp.gpinf.indexer.process.task.AbstractTask.sendToNextTask(AbstractTask.java:190) ~[iped.jar:?]
	at dpf.sp.gpinf.indexer.process.task.AbstractTask.processAndSendToNextTask(AbstractTask.java:160) ~[iped.jar:?]
	at dpf.sp.gpinf.indexer.process.task.AbstractTask.sendToNextTask(AbstractTask.java:190) ~[iped.jar:?]
	at dpf.sp.gpinf.indexer.process.task.AbstractTask.processAndSendToNextTask(AbstractTask.java:160) ~[iped.jar:?]
	at dpf.sp.gpinf.indexer.process.task.AbstractTask.sendToNextTask(AbstractTask.java:190) ~[iped.jar:?]
	at dpf.sp.gpinf.indexer.process.task.AbstractTask.processAndSendToNextTask(AbstractTask.java:160) ~[iped.jar:?]
	at dpf.sp.gpinf.indexer.process.Worker.process(Worker.java:174) ~[iped.jar:?]
	... 1 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows7, jre1.8.0_101 x64&lt;/p&gt;</environment>
        <key id="13040268">COMPRESS-382</key>
            <summary>OutOfMemoryError from CompressorStreamFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lfcnassif">Luis Filipe Nassif</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Feb 2017 22:38:11 +0000</created>
                <updated>Wed, 26 Apr 2017 15:14:59 +0000</updated>
                            <resolved>Tue, 25 Apr 2017 18:48:36 +0000</resolved>
                                    <version>1.10</version>
                    <version>1.11</version>
                    <version>1.12</version>
                                    <fixVersion>1.14</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="15852241" author="lfcnassif" created="Fri, 3 Feb 2017 22:40:56 +0000"  >&lt;p&gt;oom trigger&lt;/p&gt;</comment>
                            <comment id="15852806" author="bodewig" created="Sat, 4 Feb 2017 14:15:40 +0000"  >&lt;p&gt;LZMA is identified by a three byte header, which is very short and this may lead to quite a few false positives. I&apos;m not sure how to avoid this without removing LZMA autodetection completely.&lt;/p&gt;

&lt;p&gt;What you describe makes me think Tika could benefit from us adding some kind of &quot;does this look like a compressor stream&quot;  or even &quot;what kind of format do you think this is&quot; kind of method in &lt;tt&gt;CompressorStreamFactory&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15852850" author="lfcnassif" created="Sat, 4 Feb 2017 16:54:10 +0000"  >&lt;p&gt;Maybe it is Tika fault to call CompressorStreamFactory with data that is not a compressor stream? What is the api contract of createCompressorInputStream(in)?&lt;/p&gt;</comment>
                            <comment id="15852865" author="bodewig" created="Sat, 4 Feb 2017 17:29:45 +0000"  >&lt;p&gt;Well, the contract is &quot;if I think I know how to read this I&apos;ll give you a stream that will read it. And if I don&apos;t know how to read it, I&apos;ll throw an exception.&quot;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;So passing in something that&apos;s not a supported stream is certainly valid.&lt;/p&gt;

&lt;p&gt;Some of the stream classes may be doing expensive work inside the constructor, that&apos;s why I was thinking about adding an additional method that only contains the auto-detection logic. If Tika would invoke &lt;tt&gt;createCompressorInputStream&lt;/tt&gt; after a positive outcome this wouldn&apos;t change anything, though.&lt;/p&gt;</comment>
                            <comment id="15969174" author="tallison@mitre.org" created="Fri, 14 Apr 2017 15:45:50 +0000"  >&lt;p&gt;This is pure hackery, but could we allow users to set a threshold in CompressorStreamFactory and pass that value to LZMACompressorInputStream to call &lt;tt&gt;new LZMAInputStream(InputStream is, int threshold)&lt;/tt&gt; instead of the current &lt;tt&gt;new LZMAInputStream(InputStream is)&lt;/tt&gt;...it looks like tukaani has already thought about this?  &lt;/p&gt;

&lt;p&gt;I&apos;m just looking at the decompiled tukaani code, not their actual source &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15969176" author="tallison@mitre.org" created="Fri, 14 Apr 2017 15:47:11 +0000"  >&lt;p&gt;It might be helpful to allow users to set thresholds for some of the compressor input streams to avoid oom on corrupt files.&lt;/p&gt;</comment>
                            <comment id="15969178" author="tallison@mitre.org" created="Fri, 14 Apr 2017 15:48:52 +0000"  >&lt;p&gt;If the above proposal is acceptable, I can submit a PR, esp. if you can offer hints as how to best allow parameterization.&lt;/p&gt;</comment>
                            <comment id="15969201" author="bodewig" created="Fri, 14 Apr 2017 16:02:57 +0000"  >&lt;p&gt;Some of the streams support parametrizations, like the window size for Snappy, the compression level of gzip and so on. So far we pick something as a default and this is what you get when using the factory. The current thinking behind this is that if you know you want certain parameters, then you know which format you want and don&apos;t need to go through the factory anyway.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure whether we can actually enforce thresholds for all of the formats. If we can, then it may make sense to add it as a parameter to the factory. Unfortunately the interface approach of ServiceLoader makes it way more difficult to evolve the factory&apos;s contract.&lt;/p&gt;</comment>
                            <comment id="15969399" author="githubbot" created="Fri, 14 Apr 2017 19:04:56 +0000"  >&lt;p&gt;GitHub user tballison opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    first draft of preventing OOM in LZMA&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tballison/commons-compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/tballison/commons-compress&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #20&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 70594bcaff1d553cbd35312bb63a33bcba0680d3&lt;br/&gt;
Author: tballison &amp;lt;tallison@mitre.org&amp;gt;&lt;br/&gt;
Date:   2017-04-14T19:04:20Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt; first draft of preventing OOM in LZMA&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15969409" author="githubbot" created="Fri, 14 Apr 2017 19:08:19 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/11091808/badge)](https://coveralls.io/builds/11091808&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/11091808/badge)](https://coveralls.io/builds/11091808&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.04%) to 84.215% when pulling *&lt;b&gt;70594bcaff1d553cbd35312bb63a33bcba0680d3 on tballison:&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;08113862c5dda6dfb0562d84db8db8f5f41bfa4a on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="15969413" author="tallison@mitre.org" created="Fri, 14 Apr 2017 19:10:18 +0000"  >&lt;p&gt;This works, but I don&apos;t like breaking the simplicity of CompressorStreamFactory.  So, now we&apos;re going to have a bunch of different settable parameters that require knowledge of the individual child streams?  I don&apos;t like it.&lt;/p&gt;

&lt;p&gt;The other thing I don&apos;t like is wrapping the memory limit exception in a CompressorException.  Perhaps, create a new subclass of CompressorException, say MemoryThresholdHitException, and apply across the streams for this kind of exception?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The current thinking behind this is that if you know you want certain parameters, then you know which format you want and don&apos;t need to go through the factory anyway.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In Tika land, this isn&apos;t quite right, we know we want to set limits, and we&apos;re willing to figure out that lzma is in kb and Z is in bytes for the data table, etc., but we don&apos;t (currently) know the stream type.  We could (soon) detect() and then call the relevant Compressor, but it would be easier to tell the factory what we want for each file type up front.&lt;/p&gt;

&lt;p&gt;As for service loading...y, that makes parameterization challenging.  &lt;/p&gt;

&lt;p&gt;In short, this PR is a proposal...a way to advance the conversation, not something that I feel strongly about. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Recommendations?&lt;/p&gt;</comment>
                            <comment id="15979566" author="githubbot" created="Fri, 21 Apr 2017 23:24:51 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/11191052/badge)](https://coveralls.io/builds/11191052&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/11191052/badge)](https://coveralls.io/builds/11191052&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.2%) to 84.437% when pulling *&lt;b&gt;7d73baf10e435fcaa4927495afc185fb473c416b on tballison:&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;13a039029ca7d7fca9862cfb792f7148c555f05f on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="15979567" author="githubbot" created="Fri, 21 Apr 2017 23:24:51 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/11191052/badge)](https://coveralls.io/builds/11191052&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/11191052/badge)](https://coveralls.io/builds/11191052&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.2%) to 84.437% when pulling *&lt;b&gt;7d73baf10e435fcaa4927495afc185fb473c416b on tballison:&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;13a039029ca7d7fca9862cfb792f7148c555f05f on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="15979571" author="tallison@mitre.org" created="Fri, 21 Apr 2017 23:29:10 +0000"  >&lt;p&gt;The PR now covers both &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-386&quot; title=&quot;Consider adding sanity check to maxCodeSize in ZCompressorInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-386&quot;&gt;&lt;del&gt;COMPRESS-386&lt;/del&gt;&lt;/a&gt;.  I thought it useful to add both to assure some uniformity.&lt;/p&gt;

&lt;p&gt;The one part that I don&apos;t like is the IOException that wraps a memory limit exception in ZCompressorInputStream.  I felt this was necessary so that we didn&apos;t change the exception signature of ZCompressorInputStream.&lt;/p&gt;

&lt;p&gt;Any recommendations?&lt;/p&gt;</comment>
                            <comment id="15979934" author="bodewig" created="Sat, 22 Apr 2017 13:42:41 +0000"  >&lt;p&gt;Many thanks Tim, I like your suggestions and would merge it as is. I can live with not covering all other formats, but would modify &lt;tt&gt;XZCompressorInputStream&lt;/tt&gt; the same way you did to &lt;tt&gt;LZMACompressorInputStream&lt;/tt&gt; (and can certainly do that myself).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The one part that I don&apos;t like is the IOException that wraps a memory limit exception in ZCompressorInputStream.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I understand that, but we can&apos;t add &lt;tt&gt;CompressorException&lt;/tt&gt; to the constructor&apos;s signature either (too bad it is a checked exception). Maybe store the original exception inside the &lt;tt&gt;IOExceptionWrappingMemoryLimitException&lt;/tt&gt; as cause and rethrow the cause from within the factory? Wouldn&apos;t be much better either, I&apos;m afraid.&lt;/p&gt;

</comment>
                            <comment id="15979939" author="githubbot" created="Sat, 22 Apr 2017 13:58:28 +0000"  >&lt;p&gt;Github user kinow commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20#discussion_r112810239&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20#discussion_r112810239&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/test/java/org/apache/commons/compress/compressors/DetectCompressorTestCase.java &amp;#8212;&lt;br/&gt;
    @@ -167,6 +171,26 @@ private String detect(String testFileName) throws IOException, CompressorExcepti&lt;br/&gt;
         }&lt;/p&gt;

&lt;p&gt;         @Test&lt;br/&gt;
    +    public void testMemoryLimit() throws Exception &lt;/p&gt;
{
    +        testMemoryLimit(&quot;COMPRESS-382&quot;);
    +        testMemoryLimit(&quot;COMPRESS-386&quot;);
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    private void testMemoryLimit(String fileName) throws IOException, CompressorException {&lt;br/&gt;
    +        CompressorStreamFactory fac = new CompressorStreamFactory(true,&lt;br/&gt;
    +                100);&lt;br/&gt;
    +        try (InputStream is = new BufferedInputStream(&lt;br/&gt;
    +                new FileInputStream(getFile(fileName)))) {&lt;br/&gt;
    +            InputStream compressorInputStream = fac.createCompressorInputStream(is);&lt;br/&gt;
    +            fail(&quot;Should have thrown CompressorMemoryLimitException&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Maybe instead we could let the CompressorMemoryLimitException happen, and declare in the @Test annotation the expected exception.&lt;/p&gt;</comment>
                            <comment id="15979944" author="lfcnassif" created="Sat, 22 Apr 2017 14:11:17 +0000"  >&lt;p&gt;Good work Tim! I think the wrapping IOException is a good workaround. Making CompressorMemoryLimitException a RuntimeException is worse, making it extend an IOException,  like tukanni MemoryLimitException, makes less sense to me.&lt;/p&gt;

&lt;p&gt;Maybe throwing a normal IOException with the original exception as cause is sufficient? The cause can be checked in CompressorStreamFactory so no need to create a new type of IOException? &lt;/p&gt;</comment>
                            <comment id="15979945" author="githubbot" created="Sat, 22 Apr 2017 14:13:02 +0000"  >&lt;p&gt;Github user bodewig commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20#discussion_r112810573&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20#discussion_r112810573&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/test/java/org/apache/commons/compress/compressors/DetectCompressorTestCase.java &amp;#8212;&lt;br/&gt;
    @@ -167,6 +171,26 @@ private String detect(String testFileName) throws IOException, CompressorExcepti&lt;br/&gt;
         }&lt;/p&gt;

&lt;p&gt;         @Test&lt;br/&gt;
    +    public void testMemoryLimit() throws Exception &lt;/p&gt;
{
    +        testMemoryLimit(&quot;COMPRESS-382&quot;);
    +        testMemoryLimit(&quot;COMPRESS-386&quot;);
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    private void testMemoryLimit(String fileName) throws IOException, CompressorException {&lt;br/&gt;
    +        CompressorStreamFactory fac = new CompressorStreamFactory(true,&lt;br/&gt;
    +                100);&lt;br/&gt;
    +        try (InputStream is = new BufferedInputStream(&lt;br/&gt;
    +                new FileInputStream(getFile(fileName)))) {&lt;br/&gt;
    +            InputStream compressorInputStream = fac.createCompressorInputStream(is);&lt;br/&gt;
    +            fail(&quot;Should have thrown CompressorMemoryLimitException&quot;);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    +1 and make it two tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15981013" author="githubbot" created="Mon, 24 Apr 2017 11:28:50 +0000"  >&lt;p&gt;Github user tballison commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 to both suggestions.  Will do.  Thank you.&lt;/p&gt;</comment>
                            <comment id="15981015" author="tallison@mitre.org" created="Mon, 24 Apr 2017 11:30:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;I can live with not covering all other formats&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m happy to add others, XZ and ???&lt;/p&gt;</comment>
                            <comment id="15981200" author="githubbot" created="Mon, 24 Apr 2017 14:13:22 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/11213136/badge)](https://coveralls.io/builds/11213136&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/11213136/badge)](https://coveralls.io/builds/11213136&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.04%) to 84.274% when pulling *&lt;b&gt;b10528a62e51b2c5fdc0c4b7884cc93f03f8ce96 on tballison:&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;13a039029ca7d7fca9862cfb792f7148c555f05f on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="15981206" author="tallison@mitre.org" created="Mon, 24 Apr 2017 14:17:04 +0000"  >&lt;p&gt;In the most recent commit, I renamed and moved &lt;tt&gt;MemoryLimitException&lt;/tt&gt; up to o.a.c.c.  I also made it extend &lt;tt&gt;IOException&lt;/tt&gt;.  I made these changes because it looks like there are several places in the codebase where we might want to throw this...a search of &lt;tt&gt;new byte[&lt;/tt&gt;...those are all for a later issue, but I didn&apos;t want to create a &lt;tt&gt;CompressorMemoryLimitException&lt;/tt&gt; and then find that we need a more general one. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Question: is this acceptable?  Do we want to rename the class to something like &quot;CommonsCompressMemoryLimitException&quot; so that there will be absolutely no confusion with tukaani&apos;s MemoryLimitException...or is the full class name sufficient?&lt;/p&gt;

&lt;p&gt;I added XZ...note that this memory limit is checked on read(), not during initialization...as far as I can tell.&lt;/p&gt;

&lt;p&gt;I also split out the unit tests for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-386&quot; title=&quot;Consider adding sanity check to maxCodeSize in ZCompressorInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-386&quot;&gt;&lt;del&gt;COMPRESS-386&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


</comment>
                            <comment id="15981257" author="bodewig" created="Mon, 24 Apr 2017 14:39:50 +0000"  >&lt;p&gt;Many, many thanks, Tim.&lt;/p&gt;

&lt;p&gt;We&apos;ve already got &lt;tt&gt;PasswordRequiredException&lt;/tt&gt; in the root package, I&apos;m comfortable with adding &lt;tt&gt;MemoryLimitException&lt;/tt&gt; there as well - and don&apos;t think we need any special prefix.&lt;/p&gt;

&lt;p&gt;You are certainly correct about XZ, I just looked at the constructor signature but the limit doesn&apos;t get enforced before the stream starts decompressing data.&lt;/p&gt;

&lt;p&gt;As for the other formats I&apos;ll have to look through the code again, I&apos;m afraid. LZ4 might be one case, we currently ignore the &quot;maximum block size&quot; stored inside the framed format (see comment in &lt;tt&gt;FramedLZ4CompressorInputStream#readFrameDescriptor&lt;/tt&gt;) and the memory usage in Snappy and LZ4 is proportional to the window size. We can always evolve this later, even after 1.14. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15981457" author="tallison@mitre.org" created="Mon, 24 Apr 2017 16:27:21 +0000"  >&lt;p&gt;My other thought on this...do we want to set the memory limit via some high level static variable?  With only a quick look through the code base, there appear to be quite a few places where the code relies on reading an &lt;tt&gt;int&lt;/tt&gt; or a &lt;tt&gt;uint&lt;/tt&gt; and then creating a &lt;tt&gt;new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;uint&amp;#93;&lt;/span&gt;&lt;/tt&gt;.  &lt;/p&gt;

&lt;p&gt;If we go with a high-level static variable, we wouldn&apos;t have to add a second parameter constructor for every stream that requires this.  We&apos;d still have to implement it throughout, and I&apos;m happy to help, but we wouldn&apos;t have to add new ctors throughout. &lt;/p&gt;
</comment>
                            <comment id="15981736" author="garydgregory" created="Mon, 24 Apr 2017 19:25:07 +0000"  >&lt;p&gt;Instead of fiddling with constructors we could use Builders.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="15981812" author="tallison@mitre.org" created="Mon, 24 Apr 2017 20:18:55 +0000"  >&lt;p&gt;If we went with Builders, we&apos;d have to implement even more code, no?  Builder per stream type?&lt;/p&gt;

&lt;p&gt;In general, I like builders, but I&apos;m not sure this makes sense...unless I misunderstand the proposal?&lt;/p&gt;</comment>
                            <comment id="15981904" author="garydgregory" created="Mon, 24 Apr 2017 20:54:17 +0000"  >&lt;p&gt;I propose builders because this avoids creating every combination of constructors and avoids breaking BC (assuming you start with builders). If you need a new parameter, you can just add it to the builder without worrying about how many ctors to create. IMO, this is better even if there is more code initially.&lt;/p&gt;</comment>
                            <comment id="15981908" author="garydgregory" created="Mon, 24 Apr 2017 20:56:55 +0000"  >&lt;p&gt;I should add that over in Log4j-land, we have been migrating from ctors and factory methods to builders and the overall code is much better. The main driver for us in Log4j was to avoid binary compat issues and avoid the proliferation of more and more factory methods every time a parameter needs to be added to a given class.&lt;/p&gt;</comment>
                            <comment id="15981961" author="tallison@mitre.org" created="Mon, 24 Apr 2017 21:41:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;If you need a new parameter, you can just add it to the builder without worrying about how many ctors to create. IMO, this is better even if there is more code initially.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Y, I completely agree.&lt;/p&gt;

&lt;p&gt;Let me try with a static variable for this, and we can see how it looks?&lt;/p&gt;</comment>
                            <comment id="15981971" author="garydgregory" created="Mon, 24 Apr 2017 21:49:24 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Feel free to start with a static, but global variables are rarely a good idea. It&apos;s fine for a default value of course, but I would only consider this one iteration on the way to the complete solution, but that&apos;s just me. YMMV &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="15982032" author="tallison@mitre.org" created="Mon, 24 Apr 2017 22:44:43 +0000"  >&lt;p&gt;Y, completely agree on both points.  Thank you.&lt;/p&gt;</comment>
                            <comment id="15982054" author="garydgregory" created="Mon, 24 Apr 2017 22:50:45 +0000"  >&lt;p&gt;Glad we see eye to eye &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15982224" author="githubbot" created="Tue, 25 Apr 2017 01:09:08 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/11223865/badge)](https://coveralls.io/builds/11223865&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/11223865/badge)](https://coveralls.io/builds/11223865&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.02%) to 84.26% when pulling *&lt;b&gt;0e8ff9c44058afbca9c9126a8feebe41cd682626 on tballison:&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;13a039029ca7d7fca9862cfb792f7148c555f05f on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="15982233" author="tallison@mitre.org" created="Tue, 25 Apr 2017 01:14:10 +0000"  >&lt;p&gt;In the most recent commit:&lt;/p&gt;

&lt;p&gt;1. Removed new constructors introduced in earlier versions so no new complexity there.&lt;br/&gt;
2. Removed all changes from CompressorStreamFactory...I think...no new complexity there.&lt;br/&gt;
3. Added static MemoryLimit and modified Z, XZ and LZMA to take that into account&lt;/p&gt;

&lt;p&gt;I share &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;Gary Gregory&lt;/a&gt;&apos;s view of global variables, I agree that builders are an elegant solution to configuration, and I defer to his expertise in this.  If there are other items that we&apos;d want to configure generally across compressors and archivers, we should consider heading towards the builder route asap.  &lt;/p&gt;

&lt;p&gt;As the next iteration to the complete solution, the current proposed PR seems reasonable to me.  I look forward to feedback from those who actually know this codebase, though. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15982283" author="githubbot" created="Tue, 25 Apr 2017 02:13:49 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/11224344/badge)](https://coveralls.io/builds/11224344&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/11224344/badge)](https://coveralls.io/builds/11224344&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.03%) to 84.263% when pulling *&lt;b&gt;26eab98e3a0d403587cc915eaa8f7d4b7b894cef on tballison:&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;13a039029ca7d7fca9862cfb792f7148c555f05f on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="15982562" author="bodewig" created="Tue, 25 Apr 2017 08:31:59 +0000"  >&lt;p&gt;Bad timing going offline on my side or so it seems. Personally I prefer the constructor version over the static configuration - this may be my bad experience with static configuration in XMLUnit 1.x shining through.&lt;/p&gt;

&lt;p&gt;As long as you&apos;ve got a single memory limit you want to enforce for all streams then static configuration is fine, but we are really precluding more dynamic use cases. Or at least make those use cases rather confusing when the limit that is applied is the one that was current when the stream was created rather then the when it is read - by means of the way it is implemented inside of XZ for Java.&lt;/p&gt;

&lt;p&gt;OTOH I don&apos;t see how to evolve into builders without breaking backwards compatibility - in particular after we&apos;ve added &lt;tt&gt;ServiceLoader&lt;/tt&gt;. I understand the proliferation of constructor arguments isn&apos;t pretty, either. I wish I had a better idea.&lt;/p&gt;</comment>
                            <comment id="15982581" author="tcurdt" created="Tue, 25 Apr 2017 08:51:44 +0000"  >&lt;p&gt;There has never ever been a good reason for static configuration. I just look at BCEL and the pain it has caused. &lt;br/&gt;
Static immutable default values are fine - but please don&apos;t introduce static state across instances.&lt;/p&gt;</comment>
                            <comment id="15982593" author="githubbot" created="Tue, 25 Apr 2017 09:02:27 +0000"  >&lt;p&gt;Github user kinow commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20#discussion_r113141080&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20#discussion_r113141080&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/compress/compressors/lzma/LZMACompressorInputStream.java &amp;#8212;&lt;br/&gt;
    @@ -56,7 +56,7 @@ public LZMACompressorInputStream(final InputStream inputStream)&lt;br/&gt;
                 in = new LZMAInputStream(inputStream, MemoryLimit.getMemoryLimitInKb());&lt;br/&gt;
             } catch (org.tukaani.xz.MemoryLimitException e) {&lt;br/&gt;
                 //convert to commons-compress exception&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new MemoryLimitException(&quot;exceeded calculated memory limit&quot;, e);&lt;br/&gt;
    +            throw new MemoryLimitException(e.getMemoryNeeded(), e.getMemoryLimit());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Not looking further into the source code of both MemoryLimitException classes, couldn&apos;t this hide the root cause of the exception? As the original `e` exception is ignored?&lt;/p&gt;</comment>
                            <comment id="15982600" author="githubbot" created="Tue, 25 Apr 2017 09:06:18 +0000"  >&lt;p&gt;Github user garydgregory commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20#discussion_r113141961&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20#discussion_r113141961&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/compress/compressors/lzma/LZMACompressorInputStream.java &amp;#8212;&lt;br/&gt;
    @@ -56,7 +56,7 @@ public LZMACompressorInputStream(final InputStream inputStream)&lt;br/&gt;
                 in = new LZMAInputStream(inputStream, MemoryLimit.getMemoryLimitInKb());&lt;br/&gt;
             } catch (org.tukaani.xz.MemoryLimitException e) {&lt;br/&gt;
                 //convert to commons-compress exception&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new MemoryLimitException(&quot;exceeded calculated memory limit&quot;, e);&lt;br/&gt;
    +            throw new MemoryLimitException(e.getMemoryNeeded(), e.getMemoryLimit());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I always like linking to the cause exception...&lt;/p&gt;</comment>
                            <comment id="15982774" author="githubbot" created="Tue, 25 Apr 2017 12:05:32 +0000"  >&lt;p&gt;Github user tballison commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20#discussion_r113176495&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20#discussion_r113176495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/compress/compressors/lzma/LZMACompressorInputStream.java &amp;#8212;&lt;br/&gt;
    @@ -56,7 +56,7 @@ public LZMACompressorInputStream(final InputStream inputStream)&lt;br/&gt;
                 in = new LZMAInputStream(inputStream, MemoryLimit.getMemoryLimitInKb());&lt;br/&gt;
             } catch (org.tukaani.xz.MemoryLimitException e) {&lt;br/&gt;
                 //convert to commons-compress exception&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new MemoryLimitException(&quot;exceeded calculated memory limit&quot;, e);&lt;br/&gt;
    +            throw new MemoryLimitException(e.getMemoryNeeded(), e.getMemoryLimit());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Y.  Good point.  I&apos;ll update our MemoryLimitException initializers to both a 2-parameter (needed, limit) and 3-parameter (needed, limit, e)?&lt;/p&gt;</comment>
                            <comment id="15982778" author="tallison@mitre.org" created="Tue, 25 Apr 2017 12:06:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Bad timing going offline on my side or so it seems. Personally I prefer the constructor version over the static configuration &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No problem at all.  I&apos;ll revert to the initializer option.  Sorry to cause headaches. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There has never ever been a good reason for static configuration.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Y, I didn&apos;t like it, but wanted to see how it looked.  Back to initializers...&lt;/p&gt;</comment>
                            <comment id="15982784" author="githubbot" created="Tue, 25 Apr 2017 12:13:35 +0000"  >&lt;p&gt;Github user kinow commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20#discussion_r113178004&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20#discussion_r113178004&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/compress/compressors/lzma/LZMACompressorInputStream.java &amp;#8212;&lt;br/&gt;
    @@ -56,7 +56,7 @@ public LZMACompressorInputStream(final InputStream inputStream)&lt;br/&gt;
                 in = new LZMAInputStream(inputStream, MemoryLimit.getMemoryLimitInKb());&lt;br/&gt;
             } catch (org.tukaani.xz.MemoryLimitException e) {&lt;br/&gt;
                 //convert to commons-compress exception&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new MemoryLimitException(&quot;exceeded calculated memory limit&quot;, e);&lt;br/&gt;
    +            throw new MemoryLimitException(e.getMemoryNeeded(), e.getMemoryLimit());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Sounds good. There are a few other places in this pull request where the root exception is discarded too.&lt;/p&gt;</comment>
                            <comment id="15982803" author="githubbot" created="Tue, 25 Apr 2017 12:28:24 +0000"  >&lt;p&gt;Github user tballison commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20#discussion_r113181027&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20#discussion_r113181027&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/compress/compressors/lzma/LZMACompressorInputStream.java &amp;#8212;&lt;br/&gt;
    @@ -56,7 +56,7 @@ public LZMACompressorInputStream(final InputStream inputStream)&lt;br/&gt;
                 in = new LZMAInputStream(inputStream, MemoryLimit.getMemoryLimitInKb());&lt;br/&gt;
             } catch (org.tukaani.xz.MemoryLimitException e) {&lt;br/&gt;
                 //convert to commons-compress exception&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throw new MemoryLimitException(&quot;exceeded calculated memory limit&quot;, e);&lt;br/&gt;
    +            throw new MemoryLimitException(e.getMemoryNeeded(), e.getMemoryLimit());
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Y, any time we&apos;re wrapping tukaani&apos;s.&lt;/p&gt;</comment>
                            <comment id="15982847" author="tallison@mitre.org" created="Tue, 25 Apr 2017 12:58:41 +0000"  >&lt;p&gt;I got rid of the static/global variable.  Apologies for that proposal.&lt;/p&gt;

&lt;p&gt;I can try to squash the PR if desired before you merge it...unless there are other recommendations?&lt;/p&gt;

&lt;p&gt;Thank you, all, and, again, apologies for trying out a remarkably bad idea. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15982856" author="githubbot" created="Tue, 25 Apr 2017 13:05:36 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/11230515/badge)](https://coveralls.io/builds/11230515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/11230515/badge)](https://coveralls.io/builds/11230515&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.06%) to 84.294% when pulling *&lt;b&gt;2247ff9601374845012558ecf5963ebb7e1066c5 on tballison:&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-382&quot; title=&quot;OutOfMemoryError from CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-382&quot;&gt;&lt;del&gt;COMPRESS-382&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;13a039029ca7d7fca9862cfb792f7148c555f05f on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="15983426" author="githubbot" created="Tue, 25 Apr 2017 18:46:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/20&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15983430" author="bodewig" created="Tue, 25 Apr 2017 18:48:22 +0000"  >&lt;p&gt;Thanks Tim and sorry for the extra amount of work. &lt;tt&gt;git am&lt;/tt&gt; didn&apos;t work for me so I went for an old fashioned merge, I think I&apos;ve caught everything but it would be good if you could double-check.&lt;/p&gt;</comment>
                            <comment id="15983463" author="garydgregory" created="Tue, 25 Apr 2017 19:09:11 +0000"  >&lt;p&gt;Can someone update the description to add the chosen solution and how to use it SVP?&lt;/p&gt;</comment>
                            <comment id="15984976" author="tallison@mitre.org" created="Wed, 26 Apr 2017 15:14:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;good if you could double-check.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;All looks good.  Thank you!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13064087">COMPRESS-386</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12850912" name="data.mui" size="1024" author="lfcnassif" created="Fri, 3 Feb 2017 22:40:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 4 Feb 2017 14:15:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39lpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-379] isUnixSymlink returns true for Zip entries with Unix permissions 177777</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-379</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;This issue was originally reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/MASSEMBLY-842&quot; title=&quot;Incorrect entries created in MANIFEST/maven&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MASSEMBLY-842&quot;&gt;&lt;del&gt;MASSEMBLY-842&lt;/del&gt;&lt;/a&gt;, but it seems the root cause in inside Commons Compress.&lt;/p&gt;

&lt;p&gt;Consider the attached &lt;tt&gt;invalid-entry.jar&lt;/tt&gt;, whose contents, as shown by the &lt;tt&gt;zipinfo&lt;/tt&gt; utility, is:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;?rwsrwsrwt  2.0 unx        0 b- stor 17-Jan-15 16:06 META-INF/maven/
drwxr-xr-x  2.0 unx        0 b- stor 17-Jan-15 16:06 META-INF/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are some JAR files created by the Maven Assembly Plugin with content similar to this, and the entry &lt;tt&gt;META-INF/maven/&lt;/tt&gt; has permissions 177777 (octal). Constructing a &lt;tt&gt;ZipFile&lt;/tt&gt; from this file, the method &lt;tt&gt;isUnixSymlink&lt;/tt&gt; incorrectly returns &lt;tt&gt;true&lt;/tt&gt; for the entry &lt;tt&gt;META-INF/maven/&lt;/tt&gt; (and it correctly returns &lt;tt&gt;false&lt;/tt&gt; for the entry &lt;tt&gt;META-INF/&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Here is a sample Java code that can be used to see the behaviour:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (ZipFile zipFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipFile(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;invalid-entry.jar&quot;&lt;/span&gt;))) {
        printAttributes(zipFile, &lt;span class=&quot;code-quote&quot;&gt;&quot;META-INF/&quot;&lt;/span&gt;);
        printAttributes(zipFile, &lt;span class=&quot;code-quote&quot;&gt;&quot;META-INF/maven/&quot;&lt;/span&gt;);
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void printAttributes(ZipFile zipFile, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
    ZipArchiveEntry entry = zipFile.getEntriesInPhysicalOrder(name).iterator().next();
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.printf(&lt;span class=&quot;code-quote&quot;&gt;&quot;%-17s: symlink:%-5s - unixMode:%s%n&quot;&lt;/span&gt;, name, entry.isUnixSymlink(), entry.getUnixMode());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This code outputs:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;META-INF/        : symlink:false - unixMode:16877
META-INF/maven/  : symlink:true  - unixMode:65535
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;?rwsrwsrwt&lt;/tt&gt; permissions show that the Zip entry is broken in the first place, but I think &lt;tt&gt;isUnixSymlink&lt;/tt&gt; should still return &lt;tt&gt;false&lt;/tt&gt; in that case, and not consider this entry to be a symlink.&lt;/p&gt;

&lt;p&gt;It seems the fix would be to update &lt;tt&gt;isUnixSymlink&lt;/tt&gt; and check whether the unix mode is equal to &lt;tt&gt;SHORT_MASK&lt;/tt&gt;, and return &lt;tt&gt;false&lt;/tt&gt; in that case as it would indicate a broken entry. This change does not break any existing tests, but I&apos;m not sure if this is the proper fix.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isUnixSymlink() {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; unixMode = getUnixMode();
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; unixMode == SHORT_MASK ? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; : (unixMode &amp;amp; UnixStat.LINK_FLAG) == UnixStat.LINK_FLAG;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13035033">COMPRESS-379</key>
            <summary>isUnixSymlink returns true for Zip entries with Unix permissions 177777</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gboue">Guillaume Bou&#233;</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Jan 2017 16:53:19 +0000</created>
                <updated>Sun, 15 Jan 2017 22:23:55 +0000</updated>
                            <resolved>Sun, 15 Jan 2017 21:08:21 +0000</resolved>
                                    <version>1.13</version>
                                    <fixVersion>1.14</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15823219" author="bodewig" created="Sun, 15 Jan 2017 18:51:23 +0000"  >&lt;p&gt;But the same would be true for all other things you do with the &quot;unix mode&quot;. The flag that indicates a symlink &lt;b&gt;is&lt;/b&gt; set in your example.&lt;/p&gt;

&lt;p&gt;If we follow the logic that an attribute of &quot;all bits set&quot; is invalid then we shouldn&apos;t change the code here, but &lt;tt&gt;getUnixMode&lt;/tt&gt; instead so that it returns 0 rather than &lt;tt&gt;SHORT_MASK&lt;/tt&gt;, which in turn would remove all permissions as well. Why would we trust those more than the symlink flag?&lt;/p&gt;</comment>
                            <comment id="15823230" author="gboue" created="Sun, 15 Jan 2017 19:39:07 +0000"  >&lt;p&gt;What is the flag indicating that a symlink is set? I interpreted the &lt;tt&gt;?&lt;/tt&gt; inside &lt;tt&gt;?rwsrwsrwt&lt;/tt&gt; to mean &quot;unknown file type&quot; (like what &lt;tt&gt;ls -l&lt;/tt&gt; outputs) rather than &quot;symbolic link&quot;. Octal permissions of a symbolic link should be of the form &lt;tt&gt;12xxxx&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I think &lt;tt&gt;getUnixMode&lt;/tt&gt; does the right job of returning the Unix permissions as an octal number, but &lt;tt&gt;isUnixSymlink&lt;/tt&gt; sometimes returns &lt;tt&gt;true&lt;/tt&gt; when that number is higher than &lt;tt&gt;120000&lt;/tt&gt; (like &lt;tt&gt;177777&lt;/tt&gt; in the description where all bits are set). It does correctly return &lt;tt&gt;false&lt;/tt&gt; for permissions of &lt;tt&gt;147777&lt;/tt&gt; for example.&lt;/p&gt;

&lt;p&gt;Digging further, I found similar code inside &lt;a href=&quot;https://github.com/torvalds/linux/blob/master/include/uapi/linux/stat.h#L19&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;the Linux kernel&lt;/a&gt;, so the actual fix to me would be &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isUnixSymlink() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (getUnixMode() &amp;amp; 0170000) == UnixStat.LINK_FLAG;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(putting 0170000 in a constant inside &lt;tt&gt;UnixStat&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="15823266" author="bodewig" created="Sun, 15 Jan 2017 20:59:10 +0000"  >&lt;p&gt;Yes, this sounds reasonable. Of the bits indicating the &quot;file type&quot; only one should be non-null at the same time.&lt;/p&gt;</comment>
                            <comment id="15823270" author="bodewig" created="Sun, 15 Jan 2017 21:08:21 +0000"  >&lt;p&gt;resolved with commit c59fc43&lt;/p&gt;</comment>
                            <comment id="15823295" author="gboue" created="Sun, 15 Jan 2017 22:23:55 +0000"  >&lt;p&gt;Thanks, I can confirm that the commit solved the issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12626692">COMPRESS-214</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12847540" name="invalid-entry.jar" size="222" author="gboue" created="Sun, 15 Jan 2017 16:54:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 15 Jan 2017 18:51:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38qbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-378] SnappyCompressorInputStream slides the window too early</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-378</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The sliding window is moved once &quot;blocksize&quot; data have been processed, which is too early if the back-reference offset is close to blocksize.&lt;/p&gt;

&lt;p&gt;Also, the bytes read when the &lt;tt&gt;expand&lt;/tt&gt;-methods signal a flush is required have never been accounted for, leading to &quot;Premature end of stream&quot; errors.&lt;/p&gt;

&lt;p&gt;These have been fixed with git commits 9ae3752, d9421dc und e4658a.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13033282">COMPRESS-378</key>
            <summary>SnappyCompressorInputStream slides the window too early</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jan 2017 06:23:11 +0000</created>
                <updated>Tue, 10 Jan 2017 06:24:41 +0000</updated>
                            <resolved>Tue, 10 Jan 2017 06:24:40 +0000</resolved>
                                    <version>1.13</version>
                                    <fixVersion>1.14</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38hb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-377] ScatterZipOutputStream leaks StreamCompressor</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-377</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The &lt;tt&gt;Closable&lt;/tt&gt; &lt;tt&gt;StreamCompressor&lt;/tt&gt; passed in at the constructor is never closed, even though it likely holds a reference to a &lt;tt&gt;Deflater&lt;/tt&gt; instance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13029464">COMPRESS-377</key>
            <summary>ScatterZipOutputStream leaks StreamCompressor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Dec 2016 14:38:19 +0000</created>
                <updated>Tue, 20 Dec 2016 14:40:53 +0000</updated>
                            <resolved>Tue, 20 Dec 2016 14:40:53 +0000</resolved>
                                    <version>1.12</version>
                                    <fixVersion>1.13</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15764352" author="bodewig" created="Tue, 20 Dec 2016 14:40:53 +0000"  >&lt;p&gt;fixed with commit 85184c3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37trr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-367] ZipArchiveInputStream.getNextZipEntry() should differentiate between &quot;invalid entry encountered&quot; and &quot;no more entries&quot;</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-367</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ZipArchiveInputStream.getNextZipEntry() currently returns null if an invalid entry is encountered.  Thus, it&apos;s not possible to differentiate between &quot;no more entries&quot; and &quot;invalid entry encountered&quot; conditions.&lt;/p&gt;

&lt;p&gt;Instead, it should throw an exception if an invalid entry is encountered.&lt;/p&gt;

&lt;p&gt;I&apos;ve created a test case and fix. I will submit a pull request shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016128">COMPRESS-367</key>
            <summary>ZipArchiveInputStream.getNextZipEntry() should differentiate between &quot;invalid entry encountered&quot; and &quot;no more entries&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mikemole@gmail.com">Michael Mole</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2016 12:10:33 +0000</created>
                <updated>Fri, 9 Dec 2016 22:04:44 +0000</updated>
                            <resolved>Fri, 9 Dec 2016 22:04:44 +0000</resolved>
                                    <version>1.12</version>
                                    <fixVersion>1.13</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15615223" author="mikemole@gmail.com" created="Fri, 28 Oct 2016 12:13:53 +0000"  >&lt;p&gt;Attached is fix, new test, and fix for existing test.&lt;/p&gt;</comment>
                            <comment id="15736469" author="bodewig" created="Fri, 9 Dec 2016 22:04:44 +0000"  >&lt;p&gt;Patch applied, many thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835792" name="0001-COMPRESS-367-Throw-ZipException-on-invalid-entry-wit.patch" size="6701" author="mikemole@gmail.com" created="Fri, 28 Oct 2016 12:13:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Dec 2016 22:04:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35jhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-366] TarArchiveEntry: getDirectoryEntries not working</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-366</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;TarArchiveEntry.getDirectoryEntries() always returns an empty array. This is because entry.getFile() returns null for a directory entry.&lt;/p&gt;

&lt;p&gt;Let folder.tar be a Tar Archive which contains a folder, and that folder contains a file. Consider the following snippet:&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;import java.io.FileInputStream;&lt;br/&gt;
import org.apache.commons.compress.archivers.tar.*;&lt;/p&gt;

&lt;p&gt;public class GetDirectoryEntriesBug {&lt;br/&gt;
	public static void main(String[] args) throws Exception {&lt;br/&gt;
		TarArchiveInputStream tais = new TarArchiveInputStream(new FileInputStream(&quot;folder.tar&quot;));&lt;br/&gt;
		for(TarArchiveEntry entry; (entry = tais.getNextTarEntry()) != null; ) &lt;/p&gt;
{
			System.out.println(&quot;Name: &quot; + entry.getName() + &quot;, isDirectory: &quot; + entry.isDirectory() + &quot;, getDirectoryEntries().length: &quot; + entry.getDirectoryEntries().length);
		}
&lt;p&gt;		tais.close();&lt;br/&gt;
	}&lt;br/&gt;
}&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Output:&lt;br/&gt;
Name: folder/file, isDirectory: false, getDirectoryEntries().length: 0&lt;br/&gt;
Name: folder/, isDirectory: true, getDirectoryEntries().length: 0&lt;/p&gt;

&lt;p&gt;I expected that, for &quot;folder/&quot;, getDirectoryEntries() will not return an empty array.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Eclipse 4.6, Linux 64 Bit&lt;/p&gt;</environment>
        <key id="13009602">COMPRESS-366</key>
            <summary>TarArchiveEntry: getDirectoryEntries not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="casi_colada">Casi Colada</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2016 15:52:47 +0000</created>
                <updated>Fri, 7 Oct 2016 15:56:33 +0000</updated>
                            <resolved>Fri, 7 Oct 2016 15:56:32 +0000</resolved>
                                    <version>1.12</version>
                                    <fixVersion>1.13</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                        <comments>
                            <comment id="15547564" author="bodewig" created="Wed, 5 Oct 2016 04:20:59 +0000"  >&lt;p&gt;&lt;tt&gt;TarArchiveEntry&lt;/tt&gt; contains quite a few methods that don&apos;t work for entries read from the archive but only for entries you&apos;ve created yourself using a &lt;tt&gt;File&lt;/tt&gt;-arg constructor. &lt;tt&gt;getDirectoryEntries&lt;/tt&gt; is one of them. TBH I don&apos;t know what those method have ever been used for, maybe as a convenience for people creating archives. &lt;/p&gt;</comment>
                            <comment id="15548133" author="casi_colada" created="Wed, 5 Oct 2016 09:04:13 +0000"  >&lt;p&gt;Thank you very much. That was not clear to me after reading the Javadoc.&lt;/p&gt;</comment>
                            <comment id="15552199" author="bodewig" created="Thu, 6 Oct 2016 15:23:21 +0000"  >&lt;p&gt;Thank you, that&apos;s a good point. We should at least clarify the javadocs. I&apos;ll keep this ticket open until I&apos;ve come around to it.&lt;/p&gt;</comment>
                            <comment id="15555454" author="bodewig" created="Fri, 7 Oct 2016 15:56:32 +0000"  >&lt;p&gt;fixed with git commit f010260&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Oct 2016 04:20:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34fcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-364] ZipArchiveInputStream.closeEntry does not properly advance to next entry if there are junk bytes at end of data section</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-364</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ZipArchiveInputStream.closeEntry() will not properly advance to the next entry causing the next call to getNextZipEntry to incorrectly return null if there are junk bytes at the end of the compressed data section.&lt;/p&gt;

&lt;p&gt;More specifically, I found a case where the first entry&apos;s local header says that its compressed data size is 620 bytes. There are in fact 620 bytes before the next local header. However, when the compressed data is inflated, it only requires 618 of the 620 bytes to fully inflate (i.e. before it encounters the DEFLATE end of data code). This means that there is complete DEFLATE compressed data + extra garbage bytes after it, all within the specified zip entry data section.&lt;/p&gt;

&lt;p&gt;The commons compress ZipArchiveInputStream streaming implementation doesn&apos;t exactly read on zip entry boundaries, but instead it reads 512 bytes at a time. As a result it tends to read more bytes than necessary per entry and then seek back to the beginning of the next entry. When it seeks back, it assumes that number of bytes that were required to be read to reach the end of the zip entry is the same as the number of bytes needed to inflate the data. However that assumption does not hold up in this case. 620 bytes need to be read to reach then end of the zip entry, but only 618 were needed to inflate the data.  After the pushback, the closeEntry() method should perform a final drain of the remaining bytes to reach the next local file header.&lt;/p&gt;

&lt;p&gt;I&apos;ve created a test case and fix.  I will submit a pull request shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12998489">COMPRESS-364</key>
            <summary>ZipArchiveInputStream.closeEntry does not properly advance to next entry if there are junk bytes at end of data section</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mikemole@gmail.com">Michael Mole</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2016 13:44:25 +0000</created>
                <updated>Fri, 7 Oct 2016 16:21:52 +0000</updated>
                            <resolved>Fri, 7 Oct 2016 16:21:51 +0000</resolved>
                                    <version>1.12</version>
                                    <fixVersion>1.13</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15428368" author="garydgregory" created="Fri, 19 Aug 2016 16:08:43 +0000"  >&lt;p&gt;Hello Michael,&lt;/p&gt;

&lt;p&gt;Can you provide a patch with a unit test?&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="15429070" author="mikemole@gmail.com" created="Fri, 19 Aug 2016 23:50:44 +0000"  >&lt;p&gt;Patch with test and fix attached.&lt;/p&gt;</comment>
                            <comment id="15516226" author="mikemole@gmail.com" created="Fri, 23 Sep 2016 11:52:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;Gary Gregory&lt;/a&gt; - Hi Gary.  Were you able to get the patch working?&lt;/p&gt;</comment>
                            <comment id="15555520" author="bodewig" created="Fri, 7 Oct 2016 16:21:52 +0000"  >&lt;p&gt;Thanks a lot, Mike, and sorry for the delay.&lt;/p&gt;

&lt;p&gt;I&apos;ve applied your patch, it will be part of the next release of compress.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12824668" name="0001-COMPRESS-364-ZipArchiveInputStream.closeEntry-fails-.patch" size="5518" author="mikemole@gmail.com" created="Fri, 19 Aug 2016 23:50:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Aug 2016 16:08:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32ivj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-363] Overflow in BitInputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-363</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;in Class BitInputStream.java(\src\main\java\org\apache\commons\compress\utils),&lt;br/&gt;
funcion:&lt;/p&gt;

&lt;p&gt; public long readBits(final int count) throws IOException {&lt;br/&gt;
        if (count &amp;lt; 0 || count &amp;gt; MAXIMUM_CACHE_SIZE) &lt;/p&gt;
{
            throw new IllegalArgumentException(&quot;count must not be negative or greater than &quot; + MAXIMUM_CACHE_SIZE);
        }
&lt;p&gt;        while (bitsCachedSize &amp;lt; count) {&lt;br/&gt;
            final long nextByte = in.read();&lt;br/&gt;
            if (nextByte &amp;lt; 0) &lt;/p&gt;
{
                return nextByte;
            }
&lt;p&gt;            if (byteOrder == ByteOrder.LITTLE_ENDIAN) &lt;/p&gt;
{
                bitsCached |= (nextByte &amp;lt;&amp;lt; bitsCachedSize);
            }
&lt;p&gt; else &lt;/p&gt;
{
                bitsCached &amp;lt;&amp;lt;= 8;
                bitsCached |= nextByte;
            }
&lt;p&gt;            bitsCachedSize += 8;&lt;br/&gt;
        }&lt;/p&gt;

&lt;p&gt;        final long bitsOut;&lt;br/&gt;
        if (byteOrder == ByteOrder.LITTLE_ENDIAN) &lt;/p&gt;
{
            bitsOut = (bitsCached &amp;amp; MASKS[count]);
            bitsCached &amp;gt;&amp;gt;&amp;gt;= count;
        }
&lt;p&gt; else &lt;/p&gt;
{
            bitsOut = (bitsCached &amp;gt;&amp;gt; (bitsCachedSize - count)) &amp;amp; MASKS[count];
        }
&lt;p&gt;        bitsCachedSize -= count;&lt;br/&gt;
        return bitsOut;&lt;br/&gt;
    }&lt;/p&gt;



&lt;p&gt;I think here &quot;bitsCached |= (nextByte &amp;lt;&amp;lt; bitsCachedSize);&quot; will overflow in some cases. for example, below is a test case:&lt;/p&gt;

&lt;p&gt;public static void test() {&lt;/p&gt;

&lt;p&gt;        ByteArrayInputStream in = new ByteArrayInputStream(new byte[]&lt;/p&gt;
{87, 45, 66, 15,
                                                                      90, 29, 88, 61, 33, 74}
&lt;p&gt;);&lt;br/&gt;
        BitInputStream bin = new BitInputStream(in, ByteOrder.LITTLE_ENDIAN);&lt;br/&gt;
        try &lt;/p&gt;
{
            long ret = bin.readBits(5);
            ret = bin.readBits(63);
            ret = bin.readBits(12);
        }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
            e.printStackTrace();
        }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;overflow occur in &quot;bin.readBits(63);&quot; , so ,result in wrong result from  &quot;bin.readBits(12);&quot; &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12984815">COMPRESS-363</key>
            <summary>Overflow in BitInputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fredwang_00">fredwang_00</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jun 2016 09:19:19 +0000</created>
                <updated>Fri, 1 Jul 2016 19:39:14 +0000</updated>
                            <resolved>Fri, 1 Jul 2016 19:39:14 +0000</resolved>
                                    <version>1.12</version>
                                    <fixVersion>1.13</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15359524" author="bodewig" created="Fri, 1 Jul 2016 19:39:14 +0000"  >&lt;p&gt;Many thanks, I&apos;ve created a unit test from your example.&lt;/p&gt;

&lt;p&gt;Should be fixed with git commit 52dd590.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Jul 2016 19:39:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30aw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-360] Update Java requirement from Java 6 to 7</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-360</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Update Java requirement from Java 6 to 7.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12983172">COMPRESS-360</key>
            <summary>Update Java requirement from Java 6 to 7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="garydgregory">Gary Gregory</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Jun 2016 20:31:16 +0000</created>
                <updated>Sat, 25 Jun 2016 20:35:54 +0000</updated>
                            <resolved>Sat, 25 Jun 2016 20:35:54 +0000</resolved>
                                    <version>1.12</version>
                                    <fixVersion>1.13</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15349815" author="garydgregory" created="Sat, 25 Jun 2016 20:35:54 +0000"  >&lt;p&gt;In Git master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i303jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-359] Pack200 is broken</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-359</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Please see &lt;tt&gt;org.apache.commons.compress.compressors.CompressorStreamFactoryRoundtripTest&lt;/tt&gt; and comment in the Pack200 parameterized test.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Apache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-14T09:29:23-08:00)&lt;br/&gt;
Maven home: E:\Java\apache-maven-3.2.5&lt;br/&gt;
Java version: 1.6.0_45, vendor: Sun Microsystems Inc.&lt;br/&gt;
Java home: E:\Program Files\Java\jdk1.6.0_45\jre&lt;br/&gt;
Default locale: en_US, platform encoding: Cp1252&lt;br/&gt;
OS name: &quot;windows 7&quot;, version: &quot;6.1&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;&lt;/p&gt;</environment>
        <key id="12982738">COMPRESS-359</key>
            <summary>Pack200 is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="garydgregory">Gary Gregory</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jun 2016 16:45:49 +0000</created>
                <updated>Tue, 10 Jan 2017 16:08:17 +0000</updated>
                            <resolved>Tue, 10 Jan 2017 16:08:17 +0000</resolved>
                                    <version>1.12</version>
                                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15359350" author="bodewig" created="Fri, 1 Jul 2016 17:39:48 +0000"  >&lt;p&gt;pack200 compresses jars, nothing else. You can&apos;t expect it to roundrtip arbitrary data. See &lt;a href=&quot;https://commons.apache.org/proper/commons-compress/pack200.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://commons.apache.org/proper/commons-compress/pack200.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15359366" author="garydgregory" created="Fri, 1 Jul 2016 17:53:10 +0000"  >&lt;p&gt;So GIGO, can we or should we add some bullet proofing?&lt;/p&gt;</comment>
                            <comment id="15359528" author="bodewig" created="Fri, 1 Jul 2016 19:42:51 +0000"  >&lt;p&gt;Tricky at the byte level as there isn&apos;t even any guarantee that a round-tripped jar is identical to the original one. You have to compare the contents of the jars. This is what &lt;tt&gt;testJarArchiveCreation*&lt;/tt&gt; in &lt;tt&gt;org.apache.commons.compress.compressors.Pack200TestCase&lt;/tt&gt; does.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Jul 2016 17:39:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i301jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-358] Offset is larger than block size in IWA dialect of FramedSnappyCompressorInputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-358</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I finally was able to run the FramedSnappyCompressorInputStreamon a larger number of .iwa files.  I got the following on two files:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: Offset is larger than block size
	at org.apache.commons.compress.compressors.snappy.SnappyCompressorInputStream.expandCopy(SnappyCompressorInputStream.java:341)
	at org.apache.commons.compress.compressors.snappy.SnappyCompressorInputStream.fill(SnappyCompressorInputStream.java:212)
	at org.apache.commons.compress.compressors.snappy.SnappyCompressorInputStream.read(SnappyCompressorInputStream.java:134)
	at org.apache.commons.compress.compressors.snappy.FramedSnappyCompressorInputStream.readOnce(FramedSnappyCompressorInputStream.java:166)
	at org.apache.commons.compress.compressors.snappy.FramedSnappyCompressorInputStream.read(FramedSnappyCompressorInputStream.java:122)
	at java.io.InputStream.read(InputStream.java:101)
	at java.nio.file.Files.copy(Files.java:2908)
	at java.nio.file.Files.copy(Files.java:3027)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;No good deed goes unpunished... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Thank you, again!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12982074">COMPRESS-358</key>
            <summary>Offset is larger than block size in IWA dialect of FramedSnappyCompressorInputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tallison@mitre.org">Tim Allison</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jun 2016 19:45:10 +0000</created>
                <updated>Tue, 10 Jan 2017 17:10:24 +0000</updated>
                            <resolved>Tue, 10 Jan 2017 17:10:24 +0000</resolved>
                                    <version>1.12</version>
                                    <fixVersion>1.14</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15345046" author="tallison@mitre.org" created="Wed, 22 Jun 2016 19:47:25 +0000"  >&lt;p&gt;Original file DocumentStylesheet.iwa and the version as uncompressed by Evernote&apos;s &lt;a href=&quot;https://github.com/evernote/iwana/blob/master/iwana-extract/src/main/java/com/evernote/iwana/SnappyNoCRCFramedInputStream.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;iwana&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15359431" author="bodewig" created="Fri, 1 Jul 2016 18:26:21 +0000"  >&lt;p&gt;Hmm, I don&apos;t get the exception you describe but instead the whole file is skipped, when reading the attached DocumentStylesheet.iwa. Is the file correct?&lt;/p&gt;

&lt;p&gt;The very first byte is 0xda (a block type not defined at all) and the three bytes specify a size larger than the file size. It looks as if DocumentStylesheet.iwa would be the first 32k of DocumentStylesheet_uncompressed.iwa&lt;/p&gt;</comment>
                            <comment id="15555531" author="bodewig" created="Fri, 7 Oct 2016 16:24:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;Tim Allison&lt;/a&gt; any update on the files?&lt;/p&gt;</comment>
                            <comment id="15811917" author="bodewig" created="Mon, 9 Jan 2017 14:38:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;Tim Allison&lt;/a&gt; while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-246&quot; title=&quot;Compressor for Snappy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-246&quot;&gt;&lt;del&gt;COMPRESS-246&lt;/del&gt;&lt;/a&gt; I discovered a few bugs in &lt;tt&gt;SnappyCompressorInputStream&lt;/tt&gt; where it was losing data when sliding the window too early or incorrectly counting bytes read when the window needed to slide. Could you give the current master branch a try to see whether it solves your problem?&lt;/p&gt;</comment>
                            <comment id="15811929" author="tallison@mitre.org" created="Mon, 9 Jan 2017 14:42:02 +0000"  >&lt;p&gt;Y, sorry for dropping the ball on this.  Thank you for your help.  Will check today.&lt;/p&gt;</comment>
                            <comment id="15812886" author="tallison@mitre.org" created="Mon, 9 Jan 2017 21:25:00 +0000"  >&lt;p&gt;I&apos;m still getting &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: Offset is larger than block size
	at org.apache.commons.compress.compressors.snappy.SnappyCompressorInputStream.expandCopy(SnappyCompressorInputStream.java:353)
	at org.apache.commons.compress.compressors.snappy.SnappyCompressorInputStream.fill(SnappyCompressorInputStream.java:215)
	at org.apache.commons.compress.compressors.snappy.SnappyCompressorInputStream.read(SnappyCompressorInputStream.java:134)
	at org.apache.commons.compress.compressors.snappy.FramedSnappyCompressorInputStream.readOnce(FramedSnappyCompressorInputStream.java:167)
	at org.apache.commons.compress.compressors.snappy.FramedSnappyCompressorInputStream.read(FramedSnappyCompressorInputStream.java:123)
	at org.apache.commons.compress.compressors.snappy.FramedSnappyCompressorInputStream.read(FramedSnappyCompressorInputStream.java:107)
	at org.apache.commons.compress.compressors.snappy.FramedSnappyCompressorInputStreamTest.readIWAStyleSheet(FramedSnappyCompressorInputStreamTest.java:201)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15812902" author="tallison@mitre.org" created="Mon, 9 Jan 2017 21:29:44 +0000"  >&lt;p&gt;I&apos;m attaching the DocumentStyleSheet_fromZipStream.iwa that I &lt;tt&gt;IOUtils.copy&lt;/tt&gt; from the ZipEntry for &lt;tt&gt;Index/DocumentStyleSheet.iwa&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;When I run iwana&apos;s &lt;tt&gt;SnappyNoCRCFramedInputStream&lt;/tt&gt;, I get &lt;tt&gt;DocumentStylesheet_iwana_unsnapped.iwa&lt;/tt&gt; with no exceptions.&lt;/p&gt;

&lt;p&gt;When I run an updated version of commons&apos; &lt;tt&gt;FramedSnappyCompressorInputStream&lt;/tt&gt; as &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FramedSnappyCompressorInputStream in =
                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FramedSnappyCompressorInputStream(is, FramedSnappyDialect.IWORK_ARCHIVE);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I get the &lt;tt&gt;Offset is larger than blocksize exception&lt;/tt&gt; at 40 kb in &lt;tt&gt;DocumentStyleSheet_commons_unsnapped.iwa&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15812911" author="tallison@mitre.org" created="Mon, 9 Jan 2017 21:33:10 +0000"  >&lt;p&gt;Again, sorry for my delay!!!&lt;/p&gt;

&lt;p&gt;I think something was wrong with the file I attached &lt;tt&gt;DocumentStyleSheet.iwa&lt;/tt&gt;...I can&apos;t remember if I got that via Winzip or something else.&lt;/p&gt;

&lt;p&gt;That file &lt;em&gt;should&lt;/em&gt; be the same as &lt;tt&gt;DocumentStyleSheet_fromZipStream.iwa&lt;/tt&gt;, and it clearly isn&apos;t.&lt;/p&gt;</comment>
                            <comment id="15812916" author="tallison@mitre.org" created="Mon, 9 Jan 2017 21:35:13 +0000"  >&lt;p&gt;This is the original complete .numbers file.&lt;/p&gt;</comment>
                            <comment id="15814016" author="bodewig" created="Tue, 10 Jan 2017 06:03:33 +0000"  >&lt;p&gt;Thanks, Tim, I&apos;ll try to find some time during the next days.&lt;/p&gt;</comment>
                            <comment id="15814044" author="bodewig" created="Tue, 10 Jan 2017 06:18:02 +0000"  >&lt;p&gt;We use an internal lock size of 32k and this one is only configurable for the raw stream, It seems the IWA files use offsets larger than that. &lt;a href=&quot;https://github.com/evernote/iwana/blob/master/iwana-extract/src/main/java/com/evernote/iwana/SnappyNoCRCFramedInputStream.java#L33&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/evernote/iwana/blob/master/iwana-extract/src/main/java/com/evernote/iwana/SnappyNoCRCFramedInputStream.java#L33&lt;/a&gt; uses 128k which is way bigger than the size the &quot;spec&quot; talks about&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note that the data portion of the chunk, i.e., the compressed contents,&lt;br/&gt;
can be at most 16777211 bytes (2^24 - 1, minus the checksum).&lt;br/&gt;
However, we place an additional restriction that the uncompressed data&lt;br/&gt;
in a chunk must be no longer than 65536 bytes. This allows consumers to&lt;br/&gt;
easily use small fixed-size buffers.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yet another deviation, I guess.&lt;/p&gt;

&lt;p&gt;I&apos;ll make the block size configurable for the framed streams as well, probably won&apos;t manage to do so today, though.&lt;/p&gt;</comment>
                            <comment id="15814861" author="tallison@mitre.org" created="Tue, 10 Jan 2017 12:35:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;Yet another deviation, I guess.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;No rush on my end.  Thank you, again!&lt;/p&gt;</comment>
                            <comment id="15815136" author="bodewig" created="Tue, 10 Jan 2017 14:42:12 +0000"  >&lt;p&gt;Some initial testing shows a block size of 64k is should be sufficient for your example. Can we include the files as unit test fodder?&lt;/p&gt;</comment>
                            <comment id="15815484" author="bodewig" created="Tue, 10 Jan 2017 16:54:01 +0000"  >&lt;p&gt;Current master uncompresses your example correctly when using a block size of 64k, the change is trivial.&lt;/p&gt;

&lt;p&gt;I&apos;ve got a unit test based on your files sitting in my workspace ready to get committed unless there was something sensitive inside.&lt;/p&gt;</comment>
                            <comment id="15815502" author="tallison@mitre.org" created="Tue, 10 Jan 2017 17:01:28 +0000"  >&lt;p&gt;Woohoo!  Thank you!&lt;/p&gt;

&lt;p&gt;That test file comes from Evernote&apos;s &lt;a href=&quot;https://github.com/evernote/iwana/blob/master/iwana-extract/src/test/resources/test-documents/testNumbers2013.numbers&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;iwana&lt;/a&gt;.  I trust from their license that it is ASL 2.0.&lt;/p&gt;

&lt;p&gt;Again, apologies for my delay, and thank you!&lt;/p&gt;</comment>
                            <comment id="15815530" author="bodewig" created="Tue, 10 Jan 2017 17:10:24 +0000"  >&lt;p&gt;Thanks, I committed the test.&lt;/p&gt;

&lt;p&gt;In retrospect I could have understood the problem when you reported it as the error message was clear enough. But in reality I had to implement write support to really wrap my head around the algorithm and format.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12846414" name="DocumentStyleSheet_commons_unsnapped.iwa" size="40002" author="tallison@mitre.org" created="Mon, 9 Jan 2017 21:29:44 +0000"/>
                            <attachment id="12846415" name="DocumentStyleSheet_fromZipStream.iwa" size="36288" author="tallison@mitre.org" created="Mon, 9 Jan 2017 21:29:44 +0000"/>
                            <attachment id="12812597" name="DocumentStylesheet.iwa" size="32768" author="tallison@mitre.org" created="Wed, 22 Jun 2016 19:47:25 +0000"/>
                            <attachment id="12846416" name="DocumentStylesheet_iwana_unsnapped.iwa" size="219521" author="tallison@mitre.org" created="Mon, 9 Jan 2017 21:29:44 +0000"/>
                            <attachment id="12812596" name="DocumentStylesheet_uncompressed.iwa" size="199496" author="tallison@mitre.org" created="Wed, 22 Jun 2016 19:47:25 +0000"/>
                            <attachment id="12846417" name="testNumbersNew.numbers" size="179147" author="tallison@mitre.org" created="Mon, 9 Jan 2017 21:35:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Jul 2016 18:26:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zxg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-357] BZip2CompressorOutputStream can affect output stream incorrectly</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-357</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;BZip2CompressorOutputStream has an unsynchronized finished() method, and an unsynchronized finalize method. Finish checks to see if the output stream is null, and if it is not it calls various methods, some of which write to the output stream. &lt;/p&gt;

&lt;p&gt;Now, consider something like this sequence.&lt;/p&gt;

&lt;p&gt;BZip2OutputStream s = ...&lt;br/&gt;
...&lt;br/&gt;
s.close();&lt;br/&gt;
s = null;&lt;/p&gt;

&lt;p&gt;After the s = null, the stream is garbage. At some point the garbage collector call finalize(), which calls finish(). But, since the GC may be on a different thread, there is no guarantee that the assignment this.out = null in finish() has actually been made visible to the GC thread, which results in bad data in the output stream.&lt;/p&gt;

&lt;p&gt;This is not a theoretical problem; In a part of a large project I&apos;m working on, this happens about 2% of the time. &lt;/p&gt;

&lt;p&gt;The fixes are simple&lt;/p&gt;

&lt;p&gt;1) synchronize finish() or&lt;/p&gt;

&lt;p&gt;2) don&apos;t call finish from finalize().&lt;/p&gt;

&lt;p&gt;A workaround is to derive a class and override the finalize() method. &lt;/p&gt;
</description>
                <environment>&lt;p&gt;multithreaded&lt;/p&gt;</environment>
        <key id="12972789">COMPRESS-357</key>
            <summary>BZip2CompressorOutputStream can affect output stream incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rashapiro83">Richard Shapiro</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Wed, 25 May 2016 17:50:50 +0000</created>
                <updated>Wed, 15 Jun 2016 04:19:38 +0000</updated>
                            <resolved>Wed, 15 Jun 2016 04:19:37 +0000</resolved>
                                    <version>1.9</version>
                    <version>1.11</version>
                                    <fixVersion>1.12</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="15302198" author="bodewig" created="Thu, 26 May 2016 15:04:02 +0000"  >&lt;p&gt;Yes, you are totally correct, many thanks.&lt;/p&gt;

&lt;p&gt;I&apos;ve made &lt;tt&gt;finish&lt;/tt&gt; synchronized with commit 952a503&lt;/p&gt;</comment>
                            <comment id="15324410" author="bodewig" created="Fri, 10 Jun 2016 13:01:50 +0000"  >&lt;p&gt;There is a third option, the one I&apos;ve now taken with git commits 8769bb6 and bdc5ad4 - use a volatile boolean rather than checking out for null-ness.&lt;/p&gt;</comment>
                            <comment id="15324548" author="sebb@apache.org" created="Fri, 10 Jun 2016 14:44:55 +0000"  >&lt;p&gt;The &apos;close&apos; field is now volatile and published safely, but what about the other variables that the finalize() method depends on?&lt;/p&gt;

&lt;p&gt;For example runLength.&lt;/p&gt;</comment>
                            <comment id="15324556" author="bodewig" created="Fri, 10 Jun 2016 14:47:59 +0000"  >&lt;p&gt;I didn&apos;t intend to make finish thread-safe (the class is labeled as NotThreadSafe after all), all I wanted to avoid is running finish twice in the sceario described by this issue.&lt;/p&gt;</comment>
                            <comment id="15325493" author="sebb@apache.org" created="Fri, 10 Jun 2016 23:25:17 +0000"  >&lt;p&gt;I understand, but AFAIK replacing synch. with a volatile changes the behaviour wrt. safe publication.&lt;/p&gt;

&lt;p&gt;If the user code fails to run finish, then it won&apos;t set closed=true and finalize will attempt to run finish.&lt;br/&gt;
For finalize to work, it needs to have access to the latest values of other variables which have been updated in another thread.&lt;/p&gt;

&lt;p&gt;In fact this is exactly the problem detailed in the description - the variable was not published safely.&lt;/p&gt;

&lt;p&gt;The code now publishes &apos;closed&apos; OK, so finalize won&apos;t run finish a second time, but what about other variables that finalize may need to run finish successfully?&lt;/p&gt;</comment>
                            <comment id="15325504" author="sebb@apache.org" created="Fri, 10 Jun 2016 23:32:32 +0000"  >&lt;p&gt;As mentioned on the mailing list, it&apos;s tricky to get finalize working properly.&lt;/p&gt;

&lt;p&gt;Rather than try to fix up bad code, maybe the finalize method should just report if it detects failure to close the resource.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;It should report unclosed resources anyway.&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Also, are there any use-cases where the app code deliberately does not want to close the resource?&lt;/p&gt;</comment>
                            <comment id="15325914" author="bodewig" created="Sat, 11 Jun 2016 15:35:35 +0000"  >&lt;p&gt;I&apos;m not sure whether there is a good use case, but finalize has done so for many releases and the javadocs say so.&lt;/p&gt;

&lt;p&gt;A third approach: git comit abc2d23 which synchronizes the meat of finish.&lt;/p&gt;</comment>
                            <comment id="15325939" author="sebb@apache.org" created="Sat, 11 Jun 2016 16:20:02 +0000"  >&lt;p&gt;Unfortunately AFAICT that still does not guarantee that all the variables will be safely published.&lt;/p&gt;

&lt;p&gt;A variable is only safely published if the write happens-before the read.&lt;/p&gt;

&lt;p&gt;One way to do this is where both the writer and reader synchronize on the &lt;b&gt;same&lt;/b&gt; lock.&lt;/p&gt;

&lt;p&gt;Another way I think is a shared volatile.&lt;br/&gt;
If thread A updates some fields and then writes the volatile, when thread B reads the same volatile it will see any such updates.&lt;br/&gt;
But if thread A has since updated some fields, thread B could see either the original or a later value.&lt;/p&gt;
</comment>
                            <comment id="15325974" author="bodewig" created="Sat, 11 Jun 2016 17:43:31 +0000"  >&lt;p&gt;I&apos;m not convinced we need to think about any publication other than the one of &lt;tt&gt;out&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This issue is about a thread calling &lt;tt&gt;finish&lt;/tt&gt; and then the GC comes in and runs &lt;tt&gt;finalize&lt;/tt&gt; which in turn runs &lt;tt&gt;finish&lt;/tt&gt; again and the GC thread hasn&apos;t seen &lt;tt&gt;out&lt;/tt&gt; having become &lt;tt&gt;null&lt;/tt&gt;. There shouldn&apos;t be any concurrent reads to any other variables at all as the GC thread is the only one I want to care about - the rest is covered by declaring the whole class not thread safe.&lt;/p&gt;</comment>
                            <comment id="15326670" author="sebb@apache.org" created="Sun, 12 Jun 2016 22:59:29 +0000"  >&lt;p&gt;There are two cases to consider:&lt;br/&gt;
A) the main code runs finish(), and finalize must be prevented from calling finish() again.&lt;br/&gt;
B) the main code does not run finish(), so finalize must call finish()&lt;/p&gt;

&lt;p&gt;Case A is easy to handle; just ensure that the indicator variable (out) is properly published.&lt;/p&gt;

&lt;p&gt;In case B, the finalize method detects that it needs to call finish().&lt;br/&gt;
So far so good, the finalizer thread has only accessed the properly published variable.&lt;br/&gt;
But the finish() method will only work properly if it sees the correct values for all the variables it uses.&lt;br/&gt;
Other variables have not been safely published, so the values seen by the finalizer thread may be arbitrarily stale.&lt;/p&gt;

&lt;p&gt;Note that this is not a problem of concurrent access - it is a problem of safe publication, i.e. ensuring that the variable values written in the main thread are seen by the finalizer thread. &lt;/p&gt;

&lt;p&gt;This is exactly the problem reported in the description; the correct out field value was not seen by the finalizer thread.&lt;/p&gt;

&lt;p&gt;One way to fix this would be to make &lt;b&gt;all&lt;/b&gt; the variables used by finish() volatile.&lt;br/&gt;
I don&apos;t know if that would cause a serious performance hit.&lt;/p&gt;</comment>
                            <comment id="15326728" author="rashapiro83" created="Mon, 13 Jun 2016 01:27:48 +0000"  >&lt;p&gt;I just want to point out that the real problem with this is the presence of a finalize() method. Any code that requires that finalize() be run is almost certainly incorrect, as you can never rely on it ever being called. Since the class is thread-unsafe, there is in practice no additional performance cost to synchronizing both flush() and finish(), since if the lock isn&apos;t essentially free, you aren&apos;t using the class correctly either (i.e., you&apos;d better be calling write() and flush() inside some other synchronized block, or else guarantee they are on the same thread). &lt;/p&gt;

&lt;p&gt;The other thing to remember is that if it&apos;s incorrect, it doesn&apos;t matter how fast something is, and bzip2 is already so slow that I doubt you will ever see the synchronization cost even if you do multi-thread it.&lt;/p&gt;

&lt;p&gt;By far the most correct solution is to get rid of finish().   &lt;/p&gt;</comment>
                            <comment id="15327027" author="sebb@apache.org" created="Mon, 13 Jun 2016 08:59:08 +0000"  >&lt;p&gt;I agree about dropping the code.&lt;/p&gt;

&lt;p&gt;However, rather than eliminate the finalize method entirely, maybe change it to log/print a warning that the stream has not been properly closed.&lt;br/&gt;
This goes some way towards supporting the previously advertised functionality - but of course only for cases where the finalizer is actually called.&lt;/p&gt;

&lt;p&gt;Regarding synch. of flush() and finish(): that isn&apos;t sufficient to solve the safe publication issue.&lt;/p&gt;

&lt;p&gt;Happens-before ordering depends on using the same lock for the writer and reader threads.&lt;br/&gt;
Lock release happens-before lock acquire, and actions (e.g. writes) in a single thread happen-before actions that come later in the program order.&lt;br/&gt;
Unless all methods called by the main thread are synch. then the main thread can write variables after the last shared lock.&lt;/p&gt;

&lt;p&gt;There are various ways to ensure the fields are safely published.&lt;/p&gt;

&lt;p&gt;However as has been pointed out, finalize() may never get run, so app code cannot rely on finish() being called.&lt;br/&gt;
So it does not matter if finish() does not get called even if the finalize() method does get run.&lt;/p&gt;</comment>
                            <comment id="15327032" author="bodewig" created="Mon, 13 Jun 2016 09:06:43 +0000"  >&lt;p&gt;Many thanks for pointing out my flaw of overlooking the case where finalize calls finish on a non-closed stream.&lt;/p&gt;

&lt;p&gt;I&apos;ll start a thread on the mailing list about dropping this specific functionality here. ZipFile is the only other case with finalize and I know of a (valid IMHO) use case for. This seems to be safe, though.&lt;/p&gt;</comment>
                            <comment id="15331116" author="bodewig" created="Wed, 15 Jun 2016 04:19:38 +0000"  >&lt;p&gt;git commit 2424036 has been changed so that &lt;tt&gt;finish&lt;/tt&gt; is no longer called from &lt;tt&gt;finalize&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 May 2016 15:04:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yhrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-356] PAX header entry name ending with / causes problems</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-356</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;There seems to be a problem when a PAX header entry (link flag is &apos;x&apos;) has a name ending with &quot;/&quot;. The &lt;tt&gt;TarArchiveEntry.isDirectory()&lt;/tt&gt; check ends up returning &lt;tt&gt;true&lt;/tt&gt; because of the trailing slash which means no content can be read from the entry. PAX header parsing effectively finds nothing and the stream is not advanced; this leaves the stream in a bad state as the next entry&apos;s header is actually read from the header contents.&lt;/p&gt;

&lt;p&gt;If the name is modified to remove the trailing slash when the link flag indicates a PAX header everything seems to work fine. That would be one potential fix in &lt;tt&gt;parseTarHeader&lt;/tt&gt;. Changing &lt;tt&gt;isDirectory&lt;/tt&gt; to return &lt;tt&gt;false&lt;/tt&gt; if &lt;tt&gt;isPaxHeader&lt;/tt&gt; is &lt;tt&gt;true&lt;/tt&gt; (before the trailing &quot;/&quot; check) would probably also fix the issue (though I can&apos;t verify that in the debugger like I can with changing the name).&lt;/p&gt;

&lt;p&gt;So far I have only seen this when using Docker to save images that contain a yum database. For example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;docker pull centos:latest &amp;amp;&amp;amp; docker save centos:latest | tar x --include &quot;*/layer.tar&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Will produce at least one &quot;layer.tar&quot; that exhibits this issue. If I come across a smaller TAR for testing I will attach it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12971001">COMPRESS-356</key>
            <summary>PAX header entry name ending with / causes problems</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 May 2016 03:22:41 +0000</created>
                <updated>Fri, 20 May 2016 16:45:41 +0000</updated>
                            <resolved>Fri, 20 May 2016 16:45:41 +0000</resolved>
                                    <version>1.11</version>
                                    <fixVersion>1.12</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15291470" author="jgustie" created="Thu, 19 May 2016 16:39:21 +0000"  >&lt;p&gt;I can confirm the fix &lt;a href=&quot;https://github.com/apache/commons-compress/compare/master...blackducksoftware:bug/COMPRESS-356-pax-header-trailing-slash-name&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt; works (alas, no tests).&lt;/p&gt;</comment>
                            <comment id="15293683" author="bodewig" created="Fri, 20 May 2016 16:45:41 +0000"  >&lt;p&gt;Thanks a lot.&lt;/p&gt;

&lt;p&gt;Commit 823cdee contains a slightly modified version of your patch. If manually created an archive for the test case - Emacs hexl-mode to the rescue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 May 2016 16:45:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y6qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-355] Parsing PAX headers fails with NegativeArraySizeException</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-355</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The &lt;tt&gt;TarArchiveInputStream.parsePaxHeaders&lt;/tt&gt; method fails with a &lt;tt&gt;NegativeArraySizeException&lt;/tt&gt; when there is an empty line at the end of the headers.&lt;/p&gt;

&lt;p&gt;The inner loop starts reading the length, but it gets a newline (10) and ends up subtracting &apos;0&apos; (48) from it; the result is a negative length that blows up an attempt to allocate the &lt;tt&gt;rest&lt;/tt&gt; array.&lt;/p&gt;

&lt;p&gt;I would say that a check to see if &lt;tt&gt;ch&lt;/tt&gt; is less the &apos;0&apos; and break the loop if it is.&lt;/p&gt;

&lt;p&gt;I used &lt;tt&gt;npm pack aws-sdk@2.2.16&lt;/tt&gt; to generate a tarball with this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12970921">COMPRESS-355</key>
            <summary>Parsing PAX headers fails with NegativeArraySizeException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 May 2016 20:48:08 +0000</created>
                <updated>Fri, 20 May 2016 16:22:52 +0000</updated>
                            <resolved>Fri, 20 May 2016 16:22:32 +0000</resolved>
                                    <version>1.11</version>
                                    <fixVersion>1.12</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15291466" author="jgustie" created="Thu, 19 May 2016 16:38:19 +0000"  >&lt;p&gt;I can confirm the fix &lt;a href=&quot;https://github.com/apache/commons-compress/compare/master...blackducksoftware:bug/COMPRESS-355-negative-array-size&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt; works (alas, no tests).&lt;/p&gt;</comment>
                            <comment id="15293645" author="bodewig" created="Fri, 20 May 2016 16:22:32 +0000"  >&lt;p&gt;Thank you.&lt;/p&gt;

&lt;p&gt;Applied the suggested change and added a test case (the first 8k of the aws tgz you described) with commit 19a620c.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 May 2016 16:22:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y68v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-354] PureJavaCrc32C constructor calls overrideable method</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-354</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Constructors must not call overrideable methods.&lt;/p&gt;

&lt;p&gt;An object is not guaranteed fully constructed until the constructor exits, so the subclass override may not see the proper parent object.&lt;/p&gt;

&lt;p&gt;In this case, the class is package-protected so it&apos;s possible to ensure that subclasses don&apos;t override the method.&lt;/p&gt;

&lt;p&gt;However this would have to be checked, so it would be better to fix the issue:&lt;br/&gt;
1) make class final&lt;br/&gt;
2) make reset method final&lt;br/&gt;
3) extract the code into a private method that is used by the ctor and the public method.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12969761">COMPRESS-354</key>
            <summary>PureJavaCrc32C constructor calls overrideable method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sat, 14 May 2016 12:12:10 +0000</created>
                <updated>Mon, 16 May 2016 14:45:24 +0000</updated>
                            <resolved>Mon, 16 May 2016 04:22:23 +0000</resolved>
                                                    <fixVersion>1.12</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15283894" author="garydgregory" created="Sun, 15 May 2016 18:09:34 +0000"  >&lt;p&gt;Shouldn&apos;t this JIRA be for the &lt;tt&gt;CODEC&lt;/tt&gt; component?&lt;/p&gt;</comment>
                            <comment id="15284124" author="bodewig" created="Mon, 16 May 2016 04:17:44 +0000"  >&lt;p&gt;No, sebb is talking about the class inside the &lt;tt&gt;org.apache.commons.compress.compressors.snappy&lt;/tt&gt; package.&lt;/p&gt;</comment>
                            <comment id="15284130" author="bodewig" created="Mon, 16 May 2016 04:22:23 +0000"  >&lt;p&gt;fixed with git commit 3083ea5&lt;/p&gt;

&lt;p&gt;It might be worth opening a similar issue with Hadoop since we&apos;ve copied the class from there.&lt;/p&gt;</comment>
                            <comment id="15284354" author="sebb@apache.org" created="Mon, 16 May 2016 10:29:30 +0000"  >&lt;p&gt;Already did:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HADOOP-13147&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15284669" author="sebb@apache.org" created="Mon, 16 May 2016 14:45:24 +0000"  >&lt;p&gt;Added comments in 14b3d1a&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 15 May 2016 18:09:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xz3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-353] Javadoc for BZip2CompressorInputStream(InputStream, boolean) should refer to IOEx, not NPE</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-353</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Javadoc for BZip2CompressorInputStream.BZip2CompressorInputStream(InputStream, boolean) should refer to IOEx, not NPE.&lt;/p&gt;

&lt;p&gt;The Javadoc says an NPE will be thrown if the input stream is null, but it is an IOException that we throw.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12965658">COMPRESS-353</key>
            <summary>Javadoc for BZip2CompressorInputStream(InputStream, boolean) should refer to IOEx, not NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="garydgregory">Gary Gregory</assignee>
                                    <reporter username="garydgregory">Gary Gregory</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 May 2016 17:23:22 +0000</created>
                <updated>Fri, 6 May 2016 17:28:07 +0000</updated>
                            <resolved>Fri, 6 May 2016 17:28:07 +0000</resolved>
                                    <version>1.11</version>
                                    <fixVersion>1.12</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15274395" author="garydgregory" created="Fri, 6 May 2016 17:28:07 +0000"  >&lt;p&gt;In Git master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x9w7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-351] Defective .zip-archive produces problematic error message</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-351</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;A truncated .zip-File produces an java.io.EOFException conatining a hughe amount of byte[]-data in the error-message - leading to beeps and crippeling workload in an potential console-logger.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Production&lt;/p&gt;</environment>
        <key id="12958882">COMPRESS-351</key>
            <summary>Defective .zip-archive produces problematic error message</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Sven.Kustos">Sven Kustos</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Apr 2016 15:43:47 +0000</created>
                <updated>Tue, 7 Jun 2016 16:47:27 +0000</updated>
                            <resolved>Tue, 7 Jun 2016 16:47:27 +0000</resolved>
                                    <version>1.11</version>
                                    <fixVersion>1.12</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15241386" author="sven.kustos" created="Thu, 14 Apr 2016 15:47:52 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;test.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; getUnzippedFileSize(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] zippedData){
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; byteSize = 0;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;(ZipArchiveInputStream zipArchiveInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(zippedData))){
            ArchiveEntry zipEntry = zipArchiveInputStream.getNextEntry();
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(zipEntry != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;){
                byteSize = byteSize + zipEntry.getSize();
                zipEntry = zipArchiveInputStream.getNextEntry();
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; byteSize;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15244300" author="bodewig" created="Sat, 16 Apr 2016 16:40:14 +0000"  >&lt;p&gt;The output you see is what Compress considers the entry&apos;s file name. It looks as if there was some garbage inside the local file header that results in bigger blob being considered the name. I&apos;ll try to find a way to verify the name consists of printing characters or something like this.&lt;/p&gt;

&lt;p&gt;Is it OK to ship the attached archive as a unit test with Compress?&lt;/p&gt;</comment>
                            <comment id="15244310" author="sebb@apache.org" created="Sat, 16 Apr 2016 17:13:55 +0000"  >&lt;p&gt;Note that names don&apos;t have to consist of printable characters. &lt;br/&gt;
AFAIK Unix allows anything except &apos;/&apos; and null.&lt;/p&gt;

&lt;p&gt;So Compress must allow such names to be processed.&lt;/p&gt;

&lt;p&gt;The most that it can do is to sanitize the IOE message.&lt;br/&gt;
But I&apos;m not sure that&apos;s the best approach, because it will lose information that the app may need.&lt;/p&gt;

&lt;p&gt;An alternative approach would be to change the Javadoc to note that the IOE may contain unprintable characters and let the application sanitize it.&lt;/p&gt;</comment>
                            <comment id="15244527" author="bodewig" created="Sun, 17 Apr 2016 04:00:31 +0000"  >&lt;p&gt;Yes, I&apos;m only thinking about modifying the exception message - of course we&apos;ll accept as names whatever has been accepted before.&lt;/p&gt;</comment>
                            <comment id="15244538" author="bodewig" created="Sun, 17 Apr 2016 05:08:03 +0000"  >&lt;p&gt;should be fixed with git commit ddb8f08 - still it would be good if we could use the attached archive as a test case&lt;/p&gt;</comment>
                            <comment id="15244579" author="sebb@apache.org" created="Sun, 17 Apr 2016 09:04:40 +0000"  >&lt;p&gt;But the name may not be corrupted.&lt;br/&gt;
All we really know is that the archive is truncated.&lt;/p&gt;

&lt;p&gt;If there are any other examples of Exceptions which include the file name these would need to be &apos;protected&apos; too.&lt;br/&gt;
So I&apos;m still inclined to leave it to the app.&lt;/p&gt;

&lt;p&gt;However if it is decided to keep the amended name, I would rather see the message clarified to&lt;br/&gt;
&quot;possibly corrupted name&quot;.&lt;/p&gt;

&lt;p&gt;Or maybe keep the full name but replace non-printable chars with &apos;?&apos; as is done by ls(1).&lt;/p&gt;</comment>
                            <comment id="15244611" author="bodewig" created="Sun, 17 Apr 2016 10:11:56 +0000"  >&lt;p&gt;You are correct, the name may be included in other exceptions as well - like failing to parse extra fields or unsupported zip features being requested - anything of which may well happen if the archive is corrupt.&lt;/p&gt;

&lt;p&gt;Leaving it to the application doesn&apos;t feel right to me. If you log an exception you don&apos;t expect it to contain &quot;garbage&quot; in its message - and as it stands we&apos;d have to add a disclaimer of &quot;any exception may contain garbage if the archive is corrupt&quot; to &lt;tt&gt;ZipArchiveInputStream&lt;/tt&gt;. &lt;tt&gt;ZipFile&lt;/tt&gt; is safe in most cases as it won&apos;t find any &quot;end of central directory&quot; record and fail with a usable message.&lt;/p&gt;

&lt;p&gt;I guess sanitizing all entry names that are leaked via exceptions is the best route.&lt;/p&gt;</comment>
                            <comment id="15244615" author="sebb@apache.org" created="Sun, 17 Apr 2016 10:23:02 +0000"  >&lt;p&gt;The same applies to other archive formats as well since they all may be used on Unix.&lt;/p&gt;

&lt;p&gt;We could either sanitise the names (replace unprintable chars with &apos;?&apos;) or provide a utility method to do so.&lt;/p&gt;

&lt;p&gt;Maybe worth considering providing access to the raw name somehow.&lt;/p&gt;</comment>
                            <comment id="15244618" author="bodewig" created="Sun, 17 Apr 2016 10:29:38 +0000"  >&lt;p&gt;access to the raw name would only be possible if we threw exception types of our own. Some kind of CommonsCompressIOException or something. I&apos;m not sure this would be worth the effort.&lt;/p&gt;

&lt;p&gt;As for the other formats, yes, I&apos;ve realized this myself as well. I&apos;d put the utility method into &lt;tt&gt;ArchiveUtils&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15255946" author="sven.kustos" created="Mon, 25 Apr 2016 06:21:05 +0000"  >&lt;p&gt;Hi Stefan, feel free to add the attached archive as a test case - it&apos;s only conatining generated test data.&lt;/p&gt;</comment>
                            <comment id="15257531" author="bodewig" created="Tue, 26 Apr 2016 04:07:32 +0000"  >&lt;p&gt;Thanks, I have added a testcase.&lt;/p&gt;

&lt;p&gt;By now I&apos;ve modified the code to sanitize the file name by replacing non-printable characters with &apos;?&apos; but need to find the time to use the same approach throughout the codebase - and look into the current Jenkins build which failed after I added the test.&lt;/p&gt;</comment>
                            <comment id="15257675" author="sven.kustos" created="Tue, 26 Apr 2016 07:14:58 +0000"  >&lt;p&gt;Your&apos;re welcome! Beside &quot;unprintable&quot; characters in the output, the sheer size of it was another problem. May I suggest truncating it to 255 characters? This will still provide enough data for the purpose of an error message and probably also address the jenkins-issue.&lt;/p&gt;</comment>
                            <comment id="15318813" author="bodewig" created="Tue, 7 Jun 2016 16:28:58 +0000"  >&lt;p&gt;finally, sorry for the delay.&lt;/p&gt;

&lt;p&gt;commit 11840df restricts the length to 255 chars as you suggested.&lt;/p&gt;</comment>
                            <comment id="15318848" author="bodewig" created="Tue, 7 Jun 2016 16:47:27 +0000"  >&lt;p&gt;Looks as if only CPIO would also include entry names read in exception messages. Fixed with git commit b5071c2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12798760" name="DefectiveZipFileCausingBeeps.ZIP" size="36996" author="Sven.Kustos" created="Thu, 14 Apr 2016 15:44:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 16 Apr 2016 16:40:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w4on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-348] Calling SevenZFile.read() on empty SevenZArchiveEntry throws IllegalStateException</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-348</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I&apos;m pretty sure &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-340&quot; title=&quot;Provide an efficient way to skip over 7zip entries without decompressing them&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-340&quot;&gt;&lt;del&gt;COMPRESS-340&lt;/del&gt;&lt;/a&gt; breaks reading empty archive entries. When calling getNextEntry() and that entry has no content, the code jumps into the first block at line 830 (SevenZFile.class), clearing the deferredBlockStreams. When calling entry.read(...) afterwards an IllegalStateException (&quot;No current 7z entry (call getNextEntry() first).&quot;) is thrown. IMHO, there should be another check for entry.getSize() == 0.&lt;/p&gt;

&lt;p&gt;This worked correctly up until 1.10.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12957193">COMPRESS-348</key>
            <summary>Calling SevenZFile.read() on empty SevenZArchiveEntry throws IllegalStateException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jansohn">Robin Jansohn</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Apr 2016 11:27:11 +0000</created>
                <updated>Mon, 16 May 2016 04:26:21 +0000</updated>
                            <resolved>Mon, 16 May 2016 04:26:21 +0000</resolved>
                                    <version>1.11</version>
                                    <fixVersion>1.12</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15232100" author="bodewig" created="Fri, 8 Apr 2016 12:10:39 +0000"  >&lt;p&gt;Thank you for creating a new issue for this.&lt;/p&gt;

&lt;p&gt;I had seen your comments in &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-340&quot; title=&quot;Provide an efficient way to skip over 7zip entries without decompressing them&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-340&quot;&gt;&lt;del&gt;COMPRESS-340&lt;/del&gt;&lt;/a&gt; but wanted to create a testcase before opening a new issue - unfortunately I still need to find a time slot to do this.&lt;/p&gt;</comment>
                            <comment id="15255561" author="bodewig" created="Sun, 24 Apr 2016 11:24:53 +0000"  >&lt;p&gt;You are correct, I see what you describe. At least for my simplistic archive the situation is fixed with git comit d050157 - it would be good if you could confirm this with your own archives.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 8 Apr 2016 12:10:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vu9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-344] Handle NULL terminated GNU AR extended name</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-344</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;We have an AR archive (a .lib file) whose extended name is terminated by a NULL instead of a line feed which causes an &lt;tt&gt;IOException&lt;/tt&gt; (&quot;Failed to read entry: 0&quot;). It looks like &lt;tt&gt;ArArchiveInputStream.getExtendedName&lt;/tt&gt; just needs to check &lt;tt&gt;namebuffer[i]&lt;/tt&gt; for &lt;tt&gt;&apos;\012&apos;&lt;/tt&gt; &lt;em&gt;or&lt;/em&gt; 0.&lt;/p&gt;

&lt;p&gt;The ar tool in latest GNU binutils seems to be able to handle this.&lt;/p&gt;

&lt;p&gt;I don&apos;t know what to make of the archive itself: it seems to contain 291 different copies of a file with the same name; but it is a Windows lib file and I am not going to pretend like I understand if this is supposed to be normal or not.&lt;/p&gt;

&lt;p&gt;The file in question is part of the &lt;a href=&quot;https://support.hyperic.com/display/SIGAR/Home&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;SIGAR&lt;/a&gt; project, the &lt;tt&gt;sigar-bin/lib/sigar-x86-winnt.lib&lt;/tt&gt; archive from the &lt;a href=&quot;https://sourceforge.net/projects/sigar/files/sigar/1.6/hyperic-sigar-1.6.3.tar.gz/download&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;1.6.3 distribution&lt;/a&gt; exhibits this behavior. The NULL terminated string only appears in the first file, all subsequent files seem to use the expected line feed terminator.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952444">COMPRESS-344</key>
            <summary>Handle NULL terminated GNU AR extended name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2016 14:03:05 +0000</created>
                <updated>Tue, 22 Mar 2016 17:17:04 +0000</updated>
                            <resolved>Tue, 22 Mar 2016 17:17:04 +0000</resolved>
                                    <version>1.10</version>
                                    <fixVersion>1.11</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15206817" author="bodewig" created="Tue, 22 Mar 2016 17:17:04 +0000"  >&lt;p&gt;How do you always find these edge cases &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;should be fixed with git commit a5eca56&lt;/p&gt;

&lt;p&gt;Thanks a lot.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 Mar 2016 17:17:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v0zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-343] Native Memory Leak in Sevenz-DeflateDecoder</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-343</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The class ...sevenz.Coders.DeflateDecoder does not close (end()) the Deflater and Inflater. This can lead to native memory issues: see &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8074108&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8074108&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In our case we create a zip archive with &amp;gt;100000 files. The Java heap is around 300MB (with 2GB max). The native memory is increasing to 8GB and above. Because the Java heap has no pressure - no GC is triggered, therefore the Deflaters are not collected and the native memory is not freed.  &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12950887">COMPRESS-343</key>
            <summary>Native Memory Leak in Sevenz-DeflateDecoder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rpreissel">Rene Preissel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Mar 2016 16:25:56 +0000</created>
                <updated>Thu, 17 Mar 2016 09:35:40 +0000</updated>
                            <resolved>Thu, 17 Mar 2016 09:35:40 +0000</resolved>
                                    <version>1.10</version>
                                    <fixVersion>1.11</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15197624" author="rpreissel" created="Wed, 16 Mar 2016 16:33:26 +0000"  >&lt;p&gt;I provided a patch. See attachment or Github:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/rpreissel/commons-compress/tree/COMPRESS-343&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rpreissel/commons-compress/tree/COMPRESS-343&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15197663" author="githubbot" created="Wed, 16 Mar 2016 16:48:44 +0000"  >&lt;p&gt;GitHub user rpreissel opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/11&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/11&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Bugfix for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-343&quot; title=&quot;Native Memory Leak in Sevenz-DeflateDecoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-343&quot;&gt;&lt;del&gt;COMPRESS-343&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The class ...sevenz.Coders.DeflateDecoder does not close (end()) the Deflater and Inflater. This can lead to native memory issues: see &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8074108&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8074108&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;    This bugfix solves the problem.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rpreissel/commons-compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rpreissel/commons-compress&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-343&quot; title=&quot;Native Memory Leak in Sevenz-DeflateDecoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-343&quot;&gt;&lt;del&gt;COMPRESS-343&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/11.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #11&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2c1e2980c5d5a17be220ae26793e80e9683cc16e&lt;br/&gt;
Author: Rene Preissel &amp;lt;rp@etosquare.de&amp;gt;&lt;br/&gt;
Date:   2016-03-16T16:26:57Z&lt;/p&gt;

&lt;p&gt;    Bugfix for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-343&quot; title=&quot;Native Memory Leak in Sevenz-DeflateDecoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-343&quot;&gt;&lt;del&gt;COMPRESS-343&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15197677" author="githubbot" created="Wed, 16 Mar 2016 17:00:59 +0000"  >&lt;p&gt;Github user garydgregory commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/11#issuecomment-197425393&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/11#issuecomment-197425393&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi,&lt;/p&gt;

&lt;p&gt;    Thank you for the patch.&lt;/p&gt;

&lt;p&gt;    Do you have a unit test that show the problem and it being fixed by the patch?&lt;/p&gt;

&lt;p&gt;    Gary&lt;/p&gt;</comment>
                            <comment id="15197992" author="githubbot" created="Wed, 16 Mar 2016 19:37:19 +0000"  >&lt;p&gt;Github user rpreissel commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/11#issuecomment-197507339&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/11#issuecomment-197507339&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This is a memory issue and from my point of view there is no simple way to test it with an unit test.&lt;/p&gt;

&lt;p&gt;    I have tried to write an unit test and used ManagementFactory.getMemoryMXBean().getNonHeapMemoryUsage() to check the memory usage before and after creating an archive with many files. But there was no difference with the patch.&lt;/p&gt;

&lt;p&gt;    But if I look at the process with system utils I see that the version without the patch requires many GB and the version with the patch only 100MB. &lt;/p&gt;

&lt;p&gt;    Any ideas?  &lt;/p&gt;
</comment>
                            <comment id="15198034" author="githubbot" created="Wed, 16 Mar 2016 19:57:41 +0000"  >&lt;p&gt;Github user garydgregory commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/11#issuecomment-197518791&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/11#issuecomment-197518791&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Yes, one of:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Use Mockito or Powermock to assert that the end() method has been called (best)&lt;/li&gt;
	&lt;li&gt;add an isClosed method somewhere that sets an ivar once end() is called.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15198199" author="githubbot" created="Wed, 16 Mar 2016 21:21:17 +0000"  >&lt;p&gt;Github user rpreissel commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/11#issuecomment-197554132&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/11#issuecomment-197554132&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I added tests with PowerMock/Mockito. &lt;/p&gt;</comment>
                            <comment id="15199210" author="githubbot" created="Thu, 17 Mar 2016 09:32:39 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/11&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/11&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15199214" author="githubbot" created="Thu, 17 Mar 2016 09:34:25 +0000"  >&lt;p&gt;Github user bodewig commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/11#issuecomment-197788653&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/11#issuecomment-197788653&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I had naively assumed `InflaterInputStream#close` would free up the resources. Come to think of it, if we pass in the `Inflater` ourselves it makes sense that we are responsible for cleanup.&lt;/p&gt;

&lt;p&gt;    Many thanks!&lt;/p&gt;

&lt;p&gt;    I&apos;ll grep through the code to ensure the same kind of bug doesn&apos;t hit us anywhere else.&lt;/p&gt;</comment>
                            <comment id="15199217" author="bodewig" created="Thu, 17 Mar 2016 09:35:40 +0000"  >&lt;p&gt;pull request merged, thanks again!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12793775" name="COMPRESS-343.patch" size="2909" author="rpreissel" created="Wed, 16 Mar 2016 16:33:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Mar 2016 16:48:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uruf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-337] TAR header parsing attempts OLDGNU format on POSIX/STAR header</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-337</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;This is at least tangentially related to &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-336&quot; title=&quot;Extended Standard TAR format prefix is 130 characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-336&quot;&gt;&lt;del&gt;COMPRESS-336&lt;/del&gt;&lt;/a&gt;, we found an archive which is misinterpreted as an OLDGNU header format when it appears to some type of STAR header (unlike &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-336&quot; title=&quot;Extended Standard TAR format prefix is 130 characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-336&quot;&gt;&lt;del&gt;COMPRESS-336&lt;/del&gt;&lt;/a&gt; this one uses a NULL delimiter instead of space terminators for the time stamps). Apparently the archive itself comes from an &lt;a href=&quot;https://github.com/golang/go/issues/5290&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;EyeFi card&lt;/a&gt;(?!).&lt;/p&gt;

&lt;p&gt;Both the original archive (&lt;a href=&quot;https://storage.googleapis.com/go-attachment/5290/0/in.tar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;available here&lt;/a&gt;) and the (presumably hand made) version for testing (&lt;a href=&quot;https://github.com/golang/go/raw/master/src/archive/tar/testdata/nil-uid.tar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;) exhibit the same behavior: they fail with an &lt;tt&gt;IllegalArgumentException&lt;/tt&gt; attempting to parse the old GNU &lt;tt&gt;realSize&lt;/tt&gt; from a buffer partially filled with the &lt;tt&gt;atime&lt;/tt&gt;/&lt;tt&gt;ctime&lt;/tt&gt; values.&lt;/p&gt;

&lt;p&gt;At first I thought if the &lt;tt&gt;TarArchiveEntry.evaluateType&lt;/tt&gt; were to also look at the &lt;tt&gt;version&lt;/tt&gt; field for &lt;tt&gt;VERSION_GNU_SPACE&lt;/tt&gt; before returning &lt;tt&gt;FORMAT_OLDGNU&lt;/tt&gt; it &lt;em&gt;should&lt;/em&gt; be enough (according to something I saw in &lt;a href=&quot;http://www.gnu.org/software/tar/manual/tar.html#SEC184&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;the GNU documentation&lt;/a&gt; which defines &lt;tt&gt;OLDGNU_MAGIC &quot;ustar  &quot;  /* 7 chars and a null */&lt;/tt&gt;). Unfortunately it looks like that is the magic/version used by the archives in question, leaving me stumped as to how to identify which of the three prevailing header formats needs to be parsed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937630">COMPRESS-337</key>
            <summary>TAR header parsing attempts OLDGNU format on POSIX/STAR header</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2016 20:47:05 +0000</created>
                <updated>Fri, 7 Oct 2016 16:30:04 +0000</updated>
                            <resolved>Fri, 7 Oct 2016 16:30:04 +0000</resolved>
                                    <version>1.10</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15146468" author="bodewig" created="Sun, 14 Feb 2016 09:58:14 +0000"  >&lt;p&gt;GNU tar doesn&apos;t like the example you&apos;ve attached:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;tar: This does not look like a tar archive
tar: Exiting with failure status due to previous errors
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so it seems as stumped as you are &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15555546" author="bodewig" created="Fri, 7 Oct 2016 16:30:04 +0000"  >&lt;p&gt;actually &quot;can&apos;t fix&quot;. Somebody seems to be creating invalid archives and neither we nor GNU tar can read them.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 14 Feb 2016 09:58:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2skt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-336] Extended Standard TAR format prefix is 130 characters</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-336</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;A TAR archive created with star having an artype of &quot;xstar&quot; apparently limits the PREFIX to 130 characters to accommodate an access time and a creation time (this much I was able to learn from the star man page). I wasn&apos;t able to track down any specifics about the format, but in at least the first example I found, it appears that the access and creation time are stored as two space terminated ASCII numbers at the end of what would otherwise be the prefix.&lt;/p&gt;

&lt;p&gt;Currently, the code will read this type of archive and assume the prefix is 131 NULs followed by the two ASCII time stamps. Needless to say, it makes a mess of the entry names.&lt;/p&gt;

&lt;p&gt;I&apos;m not 100% sure of the implementation, but perhaps something like (with &lt;tt&gt;XSTAR_PREFIXLEN&lt;/tt&gt; == 130):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;: {
  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; prefixlen = header[offset + XSTAR_PREFIXLEN + 1] == 0 ? XSTAR_PREFIXLEN : PREFIXLEN;
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefix = oldStyle
    ? TarUtils.parseName(header, offset, prefixlen)
    : TarUtils.parseName(header, offset, prefixlen, encoding);
  &lt;span class=&quot;code-comment&quot;&gt;// ...
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe a separate feature request would be appropriate for capturing and exposing the additional timestamps?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937568">COMPRESS-336</key>
            <summary>Extended Standard TAR format prefix is 130 characters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2016 17:12:47 +0000</created>
                <updated>Sun, 14 Feb 2016 11:20:00 +0000</updated>
                            <resolved>Sun, 14 Feb 2016 11:04:27 +0000</resolved>
                                    <version>1.10</version>
                                    <fixVersion>1.11</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15137274" author="jgustie" created="Mon, 8 Feb 2016 17:21:15 +0000"  >&lt;p&gt;The first example I found is actually a bit of a manufactured one: the Python &lt;tt&gt;testtar.tar&lt;/tt&gt; file has a single entry (&lt;tt&gt;misc/regtype-xstar&lt;/tt&gt;) with the format described in the ticket. The man page I found describing the 130 character prefix limit was &lt;a href=&quot;http://linux.die.net/man/1/star&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;star(1)&lt;/a&gt; (second text match for &quot;xstar&quot;).&lt;/p&gt;</comment>
                            <comment id="15137448" author="jgustie" created="Mon, 8 Feb 2016 18:41:31 +0000"  >&lt;p&gt;Also, I don&apos;t think this would have been an issue if &lt;tt&gt;TarUtils.parseName&lt;/tt&gt; read from the front instead of the back, was that done because most fields are more likely to contain more valid bytes then padding? If that is an important optimization, perhaps a sort of modified binary search for the first NUL would still be resilient to issues like this (where a field was split less then 50/50 in some format of TAR) while still avoiding the full linear search for the terminator.&lt;/p&gt;</comment>
                            <comment id="15146483" author="bodewig" created="Sun, 14 Feb 2016 10:32:37 +0000"  >&lt;p&gt;I think we should be able to detect xstar - either by checking for the tar\0 signature or looking for a \0 at the proper place inside prefix like you suggest (and maybe verify there is a atime and ctime in octal format at the right places).&lt;/p&gt;

&lt;p&gt;Right now we don&apos;t provide atime/ctime for GNU or PAX entries either, even if we could. So this would be a good separate enhancement request.&lt;/p&gt;</comment>
                            <comment id="15146491" author="bodewig" created="Sun, 14 Feb 2016 10:45:15 +0000"  >&lt;p&gt;I&apos;m working on identifying xstar and parsing the name properly.&lt;/p&gt;</comment>
                            <comment id="15146495" author="bodewig" created="Sun, 14 Feb 2016 11:04:27 +0000"  >&lt;p&gt;should be fixed with commit 32633c3&lt;/p&gt;

&lt;p&gt;Many thanks for the analysis.&lt;/p&gt;</comment>
                            <comment id="15146501" author="bodewig" created="Sun, 14 Feb 2016 11:20:00 +0000"  >&lt;p&gt;The test archive is pretty nice as it shows a few shortcomings we have when compared to GNU tar (and probably the Python lib that uses this for tests) -&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-338&quot; title=&quot;fill some gaps in tar implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-338&quot;&gt;&lt;del&gt;COMPRESS-338&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 14 Feb 2016 10:32:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2skfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-335] TAR checksum fails when checksum is right aligned</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-335</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The linked TAR has a checksum with zero padding on the left instead of the expected &lt;tt&gt;NULL-SPACE&lt;/tt&gt; terminator on the right. As a result the last two digits of the stored checksum are lost and the otherwise valid checksum is treated as invalid.&lt;/p&gt;

&lt;p&gt;Given that the code already checks for digits being in range before adding them to the stored sum, is it necessary to only look at the first 6 octal digits instead of the whole field?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937131">COMPRESS-335</key>
            <summary>TAR checksum fails when checksum is right aligned</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Feb 2016 19:38:17 +0000</created>
                <updated>Fri, 5 Feb 2016 20:21:32 +0000</updated>
                            <resolved>Fri, 5 Feb 2016 20:21:32 +0000</resolved>
                                    <version>1.10</version>
                                    <fixVersion>1.11</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15134884" author="bodewig" created="Fri, 5 Feb 2016 20:09:41 +0000"  >&lt;p&gt;We could probably use &lt;tt&gt;parseOctal&lt;/tt&gt; for reading the checksum, I&apos;ll give it a try.&lt;/p&gt;</comment>
                            <comment id="15134904" author="bodewig" created="Fri, 5 Feb 2016 20:21:32 +0000"  >&lt;p&gt;Yes, &lt;tt&gt;parseOctal&lt;/tt&gt; works fine.&lt;/p&gt;

&lt;p&gt;Fixed with git commit 7250daa&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Feb 2016 20:09:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2shqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-334] ArArchiveInputStream.getBSDLongName does increment offset</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-334</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I have an AR archive which uses the BSD long name convention and I cannot read past the first entry without failing.&lt;/p&gt;

&lt;p&gt;I dug into the issue and it appears the problem is with &lt;tt&gt;getBSDLongName&lt;/tt&gt; which calls &lt;tt&gt;readFully&lt;/tt&gt; with the underlying stream:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; read = IOUtils.readFully(input, name);
count(read);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This does not increment the &lt;tt&gt;offset&lt;/tt&gt; which is later used by &lt;tt&gt;read(byte[], int, int)&lt;/tt&gt; to compute the value of &lt;tt&gt;toRead&lt;/tt&gt;. Since &lt;tt&gt;offset&lt;/tt&gt; is too small, &lt;tt&gt;toRead&lt;/tt&gt; ends up too big and the first entry contents end up pulling in the first &lt;tt&gt;n&lt;/tt&gt; bytes of the next entry header (&lt;tt&gt;n&lt;/tt&gt; is the BSD long name length).&lt;/p&gt;

&lt;p&gt;I think this can be addressed by adding &lt;tt&gt;offset += read&lt;/tt&gt; or changing the above code to just:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; read = IOUtils.readFully(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, name);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(Sorry for posting code in the ticket, I will try and get an environment set up so I can start submitting patches).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936848">COMPRESS-334</key>
            <summary>ArArchiveInputStream.getBSDLongName does increment offset</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2016 20:24:22 +0000</created>
                <updated>Fri, 5 Feb 2016 19:44:02 +0000</updated>
                            <resolved>Fri, 5 Feb 2016 19:44:02 +0000</resolved>
                                    <version>1.10</version>
                                    <fixVersion>1.11</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15134829" author="bodewig" created="Fri, 5 Feb 2016 19:44:02 +0000"  >&lt;p&gt;Thanks a lot for the analysis, you are correct of course.&lt;/p&gt;

&lt;p&gt;git commit 9431b16 contains your second alternative.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Feb 2016 19:44:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sfzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-332] FramedSnappyCompressorInputStream.read returns invalid value at end of stream.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-332</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;FramedSnappyCompressorInputStream.read() returns 0 when the end of stream has been reached rather than -1.&lt;/p&gt;

&lt;p&gt;It appears that this may be caused by SnappyCompressorInputStream.read(byte[], int, int) returning 0 instead of -1 at the end of stream when the exact number of bytes have been read.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12934118">COMPRESS-332</key>
            <summary>FramedSnappyCompressorInputStream.read returns invalid value at end of stream.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kantiger">Brett Okken</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jan 2016 14:12:44 +0000</created>
                <updated>Fri, 29 Jan 2016 20:38:24 +0000</updated>
                            <resolved>Fri, 29 Jan 2016 20:38:24 +0000</resolved>
                                    <version>1.10</version>
                                    <fixVersion>1.11</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15117248" author="kantiger" created="Tue, 26 Jan 2016 14:14:26 +0000"  >&lt;p&gt;These tests use the xerial snappy-java library to generate compressed content.&lt;/p&gt;

&lt;p&gt;        &amp;lt;dependency&amp;gt;&lt;br/&gt;
            &amp;lt;groupId&amp;gt;org.xerial.snappy&amp;lt;/groupId&amp;gt;&lt;br/&gt;
            &amp;lt;artifactId&amp;gt;snappy-java&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;/dependency&amp;gt;&lt;/p&gt;</comment>
                            <comment id="15124164" author="bodewig" created="Fri, 29 Jan 2016 20:38:24 +0000"  >&lt;p&gt;Yes, well spotted, thanks!&lt;/p&gt;

&lt;p&gt;Your test passes with git commit 30f1ac1.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12784413" name="CommonsTest.java" size="3369" author="kantiger" created="Tue, 26 Jan 2016 14:14:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Jan 2016 20:38:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rz6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-331] Some non TAR files are recognized by ArchiveStreamFactory</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-331</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I ran into a case where a PNG file is being recognized as TAR because &lt;tt&gt;TarUtils.verifyCheckSum&lt;/tt&gt; reports it as having a valid checksum (in this case the code thinks the stored checksum is 36936, unsigned is 31155 and signed is 19635). Because the stored checksum value is larger then the unsigned checksum it is treated as a valid TAR.&lt;/p&gt;

&lt;p&gt;I haven&apos;t spent enough time digging into the problem to see if there is a good alternative to the existing check that doesn&apos;t have false positives like this PNG file (which, if anyone is interested comes from an Android download).&lt;/p&gt;

&lt;p&gt;Also, I noticed a minor thing in the code: the comment in &lt;tt&gt;TarUtils.verifyCheckSum&lt;/tt&gt; has the wrong bug number listed (it says 177 instead of 117).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12933625">COMPRESS-331</key>
            <summary>Some non TAR files are recognized by ArchiveStreamFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 Jan 2016 20:40:07 +0000</created>
                <updated>Sun, 31 Jan 2016 12:14:50 +0000</updated>
                            <resolved>Sun, 31 Jan 2016 12:14:50 +0000</resolved>
                                    <version>1.10</version>
                                    <fixVersion>1.11</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15113966" author="jgustie" created="Sat, 23 Jan 2016 21:22:40 +0000"  >&lt;p&gt;There are a number of garbage values in the first entry (the one whose &lt;tt&gt;isCheckSumOK&lt;/tt&gt; is called): perhaps in addition to the current &lt;tt&gt;isCheckSumOK&lt;/tt&gt; check the archive stream factory can also sanity check something like the device number.&lt;/p&gt;

&lt;p&gt;From my understanding of the comments, another possibility might be only allowing the &lt;tt&gt;storedSum &amp;gt; unsignedSum&lt;/tt&gt; check if the magic is blank. The magic would need to be captured like stored sum is now for this additional check (it looks like the magic offset is already a constant).&lt;/p&gt;

&lt;p&gt;Here are the values on the entry I am seeing from the &lt;tt&gt;ic_secure.png&lt;/tt&gt; (note that I zapped a bunch of Gremlins in the name to avoid problems) just in case some one has some better ideas for how to quickly identify obviously bad entries:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;checkSumOK&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;true&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;devMajor&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;2134088&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;devMinor&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;2363913&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;file&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;null&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;groupId&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;2134088&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;groupName&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;&quot;01101101101101101101101101101101&quot;&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;isExtended&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;false&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;linkFlag&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;48&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;linkName&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;&quot;1101101101101101101101101101101101101101101101101101101101101101101101101101101101101101101101101101&quot;&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;magic&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;&quot;101101&quot;&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;mode&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;2363913&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;modTime&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;9682587720&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;name&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;&quot;01101101101101...blah...blah...blah...PNG...blah...blah...blah...110110110110110110110110110110110&quot;&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;realSize&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;0&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;size&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;9682587720&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;userId&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;295489&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;userName&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;&quot;11011011011011011011011011011011&quot;&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;version&lt;/tt&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;tt&gt;&quot;10&quot;&lt;/tt&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="15114277" author="tcurdt" created="Sun, 24 Jan 2016 11:11:47 +0000"  >&lt;p&gt;Honestly - that&apos;s not how the factory was intended to be used.&lt;/p&gt;

&lt;p&gt;It was intended to be used to tell apart archives - not let you throw random files at it to see if it&apos;s an archive or not. The latter is a much broader problem and not really in the scope of commons compress.&lt;/p&gt;

&lt;p&gt;So you should pre-filter those files.&lt;br/&gt;
I am not sure this is a valid issue for commons compress.&lt;/p&gt;</comment>
                            <comment id="15114286" author="bodewig" created="Sun, 24 Jan 2016 12:09:20 +0000"  >&lt;p&gt;Unfortunately there are tons of tar dialects that can all be extracted properly by GNU tar - which usually means it would be a bug if Commons Compress failed to extract them. This means we may need to refine our heuristics as we go.&lt;/p&gt;

&lt;p&gt;I&apos;m not convinced device numbers are good candidates, though, the fields may contain binary data in the star case and there is no clear upper bound for them. I don&apos;t see any values that are clear candidates for &quot;garbage&quot; in your case. I&apos;ll take another dive into GNU tar&apos;s code base to see how they verify checksums.&lt;/p&gt;</comment>
                            <comment id="15114377" author="bodewig" created="Sun, 24 Jan 2016 16:44:52 +0000"  >&lt;p&gt;That&apos;s not what I had expected: GNU tar does an exact match on the checksum (unsigned or signed), no special handling and &quot;greater than&quot; checks at all. Maybe our test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt; isn&apos;t good enough, I&apos;ll double-check.&lt;/p&gt;</comment>
                            <comment id="15114382" author="bodewig" created="Sun, 24 Jan 2016 17:07:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;Sebb&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jukkaz&quot; class=&quot;user-hover&quot; rel=&quot;jukkaz&quot;&gt;Jukka Zitting&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tcurdt&quot; class=&quot;user-hover&quot; rel=&quot;tcurdt&quot;&gt;Torsten Curdt&lt;/a&gt; maybe your memory is better than mine.&lt;/p&gt;

&lt;p&gt;The archive added as testcase for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt; is not the one attached to the issue itself and this is what GNU tar says:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ tar tvf src/test/resources/COMPRESS-117.tar 
tar: This does not look like a tar archive
tar: Skipping to next header
-rw-r--r-- tcurdt/tcurdt    82 2007-11-14 11:19 test2.xml
tar: Exiting with failure status due to previous errors
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I insert the first 512 bytes of the tar attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt; into &lt;tt&gt;TarUtilsTest&lt;/tt&gt; then the checksums match exactly. To me it looks as if the test for &lt;tt&gt;storedSum &amp;gt; unsignedSum&lt;/tt&gt; was unneeded and only added to accommodate for a broken test case. Does anybody remember where the initial test came from?&lt;/p&gt;</comment>
                            <comment id="15114393" author="jgustie" created="Sun, 24 Jan 2016 17:32:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bodewig&quot; class=&quot;user-hover&quot; rel=&quot;bodewig&quot;&gt;Stefan Bodewig&lt;/a&gt; thanks for digging into this; I had noticed the exact checksum hit on the file attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt;, but wasn&apos;t sure if there were other cases that did in fact necessitate the greater then check (that&apos;s why I initially thought that maybe empty magic could be used to toggle the check).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tcurdt&quot; class=&quot;user-hover&quot; rel=&quot;tcurdt&quot;&gt;Torsten Curdt&lt;/a&gt; are you suggesting that I pre-filter arbitrary files using something like Tika before passing them on to &lt;tt&gt;ArchiveStreamFactory&lt;/tt&gt;? I guess that would likely catch the obvious non-archive cases like this PNG file. For this particular application I am not worried about catching an &lt;tt&gt;ArchiveException&lt;/tt&gt; (wrapped or not) further into processing if the stream turns out to be a non-archive, but the attached file actually gets treated as a TAR file successfully all the way through. I checked with GNU TAR 1.27.1 and the default TAR implementation on OS X (bsdtar 2.8.3) and they both identify the file as not being a TAR archive.&lt;/p&gt;</comment>
                            <comment id="15114402" author="tcurdt" created="Sun, 24 Jan 2016 17:45:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jgustie&quot; class=&quot;user-hover&quot; rel=&quot;jgustie&quot;&gt;Jeremy Gustie&lt;/a&gt; yes, that&apos;s what I am suggesting. Maybe even based on the extension (if that&apos;s enough for the use case).&lt;/p&gt;

&lt;p&gt;The idea was to make the factory somewhat smart - but not to replicate Tika (or similar).&lt;/p&gt;</comment>
                            <comment id="15125311" author="bodewig" created="Sun, 31 Jan 2016 12:14:50 +0000"  >&lt;p&gt;To me it really looks as if our checksum validation has been too lenient and I&apos;ve made it more strict with git commit 1fb4298.&lt;/p&gt;

&lt;p&gt;I&apos;ve replaced the archive added as &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt;.tar with the first entry of the original archive appended to said bug report.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12471241">COMPRESS-117</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12784036" name="ic_secure.png" size="1026" author="jgustie" created="Sat, 23 Jan 2016 20:41:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 24 Jan 2016 11:11:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rw5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-330] Tar UnArchive Fails when archive contains directory sizes which are non-zero.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-330</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Tar UnArchive Fails when archive contains directory sizes which are non-zero. I recently came across a set of files which failed to extract with commons-compress but I was able to successfully extract the files with GNU tar. &lt;/p&gt;

&lt;p&gt;The problem is TarArchiveInputStream.java gets the size of each entry in a tar archive to determine how many bytes to read ahead. Directories are always sized 0 bytes, however its technically possible a tar archive contains a size for a directory. This causes the Input Stream to loose it&apos;s place and eventually results in an exception being thrown.&lt;/p&gt;

&lt;p&gt;I was able to implement a proof-of-concept fix by checking if an entity is a directory and setting the directory size to 0. (A directory with Files in a Tar Archive still has a size of 0 as the directory itself does not have size in the archive.)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.8&lt;/p&gt;</environment>
        <key id="12932492">COMPRESS-330</key>
            <summary>Tar UnArchive Fails when archive contains directory sizes which are non-zero.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dye357">Dye357</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jan 2016 18:55:44 +0000</created>
                <updated>Wed, 23 Mar 2016 17:31:20 +0000</updated>
                            <resolved>Sun, 20 Mar 2016 19:44:11 +0000</resolved>
                                    <version>1.10</version>
                                    <fixVersion>1.11</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15107199" author="dye357" created="Tue, 19 Jan 2016 18:58:12 +0000"  >&lt;p&gt;I will attach my proposed patch/fix shortly. &lt;/p&gt;</comment>
                            <comment id="15108021" author="bodewig" created="Wed, 20 Jan 2016 05:07:56 +0000"  >&lt;p&gt;Thanks a lot, it would be good if you could add an example archive we can use for a unit test.&lt;/p&gt;

&lt;p&gt;Out of curiosity: do you know which tool created the tar archives with non-zero directory sizes?&lt;/p&gt;</comment>
                            <comment id="15109730" author="dye357" created="Wed, 20 Jan 2016 23:27:44 +0000"  >&lt;p&gt;Proposed Patch for Compress-330 - feel free to improve &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15109785" author="dye357" created="Thu, 21 Jan 2016 00:09:32 +0000"  >&lt;p&gt;Sure thing! I&apos;m trying to create a synthetic tar with the wrong directory size which mirrors my broken case as well as a unit test, will post it when I have it.&lt;/p&gt;</comment>
                            <comment id="15113760" author="bodewig" created="Sat, 23 Jan 2016 14:08:13 +0000"  >&lt;p&gt;Thanks. Your patch looks backwards (removing your changes), but that&apos;s no problem. But I&apos;m afraid you forgot to add &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-330&quot; title=&quot;Tar UnArchive Fails when archive contains directory sizes which are non-zero.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-330&quot;&gt;&lt;del&gt;COMPRESS-330&lt;/del&gt;&lt;/a&gt;.tar&lt;/p&gt;</comment>
                            <comment id="15125312" author="bodewig" created="Sun, 31 Jan 2016 12:17:29 +0000"  >&lt;p&gt;without the tar archive itself, there isn&apos;t much we can do.&lt;/p&gt;</comment>
                            <comment id="15125336" author="dye357" created="Sun, 31 Jan 2016 13:44:18 +0000"  >&lt;p&gt;Sorry for the long delay, I can&apos;t upload the tar in question since it contains private information - so I have been trying to synthetically manipulate a dummy tar file but so far I have been unable to reproduce the issue using the dummy tar file. I will try and spend some more time on this later this week. If I&apos;m unable to reliably reproduce the issue I will close the ticket.&lt;/p&gt;</comment>
                            <comment id="15125381" author="bodewig" created="Sun, 31 Jan 2016 15:27:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dye357&quot; class=&quot;user-hover&quot; rel=&quot;dye357&quot;&gt;Dye357&lt;/a&gt;, please don&apos;t close the issue if there is a real problem. I fully understand the problem of archives containing private information.&lt;/p&gt;

&lt;p&gt;If you knew which tool generated the archive, maybe you could create a new archive with dummy data using that tool. Otherwise it is pretty easy for us to pick an arbitrary tar that contains a directory and manipulate the size (getting the checksum to match is the only minor issue) - we can do so ourselves. It&apos;s just that I&apos;d personally prefer a real world archive.&lt;/p&gt;</comment>
                            <comment id="15132280" author="dye357" created="Thu, 4 Feb 2016 13:13:38 +0000"  >&lt;p&gt;I can confirm the tar archive was created by 7zip, still trying to figure out which version. (The file was sent to me by another party)&lt;/p&gt;

&lt;p&gt;I debugged the tar in question this morning, I discovered the entrySize for the directory which causes the error is coming back as 32768. I thought that was a little suspicious since that is the max negative size of an int in various languages. So I quick wrote a unit test just to understand how the parseOctalOrBinary Method worked:&lt;/p&gt;

&lt;p&gt;    @Test&lt;br/&gt;
    public void testParseOctal() &lt;/p&gt;
{
        byte[] buffer = new byte[12];
        buffer[0] = 32;
        buffer[1] = 32;
        buffer[2] = 32;
        buffer[3] = 32;
        buffer[4] = 32;
        buffer[5] = 49;
        buffer[6] = 48;
        buffer[7] = 48;
        buffer[8] = 48;
        buffer[9] = 48;
        buffer[10] = 48;
        buffer[11] = 32;

        long result = TarUtils.parseOctalOrBinary(buffer, 0, 12);
        assert result == 32768;
    }

&lt;p&gt;The byte array above is an exact copy of the entry size header of the file in question - I tried setting the entry size in my dummy tar to that exact byte array but my unit test still passes. When I use the file in question I get an IllegalArugmentEcxeption: Invalid byte 85 at offset 0 in &apos;&amp;lt;randomBinaryString&amp;gt;&apos; len=12&lt;/p&gt;</comment>
                            <comment id="15134490" author="bodewig" created="Fri, 5 Feb 2016 17:10:39 +0000"  >&lt;p&gt;the parser results in what would be expected, see git commit 9b852f3&lt;/p&gt;

&lt;p&gt;I think I&apos;ve fixed the problem with a slightly different approach (that does what GNU tar does, keep the size information but ignore it) with git commit 51eb0f2 - any chance you could verify it works for you?&lt;/p&gt;</comment>
                            <comment id="15196061" author="bodewig" created="Tue, 15 Mar 2016 19:46:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dyee357&quot; class=&quot;user-hover&quot; rel=&quot;dyee357&quot;&gt;Daniel Yee&lt;/a&gt; - have you had any chance to give a snapshot build a try?&lt;/p&gt;</comment>
                            <comment id="15203485" author="bodewig" created="Sun, 20 Mar 2016 19:44:11 +0000"  >&lt;p&gt;Assuming it is fixed, please reopen the ticket if you encounter any problems.&lt;/p&gt;</comment>
                            <comment id="15208823" author="dye357" created="Wed, 23 Mar 2016 17:31:20 +0000"  >&lt;p&gt;Will do, thanks for looking into this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12783460" name="Compress-330.patch" size="2249" author="dye357" created="Wed, 20 Jan 2016 23:27:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jan 2016 05:07:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rp6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-329] WHY zip file can be deleted while writing data to it on linux</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-329</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;1&#12289;create zip file using ZipArchiveOutputStream;&lt;br/&gt;
zipOutputStream = new ZipArchiveOutputStream(new BufferedOutputStream(new FileOutputStream(zipFile), BUFFER_SIZE));&lt;/p&gt;

&lt;p&gt;2&#12289;write data to zip file;&lt;/p&gt;

&lt;p&gt;3&#12289;while the program is still writing data to zip, try to delete the zip file&#65292;it can be deleted&#65292;and there is just no any error;&lt;/p&gt;

&lt;p&gt;4&#12289;For Windows&#65292;you get a message showing the file is locked and can not be deleted&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS:redhat 5.5 X64&lt;br/&gt;
jre 1.6.0 update 22(x64);&lt;br/&gt;
jar:common-comresss-1.0, &lt;/p&gt;</environment>
        <key id="12928278">COMPRESS-329</key>
            <summary>WHY zip file can be deleted while writing data to it on linux</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="xiaoyu@neusoft.com">Xiao Yu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jan 2016 09:35:41 +0000</created>
                <updated>Thu, 7 Jan 2016 11:40:10 +0000</updated>
                            <resolved>Thu, 7 Jan 2016 09:39:40 +0000</resolved>
                                    <version>1.0</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15087125" author="markt" created="Thu, 7 Jan 2016 09:39:40 +0000"  >&lt;p&gt;Jira is not the place to ask questions abut how different file systems work. Please use the Commons users mailing list.&lt;/p&gt;</comment>
                            <comment id="15087243" author="tcurdt" created="Thu, 7 Jan 2016 11:40:10 +0000"  >&lt;p&gt;...and this is not related to compress at all.&lt;/p&gt;

&lt;p&gt;This is a general windows/linux/osx filesystem reality.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Jan 2016 09:39:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qz73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-326] Fix threading issue in X5455_ExtendedTimestampTest test class (a test for COMPRESS-210)</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-326</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The test for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-210&quot; title=&quot;handle zip extra field 0x5455 - Extended Timestamp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-210&quot;&gt;&lt;del&gt;COMPRESS-210&lt;/del&gt;&lt;/a&gt; is currently failing when Compress is built at Apache Gump.&lt;br/&gt;
&lt;a href=&quot;http://vmgump.apache.org/gump/public/commons-compress/commons-compress-test/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://vmgump.apache.org/gump/public/commons-compress/commons-compress-test/index.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It says that the last success was on 2015-10-06T00:00:09,&lt;br/&gt;
it started failing at  2015-10-06T12:00:09&lt;br/&gt;
and as of now the failure state is persistent for 22 runs (which means ~11 days).&lt;/p&gt;

&lt;p&gt;The failure:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] ------------------------------------------------------------------------
[INFO] Building Apache Commons Compress 1.11-SNAPSHOT
[INFO] ------------------------------------------------------------------------

&amp;lt;...&amp;gt;

Running org.apache.commons.compress.archivers.zip.X5455_ExtendedTimestampTest
Tests run: 7, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.054 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.compress.archivers.zip.X5455_ExtendedTimestampTest
testSampleFile(org.apache.commons.compress.archivers.zip.X5455_ExtendedTimestampTest)  Time elapsed: 0.027 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.junit.ComparisonFailure: expected:&amp;lt;2105-01-01/0[0:00:02] +0000&amp;gt; but was:&amp;lt;2105-01-01/0[8:00:01] +0000&amp;gt;
	at org.junit.Assert.assertEquals(Assert.java:116)
	at org.junit.Assert.assertEquals(Assert.java:145)
	at org.apache.commons.compress.archivers.zip.X5455_ExtendedTimestampTest.testSampleFile(X5455_ExtendedTimestampTest.java:171)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reviewing rhe code of the test class, its usage of `SimpleDateFormat DATE_FORMAT` field is wrong. The field is declared as &quot;static&quot;. A SimpleDateFormat is not thread-safe, so it must not be shared between tests, as some testing configurations may run several tests in parallel.&lt;/p&gt;

&lt;p&gt;A simple fix will be to remove &quot;static&quot; from declaration of that field and its initialization block, so that each running instance of the test gets its own copy of SimpleDateFormat class.&lt;/p&gt;

&lt;p&gt;(I am not sure whether this bug is the actual cause of the test failure. I do not see any reconfigurations of test environment on 2015-10-06. &lt;b&gt;Update&lt;/b&gt;: according to gump-general mailing list [1], on Oct 06 the Java runtime used to run Gump was updated to the latest Java 8 release)&lt;/p&gt;

&lt;p&gt;[1] &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/gump-general/201510.mbox/%3C5613A448.8040109%40apache.org%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/gump-general/201510.mbox/%3C5613A448.8040109%40apache.org%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12905734">COMPRESS-326</key>
            <summary>Fix threading issue in X5455_ExtendedTimestampTest test class (a test for COMPRESS-210)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kkolinko">Konstantin Kolinko</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Oct 2015 15:59:13 +0000</created>
                <updated>Sat, 24 Oct 2015 06:20:06 +0000</updated>
                            <resolved>Sat, 24 Oct 2015 06:20:05 +0000</resolved>
                                                    <fixVersion>1.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14961973" author="bodewig" created="Sat, 17 Oct 2015 16:34:01 +0000"  >&lt;p&gt;This problem&apos;s been on my radar for a while, I just couldn&apos;t find a big enough slice of time to look into it.  Yes, it is the Java version.  It also happens locally - the test fails with recent enough Java8s and 9s, passes with older Java8s and &amp;lt; 8.  I&apos;ve been speculation about a change to the java.util.zip package, but see above.&lt;/p&gt;

&lt;p&gt;Unfortunately making the SimpleDateFormat non-static doesn&apos;t help (the test should be single-threaded anyway).&lt;/p&gt;</comment>
                            <comment id="14972416" author="bodewig" created="Sat, 24 Oct 2015 05:41:54 +0000"  >&lt;p&gt;I think I&apos;ve tracked it down.&lt;/p&gt;

&lt;p&gt;Traditionally Java&apos;s &lt;tt&gt;ZipEntry#getTime&lt;/tt&gt; returned the &lt;tt&gt;lastModifiedTime&lt;/tt&gt; from the archive entry&apos;s header directly - this is why we adjust the time to the local time zone just like InfoZIP would do since the test archive has been written by InfoZIP&apos;s zip.&lt;/p&gt;

&lt;p&gt;Then came &lt;a href=&quot;http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/rev/90df6756406f&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/rev/90df6756406f&lt;/a&gt; which changes the logic of &lt;tt&gt;ZipEntry#getTime&lt;/tt&gt; and now uses additional time fields InfoZIP or Microsoft&apos;s Compressed Folders feature would use in order to get a better result.  I haven&apos;t tracked down which Java8 update has been the first one to receive the patch.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to adjust the test.&lt;/p&gt;</comment>
                            <comment id="14972433" author="bodewig" created="Sat, 24 Oct 2015 06:20:06 +0000"  >&lt;p&gt;test should be fixed with commit a2cda30&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 17 Oct 2015 16:34:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n5jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-325] Unable to uncompress bzip2 dbPedia files</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-325</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Sample code :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;URL url = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//downloads.dbpedia.org/current/core-i18n/en/labels_en.nt.bz2&quot;&lt;/span&gt;);
&lt;/span&gt;InputStream input = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BZip2CompressorInputStream(url.openConnection().getInputStream());
BufferedReader reader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedReader(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InputStreamReader(input, &lt;span class=&quot;code-quote&quot;&gt;&quot;US-ASCII&quot;&lt;/span&gt;));
			
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; count = 0;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; line = reader.readLine(); line != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; line = reader.readLine()) {
	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(++count &amp;gt; 10000) &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
	&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(count + &lt;span class=&quot;code-quote&quot;&gt;&quot;: &quot;&lt;/span&gt; + line);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It stops at line 7801 (EOF) :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;7799: &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//dbpedia.org/resource/Gamemaster&amp;gt; &amp;lt;http://www.w3.org/2000/01/rdf-schema#label&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Gamemaster&quot;&lt;/span&gt;@en .
&lt;/span&gt;7800: &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//dbpedia.org/resource/Genetic_engineering&amp;gt; &amp;lt;http://www.w3.org/2000/01/rdf-schema#label&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Genetic engineering&quot;&lt;/span&gt;@en .
&lt;/span&gt;7801: &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//dbpedia.org/resource/Gradius_(video_game)&amp;gt; &amp;lt;http://www.w3.org/2000/01/rdf-s&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12904156">COMPRESS-325</key>
            <summary>Unable to uncompress bzip2 dbPedia files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fbilhaut">Fr&#233;d&#233;rik Bilhaut</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Oct 2015 12:16:17 +0000</created>
                <updated>Wed, 14 Oct 2015 04:15:52 +0000</updated>
                            <resolved>Tue, 13 Oct 2015 06:49:38 +0000</resolved>
                                    <version>1.10</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14953054" author="fbilhaut" created="Mon, 12 Oct 2015 12:23:02 +0000"  >&lt;p&gt;It seems that files were packed with pbzip2. Is it related to &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-185&quot; title=&quot;BZip2CompressorInputStream truncates files compressed with pbzip2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-185&quot;&gt;&lt;del&gt;COMPRESS-185&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14953059" author="fbilhaut" created="Mon, 12 Oct 2015 12:32:24 +0000"  >&lt;p&gt;Actually, re-compressing the same file with another tool (&quot;bzip2&quot; command under macos) renders a file that&apos;s properly readable with BZip2CompressorInputStream.&lt;/p&gt;</comment>
                            <comment id="14954329" author="bodewig" created="Tue, 13 Oct 2015 03:55:15 +0000"  >&lt;p&gt;I haven&apos;t tried to decompress your example, yet.  If this is a case of concatenated streams (as &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-185&quot; title=&quot;BZip2CompressorInputStream truncates files compressed with pbzip2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-185&quot;&gt;&lt;del&gt;COMPRESS-185&lt;/del&gt;&lt;/a&gt; is), then you need to tell &lt;tt&gt;BZip2CompressorInputStream&lt;/tt&gt; explicitly to concatenate the streams - i.e. use the two-arg constructor and &lt;tt&gt;true&lt;/tt&gt; as its second argument.&lt;/p&gt;</comment>
                            <comment id="14954501" author="fbilhaut" created="Tue, 13 Oct 2015 06:49:00 +0000"  >&lt;p&gt;OK it works that way !&lt;/p&gt;

&lt;p&gt;Thank you very much, and sorry for the irrelevant ticket ! My plain fault, I should have better read the doc.&lt;/p&gt;

&lt;p&gt;However, it may be not possible to know in advance if a given bzip is concatenated, and I suppose that, by default, one expects to get the full content of the compressed file as will happen with most tools/apis I know. So:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Either there is no circumstance where having this parameter set to &lt;tt&gt;true&lt;/tt&gt; is inappropriate. In this case why not making it &lt;tt&gt;true&lt;/tt&gt; by default ?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Either setting it to &lt;tt&gt;true&lt;/tt&gt; may be harmful in some circumstances, but in this case there should be a test to detect the fact that the stream is concatenated ?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I understand the backward compatibility concerns, but I think that changing the default behavior would make it more consistent with the general InputStream contract where there is only one EOF. Just my cents, and maybe there are some other problems I don&apos;t have in mind...&lt;/p&gt;

&lt;p&gt;Anyway thanks again for your help !!&lt;/p&gt;</comment>
                            <comment id="14956221" author="bodewig" created="Wed, 14 Oct 2015 04:15:52 +0000"  >&lt;p&gt;&lt;tt&gt;true&lt;/tt&gt; probably always is what you want for the flag - as it is in the cases of gzip and lzma2 as well.  The reason we&apos;ve chosen to use &lt;tt&gt;false&lt;/tt&gt; as a default for Compress 1.4 has purely been backwards compatibility, no other reason.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Oct 2015 03:55:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mvtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-324] Tar fails to detect fields for LF_GNUTYPE_LONGNAME archive</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-324</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Trying to extract a test tar archive with a simple java code. For a particular tar example fails to extract.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12902302">COMPRESS-324</key>
            <summary>Tar fails to detect fields for LF_GNUTYPE_LONGNAME archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="MrBump">MrBump</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Oct 2015 09:23:12 +0000</created>
                <updated>Fri, 9 Oct 2015 23:11:58 +0000</updated>
                            <resolved>Tue, 6 Oct 2015 03:39:07 +0000</resolved>
                                                    <fixVersion>1.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14942611" author="mrbump" created="Sun, 4 Oct 2015 09:26:27 +0000"  >&lt;p&gt;Output error:&lt;/p&gt;

&lt;p&gt;File Name in TAR File is:&lt;br/&gt;
Size of the File is: 255&lt;br/&gt;
Byte Array length: 255&lt;br/&gt;
Exception in thread &quot;main&quot; java.io.FileNotFoundException: Invalid file path&lt;br/&gt;
at java.io.FileOutputStream.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
at java.io.FileOutputStream.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
etc....&lt;/p&gt;</comment>
                            <comment id="14942612" author="mrbump" created="Sun, 4 Oct 2015 09:27:22 +0000"  >&lt;p&gt;java code and example tar&lt;/p&gt;</comment>
                            <comment id="14943606" author="bodewig" created="Mon, 5 Oct 2015 16:23:12 +0000"  >&lt;p&gt;Interesting.  Your archive contains &lt;tt&gt;././@LongName&lt;/tt&gt; rather than &lt;tt&gt;././@LongLink&lt;/tt&gt; as &quot;file name&quot; for the special entry that contains the file name.  Do you know which version of tar has created the archive?&lt;/p&gt;

&lt;p&gt;So far we only accept entries of &quot;link type&quot; L if its name was &lt;tt&gt;././@LongLink&lt;/tt&gt; and this is what we&apos;ve seen in the wild.  It is easy to conceive that some version used a different magic name, but we&apos;ve never encountered that.  Searching for &lt;tt&gt;././@LongName&lt;/tt&gt; comes up empty for me - unlike LongLink, so it seems to be rare.&lt;/p&gt;</comment>
                            <comment id="14944449" author="bodewig" created="Tue, 6 Oct 2015 03:26:05 +0000"  >&lt;p&gt;GNU tar itself uses &lt;tt&gt;LongLink&lt;/tt&gt; both for long file names and long link names: &lt;a href=&quot;http://git.savannah.gnu.org/cgit/tar.git/tree/src/create.c#n547&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git.savannah.gnu.org/cgit/tar.git/tree/src/create.c#n547&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So your archive hasn&apos;t been created by GNU tar but likely by a different tool that tried to mimic the GNU long file name mode.&lt;/p&gt;

&lt;p&gt;Anyway, GNU tar will happily extract the proper file name since - unlike Commons Compress - it only cares for the &quot;linkType&quot; flag and completely ignores the name of the tar entry.  We could and probably should do the same.&lt;/p&gt;</comment>
                            <comment id="14944458" author="bodewig" created="Tue, 6 Oct 2015 03:39:07 +0000"  >&lt;p&gt;fixed with git commit 1930eed&lt;/p&gt;</comment>
                            <comment id="14945120" author="mrbump" created="Tue, 6 Oct 2015 14:38:59 +0000"  >&lt;p&gt;The rar archive was created with star 1.5.2.&lt;/p&gt;</comment>
                            <comment id="14945206" author="mrbump" created="Tue, 6 Oct 2015 15:36:15 +0000"  >&lt;p&gt;star 1.5.3 also uses ././@LongName&lt;/p&gt;</comment>
                            <comment id="14945691" author="mrbump" created="Tue, 6 Oct 2015 20:20:00 +0000"  >&lt;p&gt;&quot;././@LongName&quot; is the proper way to do it, because it is a name, but anyway doesn&apos;t matter since you shouldn&apos;t rely on any text laying there.&lt;/p&gt;</comment>
                            <comment id="14946191" author="bodewig" created="Wed, 7 Oct 2015 04:00:53 +0000"  >&lt;p&gt;I don&apos;t know why the GNU tar folks, who invented the extension after all, decided to use the same name for both cases &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;In either case, this will be fixed in 1.11.&lt;/p&gt;

&lt;p&gt;I&apos;ve used the initial tar file you attached as a unit test, I hope this is OK with you.&lt;/p&gt;</comment>
                            <comment id="14947568" author="mrbump" created="Wed, 7 Oct 2015 20:58:29 +0000"  >&lt;p&gt;I&apos;ll add another tar example. By the way, when will the next release be out, or can I just pick up source code from git?&lt;/p&gt;</comment>
                            <comment id="14947570" author="mrbump" created="Wed, 7 Oct 2015 20:59:21 +0000"  >&lt;p&gt;Long filename tar archive created with star.&lt;/p&gt;</comment>
                            <comment id="14949877" author="bodewig" created="Fri, 9 Oct 2015 04:23:57 +0000"  >&lt;p&gt;Thanks, I&apos;ve replaced the test case.&lt;/p&gt;

&lt;p&gt;There is no schedule for the next release.  You can certainly build compress from sources and end up with a 1.11-SNAPSHOT jar.&lt;/p&gt;</comment>
                            <comment id="14951363" author="sebb@apache.org" created="Fri, 9 Oct 2015 23:11:58 +0000"  >&lt;p&gt;Or you can use the latest build from ASF SNAPSHOT repo &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
These automated builds are not subject to any QA and are for use at your own risk.&lt;/p&gt;

&lt;p&gt;Do not use them for production code.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-compress/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-compress/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12765458" name="star-long.tar" size="10240" author="MrBump" created="Wed, 7 Oct 2015 20:59:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 5 Oct 2015 16:23:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mkkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-322] Tar extracts folders as files</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-322</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Extracting folder inside ustar archive generates a file with the same name.&lt;/p&gt;

&lt;p&gt;Example tar file with a folder and a file inside:&lt;br/&gt;
&lt;a href=&quot;https://mega.nz/#!wUMD0K6Z!rmJe9r5xzQzzNrDLn8I7E4rXFkXJDECQrLRQSy7yEKU&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://mega.nz/#!wUMD0K6Z!rmJe9r5xzQzzNrDLn8I7E4rXFkXJDECQrLRQSy7yEKU&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am using this example code for extraction:&lt;br/&gt;
&lt;a href=&quot;http://thinktibits.blogspot.com.es/2013/01/read-extract-tar-file-java-example.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://thinktibits.blogspot.com.es/2013/01/read-extract-tar-file-java-example.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12858061">COMPRESS-322</key>
            <summary>Tar extracts folders as files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="MrBump">MrBump</reporter>
                        <labels>
                    </labels>
                <created>Sat, 22 Aug 2015 12:43:15 +0000</created>
                <updated>Sun, 23 Aug 2015 14:35:06 +0000</updated>
                            <resolved>Sun, 23 Aug 2015 14:35:06 +0000</resolved>
                                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14708134" author="bodewig" created="Sat, 22 Aug 2015 19:07:58 +0000"  >&lt;p&gt;Could you please attach the archive to this ticket rather than linking it somewhere else?  Mega claims I was using an outdated browser just because I won&apos;t allow it access to my local storage &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;You find the &quot;attach&quot; operation under the &quot;More&quot;-Pullown in the top level button bar.&lt;/p&gt;</comment>
                            <comment id="14708390" author="sebb@apache.org" created="Sun, 23 Aug 2015 14:35:06 +0000"  >&lt;p&gt;The example code linked from the issue does not check the type of entries.&lt;/p&gt;

&lt;p&gt;Entries can be directories as well as files (or indeed potentially neither).&lt;/p&gt;

&lt;p&gt;So it is not suprising that the code does not work as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 22 Aug 2015 19:07:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j8vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-321] Exception in X7875_NewUnix.parseFromLocalFileData when parsing 0-sized &quot;ux&quot; local entry</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-321</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When trying to detect content type of a zip file with Tika 1.10 (which uses Commons Compress 1.9 internally) in manner like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] content = ... &lt;span class=&quot;code-comment&quot;&gt;// whole zip file.
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = &lt;span class=&quot;code-quote&quot;&gt;&quot;TR_01.ZIP&quot;&lt;/span&gt;;
        Tika tika = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Tika();
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; tika.detect(content, name);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it throws an exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ArrayIndexOutOfBoundsException: 13
	at org.apache.commons.compress.archivers.zip.X7875_NewUnix.parseFromLocalFileData(X7875_NewUnix.java:199)
	at org.apache.commons.compress.archivers.zip.X7875_NewUnix.parseFromCentralDirectoryData(X7875_NewUnix.java:220)
	at org.apache.commons.compress.archivers.zip.ExtraFieldUtils.parse(ExtraFieldUtils.java:174)
	at org.apache.commons.compress.archivers.zip.ZipArchiveEntry.setCentralDirectoryExtra(ZipArchiveEntry.java:476)
	at org.apache.commons.compress.archivers.zip.ZipFile.readCentralDirectoryEntry(ZipFile.java:575)
	at org.apache.commons.compress.archivers.zip.ZipFile.populateFromCentralDirectory(ZipFile.java:492)
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:216)
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:192)
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:153)
	at org.apache.tika.parser.pkg.ZipContainerDetector.detectZipFormat(ZipContainerDetector.java:141)
	at org.apache.tika.parser.pkg.ZipContainerDetector.detect(ZipContainerDetector.java:88)
	at org.apache.tika.detect.CompositeDetector.detect(CompositeDetector.java:77)
	at org.apache.tika.Tika.detect(Tika.java:155)
	at org.apache.tika.Tika.detect(Tika.java:183)
	at org.apache.tika.Tika.detect(Tika.java:223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The zip file does contain two .jpg images and is not a &quot;special&quot; (JAR, Openoffice, ... ) zip file.&lt;/p&gt;

&lt;p&gt;Unfortunately, the contents of the zip file is confidential and so I cannot attach it to this ticket as it is, although I can provide the parameters supplied to&lt;br/&gt;
org.apache.commons.compress.archivers.zip.X7875_NewUnix.parseFromLocalFileData(X7875_NewUnix.java:199) as caught by the debugger:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;data = {&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[13]@2103}
 0 = 85
 1 = 84
 2 = 5
 3 = 0
 4 = 7
 5 = -112
 6 = -108
 7 = 51
 8 = 85
 9 = 117
 10 = 120
 11 = 0
 12 = 0
offset = 13
length = 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This data comes from the local zip entry for the first file, it seems the method tries to read more bytes than is actually available in the buffer.&lt;/p&gt;

&lt;p&gt;It seems that first 9 bytes of the buffer are &apos;UT&apos; extended field with timestamp, followed by 0-sized &apos;ux&apos; field (bytes 9-12) that is supposed to contain UID/GID - according to infozip&apos;s doc the 0-size is common for global dictionary, but the local dictionary should contain complete data. In this case for some reason it does contain 0-sized data.&lt;/p&gt;

&lt;p&gt;Note that 7zip and unzip can unzip the file without even a warning, so Commons Compress should be also able to handle that file correctly without choking on that exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12857529">COMPRESS-321</key>
            <summary>Exception in X7875_NewUnix.parseFromLocalFileData when parsing 0-sized &quot;ux&quot; local entry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="mpl">Martin Petricek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Aug 2015 13:09:45 +0000</created>
                <updated>Mon, 31 Aug 2015 12:20:19 +0000</updated>
                            <resolved>Mon, 31 Aug 2015 12:20:19 +0000</resolved>
                                    <version>1.9</version>
                    <version>1.10</version>
                                    <fixVersion>1.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14705301" author="garydgregory" created="Thu, 20 Aug 2015 17:09:11 +0000"  >&lt;p&gt;Can you try Commons Compress 1.10?&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="14705416" author="mpl" created="Thu, 20 Aug 2015 17:52:44 +0000"  >&lt;p&gt;I forced compress to 1.10 in maven, retried the test and the result is the same (just some small differences in line numbers)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ArrayIndexOutOfBoundsException: 13
	at org.apache.commons.compress.archivers.zip.X7875_NewUnix.parseFromLocalFileData(X7875_NewUnix.java:199)
	at org.apache.commons.compress.archivers.zip.X7875_NewUnix.parseFromCentralDirectoryData(X7875_NewUnix.java:220)
	at org.apache.commons.compress.archivers.zip.ExtraFieldUtils.parse(ExtraFieldUtils.java:174)
	at org.apache.commons.compress.archivers.zip.ZipArchiveEntry.setCentralDirectoryExtra(ZipArchiveEntry.java:561)
	at org.apache.commons.compress.archivers.zip.ZipFile.readCentralDirectoryEntry(ZipFile.java:616)
	at org.apache.commons.compress.archivers.zip.ZipFile.populateFromCentralDirectory(ZipFile.java:533)
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:216)
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:192)
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:153)
	at org.apache.tika.parser.pkg.ZipContainerDetector.detectZipFormat(ZipContainerDetector.java:141)
	at org.apache.tika.parser.pkg.ZipContainerDetector.detect(ZipContainerDetector.java:88)
	at org.apache.tika.detect.CompositeDetector.detect(CompositeDetector.java:77)
	at org.apache.tika.Tika.detect(Tika.java:155)
	at org.apache.tika.Tika.detect(Tika.java:183)
	at org.apache.tika.Tika.detect(Tika.java:223)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14705444" author="garydgregory" created="Thu, 20 Aug 2015 18:04:01 +0000"  >&lt;p&gt;Martin,&lt;/p&gt;

&lt;p&gt;Thank you for checking.&lt;/p&gt;

&lt;p&gt;Can you attach the problematic file to this ticket? Make sure it does not contain proprietary or personal information!&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="14705892" author="bodewig" created="Thu, 20 Aug 2015 22:25:45 +0000"  >&lt;p&gt;Martin has already said he cannot share it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Unfortunately I haven&apos;t had the time to read zlib&apos;s spec of the extra field but it looks as if the uid/gid fields would both be optional and the extra field had already old us with a length of 0 (the two 0s following the bytes with values 117 and 120 in the dump are the size of the ux extra field).  This is a bug that may be present in some of the other extra field parsers as well.&lt;/p&gt;</comment>
                            <comment id="14708133" author="bodewig" created="Sat, 22 Aug 2015 19:04:09 +0000"  >&lt;p&gt;I think I&apos;ve fixed this with 1697106  is it possible you can try the next 1.11-SNAPSHOT build from &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/groups/snapshots&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14723240" author="mpl" created="Mon, 31 Aug 2015 09:04:14 +0000"  >&lt;p&gt;Tried with the 1.11-SNAPSHOT - the file is now correctly detected by Tika as application/zip, no more crashes inside X7875_NewUnix.parseFromLocalFileData. I guess that fixed this bug.&lt;/p&gt;</comment>
                            <comment id="14723351" author="bodewig" created="Mon, 31 Aug 2015 12:20:19 +0000"  >&lt;p&gt;Thanks, Martin&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Aug 2015 17:09:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j5o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-317] ArrayIndexOutOfBoundsException in ZipArchiveEntry.getMergedFields()</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-317</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;&lt;tt&gt;src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.java&lt;/tt&gt; contains the following at line 380 in &lt;tt&gt;getMergedFields()&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;zipExtraFields[zipExtraFields.length] = unparseableExtra;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This will cause an &lt;tt&gt;ArrayIndexOutOfBoundsException&lt;/tt&gt; when reached.&lt;/p&gt;

&lt;p&gt;Note that Apache Ant inherited this bug with commit &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=ant.git;a=commitdiff;h=2c04d7e833b4e5dab1a3c5ddfe14b572aea8c112&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;2c04d7e&lt;/tt&gt;&lt;/a&gt;, which is where I found it; a fix should be ported there too. (The class is called just &lt;tt&gt;ZipEntry&lt;/tt&gt; there; full path: &lt;tt&gt;src/main/org/apache/tools/zip/ZipEntry.java&lt;/tt&gt;)&lt;/p&gt;

&lt;p&gt;The correct line is probably one of the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;zipExtraFields[zipExtraFields.length - 1] = unparseableExtra;
zipExtraFields[extraFields.length] = unparseableExtra;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;They should be equivalent because of the line immediately above line 380, which creates &lt;tt&gt;zipExtraFields&lt;/tt&gt; as copy of &lt;tt&gt;extraFields&lt;/tt&gt; that is one element longer. It might be worth noting that line 411 of &lt;tt&gt;ZipArchiveEntry&lt;/tt&gt; uses &lt;tt&gt;zipExtraFields.length - 1&lt;/tt&gt;, while line 411 of Ant&apos;s &lt;tt&gt;ZipEntry&lt;/tt&gt; uses &lt;tt&gt;extraFields.length&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12836275">COMPRESS-317</key>
            <summary>ArrayIndexOutOfBoundsException in ZipArchiveEntry.getMergedFields()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lucaswerkmeister">Lucas Werkmeister</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Mon, 8 Jun 2015 20:28:27 +0000</created>
                <updated>Tue, 9 Jun 2015 15:08:21 +0000</updated>
                            <resolved>Tue, 9 Jun 2015 04:19:07 +0000</resolved>
                                                    <fixVersion>1.10</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14578289" author="bodewig" created="Tue, 9 Jun 2015 04:19:07 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;fixed with svn revision 1684309, will port it to Ant.&lt;/p&gt;</comment>
                            <comment id="14579045" author="lucaswerkmeister" created="Tue, 9 Jun 2015 15:08:21 +0000"  >&lt;p&gt;Great, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Jun 2015 04:19:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 41 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fsaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-316] CompressorStreamFactory doesn&apos;t handle deflate streams with a zlib header</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-316</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;If you take a zlib / deflate compressed file, with the zlib header (eg the test file bla.tar.deflatez) and pass it to CompressorStreamFactory.createCompressorInputStream, it won&apos;t be detected and you&apos;ll get a CompressorException(&quot;No Compressor found for the stream signature.&quot;)&lt;/p&gt;

&lt;p&gt;While detecting header-less zlib files is probably too tricky to manage, those with the header ought to be possible to spot and handle&lt;/p&gt;</description>
                <environment></environment>
        <key id="12832343">COMPRESS-316</key>
            <summary>CompressorStreamFactory doesn&apos;t handle deflate streams with a zlib header</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gagravarr">Nick Burch</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 May 2015 12:03:30 +0000</created>
                <updated>Sat, 23 May 2015 15:09:09 +0000</updated>
                            <resolved>Sat, 23 May 2015 15:09:09 +0000</resolved>
                                    <version>1.9</version>
                                    <fixVersion>1.10</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14557305" author="gagravarr" created="Sat, 23 May 2015 12:09:48 +0000"  >&lt;p&gt;Proposed patch which adds zlib header signature detection to DeflateCompressorInputStream, uses that in CompressorStreamFactory, and adds a test to DetectCompressorTestCase using an existing test file&lt;/p&gt;</comment>
                            <comment id="14557375" author="bodewig" created="Sat, 23 May 2015 15:09:09 +0000"  >&lt;p&gt;patch committed with svn revision 1681356&lt;/p&gt;

&lt;p&gt;My reading of RFC1950 is that the second byte could also have four different values when using preset dictionaries, but then we might be getting too many false positives.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12735011" name="zlib-header-detection.patch" size="3881" author="gagravarr" created="Sat, 23 May 2015 12:09:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 23 May 2015 15:09:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f4y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-315] tar can not write uid or gid &gt;= 0x80000000</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-315</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-314&quot; title=&quot;TarArchiveInputStream rejects uid or gid &amp;gt;= 0x80000000&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-314&quot;&gt;&lt;del&gt;COMPRESS-314&lt;/del&gt;&lt;/a&gt; - TarArchiveEntry doesn&apos;t allow gid/uid bigger than a signed 32bit int - the POSIX spec does.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12827539">COMPRESS-315</key>
            <summary>tar can not write uid or gid &gt;= 0x80000000</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2015 04:25:49 +0000</created>
                <updated>Wed, 6 May 2015 04:33:35 +0000</updated>
                            <resolved>Wed, 6 May 2015 04:33:35 +0000</resolved>
                                    <version>1.9</version>
                                    <fixVersion>1.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14529891" author="bodewig" created="Wed, 6 May 2015 04:33:35 +0000"  >&lt;p&gt;fixed with svn revision 1677921&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12827449">COMPRESS-314</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ec9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-314] TarArchiveInputStream rejects uid or gid &gt;= 0x80000000</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-314</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;A POSIX-format archive that came from sysdiagnose produces NumberFormatException&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; when I try to read it with TarArchiveInputStream.&lt;/p&gt;

&lt;p&gt;The relevant part of the .tar file looks like this:&lt;/p&gt;

&lt;p&gt;   18 uid=429496729&lt;/p&gt;

&lt;p&gt;That&apos;s the uid of &apos;nobody&apos; on Mac OS (on Mac OS, uid_t is &apos;unsigned int&apos;).&lt;/p&gt;

&lt;p&gt;POSIX doesn&apos;t say anything about the width of the uid extended header&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;, so I assume the tar file is okay. GNU tar doesn&apos;t have trouble with it.&lt;/p&gt;

&lt;p&gt;The relevant code, in applyPaxHeadersToCurrentEntry:&lt;/p&gt;

&lt;p&gt;            } else if (&quot;gid&quot;.equals(key))&lt;/p&gt;
{
                currEntry.setGroupId(Integer.parseInt(val));
...
            }
&lt;p&gt; else if (&quot;uid&quot;.equals(key)){&lt;br/&gt;
                currEntry.setUserId(Integer.parseInt(val));&lt;/p&gt;

&lt;p&gt;uid_t and gid_t are typically unsigned 32-bit integers, so these should presumably use Long.parseLong to handle integers with the top bit set (and TarArchiveEntry would need some modifications to handle large uid and gid, too).&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; java.lang.NumberFormatException: For input string: &quot;4294967294&quot;&lt;br/&gt;
        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)&lt;br/&gt;
        at java.lang.Integer.parseInt(Integer.java:495)&lt;br/&gt;
        at java.lang.Integer.parseInt(Integer.java:527)&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.applyPaxHeadersToCurrentEntry(TarArchiveInputStream.java:488)&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.paxHeaders(TarArchiveInputStream.java:415)&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:295)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/9699919799/utilities/pax.html#tag_20_92_13_03&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pubs.opengroup.org/onlinepubs/9699919799/utilities/pax.html#tag_20_92_13_03&lt;/a&gt;&lt;br/&gt;
uid&lt;br/&gt;
The user ID of the file owner, expressed as a decimal number using digits from the ISO/IEC 646:1991 standard. This record shall override the uid field in the following header block(s). When used in write or copy mode, pax shall include a uid extended header record for each file whose owner ID is greater than 2097151 (octal 7777777).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12827449">COMPRESS-314</key>
            <summary>TarArchiveInputStream rejects uid or gid &gt;= 0x80000000</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jrn">Jonathan Nieder</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 May 2015 22:15:21 +0000</created>
                <updated>Fri, 8 May 2015 19:12:10 +0000</updated>
                            <resolved>Fri, 8 May 2015 19:12:10 +0000</resolved>
                                    <version>1.9</version>
                                    <fixVersion>1.10</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14529883" author="bodewig" created="Wed, 6 May 2015 04:23:26 +0000"  >&lt;p&gt;I&apos;ll create a separate issue for the ability to write entries with group ids &amp;gt; 07777777 and fix that first so I can create a unit test for this one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14535299" author="bodewig" created="Fri, 8 May 2015 19:12:10 +0000"  >&lt;p&gt;fixed with svn revision 1678430&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12827539">COMPRESS-315</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 May 2015 04:23:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ebu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-312] public TarArchiveEntry(File file, String fileName) does not normalize the file name.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-312</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Tar entry names are normalized most of the times (like replacing back slashes with forward slashes). But TarArchiveEntry(File file, String fileName) constructor does not do so.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows&lt;/p&gt;</environment>
        <key id="12783029">COMPRESS-312</key>
            <summary>public TarArchiveEntry(File file, String fileName) does not normalize the file name.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alex.turc">Alex Turc</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Mar 2015 21:30:54 +0000</created>
                <updated>Sat, 28 Mar 2015 18:58:37 +0000</updated>
                            <resolved>Sat, 28 Mar 2015 18:58:37 +0000</resolved>
                                    <version>1.9</version>
                                    <fixVersion>1.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14385469" author="bodewig" created="Sat, 28 Mar 2015 18:58:37 +0000"  >&lt;p&gt;fixed with svn revision 1669822&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Mar 2015 18:58:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26y0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-311] File Name too long (&gt;100 bytes) when trying to create a Tar,and I cn not reduce file name as per my requirement.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-311</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description></description>
                <environment></environment>
        <key id="12781409">COMPRESS-311</key>
            <summary>File Name too long (&gt;100 bytes) when trying to create a Tar,and I cn not reduce file name as per my requirement.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jdarpan">DARPAN KAUSHIK</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Mar 2015 05:11:57 +0000</created>
                <updated>Thu, 12 Mar 2015 19:00:11 +0000</updated>
                            <resolved>Thu, 12 Mar 2015 05:28:30 +0000</resolved>
                                    <version>1.9</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14358116" author="bodewig" created="Thu, 12 Mar 2015 05:22:57 +0000"  >&lt;p&gt;The 100 byte length is the maximum length you can get from a traditional ustar tar file.&lt;/p&gt;

&lt;p&gt;There are several other dialects of tar that allow you to use longer file names and Commons Compress supports the most important ones: GNU and POSIX.  You just have to select the dialect explicitly.  See &lt;a href=&quot;http://commons.apache.org/proper/commons-compress/tar.html#Long_File_Names&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-compress/tar.html#Long_File_Names&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You should check with the software you want to use to extract the archive whether it supports one of those dialects.  Chances are your unarchiver will support POSIX since this is what all current tar implementations are based on.&lt;/p&gt;</comment>
                            <comment id="14358122" author="bodewig" created="Thu, 12 Mar 2015 05:28:30 +0000"  >&lt;p&gt;either you can use POSIX or GNU extensions or the problem cannot be solved because the tar format enforces this limitation.&lt;/p&gt;</comment>
                            <comment id="14358261" author="jdarpan" created="Thu, 12 Mar 2015 08:05:22 +0000"  >&lt;p&gt;Thanks a lot Stefan.!! &lt;br/&gt;
I am trying to create a Tar package.Can you cite an example on how to use this extension with TarArchiveOutputStream.I am using:&lt;br/&gt;
TarArchiveOutputStream tos=new TarArchiveOutputStream(OutputStream);&lt;br/&gt;
tos.setLongFileMode(TarArchiveOutputStream.LONGFILE_POSIX);&lt;/p&gt;</comment>
                            <comment id="14358309" author="bodewig" created="Thu, 12 Mar 2015 08:37:57 +0000"  >&lt;p&gt;yes, this is what you should be doing.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/compress/trunk/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStreamTest.java?revision=1660457&amp;amp;view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/commons/proper/compress/trunk/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStreamTest.java?revision=1660457&amp;amp;view=markup&lt;/a&gt; contains unit tests including for the long file name cases.  See testWriteLongFileNamePosixMode for example.&lt;/p&gt;</comment>
                            <comment id="14358332" author="ebourg" created="Thu, 12 Mar 2015 08:56:02 +0000"  >&lt;p&gt;What about enabling one of the long file modes by default?&lt;/p&gt;</comment>
                            <comment id="14358385" author="jdarpan" created="Thu, 12 Mar 2015 09:42:44 +0000"  >&lt;p&gt;Thanks Stefan.But its not working for me..still error is coming.Below is my code snippet:&lt;br/&gt;
TarArchiveOutputStream tos=new TarArchiveOutputStream(OutputStream);&lt;br/&gt;
tos.setLongFileMode(TarArchiveOutputStream.LONGFILE_POSIX);&lt;br/&gt;
any other alternative or am I doing something wrong.?&lt;/p&gt;</comment>
                            <comment id="14358386" author="jdarpan" created="Thu, 12 Mar 2015 09:43:44 +0000"  >&lt;p&gt;Thanks. Can we set it at object instantiation time ? or how to set it as default mode?&lt;/p&gt;</comment>
                            <comment id="14359176" author="bodewig" created="Thu, 12 Mar 2015 18:58:46 +0000"  >&lt;p&gt;Sorry Darpan, but the snippet really isn&apos;t long enough to tell what may be going wrong.&lt;/p&gt;

&lt;p&gt;The value you set via setLongFileMode is used for all entries you add after setting it and there are test cases that show it is working.  If it fails for you, can you provide a small test case that exhibits the problem?&lt;/p&gt;</comment>
                            <comment id="14359178" author="bodewig" created="Thu, 12 Mar 2015 19:00:11 +0000"  >&lt;p&gt;This might lead to Commons Compress creating archives by default that are unreadable by some implementations.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Mar 2015 05:22:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26o8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-310] &quot;No Archiver found for the stream signature&quot; for empty .tar.gz</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-310</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;GNU tar can unpack empty gzipped tar archive &lt;b&gt;uzhos.tar.gz&lt;/b&gt; without any problems. commons-compress detects gzip compression, but not tar archive format of the uncompressed data.&lt;/p&gt;

&lt;p&gt;The archive was created by running GNU tar in an empty directory like this: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;tar xzf uzhos.tar.gz .&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and then manually deleting the &lt;b&gt;&apos;.&apos;&lt;/b&gt; directory entry in &lt;b&gt;file-roller&lt;/b&gt; archive manager.&lt;/p&gt;

&lt;p&gt;Minimal test demonstrating the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; ru.zombator;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.archivers.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.compressors.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Assert;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;UzhosTest {
  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void unpack_empty_gzipped_tar() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, ArchiveException, CompressorException {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (FileInputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;uzhos.tar.gz&quot;&lt;/span&gt;);
         BufferedInputStream bis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedInputStream(in);
         InputStream comp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompressorStreamFactory().createCompressorInputStream(bis);
         BufferedInputStream compBis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedInputStream(comp);
         ArchiveInputStream arch = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArchiveStreamFactory().createArchiveInputStream(compBis)) {
      Assert.assertNull(arch.getNextEntry());
    }
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Stacktrace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.commons.compress.archivers.ArchiveException: No Archiver found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the stream signature
	at org.apache.commons.compress.archivers.ArchiveStreamFactory.createArchiveInputStream(ArchiveStreamFactory.java:359)
	at ru.zombator.UzhosTest.unpack_empty_gzipped_tar(ShittyTest.java:16)
	&amp;lt;23 internal calls&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Ubuntu 14.04.1 LTS, x64, Oracle JDK 1.8.0_25&lt;/p&gt;</environment>
        <key id="12778421">COMPRESS-310</key>
            <summary>&quot;No Archiver found for the stream signature&quot; for empty .tar.gz</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nvamelichev">Nikolai Amelichev</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Feb 2015 01:55:49 +0000</created>
                <updated>Tue, 3 Mar 2015 20:12:52 +0000</updated>
                            <resolved>Tue, 3 Mar 2015 14:52:26 +0000</resolved>
                                    <version>1.9</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14341196" author="nvamelichev" created="Sat, 28 Feb 2015 01:58:37 +0000"  >&lt;p&gt;Added empty gzipped tar archive used by the test.&lt;/p&gt;</comment>
                            <comment id="14341385" author="bodewig" created="Sat, 28 Feb 2015 06:49:31 +0000"  >&lt;p&gt;If you look at the &quot;archive&quot; you&apos;ll see it consists of zero-bytes only.  ArchiveStreamFactory has no way of detecting this is a TAR archive, it could be anything.  If you try to pass the same archive to a TarArchiveInputStream it should deal with it properly.&lt;/p&gt;</comment>
                            <comment id="14345162" author="nvamelichev" created="Tue, 3 Mar 2015 14:51:35 +0000"  >&lt;p&gt;My application supports multiple archive types, so passing the archive to &lt;tt&gt;TarArchiveInputStream&lt;/tt&gt; is not an option. Instead, when &lt;tt&gt;ArchiveStreamFactory#createArchiveInputStream(InputStream)&lt;/tt&gt; fails, I now guess the archiver from archive file name and call &lt;tt&gt;ArchiveStreamFactory#createArchiveInputStream(String, InputStream)&lt;/tt&gt; instead.&lt;/p&gt;</comment>
                            <comment id="14345653" author="sebb@apache.org" created="Tue, 3 Mar 2015 20:12:52 +0000"  >&lt;p&gt;Note: in case it is not obvious, GNU tar is able to read the empty gzipped file as a tar file because it only expects to deal with tar files; provided that the unzipped contents are not incompatible with a tar file, GNU tar will be able to read it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12701521" name="uzhos.tar.gz" size="29" author="nvamelichev" created="Sat, 28 Feb 2015 01:58:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Feb 2015 06:49:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i266nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-309] BZip2CompressorInputStream return value wrong when told to read to a full buffer.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-309</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;BZip2CompressorInputStream.read(buffer, offset, length) returns -1 when given an offset equal to the length of the buffer.&lt;/p&gt;

&lt;p&gt;This indicates, not that the buffer was full, but that the stream was finished.&lt;/p&gt;

&lt;p&gt;It seems like a pretty stupid thing to do - but I&apos;m getting this when trying to use Kryo serialization (which is probably a bug on their part, too), so it does occur and has negative affects.&lt;/p&gt;

&lt;p&gt;Here&apos;s a JUnit test that shows the problem specifically:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;	@Test
	public void testApacheCommonsBZipUncompression () throws Exception {
		// Create a big random piece of data
		byte[] rawData = new byte[1048576];
		for (int i=0; i&amp;lt;rawData.length; ++i) {
			rawData[i] = (byte) Math.floor(Math.random()*256);
		}

		// Compress it
		ByteArrayOutputStream baos = new ByteArrayOutputStream();
		BZip2CompressorOutputStream bzipOut = new BZip2CompressorOutputStream(baos);
		bzipOut.write(rawData);
		bzipOut.flush();
		bzipOut.close();
		baos.flush();
		baos.close();

		// Try to read it back in
		ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
		BZip2CompressorInputStream bzipIn = new BZip2CompressorInputStream(bais);
		byte[] buffer = new byte[1024];
		// Works fine
		Assert.assertEquals(1024, bzipIn.read(buffer, 0, 1024));
		// Fails, returns -1 (indicating the stream is complete rather than that the buffer 
		// was full)
		Assert.assertEquals(0, bzipIn.read(buffer, 1024, 0));
		// But if you change the above expected value to -1, the following line still works
		Assert.assertEquals(1024, bzipIn.read(buffer, 0, 1024));
		bzipIn.close();
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12775918">COMPRESS-309</key>
            <summary>BZip2CompressorInputStream return value wrong when told to read to a full buffer.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nkronenfeld">Nathan Kronenfeld</reporter>
                        <labels>
                            <label>bzip2</label>
                            <label>compression</label>
                    </labels>
                <created>Wed, 18 Feb 2015 17:22:16 +0000</created>
                <updated>Fri, 20 Feb 2015 16:18:29 +0000</updated>
                            <resolved>Fri, 20 Feb 2015 16:18:29 +0000</resolved>
                                    <version>1.4.1</version>
                    <version>1.9</version>
                                    <fixVersion>1.10</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14329115" author="bodewig" created="Fri, 20 Feb 2015 16:18:29 +0000"  >&lt;p&gt;fixed with svn revision 1661151 - thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Feb 2015 16:18:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25rsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-308] ZipEncodingHelper calls System.getProperty(&quot;file.encoding&quot;); should use Charset.defaultCharset()</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-308</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ZipEncodingHelper calls System.getProperty(&quot;file.encoding&quot;)&lt;br/&gt;
However this can fail with a security exception.&lt;/p&gt;

&lt;p&gt;It should use Charset.defaultCharset() instead.&lt;br/&gt;
This method also uses System.getProperty but does so as part of a doPrivileged block.&lt;br/&gt;
AIUI this will be done in the protection domain of the JVM classes rather than the domain in which the Compress code runs, so should be less likely to fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12775441">COMPRESS-308</key>
            <summary>ZipEncodingHelper calls System.getProperty(&quot;file.encoding&quot;); should use Charset.defaultCharset()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2015 19:45:11 +0000</created>
                <updated>Fri, 20 Feb 2015 16:45:05 +0000</updated>
                            <resolved>Fri, 20 Feb 2015 16:45:05 +0000</resolved>
                                                    <fixVersion>1.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14329147" author="bodewig" created="Fri, 20 Feb 2015 16:45:05 +0000"  >&lt;p&gt;fixed with svn revision 1661157&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Feb 2015 16:45:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25owf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-306] ArchiveStreamFactory fails to pass on the encoding when creating some streams</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-306</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ArchiveStreamFactory fails to pass on the encoding when creating the following streams (in some or all cases):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;ArjArchiveInputStream&lt;/li&gt;
	&lt;li&gt;CpioArchiveInputStream&lt;/li&gt;
	&lt;li&gt;DumpArchiveInputStream&lt;/li&gt;
	&lt;li&gt;JarArchiveInputStream&lt;/li&gt;
	&lt;li&gt;JarArchiveOutputStream&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12775411">COMPRESS-306</key>
            <summary>ArchiveStreamFactory fails to pass on the encoding when creating some streams</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2015 17:01:15 +0000</created>
                <updated>Thu, 7 Jan 2016 19:49:42 +0000</updated>
                            <resolved>Mon, 16 Feb 2015 23:21:51 +0000</resolved>
                                    <version>1.9</version>
                                    <fixVersion>1.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14323440" author="sebb@apache.org" created="Mon, 16 Feb 2015 23:21:51 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1660245&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/r1660245&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-306&quot; title=&quot;ArchiveStreamFactory fails to pass on the encoding when creating some streams&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-306&quot;&gt;&lt;del&gt;COMPRESS-306&lt;/del&gt;&lt;/a&gt; ArchiveStreamFactory fails to pass on the encoding when creating some streams.&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/compress/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/ArchiveStreamFactory.java&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveInputStream.java&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveOutputStream.java&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/dump/DumpArchiveInputStream.java&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/jar/JarArchiveInputStream.java&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/jar/JarArchiveOutputStream.java&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java&lt;br/&gt;
    commons/proper/compress/trunk/src/test/java/org/apache/commons/compress/archivers/ArchiveStreamFactoryTest.java&lt;/p&gt;</comment>
                            <comment id="15083294" author="jgustie" created="Tue, 5 Jan 2016 16:06:04 +0000"  >&lt;p&gt;I know this already resolved, but I also just noticed this issue while trying to extend &lt;tt&gt;ArchiveStreamFactory&lt;/tt&gt; (in some cases I do not want the factory to stream Zip or JAR files). It occurred to me that there was significant duplication in the code and was wondering if it would be better if &lt;tt&gt;createArchiveInputStream(InputStream)&lt;/tt&gt; called through to &lt;tt&gt;createArchiveInputStream(String, InputStream)&lt;/tt&gt; once the archive type was detected. This would limit the number of places the archive input stream constructors are invoked.&lt;/p&gt;</comment>
                            <comment id="15083363" author="jgustie" created="Tue, 5 Jan 2016 17:01:11 +0000"  >&lt;p&gt;It also looks like there is a subtle bug creating TAR input streams where the &lt;tt&gt;encoding&lt;/tt&gt; field is used instead of the &lt;tt&gt;entryEncoding&lt;/tt&gt; down in the &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-191&quot; title=&quot;Too relaxed tar detection in ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-191&quot;&gt;&lt;del&gt;COMPRESS-191&lt;/del&gt;&lt;/a&gt; fix code. This type of bug would be avoided if constructor calls were limited to just the one method.&lt;/p&gt;</comment>
                            <comment id="15087984" author="bodewig" created="Thu, 7 Jan 2016 19:49:42 +0000"  >&lt;p&gt;True, thanks!&lt;/p&gt;

&lt;p&gt;Commit 5d027c3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Jan 2016 16:06:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25oqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-303] Restore immutability/thread-safety to CompressorStreamFactory</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-303</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;CompressorStreamFactory was immutable prior to 1.5; r1453945 broke immutability. It&apos;s also no longer thread-safe because the field decompressConcatenated is not safely published.&lt;/p&gt;

&lt;p&gt;It would be possible to make it thread-safe by making the field volatile.&lt;/p&gt;

&lt;p&gt;It could be made conditionally immutable by using the same technique as suggested in &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-302&quot; title=&quot;Retore immutability/thread-safety to ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-302&quot;&gt;&lt;del&gt;COMPRESS-302&lt;/del&gt;&lt;/a&gt;, in preparation for removing the method setDecompressConcatenated in a future API-break release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12775232">COMPRESS-303</key>
            <summary>Restore immutability/thread-safety to CompressorStreamFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Feb 2015 18:00:00 +0000</created>
                <updated>Sun, 15 Feb 2015 22:50:25 +0000</updated>
                            <resolved>Sun, 15 Feb 2015 22:50:25 +0000</resolved>
                                    <version>1.9</version>
                                    <fixVersion>1.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14322137" author="bodewig" created="Sun, 15 Feb 2015 18:44:43 +0000"  >&lt;p&gt;sounds good.&lt;/p&gt;</comment>
                            <comment id="14322220" author="sebb@apache.org" created="Sun, 15 Feb 2015 22:50:25 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1660002&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/r1660002&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-303&quot; title=&quot;Restore immutability/thread-safety to CompressorStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-303&quot;&gt;&lt;del&gt;COMPRESS-303&lt;/del&gt;&lt;/a&gt; Restore immutability/thread-safety to CompressorStreamFactory.&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/compress/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/compressors/CompressorStreamFactory.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 15 Feb 2015 18:44:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25nnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-302] Retore immutability/thread-safety to ArchiveStreamFactory</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-302</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-180&quot; title=&quot;new String(byte[]) conversions use default encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-180&quot;&gt;&lt;del&gt;COMPRESS-180&lt;/del&gt;&lt;/a&gt; added support for encoding.&lt;br/&gt;
Unfortunately this was done in a way that broke immutability.&lt;br/&gt;
Also the factory is no longer thread-safe as the encoding field is not synch/volatile.&lt;/p&gt;

&lt;p&gt;Consider whether to restore immutability, e.g. by adding a constuctor which takes the encoding setting. The setEntryEncoding method could be deprecated intitially and eventually dropped.&lt;/p&gt;

&lt;p&gt;One way to support immutability now would be to add a second final encoding field which is set by a new ctor. See patch to follow.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12775226">COMPRESS-302</key>
            <summary>Retore immutability/thread-safety to ArchiveStreamFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Feb 2015 17:34:37 +0000</created>
                <updated>Sun, 15 Feb 2015 23:11:42 +0000</updated>
                            <resolved>Sun, 15 Feb 2015 23:11:42 +0000</resolved>
                                    <version>1.9</version>
                                    <fixVersion>1.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14322136" author="bodewig" created="Sun, 15 Feb 2015 18:44:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;you may want to cache getEntryEncoding in a local variable, but that&apos;s picking nits.  And maybe add a hint about the new exception to setEntryEncoding&apos;s javadoc.&lt;/p&gt;</comment>
                            <comment id="14322234" author="sebb@apache.org" created="Sun, 15 Feb 2015 23:11:42 +0000"  >&lt;p&gt;Used a different method to minimise code changes - the original field is now set in the constructor.&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1660005&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/r1660005&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-302&quot; title=&quot;Retore immutability/thread-safety to ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-302&quot;&gt;&lt;del&gt;COMPRESS-302&lt;/del&gt;&lt;/a&gt; Restore immutability/thread-safety to ArchiveStreamFactory.&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/compress/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/ArchiveStreamFactory.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12698997" name="COMPRESS-302.patch" size="6176" author="sebb@apache.org" created="Sun, 15 Feb 2015 17:49:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 15 Feb 2015 18:44:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25nm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-301] Illegal argument exception when extracting .tgz file </title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-301</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When attempting to unpack a .tgz file, I am receiving the illegal argument exception: java.lang.IllegalArgumentException: Invalid byte 0 at offset 5 in &apos;05412&lt;/p&gt;
{NUL}11&apos; len=8. This is causing a java.io.IOException: Error detected parsing the header error. &lt;br/&gt;
&lt;br/&gt;
This is being thrown when the function TarArchiveInputStream.getNextTarEntry() is called. &lt;br/&gt;
&lt;br/&gt;
Here is the code I am using. &lt;br/&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            TarArchiveInputStream tarIn = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream(
                    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GZIPInputStream(
                            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedInputStream(
                                    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(
                                            tempDirPath + fileName))));

            TarArchiveEntry entry = tarIn.getNextTarEntry();

            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (entry != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                File path = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(tempDirPath, entry.getName());
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry.isDirectory()) {
                    path.mkdirs();
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {          
                    path.createNewFile();
                    &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] read = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[2048];
                    BufferedOutputStream bout = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedOutputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(path));
                    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; len;
                    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((len = tarIn.read(read)) != -1) {
                        bout.write(read, 0, len);
                        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.print(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(read, &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;));
                    }
                    bout.close();
                    read = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
                }
                entry = tarIn.getNextTarEntry();
            }
            tarIn.close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;br/&gt;
&lt;br/&gt;
Here is the full stack trace: &lt;br/&gt;
&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2015-02-12T23:17:31.944+0000&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;glassfish 4.0&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;SEVERE&amp;#93;&lt;/span&gt; [] [] &lt;span class=&quot;error&quot;&gt;&amp;#91;tid: _ThreadID=123 _ThreadName=Thread-4&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;timeMillis: 1423783051944&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;levelValue: 1000&amp;#93;&lt;/span&gt; [[&lt;br/&gt;
  java.io.IOException: Error detected parsing the header&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:257)&lt;br/&gt;
        at org.unavco.ws.tilt.ExtractTiltFile.extractFile(ExtractTiltFile.java:125)&lt;br/&gt;
        at org.unavco.ws.tilt.ExtractTiltFile.run(ExtractTiltFile.java:59)&lt;br/&gt;
        at org.unavco.ws.cache.ProcessDataFile.getFileData(ProcessDataFile.java:100)&lt;br/&gt;
        at org.unavco.ws.cache.ProcessDataFile.getResultSet(ProcessDataFile.java:81)&lt;br/&gt;
        at org.unavco.ws.tilt.TiltDsClient.write(TiltDsClient.java:47)&lt;br/&gt;
        at org.glassfish.jersey.message.internal.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:76)&lt;br/&gt;
        at org.glassfish.jersey.message.internal.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:58)&lt;br/&gt;
        at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.aroundWriteTo(WriterInterceptorExecutor.java:194)&lt;br/&gt;
        at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:139)&lt;br/&gt;
        at org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor.aroundWriteTo(JsonWithPaddingInterceptor.java:103)&lt;br/&gt;
        at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:139)&lt;br/&gt;
        at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:88)&lt;br/&gt;
        at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:139)&lt;br/&gt;
        at org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1005)&lt;br/&gt;
        at org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:471)&lt;br/&gt;
        at org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:333)&lt;br/&gt;
        at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:323)&lt;br/&gt;
        at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:227)&lt;br/&gt;
        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)&lt;br/&gt;
        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)&lt;br/&gt;
        at org.glassfish.jersey.internal.Errors.process(Errors.java:315)&lt;br/&gt;
        at org.glassfish.jersey.internal.Errors.process(Errors.java:297)&lt;br/&gt;
        at org.glassfish.jersey.internal.Errors.process(Errors.java:267)&lt;br/&gt;
        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)&lt;br/&gt;
        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:198)&lt;br/&gt;
        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:946)&lt;br/&gt;
        at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:323)&lt;br/&gt;
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:372)&lt;br/&gt;
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:335)&lt;br/&gt;
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:218)&lt;br/&gt;
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1682)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:344)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)&lt;br/&gt;
        at com.thetransactioncompany.cors.CORSFilter.doFilter(Unknown Source)&lt;br/&gt;
        at com.thetransactioncompany.cors.CORSFilter.doFilter(Unknown Source)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)&lt;br/&gt;
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:316)&lt;br/&gt;
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:160)&lt;br/&gt;
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:734)&lt;br/&gt;
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:673)&lt;br/&gt;
        at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:99)&lt;br/&gt;
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:174)&lt;br/&gt;
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:357)&lt;br/&gt;
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:260)&lt;br/&gt;
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:188)&lt;br/&gt;
        at org.glassfish.grizzly.http.server.HttpHandler.runService(HttpHandler.java:191)&lt;br/&gt;
        at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:168)&lt;br/&gt;
        at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:189)&lt;br/&gt;
        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)&lt;br/&gt;
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:288)&lt;br/&gt;
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:206)&lt;br/&gt;
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:136)&lt;br/&gt;
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:114)&lt;br/&gt;
        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)&lt;br/&gt;
        at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:838)&lt;br/&gt;
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:113)&lt;br/&gt;
        at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:115)&lt;br/&gt;
        at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:55)&lt;br/&gt;
        at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:135)&lt;br/&gt;
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:564)&lt;br/&gt;
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:544)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException: Invalid byte 0 at offset 5 in &apos;05412{NUL}
&lt;p&gt;11&apos; len=8&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:138)&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarUtils.parseOctalOrBinary(TarUtils.java:169)&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:951)&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:940)&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:324)&lt;br/&gt;
        at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:255)&lt;br/&gt;
        ... 63 more]]&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Mac OSX 10.10.2&lt;/p&gt;</environment>
        <key id="12774970">COMPRESS-301</key>
            <summary>Illegal argument exception when extracting .tgz file </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="molnar">Collin Molnar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Feb 2015 17:47:36 +0000</created>
                <updated>Sun, 15 Feb 2015 14:25:35 +0000</updated>
                            <resolved>Fri, 13 Feb 2015 23:45:33 +0000</resolved>
                                    <version>1.8.1</version>
                    <version>1.9</version>
                                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14320447" author="molnar" created="Fri, 13 Feb 2015 17:49:42 +0000"  >&lt;p&gt;Example .tgz file with error. &lt;/p&gt;</comment>
                            <comment id="14320448" author="molnar" created="Fri, 13 Feb 2015 17:51:17 +0000"  >&lt;p&gt;Also this .tar file is made using a python script, with the tarfile library.   &lt;/p&gt;</comment>
                            <comment id="14320573" author="bodewig" created="Fri, 13 Feb 2015 19:02:17 +0000"  >&lt;p&gt;Thanks, Collin.  Can we distribute the file as a unit test resource?&lt;/p&gt;

&lt;p&gt;According to  the spec the number fields should be padded with NULs, looks as if the library just inserted a single NUL.  Our current implementations strips NULs starting at the right, which fails here.  It should be easy to fix by breaking out of the loop as soon as a NUL is detected.&lt;/p&gt;</comment>
                            <comment id="14320707" author="sebb@apache.org" created="Fri, 13 Feb 2015 20:31:54 +0000"  >&lt;p&gt;I don&apos;t see the Exception when running the code using current trunk.&lt;/p&gt;

&lt;p&gt;I tried both the code in the description (though I omitted writing any files) and the Lister class.&lt;br/&gt;
Both ran successfully.&lt;/p&gt;

&lt;p&gt;@Colin: Maybe you could try using the 1.10-SNAPSHOT build from the ASF snapshot repo:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Does this fail for your sample program?&lt;/p&gt;</comment>
                            <comment id="14320857" author="molnar" created="Fri, 13 Feb 2015 22:14:33 +0000"  >&lt;p&gt;Thank you Stefan and Sebb. It seems that my issue is when I&apos;m downloading the file using the commons.net.FTPClient, and it seems somehow when I download the file it is being corrupted. &lt;/p&gt;

&lt;p&gt;Frustratingly enough, the corrupted file is still a valid tar file so I assumed the issue with was compress. So I will have to see if I need to change the encoding of the client, or if I need to do something else.  &lt;/p&gt;</comment>
                            <comment id="14320989" author="sebb@apache.org" created="Fri, 13 Feb 2015 23:45:06 +0000"  >&lt;p&gt;Make sure you tell FTPClient to use binary mode when downloading.&lt;br/&gt;
Otherwise the file will be corrupted.&lt;br/&gt;
Also, when writing the file, ensure that you take account of the number of bytes read.&lt;br/&gt;
Your example code did not always do this correctly:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;bout.write(read, 0, len); &lt;span class=&quot;code-comment&quot;&gt;// OK
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.print(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(read, &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;)); &lt;span class=&quot;code-comment&quot;&gt;// wrong, should be
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.print(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(read, 0, len, &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14321248" author="bodewig" created="Sat, 14 Feb 2015 05:30:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;Sebb&lt;/a&gt;, is this trunk after svn revision 1659649?  I&apos;ve already committed a provisional fix for this bug with that revision.&lt;/p&gt;</comment>
                            <comment id="14321250" author="bodewig" created="Sat, 14 Feb 2015 05:31:04 +0000"  >&lt;p&gt;I wouldn&apos;t close the bug as &quot;not a problem&quot; if command line tar can extract the archive but Commons Compress can&apos;t.&lt;/p&gt;</comment>
                            <comment id="14321327" author="bodewig" created="Sat, 14 Feb 2015 10:04:56 +0000"  >&lt;p&gt;The attached tar seem to work with 1.9 as well, I&apos;d really be interested in the corrupted tar if only to see what GNU tar does with it.&lt;/p&gt;</comment>
                            <comment id="14322000" author="sebb@apache.org" created="Sun, 15 Feb 2015 14:25:11 +0000"  >&lt;p&gt;I used 1659645&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12698768" name="P693.201212614Tilt.tgz" size="92909" author="molnar" created="Fri, 13 Feb 2015 17:49:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 Feb 2015 19:02:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25m1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-300] LZWInputStream has mutable protected fields; these should be accessed via getter/setter and made private</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-300</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;As per the discussion on the dev list, the class LZWInputStream has some non-private mutable fields.&lt;/p&gt;

&lt;p&gt;These should be accessed via getters/setters only (data encapsulation).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12771629">COMPRESS-300</key>
            <summary>LZWInputStream has mutable protected fields; these should be accessed via getter/setter and made private</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Feb 2015 22:13:28 +0000</created>
                <updated>Tue, 11 Aug 2015 18:20:04 +0000</updated>
                            <resolved>Tue, 11 Aug 2015 18:20:04 +0000</resolved>
                                                    <fixVersion>1.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14300766" author="sebb@apache.org" created="Sun, 1 Feb 2015 22:18:39 +0000"  >&lt;p&gt;Patch that makes fields private, adding getters/setters as appropriate.&lt;/p&gt;

&lt;p&gt;Note that the getters/setters are adjusted according to the actual usage of the original protected fields. &lt;/p&gt;

&lt;p&gt;For example previousCode is only ever set to -1 externally, so it does not need a full setter.&lt;/p&gt;

&lt;p&gt;Not all the protected fields were originally accessed outside the containing class.&lt;/p&gt;</comment>
                            <comment id="14306905" author="bodewig" created="Thu, 5 Feb 2015 09:26:54 +0000"  >&lt;p&gt;Given &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=damjan&quot; class=&quot;user-hover&quot; rel=&quot;damjan&quot;&gt;Damjan Jovanovic&lt;/a&gt;&apos;s comments on the dev list, it may be more appropriate to add full setters so subclasses in imaging are still able to do whatever they need to do.&lt;/p&gt;</comment>
                            <comment id="14306974" author="sebb@apache.org" created="Thu, 5 Feb 2015 10:32:16 +0000"  >&lt;p&gt;I&apos;m not sure that is a good idea.&lt;br/&gt;
At least one of the fields was not used outside the class, so it should never have been protected.&lt;br/&gt;
Also it looks like some of the fields need to be related to each other.&lt;/p&gt;</comment>
                            <comment id="14630803" author="bodewig" created="Fri, 17 Jul 2015 05:40:56 +0000"  >&lt;p&gt;I&apos;ve expanded sebb&apos;s patch a bit to also provide access to the remaining fields that are currently not used by existing subclasses inside COMPRESS.&lt;/p&gt;

&lt;p&gt;I&apos;ve also tweaked a few things introduced by sebb, but these are really mostly cosmetic and I&apos;m not attached to those tweaks.&lt;/p&gt;

&lt;p&gt;It would be good if we could resolve this quickly as dealing with LZWInputStream is really holding up the 1.10 release.&lt;/p&gt;</comment>
                            <comment id="14659475" author="damjan" created="Thu, 6 Aug 2015 04:28:06 +0000"  >&lt;p&gt;Uncommitted patch I made to commons imaging (older version, might not apply now). You can see what bits of compress are used. It might be possible to simplify the patch further.&lt;/p&gt;</comment>
                            <comment id="14679163" author="bodewig" created="Sun, 9 Aug 2015 14:55:36 +0000"  >&lt;p&gt;This is an updated by patch of mine and an adjustment of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=damjan&quot; class=&quot;user-hover&quot; rel=&quot;damjan&quot;&gt;Damjan Jovanovic&lt;/a&gt;&apos;s patch to imaging.&lt;/p&gt;

&lt;p&gt;Thanks a lot Damjan.  Your patch has shown that you didn&apos;t need more than what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;Sebb&lt;/a&gt;&apos;s patch would have allowed you to - so I&apos;ve cut back on my changes.  The patch to imaging applies cleanly and builds against the patched compress with all unit tests passing.&lt;/p&gt;

&lt;p&gt;The main difference between my updated patch and Sebb&apos;s original are a few names and extracting a few constants.  Unless anybody yells I plan to apply the patch to Commons during the coming week and call for a release shortly thereafter.&lt;/p&gt;</comment>
                            <comment id="14682218" author="bodewig" created="Tue, 11 Aug 2015 18:20:04 +0000"  >&lt;p&gt;applied &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-300&quot; title=&quot;LZWInputStream has mutable protected fields; these should be accessed via getter/setter and made private&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-300&quot;&gt;&lt;del&gt;COMPRESS-300&lt;/del&gt;&lt;/a&gt;-alternative with svn revision 1695345&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12749468" name="COMPRESS-300-alternative.patch" size="7782" author="bodewig" created="Sun, 9 Aug 2015 14:55:36 +0000"/>
                            <attachment id="12695839" name="COMPRESS-300.patch" size="7711" author="sebb@apache.org" created="Sun, 1 Feb 2015 22:18:39 +0000"/>
                            <attachment id="12749467" name="imaging-compress-lzw-adjusted.patch" size="17116" author="bodewig" created="Sun, 9 Aug 2015 14:55:36 +0000"/>
                            <attachment id="12748994" name="imaging-compress-lzw.patch" size="16735" author="damjan" created="Thu, 6 Aug 2015 04:28:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Feb 2015 09:26:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2524f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-299] Issue with a 7z encrypted file</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-299</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;A file that we are using to test SevenZ on Tika is failing in some environments.&lt;/p&gt;

&lt;p&gt;I tested the soon to be attached file with commons compress trunk and received this exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.security.InvalidKeyException: Illegal key size
	at javax.crypto.Cipher.checkCryptoPerm(Cipher.java:1024)
	at javax.crypto.Cipher.implInit(Cipher.java:790)
	at javax.crypto.Cipher.chooseProvider(Cipher.java:849)
	at javax.crypto.Cipher.init(Cipher.java:1348)
	at javax.crypto.Cipher.init(Cipher.java:1282)
	at org.apache.commons.compress.archivers.sevenz.AES256SHA256Decoder$1.init(AES256SHA256Decoder.java:98)
	at org.apache.commons.compress.archivers.sevenz.AES256SHA256Decoder$1.read(AES256SHA256Decoder.java:117)
	at java.io.DataInputStream.readUnsignedByte(DataInputStream.java:288)
	at org.tukaani.xz.rangecoder.RangeDecoderFromStream.&amp;lt;init&amp;gt;(Unknown Source)
	at org.tukaani.xz.LZMAInputStream.initialize(Unknown Source)
	at org.tukaani.xz.LZMAInputStream.initialize(Unknown Source)
	at org.tukaani.xz.LZMAInputStream.&amp;lt;init&amp;gt;(Unknown Source)
	at org.apache.commons.compress.archivers.sevenz.Coders$LZMADecoder.decode(Coders.java:114)
	at org.apache.commons.compress.archivers.sevenz.Coders.addDecoder(Coders.java:78)
	at org.apache.commons.compress.archivers.sevenz.SevenZFile.buildDecoderStack(SevenZFile.java:864)
	at org.apache.commons.compress.archivers.sevenz.SevenZFile.buildDecodingStream(SevenZFile.java:831)
	at org.apache.commons.compress.archivers.sevenz.SevenZFile.getNextEntry(SevenZFile.java:153)
	at org.apache.commons.compress.archivers.sevenz.SevenZFileTest.testTikaEncryptedFile(SevenZFileTest.java:215)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at junit.framework.TestCase.runTest(TestCase.java:176)
	at junit.framework.TestCase.runBare(TestCa
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the unit test: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    public void testTikaEncryptedFile() throws Exception {
        String password = &quot;Tika&quot;;
        SevenZFile sevenZFile = new SevenZFile(getFile(&quot;test7Z_protected_passTika.7z&quot;), password.getBytes(&quot;UnicodeLittleUnmarked&quot;));
        try {
            SevenZArchiveEntry entry = sevenZFile.getNextEntry();
            assertEquals(&quot;text.txt&quot;, entry.getName());

        } finally {
            sevenZFile.close();
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Environment: Windows 7, Java 1.7.0_76-b13.&lt;/p&gt;

&lt;p&gt;No problem on RHEL 1.7.0_75&lt;/p&gt;</description>
                <environment></environment>
        <key id="12770174">COMPRESS-299</key>
            <summary>Issue with a 7z encrypted file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tallison@mitre.org">Tim Allison</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Jan 2015 20:17:19 +0000</created>
                <updated>Fri, 30 Jan 2015 14:50:42 +0000</updated>
                            <resolved>Wed, 28 Jan 2015 18:11:56 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14292345" author="tallison@mitre.org" created="Mon, 26 Jan 2015 20:17:57 +0000"  >&lt;p&gt;This is our test file.&lt;/p&gt;

&lt;p&gt;Many apologies if this is user error!&lt;/p&gt;</comment>
                            <comment id="14292376" author="garydgregory" created="Mon, 26 Jan 2015 20:36:03 +0000"  >&lt;p&gt;Closing, reporter says &quot;user error&quot;.&lt;/p&gt;</comment>
                            <comment id="14292420" author="ebourg" created="Mon, 26 Jan 2015 21:13:20 +0000"  >&lt;p&gt;He also said &quot;if&quot; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14292462" author="sebb@apache.org" created="Mon, 26 Jan 2015 21:47:48 +0000"  >&lt;p&gt;&lt;del&gt;Note that getBytes() uses the default encoding. The password string does not seem to contain any unusual characters, but it would be best to specify the encoding just in case.&lt;/del&gt;&lt;br/&gt;
&lt;del&gt;This does not seem to relate to the reported error, but the test case would be more portable if this were fixed.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Later: ignore this comment; it is incorrect&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14293517" author="tallison@mitre.org" created="Tue, 27 Jan 2015 13:36:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;Sebb&lt;/a&gt;, I think we do specify the encoding in the above test case for &lt;tt&gt;password&lt;/tt&gt;.  Where else do we need to specify it in the above?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ebourg&quot; class=&quot;user-hover&quot; rel=&quot;ebourg&quot;&gt;Emmanuel Bourg&lt;/a&gt;, yes, thank you.  Apologies &lt;em&gt;if&lt;/em&gt; this is user error.  Jenkins is also making the same error that I am and causing our builds to fail in both Java 1.6 and 1.7. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14293551" author="sebb@apache.org" created="Tue, 27 Jan 2015 14:05:00 +0000"  >&lt;p&gt;Sorry, you are right - I completely misread the code.&lt;/p&gt;</comment>
                            <comment id="14293939" author="tallison@mitre.org" created="Tue, 27 Jan 2015 18:39:34 +0000"  >&lt;p&gt;Tika&apos;s unit test (which I plagiarized for the test above) also fails on:&lt;br/&gt;
OS X 10.10.&lt;br/&gt;
java version &quot;1.8.0_25&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_25-b17)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)&lt;/p&gt;</comment>
                            <comment id="14294245" author="bodewig" created="Tue, 27 Jan 2015 21:45:52 +0000"  >&lt;p&gt;Have the unrestricted crypto policies been installed?  Without them the key length Java is willing to support is severely limited.&lt;/p&gt;</comment>
                            <comment id="14295473" author="tallison@mitre.org" created="Wed, 28 Jan 2015 17:42:50 +0000"  >&lt;p&gt;I thought that they had. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Today, I went to &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt; and downloaded the zip.  Inside, I saw two jars, local_policy.jar and US_export_policy.jar.  When I went to drop them in my jre/lib/security folder, I saw that there were two files of the same size (roughly, didn&apos;t check actual byte length) and names already there.  I overwrote the existing jars with ones I pulled freshly from the web, and the unit test now works.  &lt;/p&gt;

&lt;p&gt;So, once I overwrote the 2015 jars with jars from 2011 (as pulled from the site above), the test now passes.  Did java change something in those jars?!  It doesn&apos;t feel right to overwrite new jars with old jars. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14295508" author="ebourg" created="Wed, 28 Jan 2015 18:00:53 +0000"  >&lt;p&gt;Should we catch the InvalidKeyException and rethrow an exception with a message suggesting the installation of the crypto policies?&lt;/p&gt;</comment>
                            <comment id="14295535" author="tallison@mitre.org" created="Wed, 28 Jan 2015 18:11:11 +0000"  >&lt;p&gt;I think you already do.  When I got the error initially, then downloaded the jce files and saw that I already had files of roughly equal size already in my jre installation, I didn&apos;t think that I needed to overwrite them.  I was wrong.&lt;/p&gt;

&lt;p&gt;It looks like the jce jars are standard install on linux, but not OS X or Windows.&lt;/p&gt;

&lt;p&gt;If no one is raising an eyebrow on the need to overwrite 2015 jars with 2011 jars, we&apos;ll add something to our javadocs for our PackageParser, and then plagiarize your isStrongCryptoAvailable() for our test case.&lt;/p&gt;</comment>
                            <comment id="14298324" author="bodewig" created="Fri, 30 Jan 2015 07:50:55 +0000"  >&lt;p&gt;That&apos;s what we do: &lt;a href=&quot;https://github.com/apache/commons-compress/blob/trunk/src/main/java/org/apache/commons/compress/archivers/sevenz/AES256SHA256Decoder.java#L101&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/blob/trunk/src/main/java/org/apache/commons/compress/archivers/sevenz/AES256SHA256Decoder.java#L101&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  - I think Tim showed us the nested exception.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;Tim Allison&lt;/a&gt;: when you install an Oracle JDK you normally get the default JCE which only supports weak crypto (short key length) so it can be distributed everywhere.  Strong crypto is subject to US export regulations, so you need to enable it by downloading additional jars - and claiming you don&apos;t live in a country where it is forbidden to export strong crypto to.  The jars are always there, they just contain different restrictions and you always have to overwrite the weaker default policy files.  I think OpenJDK comes with strong crypto enabled by default, maybe this is what you are using on Linux.  I know I need to install the stronger policy every time we update Oracle&apos;s JDK on Ubuntu as well.&lt;/p&gt;</comment>
                            <comment id="14298704" author="tallison@mitre.org" created="Fri, 30 Jan 2015 14:50:42 +0000"  >&lt;p&gt;Thank you very much for the explanation.  We added your check for strong crypto to our unit test, and our Jenkins builds are up and running again.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12768335">TIKA-1521</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12694604" name="test7Z_protected_passTika.7z" size="260" author="tallison@mitre.org" created="Mon, 26 Jan 2015 20:17:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 26 Jan 2015 20:36:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24taf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-297] Cleaning up unclosed ZipFile for archive</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-297</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;If you try to create a ZipFile from a non-existent file, then it throws a FileNotFoundException, which is fine. The problem is that the constructor appears to leave behind objects that the caller cannot close. So, later on when the garbage collector runs, a message is printed to stdout that says &quot;Cleaning up unclosed ZipFile for archive&quot;. Here is a failing unit test:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;TCommonCompressZipFileConstructor.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.archivers.zip.ZipFile;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TCommonCompressZipFileConstructor {
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void constructorThatThrowsExceptionLeavesBehindObjects() {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File file = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&quot;&quot;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipFile(file);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; IOException e) {
            e.printStackTrace();
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.gc();
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And here is the test output:&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;&lt;br/&gt;
java.io.FileNotFoundException: &lt;br/&gt;
	at java.io.RandomAccessFile.open(Native Method)&lt;br/&gt;
	at java.io.RandomAccessFile.&amp;lt;init&amp;gt;(RandomAccessFile.java:241)&lt;br/&gt;
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:213)&lt;br/&gt;
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:192)&lt;br/&gt;
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:153)&lt;br/&gt;
	at com.mathworks.mlwidgets.explorer.unittest.TCommonCompressZipFileConstructor.constructorThatThrowsExceptionLeavesBehindObjects(TCommonCompressZipFileConstructor.java:14)&lt;br/&gt;
...&lt;br/&gt;
com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)&lt;br/&gt;
&lt;b&gt;Cleaning up unclosed ZipFile for archive L:\IntelliJ projects\foo&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64-bit&lt;/p&gt;</environment>
        <key id="12762891">COMPRESS-297</key>
            <summary>Cleaning up unclosed ZipFile for archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aliu">Andrew Liu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Dec 2014 16:37:13 +0000</created>
                <updated>Sun, 11 Jan 2015 05:32:16 +0000</updated>
                            <resolved>Mon, 22 Dec 2014 16:37:01 +0000</resolved>
                                    <version>1.8.1</version>
                                    <fixVersion>1.10</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14255893" author="bodewig" created="Mon, 22 Dec 2014 16:33:31 +0000"  >&lt;p&gt;The log message you see is ZipFile&apos;s finalize method which looks at the closed flag - which is false by default and is not set to false in case of an error in RandomAccessFile&apos;s constructor.  So what you see is - fortunately - not a resource leak but just a bad log statement.  Will be fixed in trunk in a few seconds.&lt;/p&gt;</comment>
                            <comment id="14255897" author="bodewig" created="Mon, 22 Dec 2014 16:37:01 +0000"  >&lt;p&gt;message should disappear with svn revision 1647348&lt;/p&gt;</comment>
                            <comment id="14255993" author="aliu" created="Mon, 22 Dec 2014 18:13:40 +0000"  >&lt;p&gt;Thanks for the quick response, Stefan!&lt;/p&gt;

&lt;p&gt;Andrew&lt;/p&gt;
</comment>
                            <comment id="14272680" author="dweiss" created="Sat, 10 Jan 2015 20:24:54 +0000"  >&lt;p&gt;That close field should be declared volatile since finalize is invoked from a system thread and the write may not propagate properly.&lt;/p&gt;</comment>
                            <comment id="14272817" author="bodewig" created="Sun, 11 Jan 2015 05:32:16 +0000"  >&lt;p&gt;True, thanks!&lt;/p&gt;

&lt;p&gt;svn revision 1650873&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 22 Dec 2014 16:33:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23mnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-294] .Z decompress &#8220;Invalid 9 bit code 0x183&#8221;</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-294</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Trying to decompress a .Z file I get &#8220;Invalid 9 bit code 0x183&#8221;&lt;/p&gt;

&lt;p&gt;It seems that the z file was created under unix using the default bits value (16 bits). The current implementation seems to support only 9 bits.&lt;/p&gt;

&lt;p&gt;(I can&apos;t provide a sample file since contains client data but I will try to get on dummy file from the client)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12759001">COMPRESS-294</key>
            <summary>.Z decompress &#8220;Invalid 9 bit code 0x183&#8221;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="theqmaster">Q</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Dec 2014 22:24:10 +0000</created>
                <updated>Sun, 28 Jan 2018 11:41:35 +0000</updated>
                            <resolved>Sun, 28 Jan 2018 11:41:35 +0000</resolved>
                                    <version>1.9</version>
                                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14232622" author="bodewig" created="Wed, 3 Dec 2014 05:38:25 +0000"  >&lt;p&gt;In theory we should support up to 31 bits, but I&apos;m not sure we have tests to cover that.&lt;/p&gt;

&lt;p&gt;Actually the &quot;code size&quot; is something that grows over time, it starts at nine bits and can grow up to a maximum value - in Unix compress&apos; default the maximum value is 16.  The exception happens when ZCompressorInputStream encounters a symbol bigger than nine when it still thinks the code size has grown.  This may be a very special situation triggering a bug and it would be awesome if you could find a test case.  If not, we may need your help debugging this further.&lt;/p&gt;</comment>
                            <comment id="14245212" author="bodewig" created="Sat, 13 Dec 2014 05:20:44 +0000"  >&lt;p&gt;By now I know we don&apos;t have a test that does, we never have the code size grow past 10.&lt;/p&gt;

&lt;p&gt;I&apos;ll attach a debug-log &quot;enhanced&quot; version built from &lt;a href=&quot;https://svn.apache.org/repos/asf/commons/proper/compress/branches/COMPRESS-294&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/commons/proper/compress/branches/COMPRESS-294&lt;/a&gt; which might give us some hints.  This is identical to trunk with just a few System.err.printlns sprinkled in.  Could you run this version against your client&apos;s file and provide us with the output?&lt;/p&gt;</comment>
                            <comment id="14245213" author="bodewig" created="Sat, 13 Dec 2014 05:21:45 +0000"  >&lt;p&gt;trunk + a bunch of System.err.printlns&lt;/p&gt;</comment>
                            <comment id="14283854" author="bodewig" created="Tue, 20 Jan 2015 14:30:09 +0000"  >&lt;p&gt;any news?&lt;/p&gt;</comment>
                            <comment id="14977763" author="githubbot" created="Wed, 28 Oct 2015 05:27:55 +0000"  >&lt;p&gt;Github user bodewig commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-compress/pull/3#issuecomment-151728703&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-compress/pull/3#issuecomment-151728703&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Don&apos;t feel forced to create a pull request just because we are using git now.  The established workflow of attaching a patch to JIRA is still in place.  Whatever is more convenient to you.&lt;/p&gt;

&lt;p&gt;    This repo&apos;s default branch is master now, so a fresh github clone would be based on the correct branch.&lt;/p&gt;

&lt;p&gt;    Within the existing clone you can add a master branch that tracks our master&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    git checkout -b master remotes/apache/master&lt;br/&gt;
    git push origin master -u&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    this is assuming you have a remote named apache defined for our git repository and origin for your github clone of it.&lt;/p&gt;

&lt;p&gt;    There are several ways you can try to merge your changes to the new master branch.  This ranges from simply copying over the code (the low tech version, that always works) to `cherry-pick`ing the commits from the &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-294&quot; title=&quot;.Z decompress &#8220;Invalid 9 bit code 0x183&#8221;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-294&quot;&gt;&lt;del&gt;COMPRESS-294&lt;/del&gt;&lt;/a&gt; branch.&lt;/p&gt;
</comment>
                            <comment id="15555538" author="bodewig" created="Fri, 7 Oct 2016 16:27:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=theqmaster&quot; class=&quot;user-hover&quot; rel=&quot;theqmaster&quot;&gt;Q&lt;/a&gt; any updates?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12687020" name="commons-compress-1.10-SNAPSHOT.jar" size="382759" author="bodewig" created="Sat, 13 Dec 2014 05:21:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Dec 2014 05:38:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22zdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-289] TarArchiveOutputStream includes timestamp in long link headers</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-289</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When I create a Tar Archive Entry with a long name, the Long Link Entry contains a default modification date of the current Date.&lt;/p&gt;

&lt;p&gt;This results in two archives with the same contents having different MD5 checksums.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12742254">COMPRESS-289</key>
            <summary>TarArchiveOutputStream includes timestamp in long link headers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bobrobertsonjr">Bob Robertson</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 17 Sep 2014 19:48:19 +0000</created>
                <updated>Fri, 19 Sep 2014 18:10:24 +0000</updated>
                            <resolved>Fri, 19 Sep 2014 18:10:24 +0000</resolved>
                                    <version>1.8.1</version>
                                    <fixVersion>1.9</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14140968" author="bodewig" created="Fri, 19 Sep 2014 17:49:52 +0000"  >&lt;p&gt;Thanks Bob&lt;/p&gt;

&lt;p&gt;I&apos;ve taken a slightly different approach using the last modification time of the entry the long name entry belongs to.  Your unit test (moved to a different test class) still passes.  Please see svn revisions 1626280 and 1626284.&lt;/p&gt;</comment>
                            <comment id="14141008" author="bodewig" created="Fri, 19 Sep 2014 18:10:07 +0000"  >&lt;p&gt;Just realized the same problem also shows up for the PAX header entry and while I fixed this a test wen&apos;t into a inifinite recursion because the last modified time for the PAX header would trigger yet another PAX header ...&lt;/p&gt;

&lt;p&gt;See svn revision 1626290&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12669489" name="TarArchiveOutputStream.java.patch" size="969" author="bobrobertsonjr" created="Wed, 17 Sep 2014 19:59:09 +0000"/>
                            <attachment id="12669490" name="TarTestCase.java.patch" size="4382" author="bobrobertsonjr" created="Wed, 17 Sep 2014 19:59:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Sep 2014 17:49:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i206cv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-287] Support for 7z archives using &quot;kDummy&quot;</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-287</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When Commons Compress 1.8.1 parse the attachment &lt;a href=&quot;file:Archive.7z&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:Archive.7z&lt;/a&gt;, the following error occurred.&lt;br/&gt;
org.apache.tika.exception.TikaException: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-198&quot; title=&quot;Better distinction between IOException and TikaException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-198&quot;&gt;&lt;del&gt;TIKA-198&lt;/del&gt;&lt;/a&gt;: Illegal IOException from org.apache.tika.parser.pkg.PackageParser@886b178&lt;br/&gt;
EndTime:	1407899886604&lt;br/&gt;
at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:248)&lt;br/&gt;
at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)&lt;br/&gt;
at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:148)&lt;br/&gt;
at org.apache.tika.Tika.parseToString(Tika.java:381)&lt;br/&gt;
at fileparser.fileparser_jsonstring(fileparser.java:116)&lt;br/&gt;
at test.main(test.java:26)&lt;br/&gt;
Caused by: java.io.IOException: kDummy is unsupported, please report&lt;br/&gt;
at org.apache.commons.compress.archivers.sevenz.SevenZFile.readFilesInfo(SevenZFile.java:711)&lt;br/&gt;
at org.apache.commons.compress.archivers.sevenz.SevenZFile.readHeader(SevenZFile.java:242)&lt;br/&gt;
at org.apache.commons.compress.archivers.sevenz.SevenZFile.readHeaders(SevenZFile.java:198)&lt;br/&gt;
at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:95)&lt;br/&gt;
at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:117)&lt;br/&gt;
at org.apache.tika.parser.pkg.PackageParser.parse(PackageParser.java:133)&lt;br/&gt;
at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)&lt;br/&gt;
... 5 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tika from truck build.&lt;/p&gt;</environment>
        <key id="12733786">COMPRESS-287</key>
            <summary>Support for 7z archives using &quot;kDummy&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sunxingzhe359">sunxingzhe</reporter>
                        <labels>
                            <label>7z</label>
                    </labels>
                <created>Wed, 13 Aug 2014 15:00:53 +0000</created>
                <updated>Thu, 14 Aug 2014 15:12:38 +0000</updated>
                            <resolved>Thu, 14 Aug 2014 05:41:58 +0000</resolved>
                                    <version>1.8.1</version>
                                    <fixVersion>1.9</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14096587" author="bodewig" created="Thu, 14 Aug 2014 05:18:48 +0000"  >&lt;p&gt;This is what 7z itself does to kDummy props.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; NID::kDummy:
      {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (UInt64 j = 0; j &amp;lt; size; j++)
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ReadByte() != 0)
            ThrowIncorrect();
        addPropIdToList = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it effectively ignores the property but asserts the content is all zeros.  I&apos;m going to implement it even sloppier and just skip it entirely (and fix the &quot;unknown property&quot; case which also throws an exception while I&apos;m at it.&lt;/p&gt;</comment>
                            <comment id="14096602" author="bodewig" created="Thu, 14 Aug 2014 05:41:58 +0000"  >&lt;p&gt;svn revision 1617883&lt;/p&gt;</comment>
                            <comment id="14097052" author="bodewig" created="Thu, 14 Aug 2014 15:12:38 +0000"  >&lt;p&gt;Too bad there is no archive we can ship with our testsuite - I wouldn&apos;t want to include a vmware license file, even one that contains an expired license key,&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12661464" name="Archive.7z" size="846" author="sunxingzhe359" created="Wed, 13 Aug 2014 15:02:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Aug 2014 05:18:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411814</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yuif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411805</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-286] Error while expanding 7z java.io.EOFException</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-286</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>
&lt;p&gt;Using 7zip (9.2) able to extract these downloaded files&lt;br/&gt;
&lt;a href=&quot;http://downloads.sourceforge.net/sourceforge/wxwindows/3.0.0/binaries/wxMSW-3.0.0_vc120_Dev.7z&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://downloads.sourceforge.net/sourceforge/wxwindows/3.0.0/binaries/wxMSW-3.0.0_vc120_Dev.7z&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://downloads.sourceforge.net/sourceforge/wxwindows/3.0.0/binaries/wxMSW-3.0.0_vc120_ReleaseDLL.7z&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://downloads.sourceforge.net/sourceforge/wxwindows/3.0.0/binaries/wxMSW-3.0.0_vc120_ReleaseDLL.7z&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Commons-compress 1.6 had issues with these files that seemed related to &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-257&quot; title=&quot;7z should support the BCJ filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-257&quot;&gt;&lt;del&gt;COMPRESS-257&lt;/del&gt;&lt;/a&gt;  so tried to use 1.8 as identified fixed in version. Some issues where fixed.&lt;/p&gt;

&lt;p&gt;Using maven + antrun&lt;br/&gt;
				&amp;lt;plugin&amp;gt;&lt;br/&gt;
					&amp;lt;artifactId&amp;gt;maven-antrun-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
					&amp;lt;version&amp;gt;1.7&amp;lt;/version&amp;gt;&lt;br/&gt;
					&amp;lt;dependencies&amp;gt;&lt;br/&gt;
						&amp;lt;dependency&amp;gt;&lt;br/&gt;
							&amp;lt;groupId&amp;gt;ant-contrib&amp;lt;/groupId&amp;gt;&lt;br/&gt;
							&amp;lt;artifactId&amp;gt;ant-contrib&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
							&amp;lt;version&amp;gt;1.0b3&amp;lt;/version&amp;gt;&lt;br/&gt;
							&amp;lt;exclusions&amp;gt;&lt;br/&gt;
								&amp;lt;exclusion&amp;gt;&lt;br/&gt;
									&amp;lt;groupId&amp;gt;ant&amp;lt;/groupId&amp;gt;&lt;br/&gt;
									&amp;lt;artifactId&amp;gt;ant&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
								&amp;lt;/exclusion&amp;gt;&lt;br/&gt;
							&amp;lt;/exclusions&amp;gt;&lt;br/&gt;
						&amp;lt;/dependency&amp;gt;&lt;br/&gt;
						&amp;lt;dependency&amp;gt;&lt;br/&gt;
							&amp;lt;groupId&amp;gt;org.apache.ant&amp;lt;/groupId&amp;gt;&lt;br/&gt;
							&amp;lt;artifactId&amp;gt;ant-nodeps&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
							&amp;lt;version&amp;gt;1.8.1&amp;lt;/version&amp;gt;&lt;br/&gt;
						&amp;lt;/dependency&amp;gt;&lt;br/&gt;
						&amp;lt;dependency&amp;gt;&lt;br/&gt;
							&amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;&lt;br/&gt;
							&amp;lt;artifactId&amp;gt;commons-compress&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
							&amp;lt;version&amp;gt;1.8&amp;lt;/version&amp;gt;&lt;br/&gt;
						&amp;lt;/dependency&amp;gt;&lt;br/&gt;
						&amp;lt;dependency&amp;gt;&lt;br/&gt;
							&amp;lt;groupId&amp;gt;org.apache.ant&amp;lt;/groupId&amp;gt;&lt;br/&gt;
							&amp;lt;artifactId&amp;gt;ant-compress&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
							&amp;lt;version&amp;gt;1.4&amp;lt;/version&amp;gt;&lt;br/&gt;
						&amp;lt;/dependency&amp;gt;&lt;br/&gt;
					&amp;lt;/dependencies&amp;gt;&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.maven.plugin.MojoExecutionException: An Ant BuildException has occured: Error while expanding Z:\download\wxMSW-3.0.0_vc120_Dev.7z&lt;br/&gt;
java.io.EOFException&lt;br/&gt;
around Ant part ...&amp;lt;un7z dest=&quot;C:\target/x86&quot; overwrite=&quot;false&quot; sr&lt;br/&gt;
c=&quot;z:\download/wxMSW-3.0.0_vc120_Dev.7z&quot;/&amp;gt;... @ 26:237 in C:\target\antrun\build-download.xml&lt;br/&gt;
        at org.apache.maven.plugin.antrun.AntRunMojo.execute(AntRunMojo.java:355)&lt;br/&gt;
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)&lt;br/&gt;
        ... 17 more&lt;br/&gt;
Caused by: c:\target\antrun\build-download.xml:26: Error while expand&lt;br/&gt;
ing c:\download\wxMSW-3.0.0_vc120_Dev.7z&lt;br/&gt;
java.io.EOFException&lt;br/&gt;
        at org.apache.ant.compress.taskdefs.Un7z.expandFile(Un7z.java:92)&lt;br/&gt;
        at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)&lt;br/&gt;
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)&lt;br/&gt;
        at org.apache.tools.ant.Task.perform(Task.java:348)&lt;br/&gt;
        at org.apache.tools.ant.Target.execute(Target.java:390)&lt;br/&gt;
        at org.apache.tools.ant.Target.performTasks(Target.java:411)&lt;br/&gt;
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)&lt;br/&gt;
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)&lt;br/&gt;
        at org.apache.maven.plugin.antrun.AntRunMojo.execute(AntRunMojo.java:327)&lt;br/&gt;
        ... 19 more&lt;br/&gt;
Caused by: java.io.EOFException&lt;br/&gt;
        at java.io.DataInputStream.readUnsignedByte(DataInputStream.java:273)&lt;br/&gt;
        at org.tukaani.xz.rangecoder.RangeDecoderFromStream.normalize(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.rangecoder.RangeDecoder.decodeBit(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.lzma.LZMADecoder$LiteralDecoder$LiteralSubdecoder.decode(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.lzma.LZMADecoder$LiteralDecoder.decode(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.lzma.LZMADecoder.decode(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.LZMAInputStream.read(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.SimpleInputStream.read(Unknown Source)&lt;br/&gt;
        at org.apache.commons.compress.utils.BoundedInputStream.read(BoundedInputStream.java:62)&lt;br/&gt;
        at org.apache.commons.compress.utils.ChecksumVerifyingInputStream.read(ChecksumVerifyingInputStream.java:85)&lt;br/&gt;
        at org.apache.commons.compress.archivers.sevenz.SevenZFile.read(SevenZFile.java:900)&lt;br/&gt;
        at org.apache.commons.compress.archivers.sevenz.SevenZFile.read(SevenZFile.java:886)&lt;br/&gt;
        at org.apache.ant.compress.taskdefs.Un7z$1.read(Un7z.java:77)&lt;br/&gt;
        at org.apache.tools.ant.taskdefs.Expand.extractFile(Expand.java:343)&lt;br/&gt;
        at org.apache.ant.compress.taskdefs.Un7z.expandFile(Un7z.java:71)&lt;br/&gt;
        ... 32 more&lt;/p&gt;


&lt;p&gt;I noticed while raising this that there is a newer 1.8.1 version, which still seems to have the same issue, now in a different location.&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.maven.plugin.MojoExecutionException: An Ant BuildException has occured: Error while expanding Z:\download\wxMSW-3.0.0_vc120_ReleaseDLL.7z&lt;br/&gt;
java.io.EOFException&lt;br/&gt;
around Ant part ...&amp;lt;un7z dest=&quot;C:\Data/x86&quot; overwrite=&quot;false&quot; sr&lt;br/&gt;
c=&quot;Z:/download/wxMSW-3.0.0_vc120_ReleaseDLL.7z&quot;/&amp;gt;... @ 27:244 in C:\target\antrun\build-download.xml&lt;br/&gt;
        at org.apache.maven.plugin.antrun.AntRunMojo.execute(AntRunMojo.java:355)&lt;br/&gt;
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)&lt;br/&gt;
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)&lt;br/&gt;
        ... 17 more&lt;br/&gt;
Caused by: c:\target\antrun\build-download.xml:27: Error while expanding Z:\download\wxMSW-3.0.0_vc120_ReleaseDLL.7z&lt;br/&gt;
java.io.EOFException&lt;br/&gt;
        at org.apache.ant.compress.taskdefs.Un7z.expandFile(Un7z.java:92)&lt;br/&gt;
        at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)&lt;br/&gt;
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)&lt;br/&gt;
        at org.apache.tools.ant.Task.perform(Task.java:348)&lt;br/&gt;
        at org.apache.tools.ant.Target.execute(Target.java:390)&lt;br/&gt;
        at org.apache.tools.ant.Target.performTasks(Target.java:411)&lt;br/&gt;
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)&lt;br/&gt;
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)&lt;br/&gt;
        at org.apache.maven.plugin.antrun.AntRunMojo.execute(AntRunMojo.java:327)&lt;br/&gt;
        ... 19 more&lt;br/&gt;
Caused by: java.io.EOFException&lt;br/&gt;
        at java.io.DataInputStream.readUnsignedByte(DataInputStream.java:273)&lt;br/&gt;
        at org.tukaani.xz.rangecoder.RangeDecoderFromStream.normalize(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.rangecoder.RangeDecoder.decodeBit(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.lzma.LZMADecoder$LiteralDecoder$LiteralSubdecoder.decode(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.lzma.LZMADecoder$LiteralDecoder.decode(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.lzma.LZMADecoder.decode(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.LZMAInputStream.read(Unknown Source)&lt;br/&gt;
        at org.tukaani.xz.SimpleInputStream.read(Unknown Source)&lt;br/&gt;
        at org.apache.commons.compress.utils.BoundedInputStream.read(BoundedInputStream.java:62)&lt;br/&gt;
        at org.apache.commons.compress.utils.ChecksumVerifyingInputStream.read(ChecksumVerifyingInputStream.java:85)&lt;br/&gt;
        at org.apache.commons.compress.archivers.sevenz.SevenZFile.read(SevenZFile.java:906)&lt;br/&gt;
        at org.apache.commons.compress.archivers.sevenz.SevenZFile.read(SevenZFile.java:889)&lt;br/&gt;
        at org.apache.ant.compress.taskdefs.Un7z$1.read(Un7z.java:77)&lt;br/&gt;
        at org.apache.tools.ant.taskdefs.Expand.extractFile(Expand.java:343)&lt;br/&gt;
        at org.apache.ant.compress.taskdefs.Un7z.expandFile(Un7z.java:71)&lt;br/&gt;
        ... 32 more&lt;/p&gt;


&lt;p&gt;The last file appears to be intact but has an incorrect (current) timestamp.&lt;br/&gt;
If the file is already present then the exception doesn&apos;t get raised.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows8, Java6&lt;/p&gt;</environment>
        <key id="12733000">COMPRESS-286</key>
            <summary>Error while expanding 7z java.io.EOFException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gdomjan">Greg Domjan</reporter>
                        <labels>
                            <label>7z</label>
                            <label>XZ</label>
                            <label>ant</label>
                            <label>maven2</label>
                            <label>newbie</label>
                    </labels>
                <created>Sat, 9 Aug 2014 02:27:22 +0000</created>
                <updated>Mon, 25 Aug 2014 18:03:55 +0000</updated>
                            <resolved>Thu, 21 Aug 2014 18:40:43 +0000</resolved>
                                    <version>1.8</version>
                    <version>1.8.1</version>
                                    <fixVersion>1.9</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14092470" author="bodewig" created="Mon, 11 Aug 2014 05:50:16 +0000"  >&lt;p&gt;The stack trace looks like something deep into XZ, we may need some help from the XZ for Java project, I&apos;ll look into it.&lt;/p&gt;

&lt;p&gt;When you say &quot;The last file appears to be intact but has an incorrect (current) timestamp.&quot; what exactly do you mean with &quot;last file&quot; - the last entry of the &lt;tt&gt;Release&lt;/tt&gt; archive?&lt;/p&gt;</comment>
                            <comment id="14093370" author="gdomjan" created="Mon, 11 Aug 2014 21:49:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bodewig&quot; class=&quot;user-hover&quot; rel=&quot;bodewig&quot;&gt;Stefan Bodewig&lt;/a&gt; To clarify &quot;The last file appears to be intact&quot; - the last file extracted from the archive by commons-compress is a binary match with an extract using 7z but in the windows filesystem it has not had the date set to match the archive.&lt;br/&gt;
Both of the example archives have an EOF and the last file extracted is treated the same way.&lt;/p&gt;</comment>
                            <comment id="14093740" author="bodewig" created="Tue, 12 Aug 2014 05:00:10 +0000"  >&lt;p&gt;Thanks, Greg.&lt;/p&gt;

&lt;p&gt;I can reproduce the issue without the layers of Maven/Ant and the Compress Antlib in between.  I&apos;ll try to extract the raw LZMA stream in order to see whether the problem is Compress&apos; handling of the streams or XZ for Java&apos;s LZMA decompression.&lt;/p&gt;</comment>
                            <comment id="14103406" author="bodewig" created="Wed, 20 Aug 2014 05:28:47 +0000"  >&lt;p&gt;Thanks to Lasse Collin I now know where the problem is (for LZMA streams we need to pass the uncompressed size to the constructor).  We&apos;ll need to modify some internal APIs, but it at least we now know how to fix it.&lt;/p&gt;</comment>
                            <comment id="14105747" author="bodewig" created="Thu, 21 Aug 2014 18:40:43 +0000"  >&lt;p&gt;should be fixed with svn revision 1619505&lt;/p&gt;</comment>
                            <comment id="14109417" author="gdomjan" created="Mon, 25 Aug 2014 18:03:55 +0000"  >&lt;p&gt;Thanks Stefan.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 11 Aug 2014 05:50:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411028</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 30 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ypr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411021</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-284] Multi Thread Uncompress TGZ - CRC32 ERROR</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-284</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;We have to uncompress &quot;.tar.gz&quot;.&lt;br/&gt;
So we use an &quot;TarArchiveInputStream(GzipCompressorInputStream)&quot;.&lt;/p&gt;

&lt;p&gt;An archive extracted alone works perfectly.&lt;br/&gt;
But when we have to launch paralleles thread to extract many archives at the same time we get the same error for each thread :&lt;br/&gt;
java.lang.Exception: Error while extracting list of files from Archive : java.io.IOException: Gzip-compressed data is corrupt (CRC32 error)&lt;/p&gt;

&lt;p&gt;Sometimes we may have a success for only one archive among all errors.&lt;/p&gt;

&lt;p&gt;Is there any problems on the use of TarInputStream or GZIPInputStream in multi-thread ?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12720896">COMPRESS-284</key>
            <summary>Multi Thread Uncompress TGZ - CRC32 ERROR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Inspico">Inspico</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jun 2014 15:45:55 +0000</created>
                <updated>Sun, 31 Jan 2016 12:23:54 +0000</updated>
                            <resolved>Sun, 31 Jan 2016 12:23:54 +0000</resolved>
                                    <version>1.8.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14030606" author="bodewig" created="Fri, 13 Jun 2014 13:18:15 +0000"  >&lt;p&gt;GzipCompressorInputStream is the one throwing the exception and it is not thread-safe in the sense that you can&apos;t have to threads reading from the same GzipCompressorInputStream instance at the same time.  Reading from different instances shouldn&apos;t cause any problems, each instance has a CRC of its own.  Are you sharing the same Gzip input stream with multiple consumers?&lt;/p&gt;</comment>
                            <comment id="14032274" author="inspico" created="Mon, 16 Jun 2014 09:48:48 +0000"  >&lt;p&gt;We use a common code to uncompress archive given to our EAI.&lt;br/&gt;
Some filepolling search the archive and launch thread to extract files.&lt;br/&gt;
The archive is used by only one thread.&lt;/p&gt;

&lt;p&gt;If each archive have their own thread, it&apos;s the same JVM for all thread.&lt;/p&gt;

&lt;p&gt;Here is the code we use :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Vector&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; extractFilesFromTarGzData(InputStream archiveData, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; extractFolder, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileNamePattern) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception { 

		BufferedOutputStream bout = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
		TarArchiveInputStream tarIn = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
		Vector&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; entryVector = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Vector&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;();
		&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] btoRead = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
		
		
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
			&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sPatternRegex = &lt;span class=&quot;code-quote&quot;&gt;&quot;^(&quot;&lt;/span&gt;+fileNamePattern.replace(&lt;span class=&quot;code-quote&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;|&apos;&lt;/span&gt;)+&lt;span class=&quot;code-quote&quot;&gt;&quot;).*&quot;&lt;/span&gt;;
			tarIn = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GzipCompressorInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedInputStream(archiveData)));
			TarArchiveEntry tarEntry = tarIn.getNextTarEntry();

			&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (tarEntry != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
				&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; entryName = tarEntry.getName();
				entryName = entryName.substring(entryName.lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)+1);
				&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entryName.matches(sPatternRegex)) {
					btoRead = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[1024];
					bout = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedOutputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(extractFolder+entryName));
					&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; len = 0;

					&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;((len = tarIn.read(btoRead, 0, 1024)) != -1) {
						bout.write(btoRead,0,len);
					}
					
					bout.flush();
					bout.close();
					btoRead = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
					entryVector.add(entryName);
				}
				tarEntry = tarIn.getNextTarEntry();
			}
			tarIn.close();

			&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; entryVector;
		} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
			&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exception (&lt;span class=&quot;code-quote&quot;&gt;&quot;Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; extracting list of files from Archive : &quot;&lt;/span&gt; + e.toString());
		} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tarIn != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) tarIn.close();
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (bout != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) bout.close();
		}
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14032375" author="julien.ayme@gmail.com" created="Mon, 16 Jun 2014 12:09:01 +0000"  >&lt;p&gt;The problem will also occur if you are using the same InputStream archiveData on different threads.&lt;br/&gt;
Indeed, each thread will read bytes from the source, and the GzipCompressorInputStream will consider it as a corrupted stream (since it won&apos;t have all the data).&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Julien&lt;/p&gt;</comment>
                            <comment id="14032407" author="inspico" created="Mon, 16 Jun 2014 13:07:02 +0000"  >&lt;p&gt;We don&apos;t use the same InputStream archiveData on each threads since each archives will generate a diff&#233;rent thread and so a different FileInputStream.&lt;/p&gt;

&lt;p&gt;This function was working with an old lib. This one cannot extract big archives. &lt;br/&gt;
So we had change our lib to apache common compress. But we are faced to this new issue that we didn&apos;t had with the other lib.&lt;/p&gt;</comment>
                            <comment id="14033641" author="julien.ayme@gmail.com" created="Tue, 17 Jun 2014 10:37:19 +0000"  >&lt;p&gt;Could you provide a Test case which would reproduce this bug? This would help a lot !&lt;/p&gt;</comment>
                            <comment id="14092477" author="bodewig" created="Mon, 11 Aug 2014 05:57:05 +0000"  >&lt;p&gt;Is anybody else ever going to use the archiveData stream?  Does switching to &lt;tt&gt;java.util.zip.GZIPInputStream&lt;/tt&gt; rather than our version solve the issue?&lt;/p&gt;</comment>
                            <comment id="14116860" author="bodewig" created="Sun, 31 Aug 2014 19:22:40 +0000"  >&lt;p&gt;I have tried to come up with a test case that exhibits the same problem but don&apos;t seem to be able to.  Unless we find a way to reproduce the issue at all I don&apos;t see how to move on.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 Jun 2014 13:18:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wpfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399212</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-283] Zip file timestamps contain spurious millisecond values</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-283</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Running under Java 8, Commons Compress&apos; timestamps from zip files seem to include a random millisecond value.&lt;/p&gt;

&lt;p&gt;The workaround we&apos;re applying is to round down to the nearest multiple of 1000, a workaround which could move into Commons Compress itself.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 8u5&lt;/p&gt;</environment>
        <key id="12718771">COMPRESS-283</key>
            <summary>Zip file timestamps contain spurious millisecond values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="trejkaz">Trejkaz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jun 2014 04:35:06 +0000</created>
                <updated>Fri, 6 Jun 2014 07:38:38 +0000</updated>
                            <resolved>Fri, 6 Jun 2014 07:38:37 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14019644" author="bodewig" created="Fri, 6 Jun 2014 07:38:37 +0000"  >&lt;p&gt;I stumbled over this myself when I played with some Java8 pre-releases.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/zip/ZipUtil.java?r1=1454874&amp;amp;r2=1529645&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/zip/ZipUtil.java?r1=1454874&amp;amp;r2=1529645&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I never created a JIRA ticket for it and didn&apos;t even add a note to che changelog.  I&apos;ll add it to the know issues section.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Jun 2014 07:38:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wcdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>397088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-282] ZipArchiveInputStream returning entries with size -1.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-282</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Files archived with OSX Zip Archiver have ZipArchiveEntries with size -1 (ZipArchiveEntry.getSize) when reading using ZipArchiveInputStream. The same files are fine when reading using ZipFile class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12715110">COMPRESS-282</key>
            <summary>ZipArchiveInputStream returning entries with size -1.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="spawlak@atlassian.com">Sebastian Pawlak</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 May 2014 07:34:29 +0000</created>
                <updated>Sun, 25 May 2014 18:06:10 +0000</updated>
                            <resolved>Sun, 25 May 2014 18:06:10 +0000</resolved>
                                    <version>1.8.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14001460" author="spawlak@atlassian.com" created="Mon, 19 May 2014 07:35:29 +0000"  >&lt;p&gt;I attached an example file which entries that are not directories have size -1 returned. &lt;/p&gt;</comment>
                            <comment id="14001476" author="spawlak@atlassian.com" created="Mon, 19 May 2014 07:58:50 +0000"  >&lt;p&gt;I guess -1 is UKNOWN_SIZE since I&apos;m reading entries from a stream. But why on some files it works while on others it doesn&apos;t.&lt;/p&gt;</comment>
                            <comment id="14001479" author="bodewig" created="Mon, 19 May 2014 08:11:18 +0000"  >&lt;p&gt;I haven&apos;t looked at your example archive, yet, and likely won&apos;t find the time to do so before the weekend, but here is a possible explanation:&lt;/p&gt;

&lt;p&gt;ZIP archives store meta data in two different places, the local file header and the central directory.  The local file header (LFH) preceeds the actual file data, the central directory (CD) is at the end of the archive.  CD data is authoritative, when it conflicts with LFH data.  ZipFile reads the CD, ZipArchiveInputStream does not as it cannot do so for (non-seekable) streams without consuming the whole archive first.  From your description it sounds as if the LFH was filled with -1 and the real size was only stored in the CD.  If so the OS X ZIP Archiver&apos;s interpretation of the ZIP spec is likely different from Commons Compress&apos;s interpretation.&lt;/p&gt;

&lt;p&gt;No matter who is correct, we should try to adapt to the OSX Archiver&apos;s view, if possible.  For this we need to take a closer look at your archive.  BTW does your example archive contain anything sensitive or can we use it as a regression test archive inside Compress&apos; code base.&lt;/p&gt;</comment>
                            <comment id="14001482" author="spawlak@atlassian.com" created="Mon, 19 May 2014 08:15:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bodewig&quot; class=&quot;user-hover&quot; rel=&quot;bodewig&quot;&gt;Stefan Bodewig&lt;/a&gt; Thanks for a quick answer. Nope there is nothing sensitive there.&lt;/p&gt;</comment>
                            <comment id="14008388" author="bodewig" created="Sun, 25 May 2014 17:48:06 +0000"  >&lt;p&gt;I&apos;ll close this as it is not a bug but a known limitation, and also admit this limitation has never been spelt out explicitly so I&apos;ll fix that first.&lt;/p&gt;

&lt;p&gt;Your archive uses so called Data Descriptors, a feature that allows the size and CRC information to be stored after the entry.  Since ZipArchiveInputStream cannot use random access it won&apos;t know the size of the entry until after it has read the whole entry and reached the data desctriptor - i.e. until it is positioned at the next entry.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        FileInputStream fis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(args[0]);
        ZipArchiveInputStream zis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveInputStream(fis);
        ZipArchiveEntry entry = zis.getNextZipEntry();
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (entry != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.print(entry.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;: &quot;&lt;/span&gt; + entry.getSize() + &lt;span class=&quot;code-quote&quot;&gt;&quot; (before reading) &quot;&lt;/span&gt;);
            ZipArchiveEntry next = zis.getNextZipEntry();
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(entry.getSize() + &lt;span class=&quot;code-quote&quot;&gt;&quot; (after reading)&quot;&lt;/span&gt;);
            entry = next;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will show the correct size in the (after reading) case.  Another reason for the documentation&apos;s advice to prefer ZipFile over ZipArchiveInputStream whenever possible.&lt;/p&gt;</comment>
                            <comment id="14008390" author="bodewig" created="Sun, 25 May 2014 18:06:10 +0000"  >&lt;p&gt;Added to the zip documentation and &quot;known limitations&quot; pages and updated the site.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12645522" name="config-autostart-gnome-at-session.desktop.zip" size="3013" author="spawlak@atlassian.com" created="Mon, 19 May 2014 07:34:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 May 2014 08:11:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393396</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vqpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393558</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-279] TarArchiveInputStream silently finished when unexpected EOF occured</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-279</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I just found the following test case didn&apos;t raise an IOException as it used to be for a &lt;b&gt;tar trimmed on purpose&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;@Test&lt;br/&gt;
  public void testCorruptedBzip2() throws IOException {&lt;br/&gt;
    String archivePath = PathUtil.join(testdataDir, &quot;test.tar.bz2&quot;);&lt;br/&gt;
    TarArchiveInputStream input = null;&lt;br/&gt;
    input = new TarArchiveInputStream(new BZip2CompressorInputStream(&lt;br/&gt;
        GoogleFile.SYSTEM.newInputStream(archivePath), true));&lt;br/&gt;
    ArchiveEntry nextMatchedEntry = input.getNextEntry();&lt;br/&gt;
    while (nextMatchedEntry != null) &lt;/p&gt;
{
      logger.infofmt(&quot;Extracting %s&quot;, nextMatchedEntry.getName());
      String outputPath = PathUtil.join(&quot;/tmp/&quot;, nextMatchedEntry.getName());
      OutputStream out = new FileOutputStream(outputPath);
      ByteStreams.copy(input, out);
      out.close();
      nextMatchedEntry = input.getNextEntry();
    }
&lt;p&gt;  }&lt;/p&gt;</description>
                <environment>&lt;p&gt;Common Compress 1.7 + openJDK 1.7&lt;/p&gt;</environment>
        <key id="12709965">COMPRESS-279</key>
            <summary>TarArchiveInputStream silently finished when unexpected EOF occured</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="itspeter">PeterL in</reporter>
                        <labels>
                            <label>regression</label>
                            <label>tar</label>
                    </labels>
                <created>Wed, 23 Apr 2014 08:11:16 +0000</created>
                <updated>Wed, 7 May 2014 15:37:14 +0000</updated>
                            <resolved>Sun, 27 Apr 2014 09:16:34 +0000</resolved>
                                    <version>1.7</version>
                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13977980" author="itspeter" created="Wed, 23 Apr 2014 08:20:44 +0000"  >&lt;p&gt;The complete.tar (golden) will generate:&lt;br/&gt;
LICENSE.txt 11357&lt;br/&gt;
NOTICE.txt 433&lt;br/&gt;
README.txt 1632&lt;br/&gt;
RELEASE-NOTES.txt &lt;b&gt;2648&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The command tar xf trim.tar will generate:&lt;br/&gt;
LICENSE.txt 11357&lt;br/&gt;
NOTICE.txt 433&lt;br/&gt;
README.txt 1632&lt;br/&gt;
RELEASE-NOTES.txt &lt;b&gt;2560&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Using the code above will generate:&lt;br/&gt;
LICENSE.txt 11357&lt;br/&gt;
NOTICE.txt 433&lt;br/&gt;
README.txt 1632&lt;br/&gt;
RELEASE-NOTES.txt &lt;b&gt;2616&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="13979765" author="bodewig" created="Thu, 24 Apr 2014 14:14:52 +0000"  >&lt;p&gt;do you recall which version of Compress used to raise an exception?&lt;/p&gt;</comment>
                            <comment id="13979797" author="bodewig" created="Thu, 24 Apr 2014 14:48:48 +0000"  >&lt;p&gt;I ask when it ever worked because I confirm it doesn&apos;t throw an IOException now but wonder why it should ever have done so.&lt;/p&gt;</comment>
                            <comment id="13980530" author="itspeter" created="Fri, 25 Apr 2014 00:14:31 +0000"  >&lt;p&gt;Hi Stefan,&lt;/p&gt;

&lt;p&gt;I saw this behavior on v1.4. However, I think it is the correct behavior. If you try to use command line &apos;tar&apos; it will throw the following message:&lt;/p&gt;

&lt;p&gt;tar xvf trim.tar &lt;br/&gt;
LICENSE.txt&lt;br/&gt;
NOTICE.txt&lt;br/&gt;
README.txt&lt;br/&gt;
RELEASE-NOTES.txt&lt;br/&gt;
tar: Unexpected EOF in archive&lt;br/&gt;
tar: Unexpected EOF in archive&lt;br/&gt;
tar: Error is not recoverable: exiting now&lt;/p&gt;

&lt;p&gt;Don&apos;t you think the Java version should at least indicate something is wrong maybe with a flag to turn it silent or so..&lt;/p&gt;</comment>
                            <comment id="13980631" author="belugabehr" created="Fri, 25 Apr 2014 02:26:06 +0000"  >&lt;p&gt;Surprisingly simple (unless I&apos;m over-looking something) fix.  Patch included.&lt;/p&gt;

&lt;p&gt;Note that calling IOUtils#skip (Compress-277) on the stream will have the effect of skipping until EOL, then when it finishes by calling read, it will trigger this exception.&lt;/p&gt;

&lt;p&gt;There are no unit tests in the suite that trigger this though.&lt;/p&gt;</comment>
                            <comment id="13980853" author="bodewig" created="Fri, 25 Apr 2014 10:05:09 +0000"  >&lt;p&gt;I see how my &quot;should ever have done so&quot; can be misunderstood.  What I meant to say is: of course there should be an exception but I don&apos;t see why the code has ever thrown an exception.  I.e. I don&apos;t see where the regression has been introduced.&lt;/p&gt;

&lt;p&gt;I&apos;ll look into this over the weekend, I&apos;ve already added a unit test and it doesn&apos;t throw any exception in trunk - so the changed skip alone won&apos;t help.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;BELUGA BEHR&lt;/a&gt;: on first glance your patch looks good, thanks.&lt;/p&gt;</comment>
                            <comment id="13980933" author="belugabehr" created="Fri, 25 Apr 2014 12:06:34 +0000"  >&lt;p&gt;It was probably in the TarBuffer class that I lopped out.&lt;/p&gt;</comment>
                            <comment id="13982269" author="bodewig" created="Sun, 27 Apr 2014 09:16:34 +0000"  >&lt;p&gt;fixed with svn revision 1590361&lt;/p&gt;

&lt;p&gt;I used a smaller modification than the proposed patch but it&apos;s similar in spirit - thanks!&lt;/p&gt;</comment>
                            <comment id="13982318" author="belugabehr" created="Sun, 27 Apr 2014 13:38:30 +0000"  >&lt;p&gt;Even better.  Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12641860" name="TarArchiveInputStream.java.patch" size="877" author="belugabehr" created="Fri, 25 Apr 2014 02:23:53 +0000"/>
                            <attachment id="12641426" name="complete.tar" size="20480" author="itspeter" created="Wed, 23 Apr 2014 08:20:44 +0000"/>
                            <attachment id="12641428" name="trim.tar" size="19000" author="itspeter" created="Wed, 23 Apr 2014 08:20:44 +0000"/>
                            <attachment id="12641427" name="trim.tar.bz2" size="5712" author="itspeter" created="Wed, 23 Apr 2014 08:20:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Apr 2014 14:14:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388287</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uvxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-278] Incorrect handling of NUL username and group Tar.gz entries</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-278</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;With version 1.8 of commons-compress it&apos;s no longer possible to decompress  files from an archive if the archive contains entries having null (or being empty?) set as username and/or usergroup. With version 1.7 this still worked now I get this exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.io.IOException: Error detected parsing the header
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:249)
	at TestBed.AppTest.extractNoFileOwner(AppTest.java:30)
Caused by: java.lang.IllegalArgumentException: Invalid &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; 32 at offset 7 in &lt;span class=&quot;code-quote&quot;&gt;&apos;       {NUL}&apos;&lt;/span&gt; len=8
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:134)
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctalOrBinary(TarUtils.java:173)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:953)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:940)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:324)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:247)
	... 27 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This exception leads to my suspision that the regression was introduced with the fix for this ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-262&quot; title=&quot;TarArchiveInputStream fails to read entry with big user-id value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-262&quot;&gt;&lt;del&gt;COMPRESS-262&lt;/del&gt;&lt;/a&gt;, which has a nearly identical exception provided.&lt;/p&gt;

&lt;p&gt;Some test code you can run to verify it:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; TestBed;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.FileInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.FileNotFoundException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.archivers.tar.TarArchiveEntry;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.archivers.tar.TarArchiveInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

/**
 * Unit test &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; simple App.
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AppTest
{

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void extractNoFileOwner()
    {
        TarArchiveInputStream tarInputStream = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
        {
            tarInputStream =
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GzipCompressorInputStream( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/pknobel/redis-dist-2.8.3_1-linux.tar.gz&quot;&lt;/span&gt; ) ) ) );
            TarArchiveEntry entry;
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ( ( entry = tarInputStream.getNextTarEntry() ) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; )
            {
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println( entry.getName() );
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(entry.getUserName()+&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;+entry.getGroupName());
            }

        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; ( FileNotFoundException e )
        {
            e.printStackTrace();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; ( IOException e )
        {
            e.printStackTrace();
        }
    }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With 1.7 the TestCase outputed this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;redis-dist-2.8.3_1/bin/
/
redis-dist-2.8.3_1/bin/redis-server
jenkins/jenkins
redis-dist-2.8.3_1/bin/redis-cli
jenkins/jenkins
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With 1.8 it&apos;s failing once it reaches the null valued entry, which is the first. The archive is created using maven assembly plugin, and I tried the same with maven ant task. Both generating an archive with not set username and groups for at least some entries.&lt;/p&gt;

&lt;p&gt;You can download the archive from &lt;a href=&quot;http://heli0s.darktech.org/redis/2.8.3_1/redis-dist-2.8.3_1-linux.tar.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://heli0s.darktech.org/redis/2.8.3_1/redis-dist-2.8.3_1-linux.tar.gz&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you run a tar -tvzf on the file you see this report:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;drwxr-xr-x 0/0               0 2014-04-18 09:43 redis-dist-2.8.3_1-SNAPSHOT/bin/
-rwxr-xr-x pknobel/pknobel 3824588 2014-01-02 14:58 redis-dist-2.8.3_1-SNAPSHOT/bin/redis-cli
-rwxr-xr-x pknobel/pknobel 5217234 2014-01-02 14:58 redis-dist-2.8.3_1-SNAPSHOT/bin/redis-server
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The user 0/0 probably indicates that it&apos;s not set although it&apos;s the root user id. A correctly root user file would show up as root/root&lt;/p&gt;</description>
                <environment></environment>
        <key id="12709292">COMPRESS-278</key>
            <summary>Incorrect handling of NUL username and group Tar.gz entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pknobel">Philipp Knobel</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Fri, 18 Apr 2014 16:09:05 +0000</created>
                <updated>Sat, 28 Feb 2015 01:56:46 +0000</updated>
                            <resolved>Sat, 19 Apr 2014 06:01:10 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13974745" author="bodewig" created="Sat, 19 Apr 2014 06:01:10 +0000"  >&lt;p&gt;you are correct &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-262&quot; title=&quot;TarArchiveInputStream fails to read entry with big user-id value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-262&quot;&gt;&lt;del&gt;COMPRESS-262&lt;/del&gt;&lt;/a&gt; introduced the change.&lt;/p&gt;

&lt;p&gt;Should be fixed with svn revision 1588618&lt;/p&gt;</comment>
                            <comment id="14039700" author="bodewig" created="Sat, 21 Jun 2014 05:08:46 +0000"  >&lt;p&gt;see also &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=56641&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=56641&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12701520" name="uzhos.tar.gz" size="29" author="nvamelichev" created="Sat, 28 Feb 2015 01:56:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 19 Apr 2014 06:01:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1urtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-277] IOUtils.skip does not work as advertised</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-277</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I am trying to feed a TarInputStream from a CipherInputStream.&lt;br/&gt;
It does not work, because IOUtils.skip() does not adhere to the contract it claims in javadoc:&lt;/p&gt;

&lt;p&gt;&quot;     * &amp;lt;p&amp;gt;This method will only skip less than the requested number of&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bytes if the end of the input stream has been reached.&amp;lt;/p&amp;gt;&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However it does:&lt;/p&gt;

&lt;p&gt;            long skipped = input.skip(numToSkip);&lt;br/&gt;
            if (skipped == 0) &lt;/p&gt;
{
                break;
            }

&lt;p&gt;And the input stream javadoc says:&lt;/p&gt;

&lt;p&gt;&quot;     * This may result from any of a number of conditions; reaching end of file&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;before &amp;lt;code&amp;gt;n&amp;lt;/code&amp;gt; bytes have been skipped is only one possibility.&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In the case of CipherInputStream, it stops at the end of each byte buffer.&lt;/p&gt;

&lt;p&gt;If you check the IOUtils from colleagues at commons-io, they have considered this case in IOUtils.skip() where they use a read to skip through the stream.&lt;br/&gt;
An optimized version could combine trying to skip, then read then trying to skip again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12707918">COMPRESS-277</key>
            <summary>IOUtils.skip does not work as advertised</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fabianlange">Fabian Lange</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Apr 2014 11:07:56 +0000</created>
                <updated>Wed, 7 May 2014 15:37:14 +0000</updated>
                            <resolved>Sat, 12 Apr 2014 17:06:45 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13966452" author="ebourg" created="Fri, 11 Apr 2014 12:23:58 +0000"  >&lt;p&gt;Thank you Fabian, note that IOUtils is only used by commons-compress to avoid a dependency on commons-io. As such it&apos;s more an internal class than something supposed to be used by anyone. You should use the version from commons-io instead.&lt;/p&gt;</comment>
                            <comment id="13966453" author="fabianlange" created="Fri, 11 Apr 2014 12:27:17 +0000"  >&lt;p&gt;Hi Emmanuel,&lt;br/&gt;
I am using the commons-io version. But commons-compress is not, which makes all of its internal usage broken. &lt;br/&gt;
I could open individual bugs on all the streams, but I thought you would rather like to be pointed at the root cause of the problems&lt;/p&gt;

&lt;p&gt;Fabian&lt;/p&gt;</comment>
                            <comment id="13966458" author="ebourg" created="Fri, 11 Apr 2014 12:49:40 +0000"  >&lt;p&gt;We&apos;ll fix that, thank you for the report.&lt;/p&gt;</comment>
                            <comment id="13967585" author="bodewig" created="Sat, 12 Apr 2014 17:06:45 +0000"  >&lt;p&gt;should be fixed with svn revision 1586879&lt;/p&gt;</comment>
                            <comment id="13967590" author="fabianlange" created="Sat, 12 Apr 2014 17:26:01 +0000"  >&lt;p&gt;Hello Stefan,&lt;br/&gt;
I can confirm the fix is working for us.&lt;br/&gt;
From the code you could optimize it a bit more like commons-io IOUtils does. They only allocate the byte array once in a static field. You do not need to guard it against multithreaded access, because the contents is not used, thus may be garbage by concurrent writes.&lt;/p&gt;</comment>
                            <comment id="13967725" author="bodewig" created="Sun, 13 Apr 2014 04:07:34 +0000"  >&lt;p&gt;Yes, you are right.&lt;/p&gt;

&lt;p&gt;I didn&apos;t use a shared array because I didn&apos;t want to introduce any form of thread  control - I completely missed the fact that there is no harm in concurrent writes to the array.&lt;/p&gt;

&lt;p&gt;svn revision 1586919&lt;/p&gt;</comment>
                            <comment id="13980742" author="fabianlange" created="Fri, 25 Apr 2014 06:50:06 +0000"  >&lt;p&gt;Hi Beluga,&lt;/p&gt;

&lt;p&gt;You are not correct. Buffering the Cipher Input stream will not work. Because the BIS will also only invoke skip on the CIS. CIS will always only skip a maximum of 512 bytes. This would leave the BIS with the same problem: It is not  at the correct position.&lt;/p&gt;

&lt;p&gt;A client cannot &quot;skip an entry manually&quot;. How would we &quot;modify&quot; getNextTarEntry() to use IOUtils#skip?&lt;/p&gt;

&lt;p&gt;If compress would not use the now corrected implementation of skip, then the API methods like getNextTar() entry would be broken, which is why i opened the ticket in the first place.&lt;/p&gt;</comment>
                            <comment id="13980879" author="bodewig" created="Fri, 25 Apr 2014 11:01:00 +0000"  >&lt;p&gt;The problem is with things like consumeRemainderOfLastBlock or skipRecordPadding which really need to consume all remaining data, even with a BufferedReader this is not guaranteed to work as skip may return 0 all the time.&lt;/p&gt;</comment>
                            <comment id="13980950" author="fabianlange" created="Fri, 25 Apr 2014 12:28:48 +0000"  >&lt;p&gt;That doesn&apos;t make sense.&lt;br/&gt;
The semantics of getNextEntry are so that it will seek you to the next entry. &lt;br/&gt;
compare to JDK ZipInputStream:&lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Reads the next ZIP file entry and positions the stream at the&lt;/li&gt;
	&lt;li&gt;beginning of the entry data.&lt;/li&gt;
	&lt;li&gt;@return the next ZIP file entry, or null if there are no more entries&lt;/li&gt;
	&lt;li&gt;@exception ZipException if a ZIP file error has occurred&lt;/li&gt;
	&lt;li&gt;@exception IOException if an I/O error has occurred&lt;br/&gt;
     */&lt;br/&gt;
    public ZipEntry getNextEntry() throws IOException {&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Also, why should the user now need to care about seeking the next entry? it just doesnt make sense for me.&lt;/p&gt;


&lt;p&gt;The defined api and code are fine! Its just that it was buggy in the case skip did not skip as much as expected. That has been fixed, and I don&apos;t see a reason to hijack this Ticket to completely change the semantics of the API.&lt;/p&gt;</comment>
                            <comment id="13981769" author="belugabehr" created="Fri, 25 Apr 2014 23:34:29 +0000"  >&lt;p&gt;For anyone following this conversation, some of Fabian&apos;s comment may seem out of context because he was addressing my comments.  I redacted (deleted) them as they were based on erroneous information I was working off of.  My apologies.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 Apr 2014 12:23:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ujdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386506</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-276] NullPointerException in ZipArchiveOutputStream with invalid entries</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-276</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Writing raw data seems to cause problems in multiple ways, because an internal field is not set. Is this a wrong API usage?&lt;/p&gt;

&lt;p&gt;    java.io.ByteArrayOutputStream var0 = new java.io.ByteArrayOutputStream();&lt;br/&gt;
    org.apache.commons.compress.archivers.jar.JarArchiveOutputStream var1 = new org.apache.commons.compress.archivers.jar.JarArchiveOutputStream((java.io.OutputStream)var0);&lt;br/&gt;
    var1.write(25843);&lt;/p&gt;

&lt;p&gt;Other tests (see attachment) are very similar and cause the same problem. They can probably be ignored because the first test is the shortest one.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.9, Java 6, 7&lt;/p&gt;</environment>
        <key id="12707875">COMPRESS-276</key>
            <summary>NullPointerException in ZipArchiveOutputStream with invalid entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Apr 2014 05:03:17 +0000</created>
                <updated>Wed, 7 May 2014 15:37:14 +0000</updated>
                            <resolved>Sun, 13 Apr 2014 08:33:29 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13967503" author="bodewig" created="Sat, 12 Apr 2014 13:31:54 +0000"  >&lt;p&gt;We probably should do something about improved error messages here, but the quick answer is yes, the API is not supposed to be used that way.  Before using the write method you must add an entry.&lt;/p&gt;</comment>
                            <comment id="13967756" author="bodewig" created="Sun, 13 Apr 2014 08:33:29 +0000"  >&lt;p&gt;improved state verification for the archive streams with svn revision 1586935&lt;/p&gt;</comment>
                            <comment id="13967992" author="telcontar" created="Mon, 14 Apr 2014 00:11:29 +0000"  >&lt;p&gt;Thanks. I agree that IllegalStateException is the best way to show that the API was not used correctly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639736" name="Report1.java" size="5207" author="Telcontar" created="Fri, 11 Apr 2014 05:03:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 12 Apr 2014 13:31:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386198</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uj3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-275] Document the dependency on org.tukaani:xz</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-275</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I can compile the code but not execute it because a class seems to be missing. I guess the class is not part of the API but used internally.&lt;br/&gt;
When I use the constructor of org.apache.commons.compress.compressors.xz.XZCompressorOutputStream, then I need org/tukaani/xz/FilterOptions at run-time, which is not part of apache-compress.jar.&lt;/p&gt;

&lt;p&gt;It&apos;s at least not immediately obvious that other .jar files are required to use some of the functionality. Maybe this was intended to be included in the distribution?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.9 w/ Java 6, 7&lt;/p&gt;</environment>
        <key id="12707874">COMPRESS-275</key>
            <summary>Document the dependency on org.tukaani:xz</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Apr 2014 04:56:47 +0000</created>
                <updated>Fri, 9 May 2014 04:31:23 +0000</updated>
                            <resolved>Fri, 9 May 2014 04:31:23 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13966370" author="ebourg" created="Fri, 11 Apr 2014 09:40:57 +0000"  >&lt;p&gt;org.tukaani:xz is a dependency of commons-compress, importing the transitive dependencies of the libraries you use is generally a good idea &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Dependency managers like Maven and Ivy do it for you automatically.&lt;/p&gt;

&lt;p&gt;Note that in the next release this dependency will become optional, so you&apos;ll have to import it explicitly if you use the XZ functionalities. We have to document that properly.&lt;/p&gt;</comment>
                            <comment id="13993390" author="bodewig" created="Fri, 9 May 2014 04:31:23 +0000"  >&lt;p&gt;The dependency is stated in multiple places on the website.&lt;/p&gt;

&lt;p&gt;Essentially XZ for Java provides algorithms necessary for LZMA(2), XZ and 7z.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639735" name="Report2.java" size="655" author="Telcontar" created="Fri, 11 Apr 2014 04:57:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 Apr 2014 09:40:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386197</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uj3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386462</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-274] NullPointerException in ChangeSet.addDeletion when using bogus data</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-274</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When adding some bogus data and then trying to call deleteDir with a bogus name, a NullPointerException results. See attached test.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.9 with Java 6, 7&lt;/p&gt;</environment>
        <key id="12707873">COMPRESS-274</key>
            <summary>NullPointerException in ChangeSet.addDeletion when using bogus data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Apr 2014 04:53:48 +0000</created>
                <updated>Wed, 7 May 2014 15:37:14 +0000</updated>
                            <resolved>Sun, 13 Apr 2014 09:00:23 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Changesets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13967761" author="bodewig" created="Sun, 13 Apr 2014 09:00:23 +0000"  >&lt;p&gt;fixed with svn revision 1586941&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639734" name="Report3.java" size="847" author="Telcontar" created="Fri, 11 Apr 2014 04:54:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 13 Apr 2014 09:00:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386196</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uj3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386461</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-273] NullPointerException when creation fields/entries from scratch</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-273</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The API has public default constructors for many data types. However, when these 0-argument constructors are used, certain internal references are null, resulting in a NullPointerException soon after.&lt;/p&gt;

&lt;p&gt;This also applies to some 1-argument constructors where two references should be set before get... is used later.&lt;/p&gt;

&lt;p&gt;Either (1) these constructors should be non-public, (2) there should be documentation that certain fields need to be set later for an instance to be usable. In the latter case, there must be public set methods for the missing data.&lt;/p&gt;

&lt;p&gt;The attachment contains a number of similar test cases that show the same issue in a couple of classes.&lt;/p&gt;

&lt;p&gt;An example:&lt;br/&gt;
    org.apache.commons.compress.archivers.zip.UnicodeCommentExtraField var0 = new org.apache.commons.compress.archivers.zip.UnicodeCommentExtraField();&lt;br/&gt;
    org.apache.commons.compress.archivers.zip.ZipShort var1 = var0.getLocalFileDataLength();&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.9, Java 6 and 7&lt;/p&gt;</environment>
        <key id="12707870">COMPRESS-273</key>
            <summary>NullPointerException when creation fields/entries from scratch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Apr 2014 04:13:32 +0000</created>
                <updated>Wed, 7 May 2014 15:37:14 +0000</updated>
                            <resolved>Fri, 18 Apr 2014 14:14:16 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13967763" author="bodewig" created="Sun, 13 Apr 2014 09:09:52 +0000"  >&lt;p&gt;for the implementations of ZipExtraField the no-arg constructors are an implementation detail - they are supposed to be used together with the parseFrom* methods.&lt;/p&gt;

&lt;p&gt;I&apos;ll look into improving the state verification for the classes you are hitting with your tests.  In all cases the API isn&apos;t used as it is supposed to be, so part of the fix will be adapting Javadocs.&lt;/p&gt;</comment>
                            <comment id="13974105" author="bodewig" created="Fri, 18 Apr 2014 14:14:16 +0000"  >&lt;p&gt;added a few null guards in svn revision 1588476&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639732" name="RandoopTest.java" size="2970" author="Telcontar" created="Fri, 11 Apr 2014 04:14:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 13 Apr 2014 09:09:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386193</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uj2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386458</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-272] CompressorStreamFactory fails to autodetect files using Unix compress (.Z files)</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-272</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I use the factory classes quite extensively to guess the correct implementation of a file that needs to be unpacked.  The current doc does list that for lzma and 7zip files, the auto detect will not work.  I have worked around this by looking at the file extension, and hope that its correct.&lt;br/&gt;
For .Z files, I can only uncompress the file if I explicitly tell the factory that its using .Z compression, the auto detect never works.  I&apos;m using 1.7, but I dont think its fixed in 1.8 either (after looking at the bug fix list).&lt;/p&gt;

&lt;p&gt;Either its a bug in the doc, or in the auto detect of the compressor factory.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12707816">COMPRESS-272</key>
            <summary>CompressorStreamFactory fails to autodetect files using Unix compress (.Z files)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="thebliz">Paul Blizniak</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Apr 2014 22:07:05 +0000</created>
                <updated>Mon, 30 Mar 2015 14:59:52 +0000</updated>
                            <resolved>Sat, 12 Apr 2014 16:35:41 +0000</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13967500" author="bodewig" created="Sat, 12 Apr 2014 13:27:55 +0000"  >&lt;p&gt;For 1.7 and 1.8 this is a documentation bug that I intend to rectify soon, for 1.9 we&apos;ll implement auto-detection.&lt;/p&gt;</comment>
                            <comment id="13967569" author="bodewig" created="Sat, 12 Apr 2014 16:35:41 +0000"  >&lt;p&gt;svn trunk now auto-detects .Z and the site is updated to document .Z could not be detected prior to 1.9.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12786744">COMPRESS-313</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 12 Apr 2014 13:27:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uiqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-270] TarArchiveInputStream fails to read PAX header from InputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-270</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;We have a scenario with a &quot;slow&quot; &lt;tt&gt;InputStream&lt;/tt&gt; and are facing &lt;tt&gt;IOExceptions&lt;/tt&gt; with &lt;tt&gt;TarArchiveEntry#getNextTarEntry()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;If the &lt;tt&gt;InputStream&lt;/tt&gt; does not deliver fast enough, &lt;tt&gt;TarArchiveEntry#parsePaxHeaders(InputStream i)&lt;/tt&gt; fails at this location:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;TarArchiveInputStream.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Get &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; of entry
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[len - read];
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; got = i.read(&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (got != len - read){
	&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to read &quot;&lt;/span&gt;
		+ &lt;span class=&quot;code-quote&quot;&gt;&quot;Paxheader. Expected &quot;&lt;/span&gt;
		+ (len - read)
		+ &lt;span class=&quot;code-quote&quot;&gt;&quot; bytes, read &quot;&lt;/span&gt;
		+ got);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We would suggest to change the code to something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;TarArchiveInputStream.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Get &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; of entry
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[len - read];
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; got = 0;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;((ch = i.read()) != -1) {
	&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;[got] = (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;) ch;
	got++;
	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(got == len - read) {
		&lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
	}
}
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (got != len - read){
	&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to read &quot;&lt;/span&gt;
		+ &lt;span class=&quot;code-quote&quot;&gt;&quot;Paxheader. Expected &quot;&lt;/span&gt;
		+ (len - read)
		+ &lt;span class=&quot;code-quote&quot;&gt;&quot; bytes, read &quot;&lt;/span&gt;
		+ got);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This would make sure, that it gets all bytes of the PAX header value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12703935">COMPRESS-270</key>
            <summary>TarArchiveInputStream fails to read PAX header from InputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="paburk">Patrik Burkhalter</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Thu, 27 Mar 2014 09:49:24 +0000</created>
                <updated>Wed, 7 May 2014 15:37:13 +0000</updated>
                            <resolved>Fri, 28 Mar 2014 16:29:53 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13950378" author="bodewig" created="Fri, 28 Mar 2014 05:05:34 +0000"  >&lt;p&gt;there is IOUtils#readFully and I had hoped I had caught all places where we expected read to succeed by now.  Obviously not.  Sorry.&lt;/p&gt;

&lt;p&gt;This case is fixed with svn revision 1582594 but I&apos;ll leave this issue open as a reminder to scan through the code base once again.&lt;/p&gt;</comment>
                            <comment id="13950979" author="bodewig" created="Fri, 28 Mar 2014 16:29:53 +0000"  >&lt;p&gt;found two more cases inside the snappy and the ar package&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Mar 2014 05:05:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382269</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tuxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382540</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-268] Buffer not read first time for entries with STORED compression method</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-268</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Trying to extract a ZIP archive that contains entries with &lt;tt&gt;STORED&lt;/tt&gt; compression method, the &lt;tt&gt;ZipArchiveInputStream.readStored(byte[], int, int)&lt;/tt&gt; method is called. At this point, because the &lt;tt&gt;buf&lt;/tt&gt; array has not had a chance to be populated with values from the underlying input stream and because there&apos;s no condition to detect this, the resulting content is prefixed with the buffer&apos;s length (512) of 0 bytes.&lt;/p&gt;

&lt;p&gt;I&apos;ve found that chancing:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;if (buf.position() &amp;gt;= buf.limit()) {&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;with&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;if (buf.position() &amp;gt;= buf.limit() || current.bytesReadFromStream == 0) {&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;solves the issue.&lt;/p&gt;</description>
                <environment>&lt;ul&gt;
	&lt;li&gt;Fedora 20 x64&lt;/li&gt;
	&lt;li&gt;Java 1.7.0_51 x64&lt;/li&gt;
	&lt;li&gt;archive created with Nautilus&apos; context menu&lt;/li&gt;
&lt;/ul&gt;
</environment>
        <key id="12698041">COMPRESS-268</key>
            <summary>Buffer not read first time for entries with STORED compression method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="radu.almasan">Radu Alm&#259;&#537;an</reporter>
                        <labels>
                            <label>archive</label>
                            <label>zip</label>
                    </labels>
                <created>Fri, 28 Feb 2014 22:28:39 +0000</created>
                <updated>Sat, 1 Mar 2014 05:59:13 +0000</updated>
                            <resolved>Sat, 1 Mar 2014 05:59:13 +0000</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13916506" author="radu.almasan" created="Fri, 28 Feb 2014 22:31:16 +0000"  >&lt;p&gt;Attached the ZIP file created with Nautilus&apos; context menu, containing just one entry that&apos;s detected with the STORED compression method.&lt;/p&gt;</comment>
                            <comment id="13916951" author="bodewig" created="Sat, 1 Mar 2014 05:59:13 +0000"  >&lt;p&gt;fixed in svn, 1.8 will be released soonish.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12696139">COMPRESS-264</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12631859" name="test.zip" size="206" author="radu.almasan" created="Fri, 28 Feb 2014 22:31:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 1 Mar 2014 05:59:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376515</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1svpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376810</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-267] ArchiveStreamFactory throws &quot;No Archiver found for the stream signature&quot; on 7z files</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-267</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Apache Tika makes use of ArchiveStreamFactory to handle a wide range of archive formats (Zip, AR, CPIO, Tar etc)&lt;/p&gt;

&lt;p&gt;We&apos;ve just upgraded to Commons Compress 1.7, and tried to make use of the new 7z support to add in 7z handling too. However, when you try to call:&lt;/p&gt;

&lt;p&gt;            ArchiveStreamFactory factory = new ArchiveStreamFactory();&lt;br/&gt;
            ArchiveInputStream ais = factory.createArchiveInputStream(stream);&lt;/p&gt;

&lt;p&gt;With a 7z file it fails with:&lt;/p&gt;

&lt;p&gt;    new ArchiveException(&quot;No Archiver found for the stream signature&quot;);&lt;/p&gt;</description>
                <environment></environment>
        <key id="12696732">COMPRESS-267</key>
            <summary>ArchiveStreamFactory throws &quot;No Archiver found for the stream signature&quot; on 7z files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gagravarr">Nick Burch</reporter>
                        <labels>
                    </labels>
                <created>Sat, 22 Feb 2014 15:52:38 +0000</created>
                <updated>Sat, 22 Feb 2014 19:19:49 +0000</updated>
                            <resolved>Sat, 22 Feb 2014 19:19:49 +0000</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13909423" author="bodewig" created="Sat, 22 Feb 2014 16:18:14 +0000"  >&lt;p&gt;The reason is we don&apos;t provide any ArchiveInputStream for 7z, it can only work on Files (it needs RandomAccessFile under the covers).&lt;/p&gt;

&lt;p&gt;In the absence of a streaming implementation I don&apos;t see any way to resolve this.&lt;/p&gt;

&lt;p&gt;The current sketch for Compress2 would cover such a case but is still a long way to go.&lt;/p&gt;</comment>
                            <comment id="13909437" author="gagravarr" created="Sat, 22 Feb 2014 16:56:15 +0000"  >&lt;p&gt;Ah, pesky. Any chance of a specific exception for this, which we could catch in Tika, eg NoStreamingSupportException(&quot;7z&quot;) ?&lt;/p&gt;</comment>
                            <comment id="13909464" author="bodewig" created="Sat, 22 Feb 2014 18:33:47 +0000"  >&lt;p&gt;I&apos;m not sure I follow you here.&lt;/p&gt;

&lt;p&gt;You&apos;d catch the NoStreamingSupportException and then use SevenZFile because you know it is a 7z archive?  If so you&apos;d be writing special case code for 7z anyway in which case I think it would be cleaner to add a static matches method to SevenZFile and make Tika check that method in a case where ArchiveStreamFactory doesn&apos;t recognize the format.&lt;/p&gt;</comment>
                            <comment id="13909471" author="gagravarr" created="Sat, 22 Feb 2014 18:41:41 +0000"  >&lt;p&gt;I think for general users, it&apos;d be good to get a more detailed exception that lets them know that Compress knows what it is and can&apos;t help, as opposed to Compress not knowing what it is&lt;/p&gt;

&lt;p&gt;For Tika, we can either catch a 7z specific exception and call the File, or use our own magic string, or catch a general exception + check a helper method, any could work!&lt;/p&gt;</comment>
                            <comment id="13909477" author="bodewig" created="Sat, 22 Feb 2014 18:46:46 +0000"  >&lt;p&gt;Good point.&lt;/p&gt;</comment>
                            <comment id="13909485" author="bodewig" created="Sat, 22 Feb 2014 19:19:49 +0000"  >&lt;p&gt;implemented with svn revision 1570885&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 22 Feb 2014 16:18:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375208</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sno7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-265] PAX headers with &quot;strange&quot; names can not be written</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-265</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;as noted by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paburk&quot; class=&quot;user-hover&quot; rel=&quot;paburk&quot;&gt;Patrik Burkhalter&lt;/a&gt; in &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-203&quot; title=&quot;Long directory names can not be stored in a tar archive because of error when writing PAX headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-203&quot;&gt;&lt;del&gt;COMPRESS-203&lt;/del&gt;&lt;/a&gt; if a non-ASCII character is &quot;7-bit-cleaned&quot; to &apos;\&apos; this may lead to a file name for the PAX header that looks like a directory name to TarArchiveEntry - which leads to a bug very similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-203&quot; title=&quot;Long directory names can not be stored in a tar archive because of error when writing PAX headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-203&quot;&gt;&lt;del&gt;COMPRESS-203&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12696548">COMPRESS-265</key>
            <summary>PAX headers with &quot;strange&quot; names can not be written</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Fri, 21 Feb 2014 14:27:20 +0000</created>
                <updated>Sat, 22 Feb 2014 07:05:06 +0000</updated>
                            <resolved>Sat, 22 Feb 2014 07:05:05 +0000</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13909278" author="bodewig" created="Sat, 22 Feb 2014 07:05:06 +0000"  >&lt;p&gt;fixed with svn revision 1570800&lt;/p&gt;

&lt;p&gt;The bug only ever showed on Windows as the \ =&amp;gt; / translation only happens there.  Actually it didn&apos;t take any non-ASCII characters or very long names, a backslash in the wrong place was enough.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1smjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375323</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-264] ZIP reads correctly with commons-compress 1.6, gives NUL bytes in 1.7</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-264</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When running the code below, commons-compress 1.6 writes:&lt;/p&gt;

&lt;p&gt; Content of test.txt:&lt;br/&gt;
 data&lt;/p&gt;

&lt;p&gt;By comparison, commons-compress 1.7 writes&lt;/p&gt;

&lt;p&gt; Content of test.txt:&lt;br/&gt;
 &lt;sup&gt;@&lt;/sup&gt;@&lt;sup&gt;@&lt;/sup&gt;@^@&lt;/p&gt;

&lt;p&gt;package com.example.jrn;&lt;br/&gt;
import org.apache.commons.compress.archivers.zip.ZipArchiveEntry;&lt;br/&gt;
import org.apache.commons.compress.archivers.zip.ZipArchiveInputStream;&lt;br/&gt;
import java.io.ByteArrayInputStream;&lt;br/&gt;
import java.io.IOException;&lt;br/&gt;
import java.lang.System;&lt;br/&gt;
/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Hello world!&lt;br/&gt;
 *&lt;br/&gt;
 */&lt;br/&gt;
public class App {&lt;br/&gt;
  public static void main(String[] args) {&lt;br/&gt;
    byte[] zip = 
{
       (byte)0x50, (byte)0x4b, (byte)0x03, (byte)0x04, (byte)0x0a, (byte)0x00,
       (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x03, (byte)0x7b,
       (byte)0xd1, (byte)0x42, (byte)0x82, (byte)0xc5, (byte)0xc1, (byte)0xe6,
       (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x05, (byte)0x00,
       (byte)0x00, (byte)0x00, (byte)0x08, (byte)0x00, (byte)0x1c, (byte)0x00,
       (byte)0x74, (byte)0x65, (byte)0x73, (byte)0x74, (byte)0x2e, (byte)0x74,
       (byte)0x78, (byte)0x74, (byte)0x55, (byte)0x54, (byte)0x09, (byte)0x00,
       (byte)0x03, (byte)0x56, (byte)0x62, (byte)0xbf, (byte)0x51, (byte)0x2a,
       (byte)0x63, (byte)0xbf, (byte)0x51, (byte)0x75, (byte)0x78, (byte)0x0b,
       (byte)0x00, (byte)0x01, (byte)0x04, (byte)0x01, (byte)0xff, (byte)0x01,
       (byte)0x00, (byte)0x04, (byte)0x88, (byte)0x13, (byte)0x00, (byte)0x00,
       (byte)0x64, (byte)0x61, (byte)0x74, (byte)0x61, (byte)0x0a, (byte)0x50,
       (byte)0x4b, (byte)0x01, (byte)0x02, (byte)0x1e, (byte)0x03, (byte)0x0a,
       (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x03,
       (byte)0x7b, (byte)0xd1, (byte)0x42, (byte)0x82, (byte)0xc5, (byte)0xc1,
       (byte)0xe6, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x05,
       (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x08, (byte)0x00, (byte)0x18,
       (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x01,
       (byte)0x00, (byte)0x00, (byte)0x00, (byte)0xa0, (byte)0x81, (byte)0x00,
       (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x74, (byte)0x65, (byte)0x73,
       (byte)0x74, (byte)0x2e, (byte)0x74, (byte)0x78, (byte)0x74, (byte)0x55,
       (byte)0x54, (byte)0x05, (byte)0x00, (byte)0x03, (byte)0x56, (byte)0x62,
       (byte)0xbf, (byte)0x51, (byte)0x75, (byte)0x78, (byte)0x0b, (byte)0x00,
       (byte)0x01, (byte)0x04, (byte)0x01, (byte)0xff, (byte)0x01, (byte)0x00,
       (byte)0x04, (byte)0x88, (byte)0x13, (byte)0x00, (byte)0x00, (byte)0x50,
       (byte)0x4b, (byte)0x05, (byte)0x06, (byte)0x00, (byte)0x00, (byte)0x00,
       (byte)0x00, (byte)0x01, (byte)0x00, (byte)0x01, (byte)0x00, (byte)0x4e,
       (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x47, (byte)0x00, (byte)0x00,
       (byte)0x00, (byte)0x00, (byte)00
    }
&lt;p&gt;;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    ByteArrayInputStream bin = new ByteArrayInputStream(zip);&lt;br/&gt;
    try {&lt;br/&gt;
      ZipArchiveInputStream in = new ZipArchiveInputStream(bin);&lt;br/&gt;
      try {&lt;br/&gt;
        while (true) {&lt;br/&gt;
          ZipArchiveEntry entry = in.getNextZipEntry();&lt;br/&gt;
          if (entry == null) &lt;/p&gt;
{
            break;
          }
&lt;p&gt;          byte[] buf = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;(int) entry.getSize()&amp;#93;&lt;/span&gt;;&lt;br/&gt;
          in.read(buf);&lt;br/&gt;
          System.out.println(&quot;Content of &quot; + entry.getName() + &quot;:&quot;);&lt;br/&gt;
          System.out.write(buf);&lt;br/&gt;
        }&lt;br/&gt;
      } finally &lt;/p&gt;
{
        in.close();
      }
&lt;p&gt;    } catch (IOException e) &lt;/p&gt;
{
      System.err.println(&quot;IOException: &quot; + e);
    }
&lt;p&gt;  }&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu precise&lt;/p&gt;</environment>
        <key id="12696139">COMPRESS-264</key>
            <summary>ZIP reads correctly with commons-compress 1.6, gives NUL bytes in 1.7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jrn">Jonathan Nieder</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Feb 2014 01:57:16 +0000</created>
                <updated>Sat, 1 Mar 2014 05:59:13 +0000</updated>
                            <resolved>Fri, 21 Feb 2014 14:22:56 +0000</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13906759" author="bodewig" created="Thu, 20 Feb 2014 08:39:30 +0000"  >&lt;p&gt;I haven&apos;t tested whether there actually is a bug - I will do so.&lt;/p&gt;

&lt;p&gt;But from looking at your code you expect &lt;tt&gt;in.read()&lt;/tt&gt; to read the entire content without checking the return code (how many bytes have been read).  If you change the code to repeat reading until read returns -1 - for example using &lt;tt&gt;IOUtils.readFully&lt;/tt&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; - does it then still not read the full contents of your entry?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;  &lt;a href=&quot;http://commons.apache.org/proper/commons-compress/javadocs/api-1.7/org/apache/commons/compress/utils/IOUtils.html#readFully%28java.io.InputStream,%20byte[]%29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-compress/javadocs/api-1.7/org/apache/commons/compress/utils/IOUtils.html#readFully%28java.io.InputStream,%20byte[]%29&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13907270" author="jrn" created="Thu, 20 Feb 2014 18:19:15 +0000"  >&lt;p&gt;The reading actually reads 5 bytes &amp;#8212; in 1.6, those five bytes are &quot;data\n&quot;, while in 1.7 they are NUL bytes. This happens whether I call read() once or in a loop until read returns -1.&lt;/p&gt;</comment>
                            <comment id="13907978" author="bodewig" created="Fri, 21 Feb 2014 05:34:43 +0000"  >&lt;p&gt;I can confirm I get the same error myself.&lt;/p&gt;</comment>
                            <comment id="13908297" author="bodewig" created="Fri, 21 Feb 2014 13:32:20 +0000"  >&lt;p&gt;I&apos;ve turned your example into a unit test with svn revision 1570567 &lt;/p&gt;

&lt;p&gt;As a workaround it might help you to know that ZipFile works as expected in 1.7.&lt;/p&gt;</comment>
                            <comment id="13908353" author="bodewig" created="Fri, 21 Feb 2014 14:22:56 +0000"  >&lt;p&gt;fixed with svn revision 1570582&lt;/p&gt;

&lt;p&gt;The exact error condition:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;you are reading the very first entry of the archive&lt;/li&gt;
	&lt;li&gt;the entry uses the STORED method&lt;/li&gt;
	&lt;li&gt;the entry knows its size&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;any subsequent entry will work&lt;/p&gt;</comment>
                            <comment id="13908551" author="jrn" created="Fri, 21 Feb 2014 17:29:12 +0000"  >&lt;p&gt;Thanks! Confirmed - the fix works well.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12698041">COMPRESS-268</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Feb 2014 08:39:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>374616</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sk1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>374916</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-262] TarArchiveInputStream fails to read entry with big user-id value</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-262</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Caused by: java.lang.IllegalArgumentException: Invalid byte 52 at offset 7 in &apos;62410554&apos; len=8&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:130)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctalOrBinary(TarUtils.java:175)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:953)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:940)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:324)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:247)&lt;br/&gt;
	... 5 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12694208">COMPRESS-262</key>
            <summary>TarArchiveInputStream fails to read entry with big user-id value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="liwentong@cn-acg.com">goodluck</reporter>
                        <labels>
                            <label>extractor</label>
                            <label>tar</label>
                    </labels>
                <created>Mon, 10 Feb 2014 06:32:58 +0000</created>
                <updated>Fri, 21 Feb 2014 05:21:15 +0000</updated>
                            <resolved>Fri, 21 Feb 2014 05:21:15 +0000</resolved>
                                    <version>1.4.1</version>
                    <version>1.5</version>
                    <version>1.6</version>
                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13896298" author="bodewig" created="Mon, 10 Feb 2014 07:53:32 +0000"  >&lt;p&gt;I first thought this might be a duplicate of one of the many fixes we&apos;ve made after 1.4.1 but I still get the same exception with current trunk - will update the affected versions accordingly.&lt;/p&gt;

&lt;p&gt;Does the archive contain anything confidential or can we add it to our test suite?&lt;/p&gt;</comment>
                            <comment id="13896309" author="liwentong@cn-acg.com" created="Mon, 10 Feb 2014 08:24:34 +0000"  >&lt;p&gt;Test again. I got the same exception in 1.5 1.6 and 1.7 build.&lt;/p&gt;</comment>
                            <comment id="13896323" author="bodewig" created="Mon, 10 Feb 2014 08:44:40 +0000"  >&lt;p&gt;I tested, that&apos;s why I added the versions to &quot;affects version&quot;.  We totally agree, the problem still exists.&lt;/p&gt;</comment>
                            <comment id="13896467" author="bodewig" created="Mon, 10 Feb 2014 13:07:00 +0000"  >&lt;p&gt;In the example tar that you&apos;ve now removed the user-id of the second entry contains &quot;62410554&quot; - this is supposed a NULL-terminated string representing an octal number &amp;lt;= 07777777 - obviously your example is not NULL-terminated.  Can you tell us which tar implementation has created the archive?&lt;/p&gt;

&lt;p&gt;GNU tar is willing to read the archive so this likely is yet another tar dialect for big numbers that we need to support in some way.&lt;/p&gt;</comment>
                            <comment id="13907973" author="bodewig" created="Fri, 21 Feb 2014 05:21:15 +0000"  >&lt;p&gt;fixed with svn revision 1570452&lt;/p&gt;

&lt;p&gt;I&apos;d still love to know which implementation of tar you have used to create the archive so we can expand the docs.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Feb 2014 07:53:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s8dj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373021</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-259] CompressorStreamFactory.createCompressorInputStream with explicit compression does not honour decompressConcatenated</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-259</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When using CompressorStreamFactory.createCompressorInputStream, the decompressConcatenated property is only used when auto-detecting the compressor format for an input stream. The method with explicit compressor specification ignores the decompressConcatenated property, though.&lt;/p&gt;

&lt;p&gt;The fix is easy: pass the decompressConcatenated property as argument to all constructors.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691043">COMPRESS-259</key>
            <summary>CompressorStreamFactory.createCompressorInputStream with explicit compression does not honour decompressConcatenated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wastl">Sebastian Schaffert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jan 2014 14:29:37 +0000</created>
                <updated>Fri, 24 Jan 2014 14:41:38 +0000</updated>
                            <resolved>Fri, 24 Jan 2014 14:41:38 +0000</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13881010" author="bodewig" created="Fri, 24 Jan 2014 14:41:38 +0000"  >&lt;p&gt;ouch, sorry.&lt;/p&gt;

&lt;p&gt;svn revision 1561024&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Jan 2014 14:41:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rqfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-256] 7z: 16 MB dictionary is too big</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-256</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I created an archiv with 7zip 9.20 containing the compress-1.7-src directory. Also tried it with 1.6 version and directory. I &lt;/p&gt;

&lt;p&gt;downloaded the zip file and reziped it as 7z. The standard setting where used:&lt;br/&gt;
Compression level: normal&lt;br/&gt;
Compression method: lzma2&lt;br/&gt;
Dictionary size: 16 MB&lt;br/&gt;
Word size: 32&lt;br/&gt;
Solid Block size: 2 GB&lt;/p&gt;

&lt;p&gt;I get an exception if I try to open the file with the simple line of code:&lt;br/&gt;
SevenZFile input = new SevenZFile(new File(arcName));&lt;/p&gt;

&lt;p&gt;Maybe it is a bug in the tukaani library, but I do not know how to report it to them.&lt;br/&gt;
The exception thrown:&lt;/p&gt;

&lt;p&gt;org.tukaani.xz.UnsupportedOptionsException: LZMA dictionary is too big for this implementation&lt;br/&gt;
	at org.tukaani.xz.LZMAInputStream.initialize(Unknown Source)&lt;br/&gt;
	at org.tukaani.xz.LZMAInputStream.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.commons.compress.archivers.sevenz.Coders$LZMADecoder.decode(Coders.java:117)&lt;br/&gt;
	at org.apache.commons.compress.archivers.sevenz.Coders.addDecoder(Coders.java:48)&lt;br/&gt;
	at org.apache.commons.compress.archivers.sevenz.SevenZFile.readEncodedHeader(SevenZFile.java:278)&lt;br/&gt;
	at org.apache.commons.compress.archivers.sevenz.SevenZFile.readHeaders(SevenZFile.java:190)&lt;br/&gt;
	at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:94)&lt;br/&gt;
	at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:116)&lt;br/&gt;
	at compress.SevenZipError.main(SevenZipError.java:28)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689837">COMPRESS-256</key>
            <summary>7z: 16 MB dictionary is too big</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Stefan Mueller">Stefan Mueller</reporter>
                        <labels>
                            <label>7zip</label>
                    </labels>
                <created>Mon, 20 Jan 2014 17:18:17 +0000</created>
                <updated>Wed, 22 Jan 2014 05:16:37 +0000</updated>
                            <resolved>Wed, 22 Jan 2014 05:16:37 +0000</resolved>
                                    <version>1.6</version>
                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13877483" author="bodewig" created="Tue, 21 Jan 2014 14:05:28 +0000"  >&lt;p&gt;note this is while reading the header rather than the content of the entry.  The content may use LZMA2 but the header seems to use LZMA.&lt;/p&gt;

&lt;p&gt;XZ for Java says:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
	&lt;li&gt;LZMA allows dictionaries up to one byte less than 4 GiB. This&lt;/li&gt;
	&lt;li&gt;implementation supports only 16 bytes less than 2 GiB. This&lt;/li&gt;
	&lt;li&gt;limitation is due to Java using signed 32-bit integers for array&lt;/li&gt;
	&lt;li&gt;indexing. The limitation shouldn&apos;t matter much in practice since so&lt;/li&gt;
	&lt;li&gt;huge dictionaries are not normally used.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;uhm, apparently they are used.  But then again I&apos;m surprised 7z would use a dictionary larger than 2GiB for headers.  This makes me believe there is some bug in our parsing code for compressed headers.  Again, any chance you could provide an example archive?&lt;/p&gt;</comment>
                            <comment id="13877513" author="stefan mueller" created="Tue, 21 Jan 2014 15:08:33 +0000"  >&lt;p&gt;I attached the archive with the problem.&lt;br/&gt;
Btw. besides the two problem-archives I have got a third archive with same settings that works without problems.&lt;/p&gt;</comment>
                            <comment id="13878271" author="bodewig" created="Wed, 22 Jan 2014 05:16:37 +0000"  >&lt;p&gt;fixed with svn revision 1560252&lt;/p&gt;

&lt;p&gt;Java&apos;s signed bytes and overflowing integers byting us &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624138" name="dictTooBig.7z" size="4069842" author="Stefan Mueller" created="Tue, 21 Jan 2014 15:03:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Jan 2014 14:05:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368804</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rkf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369108</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-254] ZipArchiveOutputStream try to switch to Zip64 when entries count over 64K entries</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-254</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Since version 1.3 we cannot create zip archive that contains over then 64K entries &amp;amp; without Zip64 extension.&lt;/p&gt;

&lt;p&gt;In case Zip64Mode.AsNeed is used target zip file cannot be open by unzip older then version 6.0.&lt;br/&gt;
In case Zip64Mode.Never is used exception is thrown.&lt;/p&gt;

&lt;p&gt;Why so strong restriction as (ZipConstants,ZIP64_MAGIC_SHORT = 0xFFFF) was happened? &lt;/p&gt;

&lt;p&gt;To reproduce you can use dummy test below &amp;amp; &lt;a href=&quot;ftp://ftp.info-zip.org/pub/infozip/unix/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;old unzip binaries&lt;/a&gt;: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;TestHuge&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.archivers.zip.ZipArchiveEntry;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.FileOutputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.OutputStream;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestHuge {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;(OutputStream os = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;test.zip&quot;&lt;/span&gt;));
            ZipArchiveOutputStream zos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveOutputStream(os)) {
            zos.setLevel(0);

            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; dirCount = 0; dirCount &amp;lt; 10; ++dirCount) {
                ZipArchiveEntry entryDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveEntry(&lt;span class=&quot;code-quote&quot;&gt;&quot;dir&quot;&lt;/span&gt; + dirCount + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;);
                zos.putArchiveEntry(entryDir);
                zos.closeArchiveEntry();

                &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 0x4000; ++i) {
                    ZipArchiveEntry entryFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveEntry(&lt;span class=&quot;code-quote&quot;&gt;&quot;dir&quot;&lt;/span&gt; + dirCount + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;file&quot;&lt;/span&gt; + i);
                    zos.putArchiveEntry(entryFile);
                    zos.write((&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; + dirCount + &quot;&lt;/span&gt; &quot; + i).getBytes());
                    zos.closeArchiveEntry();
                }
            }
            zos.finish();
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Unzip version &amp;lt; 6.0 (without Zip64 support)&lt;/p&gt;</environment>
        <key id="12688570">COMPRESS-254</key>
            <summary>ZipArchiveOutputStream try to switch to Zip64 when entries count over 64K entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="taras.ledkov">Taras Ledkov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jan 2014 16:31:37 +0000</created>
                <updated>Fri, 21 Feb 2014 14:30:41 +0000</updated>
                            <resolved>Fri, 21 Feb 2014 14:30:41 +0000</resolved>
                                    <version>1.3</version>
                    <version>1.4</version>
                    <version>1.5</version>
                    <version>1.6</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13870485" author="bodewig" created="Tue, 14 Jan 2014 07:42:24 +0000"  >&lt;p&gt;When not using Zip64 you are limited to 65535 entries or you create invalid ZIP archives.  See section 4.3.16 in &lt;a href=&quot;http://www.pkware.com/documents/casestudies/APPNOTE.TXT&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.pkware.com/documents/casestudies/APPNOTE.TXT&lt;/a&gt; where there are only two bytes for &quot;total number of entries in the central directory&quot;.  So when we introduced Zip64 support we plugged a hole that allowed Compress to create invalid archives.&lt;/p&gt;</comment>
                            <comment id="13908363" author="bodewig" created="Fri, 21 Feb 2014 14:30:41 +0000"  >&lt;p&gt;any &quot;fix&quot; for this would create invalid archives according to APPNOTE.TXT&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Jan 2014 07:42:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367589</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rczz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367897</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-253] BZip2CompressorInputStream reads fewer bytes from truncated file than CPython&apos;s bz2 implementation</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-253</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Jython includes support for decompressing bz2 files using commons compress and shares regression tests with CPython. The CPython test &lt;a href=&quot;https://bitbucket.org/jython/jython/src/b2890af7a5e817e30f6ca2325f6dcdb14a59f32b/lib-python/2.7/test/test_bz2.py?at=default#cl-331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;test_read_truncated&lt;/a&gt; in test_bz2.py passes under CPython but fails under Jython.&lt;/p&gt;

&lt;p&gt;The BZip2CompressorInputStream is able to read 769 bytes from the truncated data rather than the 770 bytes that the CPython bz2 implementation can read.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687612">COMPRESS-253</key>
            <summary>BZip2CompressorInputStream reads fewer bytes from truncated file than CPython&apos;s bz2 implementation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="indra">Indra Talip</reporter>
                        <labels>
                            <label>bzip</label>
                            <label>patch</label>
                    </labels>
                <created>Tue, 7 Jan 2014 10:09:12 +0000</created>
                <updated>Mon, 20 Jan 2014 13:26:44 +0000</updated>
                            <resolved>Mon, 20 Jan 2014 13:26:44 +0000</resolved>
                                    <version>1.4.1</version>
                    <version>1.6</version>
                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13864058" author="indra" created="Tue, 7 Jan 2014 10:11:07 +0000"  >&lt;p&gt;Attached file contains test cases translated to commons-compress/junit from the Jython/CPython regression tests for reading truncated files.&lt;/p&gt;</comment>
                            <comment id="13864098" author="bodewig" created="Tue, 7 Jan 2014 11:02:53 +0000"  >&lt;p&gt;The reason for this is that BZIp2CompressorInputStream always calculates the next byte when reading one.&lt;/p&gt;

&lt;p&gt;The attached patch (against current trunk) changes this and removes a piece of state at the same time.  All existing tests inside Common Compress pass with the change but we are pretty close to release 1.7 and I don&apos;t feel well adding the change now without more extensive testing.&lt;/p&gt;</comment>
                            <comment id="13865148" author="indra" created="Wed, 8 Jan 2014 07:07:38 +0000"  >&lt;p&gt;With the patch applied to commons-compress all the Jython regression tests from commit &lt;a href=&quot;https://bitbucket.org/indratalip/jython/commits/b1304c8ba094963119a54206b2cb7995502ea055&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;b1304c8&lt;/a&gt; on my fork of Jython for the bz2 module pass successfully. Thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="13876448" author="bodewig" created="Mon, 20 Jan 2014 13:26:44 +0000"  >&lt;p&gt;fixed with svn revision 1559687&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12621769" name="PythonTruncatedBzip2Test.java" size="3677" author="indra" created="Tue, 7 Jan 2014 10:11:07 +0000"/>
                            <attachment id="12621773" name="compress-253.patch" size="12633" author="bodewig" created="Tue, 7 Jan 2014 11:02:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jan 2014 11:02:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366613</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1r6zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366924</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-252] Writing 7z empty entries produces incorrect or corrupt archive</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-252</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I couldn&apos;t find an exact rule that causes this incorrect behavior, but I tried to reduce it to some simple scenarios to reproduce it:&lt;/p&gt;

&lt;p&gt;Input: A folder with certain files -&amp;gt; tried to archive it.&lt;br/&gt;
If the folder contains more than 7 files the incorrect behavior appears.&lt;/p&gt;

&lt;p&gt;Scenario 1: 7 empty files&lt;br/&gt;
Result: The created archive contains a single folder entry with the name of the archive (no matter which was the name of the file)&lt;/p&gt;

&lt;p&gt;Scenario 2: 7 files, some empty, some with content&lt;br/&gt;
Result: The created archive contains a folder entry with the name of the archive and a number of file entries also with the name of the archive. The number of the entries is equal to the number of non empty files.&lt;/p&gt;

&lt;p&gt;Scenario 3: 8 empty files&lt;br/&gt;
Result: 7zip Manager cannot open archive and stops working.&lt;/p&gt;

&lt;p&gt;Scenario 4.1: 8 files: some empty, some with content, last file (alphabetically) with content&lt;br/&gt;
Result: same behavior as described for Scenario 2.&lt;/p&gt;

&lt;p&gt;Scenario 4.2: 8 files, some empty, some with content, last file empy&lt;br/&gt;
Result: archive is corrupt, the following message is received: &quot;Cannot open file &apos;archivename.7z&apos; as archive&quot; (7Zip Manager does not crash).&lt;/p&gt;</description>
                <environment>&lt;p&gt;eclipse 3.7.2, java 1.7&lt;/p&gt;</environment>
        <key id="12685407">COMPRESS-252</key>
            <summary>Writing 7z empty entries produces incorrect or corrupt archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Livia">Livia Sarbu</reporter>
                        <labels>
                            <label>7z</label>
                    </labels>
                <created>Wed, 18 Dec 2013 16:12:34 +0000</created>
                <updated>Wed, 8 Jan 2014 05:19:52 +0000</updated>
                            <resolved>Wed, 8 Jan 2014 05:19:52 +0000</resolved>
                                    <version>1.6</version>
                                    <fixVersion>1.7</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13852954" author="bodewig" created="Thu, 19 Dec 2013 15:11:18 +0000"  >&lt;p&gt;since you point out LZMA2 in the subject, does that mean things are fine when you select a different compression method?&lt;/p&gt;</comment>
                            <comment id="13853795" author="livia" created="Fri, 20 Dec 2013 08:54:10 +0000"  >&lt;p&gt;I didn&apos;t test with other compression methods, than. Did that now, and it&apos;s the same, so I will delete that part from the description.&lt;/p&gt;</comment>
                            <comment id="13853799" author="bodewig" created="Fri, 20 Dec 2013 08:57:29 +0000"  >&lt;p&gt;I was afraid you&apos;d say so.  Thanks for checking.&lt;/p&gt;</comment>
                            <comment id="13853869" author="bodewig" created="Fri, 20 Dec 2013 11:11:45 +0000"  >&lt;p&gt;I think I found the problem, need to add a bunch of more tests and commit then.  &quot;7 or more&quot; really is a magic number as the method writing bitsets has an off-by-one bug.  Will comment here, when I&apos;ve committed the fix.&lt;/p&gt;

&lt;p&gt;Do you think you can build Compress from trunk and verify it works for you after that?&lt;/p&gt;</comment>
                            <comment id="13853897" author="bodewig" created="Fri, 20 Dec 2013 12:13:27 +0000"  >&lt;p&gt;svn revision 1552608&lt;/p&gt;</comment>
                            <comment id="13853924" author="livia" created="Fri, 20 Dec 2013 12:40:18 +0000"  >&lt;p&gt;I will take it from trunk and check it, but I am not sure I will have time today; I will let you know when I do.&lt;/p&gt;</comment>
                            <comment id="13853951" author="bodewig" created="Fri, 20 Dec 2013 13:26:37 +0000"  >&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13854119" author="sebb@apache.org" created="Fri, 20 Dec 2013 16:25:12 +0000"  >&lt;p&gt;Note: the Continuum CI server is not working currently, but I have deployed 1.7-SNAPSHOT to the ASF SNAPSHOT repo at &lt;a href=&quot;http://repository.apache.org/snapshots&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repository.apache.org/snapshots&lt;/a&gt; in case that is of any use.&lt;/p&gt;</comment>
                            <comment id="13862999" author="bodewig" created="Mon, 6 Jan 2014 14:01:44 +0000"  >&lt;p&gt;Happy New Year Livia - have you had a chance to give Compress&apos; trunk a try?&lt;/p&gt;</comment>
                            <comment id="13864599" author="livia" created="Tue, 7 Jan 2014 19:36:58 +0000"  >&lt;p&gt;Hi Stefan, Happy New Year to you too!... happy indeed it seems, as I just checked the new version from trunk and it works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thank you for the prompt fix and I am sorry for not having time to check it earlier.&lt;/p&gt;</comment>
                            <comment id="13865084" author="bodewig" created="Wed, 8 Jan 2014 05:19:52 +0000"  >&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619355" name="CreateArchiveTest.java" size="2273" author="Livia" created="Wed, 18 Dec 2013 16:27:57 +0000"/>
                            <attachment id="12619358" name="EmptyTest.zip" size="1292" author="Livia" created="Wed, 18 Dec 2013 16:30:37 +0000"/>
                            <attachment id="12619360" name="Scenario2and4.1.jpg" size="48029" author="Livia" created="Wed, 18 Dec 2013 16:35:22 +0000"/>
                            <attachment id="12619362" name="Scenario3.jpg" size="44733" author="Livia" created="Wed, 18 Dec 2013 16:39:10 +0000"/>
                            <attachment id="12619363" name="Scenario4.2.jpg" size="13306" author="Livia" created="Wed, 18 Dec 2013 16:42:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Dec 2013 15:11:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364484</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qtpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364784</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-249] TarArchiveInputStream does not properly read from underlying InputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-249</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;TarArchiveInputStream reads header with its protected function readRecord(). This code improperly assumes that is.read(buf) always fills the whole buffer. This assumption is wrong. A proper implementation needs to call read multiple times until all bytes are read:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;TarArchiveInputStream.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] readRecord() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] record = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[recordSize];

        &lt;span class=&quot;code-comment&quot;&gt;// start change
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; readNow = is.read(buf);
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; readNow = 0;
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(readNow &amp;lt; recordSize){
          &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; bytesRead = is.read(record,0, recordSize - readNow);
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(bytesRead == -1) {
            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
          }
          readNow += bytesRead;
        }
        &lt;span class=&quot;code-comment&quot;&gt;// end change
&lt;/span&gt;        count(readNow);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (readNow != recordSize) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; record;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12683825">COMPRESS-249</key>
            <summary>TarArchiveInputStream does not properly read from underlying InputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pavkovic">Ilja Pavkovic</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Dec 2013 12:37:04 +0000</created>
                <updated>Tue, 10 Dec 2013 13:13:25 +0000</updated>
                            <resolved>Tue, 10 Dec 2013 12:39:01 +0000</resolved>
                                    <version>1.6</version>
                                    <fixVersion>1.7</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13844236" author="bodewig" created="Tue, 10 Dec 2013 12:39:01 +0000"  >&lt;p&gt;already fixed in trunk&lt;/p&gt;</comment>
                            <comment id="13844238" author="pavkovic" created="Tue, 10 Dec 2013 12:40:38 +0000"  >&lt;p&gt;ah, didn&apos;t know that&lt;/p&gt;</comment>
                            <comment id="13844247" author="bodewig" created="Tue, 10 Dec 2013 12:49:15 +0000"  >&lt;p&gt;no problem, you may want to verify the fix, though.&lt;/p&gt;</comment>
                            <comment id="13844261" author="pavkovic" created="Tue, 10 Dec 2013 13:13:25 +0000"  >&lt;p&gt;seen the commit, change is ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12682878">COMPRESS-245</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12656998">COMPRESS-234</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Dec 2013 12:39:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362897</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qjzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-248] Naive OOM when deal with a corrupt .gz file</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-248</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I tried to extract three gz files, and they are corrupt. The two of them at ahead  throw the IOExceptions:&lt;br/&gt;
Caused by: java.io.IOException: Gzip-compressed data is corrupt&lt;br/&gt;
	at org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream.read(GzipCompressorInputStream.java:253)&lt;br/&gt;
	at java.io.InputStream.read(InputStream.java:82)&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;But when comes to the third one it throw out OOM as below:&lt;br/&gt;
java.lang.OutOfMemoryError&lt;br/&gt;
	at java.util.zip.Inflater.inflateBytes(Native Method)&lt;br/&gt;
	at java.util.zip.Inflater.inflate(Inflater.java:238)&lt;br/&gt;
	at org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream.read(GzipCompressorInputStream.java:251)&lt;br/&gt;
	at java.io.InputStream.read(InputStream.java:82)&lt;/p&gt;

&lt;p&gt;The third file is corrupt, but Linux recognize it as a compressed gz file.&lt;br/&gt;
More info:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;jing@localhost logs&amp;#93;&lt;/span&gt;$ file stdout.log.txt.gz &lt;br/&gt;
stdout.log.txt.gz: gzip compressed data, was &quot;stdout.log_backup&quot;, from Unix, last modified: Tue Nov 19 22:53:19 2013&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;jing@localhost logs&amp;#93;&lt;/span&gt;$ tar -xvzf stdout.log.txt.gz&lt;/p&gt;

&lt;p&gt;gzip: stdin: invalid compressed data--format violated&lt;br/&gt;
tar: Child returned status 1&lt;br/&gt;
tar: Error is not recoverable: exiting now&lt;/p&gt;</description>
                <environment>&lt;p&gt;Fedora 19 x86_64, 8G RAM, Java version &quot;1.7.0_45&quot;&lt;br/&gt;
OpenJDK Runtime Environment (fedora-2.4.3.0.fc19-x86_64 u45-b15)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 24.45-b08, mixed mode)&lt;/p&gt;</environment>
        <key id="12683760">COMPRESS-248</key>
            <summary>Naive OOM when deal with a corrupt .gz file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Jing Li">Jing Li</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Dec 2013 03:45:40 +0000</created>
                <updated>Fri, 20 Dec 2013 05:33:53 +0000</updated>
                            <resolved>Fri, 20 Dec 2013 05:33:53 +0000</resolved>
                                    <version>1.6</version>
                                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13844036" author="julien.ayme@gmail.com" created="Tue, 10 Dec 2013 07:28:31 +0000"  >&lt;p&gt;Hello Jing, thanks for the report.&lt;/p&gt;

&lt;p&gt;May I ask you what is thrown when trying to extract the third file using java.util.zip.GZIPInputStream?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;File corruptFile = ...; &lt;span class=&quot;code-comment&quot;&gt;// The corrupt gz file
&lt;/span&gt;InputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GZIPInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(corruptFile));
&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] buf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[4096];
&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; total = 0;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; read;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((read = in.read(buf)) != -1) {
    total += read;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the same OOME is thrown, then I suggest opening a bug at Oracle (&lt;a href=&quot;http://bugs.sun.com/bugdatabase/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/bugdatabase/&lt;/a&gt;).&lt;br/&gt;
If the corrupt file is not sensitive and not too big, could you attach it to the issue ?&lt;/p&gt;

&lt;p&gt;Thanks in advance,&lt;br/&gt;
regards,&lt;br/&gt;
Julien&lt;/p&gt;</comment>
                            <comment id="13845158" author="jing li" created="Wed, 11 Dec 2013 07:34:54 +0000"  >&lt;p&gt;Hi Julien,&lt;/p&gt;

&lt;p&gt;Thanks for your reply. I tested using the code you provided and still get OOM. So I think I&apos;d better open a bug at Oracle as your suggested. I&apos;m sorry I can&apos;t upload the test file &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks a lot,&lt;br/&gt;
Jing&lt;/p&gt;</comment>
                            <comment id="13848425" author="bodewig" created="Sat, 14 Dec 2013 19:15:22 +0000"  >&lt;p&gt;can you share the file that causes the OOM?  We are not using GZipInputStream directly anymore, most probably the problem is within Inflater (which both our stream and the one in java.util.zip use) but maybe we can find a workaround in our code.&lt;/p&gt;</comment>
                            <comment id="13850030" author="jing li" created="Tue, 17 Dec 2013 02:48:19 +0000"  >&lt;p&gt;Hi Stefan,&lt;br/&gt;
I provided the file to your email. Hope it helps&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Jing&lt;/p&gt;</comment>
                            <comment id="13852963" author="bodewig" created="Thu, 19 Dec 2013 15:26:07 +0000"  >&lt;p&gt;This is strange - and it may depend on your JVM, of course.  This is what I get&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: Gzip-compressed data is corrupt
	at org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream.read(GzipCompressorInputStream.java:253)
	at java.io.InputStream.read(InputStream.java:101)
	at org.apache.commons.compress.utils.IOUtils.copy(IOUtils.java:67)
	at org.apache.commons.compress.utils.IOUtils.copy(IOUtils.java:48)
	at Foo.main(Foo.java:10)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;for OpenJDK Runtime Environment (IcedTea 2.3.10) (7u25-2.3.10-1ubuntu0.12.10.2), same for Oracle JDK 7u45 and Java8 EA.&lt;/p&gt;

&lt;p&gt;This is what I did in my test:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        GzipCompressorInputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GzipCompressorInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;stdout.log.txt.gz&quot;&lt;/span&gt;));
        FileOutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;stdout.log.txt&quot;&lt;/span&gt;);
        IOUtils.copy(in, out);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13853689" author="bodewig" created="Fri, 20 Dec 2013 05:33:53 +0000"  >&lt;p&gt;glad you discovered the problem and extra glad it has already been fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Dec 2013 07:28:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362832</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qjlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-245] TarArchiveInputStream#getNextTarEntry returns null prematurely</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-245</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The attached archive decompressed with 1.6 only extracts part of the archive. This does not happen with version 1.5&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;FileInputStream fin = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;exampletar.tar.gz&quot;&lt;/span&gt;);
GZIPInputStream gin = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GZIPInputStream(fin);
TarArchiveInputStream tin = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream(gin);            TarArchiveEntry entry;
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((entry = tin.getNextTarEntry()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The file is created with &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;tar cvzf&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; in RHEL 6.5 and the contents look like this when extracted with the same tool:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;topdirectory/
topdirectory/about.html
topdirectory/.eclipseproduct
topdirectory/plugins/
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/about.html
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF/
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF/eclipse.inf
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF/ECLIPSEF.SF
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF/MANIFEST.MF
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF/ECLIPSEF.RSA
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/launcher.gtk.linux.x86_64.properties
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/eclipse_1206.so
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/about.html
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/fragment.properties
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/.api_description
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/META-INF/
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/META-INF/eclipse.inf
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/META-INF/ECLIPSEF.SF
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/META-INF/MANIFEST.MF
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/META-INF/ECLIPSEF.RSA
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/runtime_registry_compatibility.jar
topdirectory/configuration/
topdirectory/configuration/config.ini
topdirectory/icon.xpm
topdirectory/about_files/
topdirectory/about_files/pixman-licenses.txt
topdirectory/about_files/mpl-v11.txt
topdirectory/about_files/about_cairo.html
topdirectory/libcairo-swt.so
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;with commons-compress-1.6 it looks like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;topdirectory/
topdirectory/about.html
topdirectory/.eclipseproduct
topdirectory/plugins
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/about.html
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF/eclipse.inf
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF/ECLIPSEF.SF
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF/MANIFEST.MF
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/META-INF/ECLIPSEF.RSA
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/launcher.gtk.linux.x86_64.properties
topdirectory/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.200.v20090519/eclipse_1206.so
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/about.html
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/fragment.properties
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/.api_description
topdirectory/plugins/org.eclipse.core.runtime.compatibility.registry_3.2.200.v20090429-1800/META-INF
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12682878">COMPRESS-245</key>
            <summary>TarArchiveInputStream#getNextTarEntry returns null prematurely</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="andreas.aronsson">Andreas Aronsson</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Thu, 5 Dec 2013 11:01:39 +0000</created>
                <updated>Thu, 22 May 2014 14:00:29 +0000</updated>
                            <resolved>Fri, 6 Dec 2013 05:23:51 +0000</resolved>
                                    <version>1.6</version>
                                    <fixVersion>1.7</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13840520" author="bodewig" created="Thu, 5 Dec 2013 20:18:02 +0000"  >&lt;p&gt;interesting, and a workaround for you: I get all 31 entries when using GzipCompressorInputStream from Commons Compress and only 18 when using GZIPInputStream - so the problem seems to be related to what happens during decompression.&lt;/p&gt;</comment>
                            <comment id="13840531" author="bodewig" created="Thu, 5 Dec 2013 20:25:24 +0000"  >&lt;p&gt;Just to be clear, there is a bug in Commons Compress.  If I uncompress your example archive using java.util.zip&apos;s code, I get a proper and complete tar archive.  Somehow GZIPInputStream&apos;s read must behave different from GzipCompressorInputStream and the later should work for you.&lt;/p&gt;</comment>
                            <comment id="13840994" author="bodewig" created="Fri, 6 Dec 2013 05:23:51 +0000"  >&lt;p&gt;fixed with svn revision 1548380&lt;/p&gt;

&lt;p&gt;Does your example tarball contain anything sensitive or can I add it to Compress&apos; testcases?&lt;/p&gt;</comment>
                            <comment id="13841037" author="andreas.aronsson" created="Fri, 6 Dec 2013 06:49:28 +0000"  >&lt;p&gt;I can confirm that the suggested workaround indeed solves the provided test case as well as two more I have in my setup. &lt;/p&gt;</comment>
                            <comment id="13841038" author="andreas.aronsson" created="Fri, 6 Dec 2013 06:50:46 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Does your example tarball contain anything sensitive or can I add it to Compress&apos; testcases?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I tried to make sure to remove anything sensitive. Most, if not all of it are files from an old eclipse distributin. &lt;/p&gt;</comment>
                            <comment id="13841048" author="andreas.aronsson" created="Fri, 6 Dec 2013 07:10:29 +0000"  >&lt;p&gt;A patch already. That was fast!&lt;br/&gt;
I am curious, are you editing changes.xml manually or is there some way to automate it? Even if it is only adding the date it would help. &lt;/p&gt;</comment>
                            <comment id="13841064" author="bodewig" created="Fri, 6 Dec 2013 07:38:27 +0000"  >&lt;p&gt;great, I added a testcase.&lt;/p&gt;

&lt;p&gt;As the bug stands another likely workaround would be to put a BufferedInputStream between gzip and tar if you&apos;d prefer to stick with java.util.zip.&lt;/p&gt;

&lt;p&gt;And no, unfortunately I edit changes,xml manually.&lt;/p&gt;</comment>
                            <comment id="13841129" author="andreas.aronsson" created="Fri, 6 Dec 2013 09:38:47 +0000"  >&lt;p&gt;Good stuff. &lt;br/&gt;
What is the normal workflow, I close the issue after 1.7 is released and I verified with that build? &lt;/p&gt;</comment>
                            <comment id="13841147" author="bodewig" created="Fri, 6 Dec 2013 10:14:05 +0000"  >&lt;p&gt;That would be nice, yes.&lt;/p&gt;

&lt;p&gt;The &quot;normal workflow&quot; is more like &quot;nobody cares whether the ticket gets closed once it has been resolved&quot; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14005932" author="andreas.aronsson" created="Thu, 22 May 2014 14:00:29 +0000"  >&lt;p&gt;Works!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12683825">COMPRESS-249</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12617150" name="exampletar.tar.gz" size="239255" author="andreas.aronsson" created="Thu, 5 Dec 2013 11:02:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Dec 2013 20:18:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362135</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qf9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362430</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-244] 7z reading of UINT64 data type is wrong for big values</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-244</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;h2&gt;&lt;a name=&quot;Briefdescription&quot;&gt;&lt;/a&gt;Brief description&lt;/h2&gt;
&lt;p&gt;large values with a first byte indicating at least 4 additional bytes shift an integer by at least 32bits thus leading to an overflow and an incorrect value - the value needs to be casted to long before the bitshift!&lt;br/&gt;
(see the attached patch)&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;Detailsfromthe7zdocumentation&quot;&gt;&lt;/a&gt;Details from the 7z documentation&lt;/h2&gt;
&lt;blockquote&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;UINT64 means real UINT64 encoded with the following scheme:
  Size of encoding sequence depends from first byte:
  First_Byte  Extra_Bytes        Value
  (binary)   
  0xxxxxxx               : ( xxxxxxx           )
  10xxxxxx    BYTE y[1]  : (  xxxxxx &amp;lt;&amp;lt; (8 * 1)) + y
  110xxxxx    BYTE y[2]  : (   xxxxx &amp;lt;&amp;lt; (8 * 2)) + y
  ...
  1111110x    BYTE y[6]  : (       x &amp;lt;&amp;lt; (8 * 6)) + y
  11111110    BYTE y[7]  :                         y
  11111111    BYTE y[8]  :                         y
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12681022">COMPRESS-244</key>
            <summary>7z reading of UINT64 data type is wrong for big values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nkruber">Nico Kruber</reporter>
                        <labels>
                            <label>7z</label>
                            <label>easyfix</label>
                            <label>patch</label>
                    </labels>
                <created>Mon, 25 Nov 2013 12:36:51 +0000</created>
                <updated>Fri, 20 Dec 2013 12:37:08 +0000</updated>
                            <resolved>Wed, 27 Nov 2013 05:36:33 +0000</resolved>
                                    <version>1.6</version>
                                    <fixVersion>1.7</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13831425" author="nkruber" created="Mon, 25 Nov 2013 12:42:31 +0000"  >&lt;p&gt;patch for readUint64 in SevenZFile.java&lt;/p&gt;</comment>
                            <comment id="13833484" author="bodewig" created="Wed, 27 Nov 2013 05:36:33 +0000"  >&lt;p&gt;Thanks, I&apos;ve taken a slightly different approach with svn revision 1545928&lt;/p&gt;

&lt;p&gt;Could you please verify I didn&apos;t make some dumb mistake?&lt;/p&gt;</comment>
                            <comment id="13833613" author="nkruber" created="Wed, 27 Nov 2013 09:46:41 +0000"  >&lt;p&gt;looks good - having the firstByte as long in the first place is, of course, also ok&lt;/p&gt;

&lt;p&gt;maybe add a comment on why the value which is obviously containing only a single byte needs to be &quot;long&quot; so that it is not changed back by mistake in the future?&lt;/p&gt;</comment>
                            <comment id="13833617" author="bodewig" created="Wed, 27 Nov 2013 09:57:31 +0000"  >&lt;p&gt;well, nextByte defined just a few lines later has always been a long, so it&apos;s been an oversight.&lt;/p&gt;

&lt;p&gt;Will add a comment, thanks.&lt;/p&gt;</comment>
                            <comment id="13833619" author="nkruber" created="Wed, 27 Nov 2013 09:59:25 +0000"  >&lt;p&gt;ok, thank you, too&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615586" name="fix-readUint64-for-large-values.diff" size="922" author="nkruber" created="Mon, 25 Nov 2013 12:42:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Nov 2013 05:36:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360287</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1q3x3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360586</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-241] writing 7z entries with LZMA2 fails when closing the stream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-241</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;closing archive entries that use LZMA2 compression fails on JDK8 early access build 113 due to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.tukaani.xz.XZIOException: Stream finished or closed
	at org.tukaani.xz.LZMA2OutputStream.flush(Unknown Source)
	at java.io.FilterOutputStream.flush(FilterOutputStream.java:140)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:158)
	at org.apache.commons.compress.archivers.sevenz.LZMA2Decoder$FinishOnCloseStream.close(LZMA2Decoder.java:67)
	at java.io.FilterOutputStream.close(FilterOutputStream.java:159)
	at org.apache.commons.compress.archivers.sevenz.SevenZOutputFile.closeArchiveEntry(SevenZOutputFile.java:125)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Actually there is no need to explicitly finish the wrapped stream as XZ for Java&apos;s LZMA2OutputStream which is returned by LZMA2Options#getOutputStream wll internally finish the stream when close is called.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12676005">COMPRESS-241</key>
            <summary>writing 7z entries with LZMA2 fails when closing the stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                            <label>7z</label>
                    </labels>
                <created>Sun, 27 Oct 2013 17:39:45 +0000</created>
                <updated>Sun, 27 Oct 2013 17:43:55 +0000</updated>
                            <resolved>Sun, 27 Oct 2013 17:43:55 +0000</resolved>
                                    <version>1.6</version>
                                    <fixVersion>1.7</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13806397" author="bodewig" created="Sun, 27 Oct 2013 17:43:55 +0000"  >&lt;p&gt;fixed with svn revision 1536169&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>355502</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pad3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>355790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-240] ZipEncodingHelper.isUTF8(String) does not check all UTF-8 aliases</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-240</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ZipEncodingHelper.isUTF8(String) does not check all UTF-8 aliases.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Apache Maven 3.0.5 (r01de14724cdef164cd33c7c8c2fe155faf9602da; 2013-02-19 08:51:28-0500)&lt;br/&gt;
Maven home: C:\Java\apache-maven-3.0.5\bin\..&lt;br/&gt;
Java version: 1.7.0_40, vendor: Oracle Corporation&lt;br/&gt;
Java home: C:\Program Files\Java\jdk1.7.0_40\jre&lt;br/&gt;
Default locale: en_US, platform encoding: Cp1252&lt;br/&gt;
OS name: &quot;windows 7&quot;, version: &quot;6.1&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;&lt;/p&gt;</environment>
        <key id="12674823">COMPRESS-240</key>
            <summary>ZipEncodingHelper.isUTF8(String) does not check all UTF-8 aliases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="garydgregory">Gary Gregory</assignee>
                                    <reporter username="garydgregory">Gary Gregory</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Oct 2013 16:18:20 +0000</created>
                <updated>Mon, 21 Oct 2013 16:20:05 +0000</updated>
                            <resolved>Mon, 21 Oct 2013 16:20:05 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354445</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1p3un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-239] ArchiveStreamFactory cannot create an ArchiveInputStream from any input stream that is blocking</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-239</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Encountered while streaming zip data over a network:&lt;/p&gt;

&lt;p&gt;In the createArchiveInputStream method of ArchiveStreamFactory, when the provided input stream is read, and it blocks before 12 bytes are available for reading, due to the contract of the java.io.InputStream class, the archive signature will not be completely read, and an ArchiveException will be thrown (&quot;No Archiver found for the stream signature&quot;).&lt;/p&gt;

&lt;p&gt;In ZipArchiveInputStream, you have implemented a readFully method, which should solve this issue, but since you are checking the length of the signature read against the expected length, you are never getting to do that.  When you try to read the signature, you should be using readFully.&lt;/p&gt;

&lt;p&gt;For reference, here is important part of the contract of java.io.InputStream.read():&lt;/p&gt;

&lt;p&gt;This method blocks until &lt;span class=&quot;error&quot;&gt;&amp;#91;ANY&amp;#93;&lt;/span&gt; input data is available, end of file is detected, or an exception is thrown.&lt;/p&gt;

&lt;p&gt;If len is zero, then no bytes are read and 0 is returned; otherwise, there is an attempt to read &lt;em&gt;at least one byte&lt;/em&gt;. If no byte is available because the stream is at end of file, the value -1 is returned; otherwise, at least one byte is read and stored into b.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2008r1/r2, Ubuntu 12.10&lt;/p&gt;</environment>
        <key id="12672050">COMPRESS-239</key>
            <summary>ArchiveStreamFactory cannot create an ArchiveInputStream from any input stream that is blocking</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="esaron">Jon Neel</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Wed, 2 Oct 2013 22:39:40 +0000</created>
                <updated>Fri, 4 Oct 2013 13:26:49 +0000</updated>
                            <resolved>Fri, 4 Oct 2013 13:26:49 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13785958" author="bodewig" created="Fri, 4 Oct 2013 07:11:50 +0000"  >&lt;p&gt;should be easy to fix.&lt;/p&gt;

&lt;p&gt;If you know you are reading a ZIP you can certainly skip the autodetection version of createArchiveInputStream as a workaround, but you aleady knew that.&lt;/p&gt;</comment>
                            <comment id="13786130" author="bodewig" created="Fri, 4 Oct 2013 13:26:49 +0000"  >&lt;p&gt;fixed with svn revision 1529159&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Oct 2013 07:11:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1omun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351964</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-237] Long link support for TarArchiveOutputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-237</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;TarArchiveOutputStream doesn&apos;t handle properly long link names, they are truncated silently in most cases.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;In GNU mode a @LongLink entry should be created similarly to long names but with the &apos;K&apos; type (&lt;tt&gt;GNU_LONGLINK&lt;/tt&gt;) instead of &apos;L&apos; (&lt;tt&gt;GNU_LONGNAME&lt;/tt&gt;)&lt;/li&gt;
	&lt;li&gt;In POSIX mode a pax header with the &lt;tt&gt;linkpath&lt;/tt&gt; keyword should be added. This is already implemented for links containing a non ASCII character.&lt;/li&gt;
	&lt;li&gt;In the default ERROR mode no exception is thrown and the link is truncated.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The logic for adding a pax header on non ASCII characters should probably be reworked, as it seems possible to have pax headers mixed with GNU @LongLink entries. I&apos;m not sure this is desirable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12662236">COMPRESS-237</key>
            <summary>Long link support for TarArchiveOutputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ebourg">Emmanuel Bourg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Aug 2013 22:35:37 +0000</created>
                <updated>Fri, 9 Aug 2013 09:18:18 +0000</updated>
                            <resolved>Fri, 9 Aug 2013 09:18:18 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13731423" author="ebourg" created="Tue, 6 Aug 2013 23:11:38 +0000"  >&lt;p&gt;I attached a patch to handle link names like entry names. If it looks good I&apos;ll commit it and add some test cases.&lt;/p&gt;</comment>
                            <comment id="13734479" author="bodewig" created="Fri, 9 Aug 2013 06:52:51 +0000"  >&lt;p&gt;I took the opportunity for a tiny refactoring in svn revision 1512161 - sorry I overlooked the &quot;I&apos;ll commit it part&quot; until I committed it myself.&lt;/p&gt;

&lt;p&gt;Yes, additional tests would be great.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13734578" author="ebourg" created="Fri, 9 Aug 2013 09:18:18 +0000"  >&lt;p&gt;Thank you Stefan. I added the tests.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12596450" name="longlink.patch" size="2524" author="ebourg" created="Tue, 6 Aug 2013 23:11:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Aug 2013 06:52:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1n0tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342545</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-236] IllegalArgumentException reading CPIO generated by Redline RPM</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-236</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://redline-rpm.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://redline-rpm.org/&lt;/a&gt; creates CPIO archives with a non-zero file mode on the trailer. This causes an IllegalArgumentException when reading the file. I&apos;ve attached a patch and test archive to fix this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12661376">COMPRESS-236</key>
            <summary>IllegalArgumentException reading CPIO generated by Redline RPM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="andrew_duffy">Andrew Duffy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Aug 2013 10:31:14 +0000</created>
                <updated>Thu, 8 Aug 2013 16:19:20 +0000</updated>
                            <resolved>Thu, 8 Aug 2013 16:19:20 +0000</resolved>
                                    <version>1.5</version>
                    <version>1.6</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13727549" author="andrew_duffy" created="Fri, 2 Aug 2013 10:32:33 +0000"  >&lt;p&gt;Patch, plus the test archive because I couldn&apos;t get &lt;tt&gt;patch&lt;/tt&gt; to create it.&lt;/p&gt;</comment>
                            <comment id="13733641" author="bodewig" created="Thu, 8 Aug 2013 16:19:20 +0000"  >&lt;p&gt;should be fixed with svn revision 1511850&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12595587" name="redline.cpio" size="268" author="andrew_duffy" created="Fri, 2 Aug 2013 10:32:33 +0000"/>
                            <attachment id="12595586" name="redline.patch" size="4658" author="andrew_duffy" created="Fri, 2 Aug 2013 10:32:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 Aug 2013 16:19:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mwof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341872</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-235] TarArchiveInputStream.reset() should be dropped</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-235</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The method TarArchiveInputStream#reset() overrides the default in InputStream, and changes the behaviour to do nothing. &lt;/p&gt;

&lt;p&gt;Now InputStream#reset() throws IOException(&quot;mark/reset not supported&quot;) which seems better - otherwise there is no indication that the reset() has failed.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Yes, I know users should check isMarkSupported(), but still&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12659338">COMPRESS-235</key>
            <summary>TarArchiveInputStream.reset() should be dropped</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Tue, 23 Jul 2013 13:54:12 +0000</created>
                <updated>Tue, 29 Oct 2013 03:31:54 +0000</updated>
                                                            <fixVersion>2.0</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339531</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mk87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339851</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COMPRESS-230] Tar archive is not being read correctly</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-230</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The TAR archiver is not reading existing tar files correctly. It doesn&apos;t happen with every tar, just some of my tar files. I&apos;ll attach an example tar file. The first file it reads is not the root directory, but another file in the tar with &quot;._&quot; appended to the front of the file name for some reason.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 12.04&lt;br/&gt;
java version &quot;1.7.0_21&quot;&lt;br/&gt;
OpenJDK Runtime Environment (IcedTea 2.3.9) (7u21-2.3.9-0ubuntu0.12.10.1)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 23.7-b01, mixed mode)&lt;/p&gt;</environment>
        <key id="12651030">COMPRESS-230</key>
            <summary>Tar archive is not being read correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kjkeefe">Ken Keefe</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Jun 2013 03:34:51 +0000</created>
                <updated>Sun, 9 Jun 2013 10:01:36 +0000</updated>
                            <resolved>Wed, 5 Jun 2013 09:26:56 +0000</resolved>
                                    <version>1.5</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13675564" author="kjkeefe" created="Wed, 5 Jun 2013 03:40:50 +0000"  >&lt;p&gt;Attached DetExpExample_mob23.tar.&lt;/p&gt;

&lt;p&gt;This example is not read correctly. The first file that is read from the TarArchiveInputStream has the name &quot;detExpExample_mob23/._detExpExample_mob23.prj&quot; when it should have the name &quot;detExpExample_mob23&quot; for the root directory.&lt;/p&gt;</comment>
                            <comment id="13675737" author="bodewig" created="Wed, 5 Jun 2013 09:24:52 +0000"  >&lt;p&gt;This is because your archive actually contains those files &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ tar --version
tar (GNU tar) 1.26
$ tar tvf DetExpExample_mob23.tar | head
-rw-r--r-- kjkeefe/staff   225 2010-03-30 06:09 detExpExample_mob23/._detExpExample_mob23.prj
-rw-r--r-- kjkeefe/staff  3654 2010-03-30 06:09 detExpExample_mob23/detExpExample_mob23.prj
-rw-r--r-- kjkeefe/staff   225 2010-03-30 06:08 detExpExample_mob23/._Makefile.project
-rw-r--r-- kjkeefe/staff   986 2010-03-30 06:08 detExpExample_mob23/Makefile.project
-rw-r--r-- kjkeefe/staff   225 2010-03-30 06:07 detExpExample_mob23/Atomic/det/._det.san
-rw-r--r-- kjkeefe/staff 26610 2010-03-30 06:07 detExpExample_mob23/Atomic/det/det.san
-rw-r--r-- kjkeefe/staff   225 2010-03-30 06:07 detExpExample_mob23/Atomic/det/._detSAN.cpp
-rw-r--r-- kjkeefe/staff 11719 2010-03-30 06:07 detExpExample_mob23/Atomic/det/detSAN.cpp
-rw-r--r-- kjkeefe/staff   225 2010-03-30 06:07 detExpExample_mob23/Atomic/det/._detSAN.h
-rw-r--r-- kjkeefe/staff  4641 2010-03-30 06:07 detExpExample_mob23/Atomic/det/detSAN.h
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;what you see are most likely Mac resource forks &lt;a href=&quot;https://en.wikipedia.org/wiki/Resource_fork&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://en.wikipedia.org/wiki/Resource_fork&lt;/a&gt; that your native tar implementation on MacOS X hides from you.&lt;/p&gt;</comment>
                            <comment id="13676088" author="kjkeefe" created="Wed, 5 Jun 2013 16:35:06 +0000"  >&lt;p&gt;So, should I not expect the directory to be listed first in the TarArchiveInputStream? When I write my code to untar something, do I need to check for each file I get from that stream that the parent directory exists and if it doesn&apos;t I should create it?&lt;/p&gt;

&lt;p&gt;Thanks very much for the help!&lt;/p&gt;
</comment>
                            <comment id="13678988" author="bodewig" created="Sun, 9 Jun 2013 10:01:36 +0000"  >&lt;p&gt;Directories are only to be expected inside the archive if they&apos;ve been added explicitly.  TAR - like all othe archiving formats - doesn&apos;t need directory entries at all.&lt;/p&gt;

&lt;p&gt;It is very common to create directories as needed when extracting archives.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12586253" name="DetExpExample_mob23.tar" size="122880" author="kjkeefe" created="Wed, 5 Jun 2013 03:40:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Jun 2013 09:24:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l5y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331689</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-229] incorrect handling of GNU longlink entries</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-229</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Apache commons-compress handles GNU LongLink entries for long filenames. But it fails to handle LongLink entries for long linknames&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; correctly.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://git.savannah.gnu.org/cgit/tar.git/tree/src/tar.h#n176&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://git.savannah.gnu.org/cgit/tar.git/tree/src/tar.h#n176&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12650443">COMPRESS-229</key>
            <summary>incorrect handling of GNU longlink entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="christoph.gysin">Christoph Gysin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Jun 2013 08:23:05 +0000</created>
                <updated>Wed, 5 Jun 2013 09:20:52 +0000</updated>
                            <resolved>Mon, 3 Jun 2013 09:22:35 +0000</resolved>
                                    <version>1.4.1</version>
                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13672017" author="christoph.gysin" created="Sat, 1 Jun 2013 08:25:00 +0000"  >&lt;p&gt;Attached a unittest to expose the issue and a suggested fix.&lt;/p&gt;</comment>
                            <comment id="13672945" author="bodewig" created="Mon, 3 Jun 2013 09:22:13 +0000"  >&lt;p&gt;Many thanks, patch applied with svn revision 1488935&lt;/p&gt;

&lt;p&gt;For future reference - patch doesn&apos;t like git&apos;s binary diff format.  Since I have git installed I could simply use git apply to apply the last hunk of the second patch but on a system without git it would have been difficult.  Better attach new binaries directly.&lt;/p&gt;</comment>
                            <comment id="13672953" author="christoph.gysin" created="Mon, 3 Jun 2013 09:39:45 +0000"  >&lt;p&gt;Noted, and thanks for the quick response.&lt;/p&gt;

&lt;p&gt;Btw, I have also submitted a patch to fix the same issue in ant (almost identical codebase):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=55040&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=55040&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13672961" author="bodewig" created="Mon, 3 Jun 2013 10:00:05 +0000"  >&lt;p&gt;I think your patch is not correct in the Bugzilla: 40334 special case where a long XYZ entry is supposed to be followed by the name but there is no extra entry - i.e. getLongNameData() returns null.&lt;/p&gt;

&lt;p&gt;Should be fixed with svn revision 1488947 - would be good if oyu could double check, though.&lt;/p&gt;</comment>
                            <comment id="13672963" author="bodewig" created="Mon, 3 Jun 2013 10:01:59 +0000"  >&lt;p&gt;I know the Ant issue, in fact I stumbled over the omission while porting the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Ant&apos;s codebase is the grandfather of Commons Compress tar(zip/bzip2 packages and I try to merge patches from one to the other whenever I don&apos;t forget about it.  Ant&apos;s package shouldn&apos;t be used by anybody but Ant, though.&lt;/p&gt;</comment>
                            <comment id="13673464" author="christoph.gysin" created="Mon, 3 Jun 2013 19:29:39 +0000"  >&lt;p&gt;Well spotted, looks good now. Thanks again!&lt;/p&gt;

&lt;p&gt;Yes, I have found references that common-compress&apos; tar implementation is originally from ant. To make things worse: I have actually stumbled over the issue in jenkins-core, which uses TarEntry from ant but copied and locally modified TarInputStream. With the next release of ant I will be able to port the fix one more time to jenkins...&lt;/p&gt;</comment>
                            <comment id="13674021" author="bodewig" created="Tue, 4 Jun 2013 04:17:31 +0000"  >&lt;p&gt;If Jenkins has to locally modify TarInputStream we might be interested in the reasons why &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13675659" author="christoph.gysin" created="Wed, 5 Jun 2013 07:19:53 +0000"  >&lt;p&gt;On further investigation, they seem to have copied it back in 2009 to implement UTF-8 encoded filenames:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jenkinsci/jenkins/commit/fcc75143941c49d94536ed8db90472b9633f8631&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jenkinsci/jenkins/commit/fcc75143941c49d94536ed8db90472b9633f8631&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Since then, Ant&apos;s TarInputStream has been modified to support using different encodings, so that hack should be undone.&lt;/p&gt;

&lt;p&gt;I&apos;ll send them a patch to use the current upstream versions, and if possible use commons-compress instead of Ant.&lt;/p&gt;</comment>
                            <comment id="13675731" author="bodewig" created="Wed, 5 Jun 2013 09:20:52 +0000"  >&lt;p&gt;I agree, going with Commons Compress would be the best approach.  Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12585710" name="0001-allow-creating-testsuites-over-different-archives.patch" size="4087" author="christoph.gysin" created="Sat, 1 Jun 2013 08:25:00 +0000"/>
                            <attachment id="12585711" name="0002-add-unittest-to-expose-bug-with-long-symlinks.patch" size="3126" author="christoph.gysin" created="Sat, 1 Jun 2013 08:25:00 +0000"/>
                            <attachment id="12585712" name="0003-split-out-function-to-retrieve-longname-data.patch" size="3499" author="christoph.gysin" created="Sat, 1 Jun 2013 08:25:00 +0000"/>
                            <attachment id="12585713" name="0004-handle-GNU-long-link-name.patch" size="3005" author="christoph.gysin" created="Sat, 1 Jun 2013 08:25:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 3 Jun 2013 09:22:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330770</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l2c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331103</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-228] ZipException on reading valid zip64 file</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-228</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ZipFile zip = new ZipFile(new File(&quot;ordertest-64.zip&quot;)); throws ZipException &quot;central directory zip64 extended information extra field&apos;s length doesn&apos;t match central directory data.  Expected length 16 but is 28&quot;.&lt;/p&gt;

&lt;p&gt;The archive was created by using DotNetZip-WinFormsTool uzing zip64 flag (forces always to make zip64 archives).&lt;/p&gt;

&lt;p&gt;Zip file is tested from the console: $zip -T ordertest-64.zip&lt;/p&gt;

&lt;p&gt;Output:&lt;br/&gt;
test of ordertest-64.zip OK&lt;/p&gt;

&lt;p&gt;I can open the archive with FileRoller without problem on my machine, browse and extract it.&lt;/p&gt;</description>
                <environment>&lt;p&gt;java.runtime.name=OpenJDK Runtime Environment&lt;br/&gt;
java.home=/usr/lib/jvm/java-6-openjdk-amd64/jre&lt;br/&gt;
java.runtime.version=1.6.0_27-b27&lt;/p&gt;

&lt;p&gt;commons-compress-1.5&lt;/p&gt;</environment>
        <key id="12649414">COMPRESS-228</key>
            <summary>ZipException on reading valid zip64 file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bancer">Valerij Bancer</reporter>
                        <labels>
                            <label>zip</label>
                            <label>zip64</label>
                    </labels>
                <created>Fri, 24 May 2013 23:06:30 +0000</created>
                <updated>Sun, 26 May 2013 17:43:33 +0000</updated>
                            <resolved>Sun, 26 May 2013 17:37:18 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13667144" author="bodewig" created="Sat, 25 May 2013 17:59:17 +0000"  >&lt;p&gt;&lt;del&gt;Can we include your test archive in Compress&apos; source distribution or does it contain sensitive data?&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;should have looked inside the archive first &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13667353" author="bodewig" created="Sun, 26 May 2013 17:06:37 +0000"  >&lt;p&gt;To me it is quite clear that the archive you&apos;ve attached violates the spec of &lt;a href=&quot;http://www.pkware.com/documents/casestudies/APPNOTE.TXT&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.pkware.com/documents/casestudies/APPNOTE.TXT&lt;/a&gt; section 4.5.3&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The order of the fields in the zip64 extended &lt;br/&gt;
information record is fixed, but the fields MUST&lt;br/&gt;
only appear if the corresponding Local or Central&lt;br/&gt;
directory record field is set to 0xFFFF or 0xFFFFFFFF.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;offset and disk number in the central directory entry are not set to all-1 values but the corresponding fields inside the extra information field are present - and make up for the 12 unexpected bytes.&lt;/p&gt;

&lt;p&gt;It is also obvious that InfoZIP based implementations can deal with this kind of violation.  I&apos;ll dig into their source code to see what sort of heuristic they use.&lt;/p&gt;</comment>
                            <comment id="13667355" author="bodewig" created="Sun, 26 May 2013 17:24:25 +0000"  >&lt;p&gt;well, maybe the non-native speaker in me is the problem here.  To me &quot;MUST only appear if&quot; translates to &quot;must not be present unless&quot;, but maybe it means &quot;can be there, but if the record field is set to all-1s, then it must be present&quot;.&lt;/p&gt;

&lt;p&gt;Anyway, unzip 6.10 simply ignores excess data, we can do so as well.&lt;/p&gt;</comment>
                            <comment id="13667356" author="bancer" created="Sun, 26 May 2013 17:35:20 +0000"  >&lt;p&gt;Yes, you are welcome. I believe you are right. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Deal with it as you think it is appropriate.&lt;/p&gt;</comment>
                            <comment id="13667357" author="bodewig" created="Sun, 26 May 2013 17:37:18 +0000"  >&lt;p&gt;fixed with svn revision 1486437&lt;/p&gt;</comment>
                            <comment id="13667359" author="bancer" created="Sun, 26 May 2013 17:43:05 +0000"  >&lt;p&gt;From zip specification: &quot;Use of the term MUST or SHALL indicates a required element.&quot; &lt;br/&gt;
So, &quot;MUST only appear if&quot; could be read as &quot;required only appear if&quot;. As I understand the fields may be present in any case, but are &lt;ins&gt;required&lt;/ins&gt; &quot;if the corresponding Local or Central directory record field is set to 0xFFFF or 0xFFFFFFFF&quot;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12584781" name="ordertest-64.zip" size="61212" author="bancer" created="Fri, 24 May 2013 23:08:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 May 2013 17:59:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329741</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kw07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-227] duplicate entries may let ZipFile#getInputStream return null</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-227</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Found while investigating &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=54967&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=54967&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If an archive contains two entries for the same file readCentralDirectory in ZipFile will only add the first entry to the entries map and only the last to the nameMap map - this is because entries is a LinkedHashMap and nameMap is a &quot;plain&quot; HashMap.&lt;/p&gt;

&lt;p&gt;Normally this wouldn&apos;t matter since both ZipArchiveEntry instances are equal and thus it is irrelevant which of the two is used as a key when obtaining the InputStream.&lt;/p&gt;

&lt;p&gt;Things get different, though, if the entry has data inside the local file header as only the first entry is dealt with in resolveLocalFileHeaderData - after this the two instances are no longer equal and nameMap.get(NAME) will return an instance that can no longer be found.&lt;/p&gt;

&lt;p&gt;I intend to modify readCentralDirectory to only add the first entry to nameMap as well and document the behavior.  I&apos;ll also start a discussion thread on the dev list on whether we need to provide an additional API with multiple entries per name.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12648439">COMPRESS-227</key>
            <summary>duplicate entries may let ZipFile#getInputStream return null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                            <label>zip</label>
                    </labels>
                <created>Mon, 20 May 2013 14:08:24 +0000</created>
                <updated>Tue, 4 Jun 2013 04:27:10 +0000</updated>
                            <resolved>Tue, 4 Jun 2013 04:27:10 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13662086" author="bodewig" created="Mon, 20 May 2013 15:34:24 +0000"  >&lt;p&gt;One way to fix it is committed with svn revision 1484499&lt;/p&gt;</comment>
                            <comment id="13662833" author="bodewig" created="Tue, 21 May 2013 09:16:39 +0000"  >&lt;p&gt;Test archive containing the same (empty) entry twice&lt;/p&gt;</comment>
                            <comment id="13663458" author="sebb@apache.org" created="Tue, 21 May 2013 21:54:53 +0000"  >&lt;p&gt;The test archive shows 2 entries in both WinZip (9.0) and 7-Zip (9.20).&lt;/p&gt;</comment>
                            <comment id="13667143" author="bodewig" created="Sat, 25 May 2013 17:57:48 +0000"  >&lt;p&gt;svn revision 1486348 adds two methods to ZipFile that provide access to all entries of a given name.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12583988" name="test.zip" size="254" author="bodewig" created="Tue, 21 May 2013 09:16:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 May 2013 21:54:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>328794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kq7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329136</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-224] Cannot uncompress very large bzip2 files</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-224</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When extracting big files like &lt;a href=&quot;http://download.geofabrik.de/europe/germany/bayern-latest.osm.bz2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.geofabrik.de/europe/germany/bayern-latest.osm.bz2&lt;/a&gt; apache-compress works nicely. But when trying the same for e.g. &lt;a href=&quot;http://ftp5.gwdg.de/pub/misc/openstreetmap/planet.openstreetmap.org/planet/planet-latest.osm.bz2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ftp5.gwdg.de/pub/misc/openstreetmap/planet.openstreetmap.org/planet/planet-latest.osm.bz2&lt;/a&gt; it stops without an error after exactly 900000 bits.&lt;/p&gt;

&lt;p&gt;I&apos;m using the following code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;App.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (args.length == 0)
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;You need to specify the bz2 file!&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fromFile = args[0];
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!fromFile.endsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;.bz2&quot;&lt;/span&gt;))
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;You need to specify a bz2 file! But was:&quot;&lt;/span&gt; + fromFile);
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toFile = pruneFileEnd(fromFile);

        FileInputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(fromFile);
        FileOutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(toFile);
        BZip2CompressorInputStream bzIn = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BZip2CompressorInputStream(in);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] buffer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[1024 * 8];
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n = 0;
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (-1 != (n = bzIn.read(buffer))) {
                out.write(buffer, 0, n);
            }
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            out.close();
            bzIn.close();
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pruneFileEnd(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; file) {
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index = file.lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (index &amp;lt; 0)
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; file;
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; file.substring(0, index);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Java 1.7.0_03&lt;/p&gt;</environment>
        <key id="12645206">COMPRESS-224</key>
            <summary>Cannot uncompress very large bzip2 files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="peathal">Peter Karich</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Apr 2013 09:16:14 +0000</created>
                <updated>Tue, 30 Apr 2013 13:54:17 +0000</updated>
                            <resolved>Tue, 30 Apr 2013 13:41:45 +0000</resolved>
                                    <version>1.5</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13644404" author="bodewig" created="Mon, 29 Apr 2013 10:41:01 +0000"  >&lt;p&gt;Could this be &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-146&quot; title=&quot;BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-146&quot;&gt;&lt;del&gt;COMPRESS-146&lt;/del&gt;&lt;/a&gt; raising its head?  I.e. does it work if you use&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;BZip2CompressorInputStream bzIn = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BZip2CompressorInputStream(in, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;instead?&lt;/p&gt;</comment>
                            <comment id="13644415" author="peathal" created="Mon, 29 Apr 2013 10:58:10 +0000"  >&lt;p&gt;Looks like it does - I&apos;ll report when it finishes if all is nice!&lt;/p&gt;</comment>
                            <comment id="13644645" author="peathal" created="Mon, 29 Apr 2013 16:54:11 +0000"  >&lt;p&gt;Compared with bzip2 it looks like apache-compress works fine now (I&apos;ll report in a few days if parsing the resulting xml is ok)! Can I set this as the default setting or will certain bz2 files fail?&lt;/p&gt;

&lt;p&gt;BTW: It looks like apache-compress is only 2 times slower than bzip2 which is quite good IMO &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ! But do you know how one could improve this further? (Would save 3 hours on such big beasts &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/p&gt;</comment>
                            <comment id="13645577" author="bodewig" created="Tue, 30 Apr 2013 13:47:54 +0000"  >&lt;p&gt;&amp;gt; Can I set this as the default setting or will certain bz2 files fail?&lt;/p&gt;

&lt;p&gt;we decided to turn it off by default for backwards compatibility.  There might be code out there that relies on reading just the first stream - even if quite improbable.  It shouldn&apos;t do any harm to enable reading concatenated streams by default, we even have this on our list of acceptable breaking changes if/once we do a 2.0 release.&lt;/p&gt;

&lt;p&gt;As for performance - the bzip2 code reads like C in many places, reusing big pre-allocated arrays to avoid garbage collection pressure.  Some loss can be attributed to Java not having unsigned integral primitive types (neglecting char right now) and so quite some time is spent converting byte to int or char and vice versa.  I don&apos;t rule out the current code could be sped up - quite the opposite.&lt;/p&gt;</comment>
                            <comment id="13645579" author="peathal" created="Tue, 30 Apr 2013 13:53:35 +0000"  >&lt;p&gt;Thanks for the infos! BTW: the funny thing was the longer it ran the faster it got probably cause of jit ...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12515173">COMPRESS-146</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Apr 2013 10:41:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k627:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-223] NPE from TarBuffer.tryToConsumeSecondEOFRecord</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-223</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I get an NPE using &lt;tt&gt;Lister&lt;/tt&gt; on the decompressed &lt;br/&gt;
&lt;a href=&quot;http://archive.apache.org/dist/xml/xerces-j/Xerces-J-bin.2.5.0.tar.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Xerces-J-bin.2.5.0.tar.gz&lt;/a&gt; archive.&lt;/p&gt;

&lt;p&gt;Wrapping the &lt;tt&gt;for&lt;/tt&gt; loop in &lt;tt&gt;TarBuffer.isEOFRecord&lt;/tt&gt; with a &lt;tt&gt;null&lt;/tt&gt; check would fix the issue; it would also clean up the &lt;tt&gt;TarArchiveInputStream.getRecord&lt;/tt&gt; implementation a little.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12642945">COMPRESS-223</key>
            <summary>NPE from TarBuffer.tryToConsumeSecondEOFRecord</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Apr 2013 14:44:36 +0000</created>
                <updated>Thu, 25 Apr 2013 13:39:14 +0000</updated>
                            <resolved>Thu, 25 Apr 2013 13:39:14 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13634142" author="sebb@apache.org" created="Wed, 17 Apr 2013 15:41:09 +0000"  >&lt;p&gt;The problem seems to be caused by TarBuffer.readRecord() which can return null if at EOF.&lt;br/&gt;
This is not documented...&lt;/p&gt;</comment>
                            <comment id="13641791" author="bodewig" created="Thu, 25 Apr 2013 13:39:14 +0000"  >&lt;p&gt;fixed with svn revision 1475758 - thanks!&lt;/p&gt;

&lt;p&gt;I fixed a few Javadocs on the way as well an documented readRecord may return null.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12579137" name="TarArchiveInputStream.java.patch" size="628" author="jgustie" created="Wed, 17 Apr 2013 14:45:16 +0000"/>
                            <attachment id="12579138" name="TarBuffer.java.patch" size="602" author="jgustie" created="Wed, 17 Apr 2013 14:45:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Apr 2013 15:41:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>323355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jsf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>323700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-222] ZipArchiveInputStream may read incorrect bytes from stream when processing nested ZIP</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-222</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The problem is relevant to &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-189&quot; title=&quot;ZipArchiveInputStream may read 0 bytes when reading from a nested Zip file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-189&quot;&gt;&lt;del&gt;COMPRESS-189&lt;/del&gt;&lt;/a&gt;, in particular it relates to processing of inner ZIP files.&lt;/p&gt;

&lt;p&gt;Problem description:&lt;/p&gt;

&lt;p&gt;If the archive entry is not fully read, then partial reading returns incorrect contents.&lt;/p&gt;

&lt;p&gt;In particular the given example loops trough all entries of &quot;09815141_4.zip&quot; ZIP archive, probing each entry to be a TIFF file. The probe assumes that given file is TIFF, if it starts with bytes &lt;span class=&quot;error&quot;&gt;&amp;#91;0x49 0x49 0x2A 0x0 0x8 0x0 0x0 0x0 0x14 0x0&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;Most entries are correctly reported as TIFF, except:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ArchiveTest] 000017.tif is something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
[ArchiveTest] Header contents: 0x49 0x49 0x2A 0x0 0x8 0x0 0x0 0x0 0x0 0x0 
[ArchiveTest] 000033.tif is something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
[ArchiveTest] Header contents: 0x49 0x49 0x2A 0x0 0x0 0x0 0x0 0x0 0x0 0x0 
[ArchiveTest] 000056.tif is something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
[ArchiveTest] Header contents: 0x49 0x49 0x2A 0x0 0x8 0x0 0x0 0x0 0x0 0x0 
[ArchiveTest] 000069.tif is something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
[ArchiveTest] Header contents: 0x49 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As I can see, the problem can be introduced at any random byte.&lt;/p&gt;

&lt;p&gt;If the program is set &lt;tt&gt;READ_WHOLE_ENTRY=true&lt;/tt&gt; then all entries are fully read and MD5 sum is calculated. MD5 sum matches and all entries are correctly reported as TIFF. Thus the problem is only present when entry is not fully read and &lt;tt&gt;ArchiveInputStream.getNextEntry()&lt;/tt&gt; is called.&lt;/p&gt;

&lt;p&gt;Test ZIP can be downloaded from: &lt;a href=&quot;https://www.dropbox.com/s/h20wo6t0mwbgsqc/09815141_4.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://www.dropbox.com/s/h20wo6t0mwbgsqc/09815141_4.zip&lt;/a&gt;&lt;br/&gt;
It was originally taken from WIPO FTP (i.e. it is in public domain) and was a bit stripped.&lt;/p&gt;

&lt;p&gt;Difficult to say what is the impact of this bug, but for 475 ZIP-in-ZIPs in my collection I have found 3 examples of incorrect contents extraction.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12641370">COMPRESS-222</key>
            <summary>ZipArchiveInputStream may read incorrect bytes from stream when processing nested ZIP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dma_k">Dmitry Katsubo</reporter>
                        <labels>
                            <label>zip</label>
                    </labels>
                <created>Mon, 8 Apr 2013 13:40:01 +0000</created>
                <updated>Tue, 16 Apr 2013 22:28:43 +0000</updated>
                            <resolved>Mon, 15 Apr 2013 04:27:12 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13631086" author="bodewig" created="Sat, 13 Apr 2013 16:39:33 +0000"  >&lt;p&gt;This &quot;ZIP in ZIP&quot; stuff you are doing is pretty nasty, you know &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Anyway, thanks for bringing up the bugs.  I&apos;ll take a stab on it over the next days.&lt;/p&gt;</comment>
                            <comment id="13631492" author="bodewig" created="Mon, 15 Apr 2013 04:27:12 +0000"  >&lt;p&gt;Whew, this time it&apos;s not commons-compress.&lt;/p&gt;

&lt;p&gt;You don&apos;t check the return code of read and thus sometimes only read a partial header.  I&apos;ll attach a patched version that really only ensures the header has been read completely and it does detect all tiffs.&lt;/p&gt;</comment>
                            <comment id="13631493" author="bodewig" created="Mon, 15 Apr 2013 04:27:50 +0000"  >&lt;p&gt;patched version that detects all tiffs&lt;/p&gt;</comment>
                            <comment id="13633496" author="dma_k" created="Tue, 16 Apr 2013 22:28:43 +0000"  >&lt;p&gt;Thanks a lot for pointing the problem. That&apos;s not trivial, really.&lt;br/&gt;
I should have used &lt;tt&gt;IOUtils.readFully()&lt;/tt&gt; for that.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12578671" name="ArchiveTest.java" size="3236" author="bodewig" created="Mon, 15 Apr 2013 04:27:50 +0000"/>
                            <attachment id="12577530" name="ArchiveTest.java" size="2689" author="dma_k" created="Mon, 8 Apr 2013 13:42:12 +0000"/>
                            <attachment id="12577531" name="log.txt" size="4276" author="dma_k" created="Mon, 8 Apr 2013 13:42:29 +0000"/>
                            <attachment id="12577532" name="log_read_whole_entry.txt" size="9520" author="dma_k" created="Mon, 8 Apr 2013 13:42:39 +0000"/>
                            <attachment id="12577533" name="md5.correct.txt" size="3150" author="dma_k" created="Mon, 8 Apr 2013 13:42:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 13 Apr 2013 16:39:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>321786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jiqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322131</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-221] Compress cannot run without XZ included</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-221</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;In previous versions of Compress, we used the Compress library in our application without requiring any other libraries.  Since the introduction of XZ, the library crashes because it does not dynamically try to find the XZ classes. Our application does not use or need XZ, and we &lt;em&gt;cannot&lt;/em&gt; add another ~100KB file to our application.&lt;/p&gt;

&lt;p&gt;To reproduce:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
&lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;properties&amp;gt;&amp;lt;mimeTypeRepository resource=&lt;span class=&quot;code-quote&quot;&gt;&quot;/etc/tika-mimetypes.xml&quot;&lt;/span&gt; magic=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;&amp;lt;/properties&amp;gt;
&lt;/span&gt;            tika = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TikaConfig(getClass().getClassLoader().getResourceAsStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;etc/tika-config.xml&quot;&lt;/span&gt;));
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
            t.printStackTrace();
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MimeTypeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot load tika-config.xml&quot;&lt;/span&gt;, t);
        }
        detector = tika.getDetector();
        MediaType contentType = MediaType.OCTET_STREAM;
        contentType = detector.detect(tika, metadata); &lt;span class=&quot;code-comment&quot;&gt;// error here&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Calling &lt;tt&gt;Detector.detect(InputStream, Metadata)&lt;/tt&gt; causes a &lt;tt&gt;NoClassDefFoundError&lt;/tt&gt; because it is trying to find the XZ files using a direct reference to the XZ classes.  &lt;tt&gt;Detector.detect:61&lt;/tt&gt; uses &lt;tt&gt;ZipContainerDetector.detect&lt;/tt&gt; to use &lt;tt&gt;CompressorInputStream createCompressorInputStream(InputStream)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The problem in &lt;tt&gt;public CompressorInputStream createCompressorInputStream(InputStream)&lt;/tt&gt; is it directly calls static methods on the &lt;tt&gt;XZCompressorInputStream&lt;/tt&gt; class which aren&apos;t in the classpath.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (BZip2CompressorInputStream.matches(signature, signatureLength)) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BZip2CompressorInputStream(in);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (GzipCompressorInputStream.matches(signature, signatureLength)) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GzipCompressorInputStream(in);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (XZCompressorInputStream.matches(signature, signatureLength)) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; XZCompressorInputStream(in);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Pack200CompressorInputStream.matches(signature, signatureLength))
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pack200CompressorInputStream(in);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ass you can see, the &lt;tt&gt;XZCompressorInputStream.matches()&lt;/tt&gt; method is a static method.  When the class loader loads this class, it tries to load the import statements at the top of &lt;tt&gt;XZCompressorInputStream&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.compressors.CompressorInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.tukaani.xz.SingleXZInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.tukaani.xz.XZ;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.tukaani.xz.XZInputStream;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;And, since these &lt;tt&gt;org.tukaani.xz&lt;/tt&gt; classes don&apos;t exist, a &lt;tt&gt;NoClassDefFoundError&lt;/tt&gt; exception is thrown.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NoClassDefFoundError: org/tukaani/xz/XZInputStream
at org.apache.commons.compress.compressors.CompressorStreamFactory.createCompressorInputStream(CompressorStreamFactory.java:120)
at org.apache.tika.parser.pkg.ZipContainerDetector.detectCompressorFormat(ZipContainerDetector.java:95)
at org.apache.tika.parser.pkg.ZipContainerDetector.detect(ZipContainerDetector.java:81)
at org.apache.tika.detect.CompositeDetector.detect(CompositeDetector.java:61)
at com.lookout.mimetype.TikaResourceMetadataFactory.createMetadata(TikaResourceMetadataFactory.java:166)
at com.lookout.mimetype.TikaResourceMetadataFactory.createMetadata(TikaResourceMetadataFactory.java:112)
(...)
Caused by: java.lang.ClassNotFoundException: org.tukaani.xz.XZInputStream
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:247)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The appropriate approach is to see if the classes exist before trying to use them.  If they fail, then XZ is not supported and &lt;tt&gt;ZipContainerDetector.detect&lt;/tt&gt; will not support XZ files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12635392">COMPRESS-221</key>
            <summary>Compress cannot run without XZ included</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mquigley">Matt Quigley</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Mar 2013 18:27:11 +0000</created>
                <updated>Thu, 7 Mar 2013 16:17:24 +0000</updated>
                            <resolved>Thu, 7 Mar 2013 16:17:24 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13594040" author="mquigley" created="Tue, 5 Mar 2013 22:41:38 +0000"  >&lt;p&gt;Note that a possible solution is to have a try-catch on a static method which will fail when the class loader tries loading a class.&lt;/p&gt;


&lt;p&gt;For example, &lt;tt&gt;XZUtils&lt;/tt&gt; does not import any classes not in the Compress project, so we can add a static method &lt;tt&gt;isAvailable()&lt;/tt&gt; which calls a class which does import classes not in the Compress project:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * This is a helper method to see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the XZ library is available.
     * 
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; {@code &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the XZ library is available.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isAvailable() {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            XZCompressorInputStream.isAvailable();
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following will always return &lt;tt&gt;true&lt;/tt&gt; when the class loader can load the XZ library, but will throw a &lt;tt&gt;NoClassDefFoundError&lt;/tt&gt; when its class cannot be loaded due to the imports problem.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * This is a helper method to see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the XZ library is available. If the library is not available, then the class
     * loader will &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; a {@code NoClassDefFoundError}.
     * 
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; {@code &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the XZ library is available.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isAvailable() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And then before the XZ library is used, we can simply check to see if it is available:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (XZUtils.isAvailable()) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (XZCompressorInputStream.matches(signature, signatureLength)) {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; XZCompressorInputStream(in);
                }
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13596013" author="bodewig" created="Thu, 7 Mar 2013 16:17:24 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;fixed with svn revision 1453941&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Mar 2013 16:17:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315885</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iibj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316228</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-219] ZipArchiveInputStream: ArrayIndexOutOfBoundsException when extracting a STORED zip file entry from within a zip.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-219</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When trying to read out a ZIP file, that has been stored (Method STORE, not DEFLATE!, with DEFLATE it seems OK) in another ZIP file using the ZipArchiveInputStream, I do get an ArrayIndexOutOfBoundsException when doing the arraycopy in ZipArchiveInputStream#readStored(byte[], int, int) (line 362) because the &quot;toRead&quot; is not decreased by the buf.offsetInBuffer.&lt;/p&gt;

&lt;p&gt;I will add the zip in question as attachment.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows (Linux as well)&lt;/p&gt;</environment>
        <key id="12632806">COMPRESS-219</key>
            <summary>ZipArchiveInputStream: ArrayIndexOutOfBoundsException when extracting a STORED zip file entry from within a zip.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wurstbrot">Wurstbrot mit Senf</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Feb 2013 09:39:37 +0000</created>
                <updated>Fri, 22 Feb 2013 05:08:11 +0000</updated>
                            <resolved>Fri, 22 Feb 2013 05:08:11 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13580521" author="wurstbrot" created="Mon, 18 Feb 2013 09:40:40 +0000"  >&lt;p&gt;This is the zip file that causes the problems.&lt;/p&gt;</comment>
                            <comment id="13581034" author="bodewig" created="Tue, 19 Feb 2013 05:30:44 +0000"  >&lt;p&gt;I&apos;ve copied your test archive to src/test/resources/&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-219&quot; title=&quot;ZipArchiveInputStream: ArrayIndexOutOfBoundsException when extracting a STORED zip file entry from within a zip.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-219&quot;&gt;&lt;del&gt;COMPRESS-219&lt;/del&gt;&lt;/a&gt;.zip and applied the attached test to compress&apos; trunk and it passes.&lt;/p&gt;

&lt;p&gt;Is it possible we&apos;ve fixed the problem already in trunk?  Or am I missing anything in the test?&lt;/p&gt;</comment>
                            <comment id="13582250" author="wurstbrot" created="Wed, 20 Feb 2013 15:42:33 +0000"  >&lt;p&gt;What you did in the test, works: you wrote the stream to a file, i.e. you actually copied the internal zip to the file. What causes the problem is the actual deflating of the zip within the zip.&lt;/p&gt;

&lt;p&gt;That is: creating a new ZipArchiveInputStream from the ZipArchiveInputStream like in the following snippet (I rewrote your code a bit for NIO.2, sorry for that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;) so it reproduces the error and attached it to the issue.&lt;/p&gt;</comment>
                            <comment id="13582252" author="wurstbrot" created="Wed, 20 Feb 2013 15:45:09 +0000"  >&lt;p&gt;Modified test (NIO.2)&lt;/p&gt;

&lt;p&gt;Oh, and forget about the &quot;static&quot; methods. Shouldn&apos;t be static &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13582421" author="bodewig" created="Wed, 20 Feb 2013 19:07:15 +0000"  >&lt;p&gt;I can&apos;t use NIO2 in a Java5 codebase, but I managed to reproduce the bug now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Can I include your test zip in compress&apos; source tree or does it contain sensitive information?&lt;/p&gt;</comment>
                            <comment id="13582447" author="bodewig" created="Wed, 20 Feb 2013 19:24:50 +0000"  >&lt;p&gt;fixed with svn revision 1448357 - Thanks!&lt;/p&gt;

&lt;p&gt;I&apos;ll leave this ticket open until I know whether I can enable the test.&lt;/p&gt;</comment>
                            <comment id="13583100" author="wurstbrot" created="Thu, 21 Feb 2013 10:51:18 +0000"  >&lt;p&gt;Yes, of course you can include it. It does not contain any sensitive data, in fact, no &quot;data&quot; at all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13583919" author="bodewig" created="Fri, 22 Feb 2013 05:08:11 +0000"  >&lt;p&gt;Test committed, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12570142" name="ZipArchiveInputStreamTest.java" size="1304" author="wurstbrot" created="Wed, 20 Feb 2013 15:45:09 +0000"/>
                            <attachment id="12569904" name="compress-219-test.patch" size="2321" author="bodewig" created="Tue, 19 Feb 2013 05:30:44 +0000"/>
                            <attachment id="12569790" name="test-linux.zip" size="2360" author="wurstbrot" created="Mon, 18 Feb 2013 09:40:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Feb 2013 05:30:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313302</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i2e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313647</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-218] Typo in CompressorStreamFactory Javadoc</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-218</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The Javadoc for CompressorStreamFactory contains two examples of &quot;Compressing a file&quot;. In actuality, the second example is decompressing a file.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12632730">COMPRESS-218</key>
            <summary>Typo in CompressorStreamFactory Javadoc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cowwoc">Gili</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Feb 2013 03:08:54 +0000</created>
                <updated>Tue, 19 Feb 2013 17:19:42 +0000</updated>
                            <resolved>Tue, 19 Feb 2013 17:19:42 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Compressors</component>
                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13581456" author="sebb@apache.org" created="Tue, 19 Feb 2013 17:19:42 +0000"  >&lt;p&gt;Thanks, fixed:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1447828&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/r1447828&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-218&quot; title=&quot;Typo in CompressorStreamFactory Javadoc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-218&quot;&gt;&lt;del&gt;COMPRESS-218&lt;/del&gt;&lt;/a&gt; Typo in CompressorStreamFactory Javadoc&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/compress/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/compressors/CompressorStreamFactory.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Feb 2013 17:19:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313226</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i1xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-216] JarArchiveEntry manifestAttributes and certificates are always null</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-216</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;JarArchiveEntry manifestAttributes and certificates are always null - is that intentional?&lt;/p&gt;

&lt;p&gt;In any case the Javadoc should state that the response is always null.&lt;/p&gt;

&lt;p&gt;Also, why does getCertificates() return null rather than an empty array?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12628740">COMPRESS-216</key>
            <summary>JarArchiveEntry manifestAttributes and certificates are always null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jan 2013 16:32:56 +0000</created>
                <updated>Wed, 23 Jan 2013 12:47:53 +0000</updated>
                            <resolved>Wed, 23 Jan 2013 05:15:24 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13560399" author="bodewig" created="Wed, 23 Jan 2013 05:15:24 +0000"  >&lt;p&gt;we had deferred fixing it to when we are willing to break the API.&lt;/p&gt;</comment>
                            <comment id="13560652" author="sebb@apache.org" created="Wed, 23 Jan 2013 12:47:53 +0000"  >&lt;p&gt;OK, I&apos;ll add a comment to the source referring to the JIRA.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;We should try to do that whenever the code looks odd and has resulted in a JIRA...&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12415706">COMPRESS-18</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Jan 2013 05:15:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>307375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1avvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-213] ZipShort, ZipLong, ZipEightByteInteger should implement Serializable</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-213</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I want to make the extra field I am creating for &lt;a href=&quot;https://issues.apache.org/jira/browse/CODEC-210&quot; title=&quot;Add DigestUtils.getDigest(String, MessageDigest)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CODEC-210&quot;&gt;&lt;del&gt;CODEC-210&lt;/del&gt;&lt;/a&gt; Serializable, but this requires ZipLong also be Serializable.&lt;/p&gt;

&lt;p&gt;Might as well do the other two while I&apos;m at it (ZipShort, ZipEightByteInteger).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12626433">COMPRESS-213</key>
            <summary>ZipShort, ZipLong, ZipEightByteInteger should implement Serializable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juliusdavies">Julius Davies</assignee>
                                    <reporter username="juliusdavies">Julius Davies</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jan 2013 23:45:39 +0000</created>
                <updated>Mon, 11 Feb 2013 14:53:34 +0000</updated>
                            <resolved>Tue, 8 Jan 2013 00:18:05 +0000</resolved>
                                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13546426" author="juliusdavies" created="Tue, 8 Jan 2013 00:00:18 +0000"  >&lt;p&gt;oops... previous was wrong (had two copies of the ZipShort patch).  This is better.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12563648" name="CODEC-213.patch" size="2681" author="juliusdavies" created="Tue, 8 Jan 2013 00:00:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>303040</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i177jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250192</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-212] TarArchiveEntry getName() returns wrongly encoded name even when you set encoding to TarArchiveInputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-212</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I have two file systems. One is Red Hat Linux, the other is MS Windows.&lt;br/&gt;
I created a *.tgz file in Red Hat Linux and tried to decompress it in MS Windows using Commons Compress.&lt;br/&gt;
The default system encoding are different. UTF-8 in Red Hat Linux and CP949 in MS Windows.&lt;br/&gt;
It seems that the file name encoding follows the default encoding even though when I use the following to untar it.&lt;/p&gt;

&lt;p&gt;FileInputStream fis = new FileInputStream(new File(*.tgz));&lt;br/&gt;
TarArchiveInputStream zis = new TarArchiveInputStream(new BufferedInputStream(fis),encodingOfRedHatLinux);&lt;/p&gt;

&lt;p&gt;while ((entry = (TarArchiveEntry)zis.getNextEntry()) != null)&lt;br/&gt;
{&lt;br/&gt;
entry.getName(); // filename is not UTF-8 it is encoded in CP949 and so the filename isn&apos;t consistent&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;By referring to this&lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Constructor for TarInputStream.&lt;/li&gt;
	&lt;li&gt;@param is the input stream to use&lt;/li&gt;
	&lt;li&gt;@param encoding name of the encoding to use for file names&lt;/li&gt;
	&lt;li&gt;@since Commons Compress 1.4&lt;br/&gt;
     */&lt;br/&gt;
    public TarArchiveInputStream(InputStream is, String encoding) 
{
        this(is, TarBuffer.DEFAULT_BLKSIZE, TarBuffer.DEFAULT_RCDSIZE, encoding);
    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;encoding should be used for file names.&lt;br/&gt;
But actually this doesn&apos;t seem to work.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Red Hat Enterprise Linux, MS Windows 7&lt;/p&gt;</environment>
        <key id="12625754">COMPRESS-212</key>
            <summary>TarArchiveEntry getName() returns wrongly encoded name even when you set encoding to TarArchiveInputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wooju.shin">Woo Ju Shin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jan 2013 00:26:49 +0000</created>
                <updated>Sun, 6 Jan 2013 23:37:16 +0000</updated>
                            <resolved>Fri, 4 Jan 2013 16:00:40 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13543039" author="bodewig" created="Thu, 3 Jan 2013 16:33:46 +0000"  >&lt;p&gt;Just a few quick questions:&lt;/p&gt;

&lt;p&gt;How has the original archive been created?  When reading the archive, how do you sepcify the encoding exactly?  &quot;utf-8&quot;?&lt;/p&gt;</comment>
                            <comment id="13543402" author="wooju.shin" created="Thu, 3 Jan 2013 23:15:02 +0000"  >&lt;p&gt;The archive is created on Red Hat Linux using tar command. The files that are included in this archive is created by cat command with an argument for filename which is encoded in &quot;UTF-8&quot;. And also the system default encoding is specified to be &quot;UTF-8&quot;.&lt;/p&gt;</comment>
                            <comment id="13543410" author="wooju.shin" created="Thu, 3 Jan 2013 23:28:14 +0000"  >&lt;p&gt;I have tried a workaround to this.&lt;br/&gt;
Next code is getNextTarEntry() of TarArchiveInputStream.java.&lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Get the next entry in this tar archive. This will skip&lt;/li&gt;
	&lt;li&gt;over any remaining data in the current entry, if there&lt;/li&gt;
	&lt;li&gt;is one, and place the input stream at the header of the&lt;/li&gt;
	&lt;li&gt;next entry, and read the header and instantiate a new&lt;/li&gt;
	&lt;li&gt;TarEntry from the header bytes and return that entry.&lt;/li&gt;
	&lt;li&gt;If there are no more entries in the archive, null will&lt;/li&gt;
	&lt;li&gt;be returned to indicate that the end of the archive has&lt;/li&gt;
	&lt;li&gt;been reached.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@return The next TarEntry in the archive, or null.&lt;/li&gt;
	&lt;li&gt;@throws IOException on error&lt;br/&gt;
     */&lt;br/&gt;
    public TarArchiveEntry getNextTarEntry() throws IOException {&lt;br/&gt;
        if (hasHitEOF) 
{
            return null;
        }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;        if (currEntry != null) {&lt;br/&gt;
            long numToSkip = entrySize - entryOffset;&lt;/p&gt;

&lt;p&gt;            while (numToSkip &amp;gt; 0) {&lt;br/&gt;
                long skipped = skip(numToSkip);&lt;br/&gt;
                if (skipped &amp;lt;= 0) &lt;/p&gt;
{
                    throw new RuntimeException(&quot;failed to skip current tar entry&quot;);
                }
&lt;p&gt;                numToSkip -= skipped;&lt;br/&gt;
            }&lt;/p&gt;

&lt;p&gt;            readBuf = null;&lt;br/&gt;
        }&lt;/p&gt;

&lt;p&gt;        byte[] headerBuf = getRecord();&lt;/p&gt;

&lt;p&gt;        if (hasHitEOF) &lt;/p&gt;
{
            currEntry = null;
            return null;
        }

&lt;p&gt;        try &lt;/p&gt;
{
            currEntry = new TarArchiveEntry(headerBuf, encoding);
        }
&lt;p&gt; catch (IllegalArgumentException e) &lt;/p&gt;
{
            IOException ioe = new IOException(&quot;Error detected parsing the header&quot;);
            ioe.initCause(e);
            throw ioe;
        }
&lt;p&gt;        entryOffset = 0;&lt;br/&gt;
        entrySize = currEntry.getSize();&lt;/p&gt;

&lt;p&gt;        if (currEntry.isGNULongNameEntry()) {&lt;br/&gt;
            // read in the name&lt;br/&gt;
            StringBuffer longName = new StringBuffer();&lt;br/&gt;
            byte[] buf = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;SMALL_BUFFER_SIZE&amp;#93;&lt;/span&gt;;&lt;br/&gt;
            int length = 0;&lt;br/&gt;
            while ((length = read(buf)) &amp;gt;= 0) &lt;/p&gt;
{
                longName.append(new String(buf, 0, length)); // TODO default charset?
            }
&lt;p&gt;            getNextEntry();&lt;br/&gt;
            if (currEntry == null) &lt;/p&gt;
{
                // Bugzilla: 40334
                // Malformed tar file - long entry name not followed by entry
                return null;
            }
&lt;p&gt;            // remove trailing null terminator&lt;br/&gt;
            if (longName.length() &amp;gt; 0&lt;br/&gt;
                &amp;amp;&amp;amp; longName.charAt(longName.length() - 1) == 0) &lt;/p&gt;
{
                longName.deleteCharAt(longName.length() - 1);
            }
&lt;p&gt;            currEntry.setName(longName.toString());&lt;br/&gt;
        }&lt;/p&gt;

&lt;p&gt;        if (currEntry.isPaxHeader())&lt;/p&gt;
{ // Process Pax headers
            paxHeaders();
        }

&lt;p&gt;        if (currEntry.isGNUSparse())&lt;/p&gt;
{ // Process sparse files
            readGNUSparse();
        }

&lt;p&gt;        // If the size of the next element in the archive has changed&lt;br/&gt;
        // due to a new size being reported in the posix header&lt;br/&gt;
        // information, we update entrySize here so that it contains&lt;br/&gt;
        // the correct value.&lt;br/&gt;
        entrySize = currEntry.getSize();&lt;br/&gt;
        return currEntry;&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;There&apos;s a comment &apos;//TODO default charset?&apos;.&lt;br/&gt;
This part seems to neglect the encoding set to TarArchiveInputStream().&lt;br/&gt;
I tried to get the encoding that I first set to TarArchiveInputStream() and constructed the filename in one byte[] variable, and then used the encoding to change the byte[] variable to String so that it could be set to entry by entry.setName().&lt;/p&gt;

&lt;p&gt;This workaround works well for now. But obviously I need more tests to be done.&lt;br/&gt;
I&apos;ll be trying more tests until next week.&lt;/p&gt;</comment>
                            <comment id="13543645" author="bodewig" created="Fri, 4 Jan 2013 06:51:44 +0000"  >&lt;p&gt;OK, so your tar is using GNU long name entries, I see.  I&apos;ll read up on GNU&apos;s spec whether they say anything about encoding for them (it might turn out it always uses UTF8).  Hmm, when we write GNU long name records we use the encoding that has been specified, so we certainly are not consistent.&lt;/p&gt;

&lt;p&gt;Thank you for the analysis.&lt;/p&gt;</comment>
                            <comment id="13543974" author="bodewig" created="Fri, 4 Jan 2013 16:00:40 +0000"  >&lt;p&gt;fixed with svn revision 1428942&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13545526" author="wooju.shin" created="Sun, 6 Jan 2013 23:37:16 +0000"  >&lt;p&gt;Wow! Brilliant.&lt;br/&gt;
I used your fix to do some tests and it just works fine.&lt;br/&gt;
Thank you very much.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Jan 2013 16:33:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302303</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1700n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-206] TarArchiveOutputStream sometimes writes garbage beyond the end of the archive</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-206</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;For some combinations of file lengths, the archive created by TarArchiveOutputStream writes garbage beyond the end of the TAR stream. TarArchiveInputStream can still read the stream without problems, but it does not read beyond the garbage. This is problematic for my use case because I write a checksum &lt;em&gt;after&lt;/em&gt; the TAR content. If I then try to read the checksum back, I read garbage instead.&lt;/p&gt;

&lt;p&gt;Functional impact:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;TarArchiveInputStream is asymmetrical with respect to TarArchiveOutputStream, in the sense that TarArchiveInputStream does not read everything that was written by TarArchiveOutputStream.&lt;/li&gt;
	&lt;li&gt;The content is unnecessarily large. The garbage is totally unnecessarily large: ~10K overhead compared to Linux command-line tar.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This symptom is remarkably similar to #&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-81&quot; title=&quot;TarOutputStream can leave garbage at the end of the archive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-81&quot;&gt;&lt;del&gt;COMPRESS-81&lt;/del&gt;&lt;/a&gt;, which is supposedly fixed since 1.1. Except for the fact that this issue still exists... I&apos;ve tested this with 1.0 and 1.4.1.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux x86&lt;/p&gt;</environment>
        <key id="12613265">COMPRESS-206</key>
            <summary>TarArchiveOutputStream sometimes writes garbage beyond the end of the archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="peterdm">Peter De Maeyer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Oct 2012 10:09:02 +0000</created>
                <updated>Sun, 20 Jan 2013 19:11:58 +0000</updated>
                            <resolved>Sun, 20 Jan 2013 19:11:58 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13483113" author="peterdm" created="Wed, 24 Oct 2012 10:09:57 +0000"  >&lt;p&gt;Attached a stand-alone junit test illustrating the problem.&lt;/p&gt;</comment>
                            <comment id="13483185" author="peterdm" created="Wed, 24 Oct 2012 12:50:57 +0000"  >&lt;p&gt;I think the root cause is that TarArchiveInputStream stops reading the input stream once it hits the first EOF record. Any lingering records after that are left unconsumed. It would be best to consume these as well.&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;TarArchiveInputStream.getRecord()&lt;/tt&gt;, I suggest to replace&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (buffer.isEOFRecord(headerBuf)) {
  hasHitEOF = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (buffer.isEOFRecord(headerBuf)) {
  &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (buffer.readRecord() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) { &lt;span class=&quot;code-comment&quot;&gt;// Consume any lingering records
&lt;/span&gt;    ;
  }
  hasHitEOF = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This fixes the test. It doesn&apos;t seem to break any other tests either, although I did not run all of them because they take a long time and I didn&apos;t have the patience.&lt;/p&gt;</comment>
                            <comment id="13483223" author="garydgregory" created="Wed, 24 Oct 2012 13:39:33 +0000"  >&lt;p&gt;If you take care of your relationship with patience and package the test and fix into an SVN diff patch file, the likelihood of this issue being addressed quickly will increase tremendously!&lt;/p&gt;</comment>
                            <comment id="13484385" author="peterdm" created="Thu, 25 Oct 2012 19:14:07 +0000"  >&lt;p&gt;I&apos;ve attached a patch.&lt;/p&gt;

&lt;p&gt;Note that both the test and fix turned out slightly different (but even better &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;).&lt;/p&gt;</comment>
                            <comment id="13540866" author="bodewig" created="Sat, 29 Dec 2012 11:36:07 +0000"  >&lt;p&gt;AFAICT the patch addresses &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-202&quot; title=&quot;Document EOF behavior of TarArchiveInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-202&quot;&gt;&lt;del&gt;COMPRESS-202&lt;/del&gt;&lt;/a&gt; in a way but doesn&apos;t deal with what you call &quot;garbage&quot; written at the end.  Does TarArchiveOutputStream still write garbage or did you only think it would because input stream didn&apos;t read the EOF block(s)?&lt;/p&gt;</comment>
                            <comment id="13541107" author="peterdm" created="Sun, 30 Dec 2012 17:05:52 +0000"  >&lt;p&gt;Indeed, TarArchiveOutputStream does not write garbage as such. Initially I thought the second EOF block was &quot;garbage&quot;. When I dug into the code I understood that the second EOF block was intentional. I then realized that the actual problem was that TarArchiveInputStream did not read back the second EOF block.&lt;/p&gt;

&lt;p&gt;Anyway, the point is that there is a unit test illustrating my use case, and the patch fixes it. &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-202&quot; title=&quot;Document EOF behavior of TarArchiveInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-202&quot;&gt;&lt;del&gt;COMPRESS-202&lt;/del&gt;&lt;/a&gt; is merely about documentation, but my patch really fixes &lt;em&gt;behavior&lt;/em&gt;. So I would argue that my patch does a lot more than just address &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-202&quot; title=&quot;Document EOF behavior of TarArchiveInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-202&quot;&gt;&lt;del&gt;COMPRESS-202&lt;/del&gt;&lt;/a&gt;...&lt;/p&gt;

&lt;p&gt;Rephrasing the issue: &quot;TarArchiveOutputStream sometimes writes bytes at the end of the archive which are never consumed by TarArchiveInputStream&quot;.&lt;/p&gt;</comment>
                            <comment id="13541349" author="bodewig" created="Mon, 31 Dec 2012 11:51:48 +0000"  >&lt;p&gt;I didn&apos;t mean to imply this was a duplicate of 202 or anything like that, but rather that your patch provides one alternative to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-202&quot; title=&quot;Document EOF behavior of TarArchiveInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-202&quot;&gt;&lt;del&gt;COMPRESS-202&lt;/del&gt;&lt;/a&gt; beyond &quot;just&quot; documenting the behavior.  We&apos;ll need to discuss on the dev list how we want to solve it, but for the sake of getting more opinions I&apos;ll wait a few days until people are back from their holiday time-outs.&lt;/p&gt;

&lt;p&gt;Given tar record reading may be willing to consume non-tar inputs, we may need to be more careful there.  I&apos;ll need to look into the tar dialect documentations a bit more to see what we might need to accept as part of the archive once the first EOF-record has been found.&lt;/p&gt;</comment>
                            <comment id="13558344" author="bodewig" created="Sun, 20 Jan 2013 19:11:58 +0000"  >&lt;p&gt;fixed the tar case with scvn revision 1435913 - the other archive formats have similar issues and will be addressed later.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12550836" name="COMPRESS-206.patch" size="4339" author="peterdm" created="Thu, 25 Oct 2012 19:14:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Oct 2012 13:39:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250726</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b0fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62181</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-205] Unit tests can fail when path to project is non-trivial (fix in description)</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-205</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;return factory.createCompressorInputStream(new BufferedInputStream(new FileInputStream(new File(rsc.getFile()))));&lt;/p&gt;

&lt;p&gt;can fail to find the files for testing e.g. /root/.jenkins/jobs/Commons%20Compress/workspace/target/test-classes/test.txt (No such file or directory)&lt;/p&gt;

&lt;p&gt;This can be fixed by simply opening the stream from the URL:&lt;/p&gt;

&lt;p&gt;    private CompressorInputStream getStreamFor(String resource)&lt;br/&gt;
            throws CompressorException, IOException &lt;/p&gt;
{

        final URL rsc = classLoader.getResource(resource);
        assertNotNull(&quot;Could not find resource &quot;+resource,rsc);
        return factory.createCompressorInputStream(
                   new BufferedInputStream(rsc.openStream()));
    }</description>
                <environment></environment>
        <key id="12609792">COMPRESS-205</key>
            <summary>Unit tests can fail when path to project is non-trivial (fix in description)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dan2097">Daniel Lowe</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Oct 2012 18:53:42 +0000</created>
                <updated>Sun, 27 Jan 2013 18:35:31 +0000</updated>
                            <resolved>Sun, 27 Jan 2013 09:48:13 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13541127" author="dan2097" created="Sun, 30 Dec 2012 18:20:24 +0000"  >&lt;p&gt;Diff of changes that should fix this (generated by TortoiseHG)&lt;/p&gt;</comment>
                            <comment id="13541348" author="bodewig" created="Mon, 31 Dec 2012 11:46:24 +0000"  >&lt;p&gt;Some of our tests will need real File instances (at least those of ZipFile and some Pack200 ones), but we could make thse tests conditional or use JUnit4 assumptions.  I&apos;ll look into it a bit later.&lt;/p&gt;</comment>
                            <comment id="13563774" author="bodewig" created="Sun, 27 Jan 2013 09:48:13 +0000"  >&lt;p&gt;I&apos;ve extracted the common &quot;get file from src/test/resources via classloader&quot; logic and used that all over the place.  It would be good if you could verify svn revision 1439043 works for you.&lt;/p&gt;</comment>
                            <comment id="13563870" author="dan2097" created="Sun, 27 Jan 2013 18:35:31 +0000"  >&lt;p&gt;That fixes the problem for me. Thanks for looking into this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12562727" name="COMPRESS-205.patch" size="4163" author="dan2097" created="Sun, 30 Dec 2012 18:20:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Dec 2012 11:46:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244847</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05u8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31996</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-204] ArchiveStreamFactory incorrectly detects txt file as tar</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-204</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt; relies on TarArchiveInputStream&apos;s getNextEntry method throwing an exception. This isn&apos;t true for all non-tar files. An example is attached.&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 1.6 64-bit&lt;/p&gt;</environment>
        <key id="12609772">COMPRESS-204</key>
            <summary>ArchiveStreamFactory incorrectly detects txt file as tar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dan2097">Daniel Lowe</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Oct 2012 17:04:35 +0000</created>
                <updated>Mon, 1 Oct 2012 17:27:06 +0000</updated>
                            <resolved>Mon, 1 Oct 2012 17:27:06 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13466946" author="dan2097" created="Mon, 1 Oct 2012 17:05:29 +0000"  >&lt;p&gt;This file is interpreted as being a tar!&lt;/p&gt;</comment>
                            <comment id="13466978" author="dan2097" created="Mon, 1 Oct 2012 17:27:06 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-191&quot; title=&quot;Too relaxed tar detection in ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-191&quot;&gt;&lt;del&gt;COMPRESS-191&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12547237" name="US5747498.txt" size="512" author="dan2097" created="Mon, 1 Oct 2012 17:05:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244849</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05u93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31998</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-203] Long directory names can not be stored in a tar archive because of error when writing PAX headers</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-203</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Trying to add a directory to the TAR Archive that has a name longer than 100 bytes generates an exception with a stack trace similar to the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: request to write &apos;114&apos; bytes exceeds size in header of &apos;0&apos; bytes for entry &apos;./PaxHeaders.X/layers/openstreetmap__osm.disy.net/.tiles/1.0.0/openstreetmap__osm.disy.net/default/&apos;

            at org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.write(TarArchiveOutputStream.java:385)

            at java.io.OutputStream.write(Unknown Source)

            at org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.writePaxHeaders(TarArchiveOutputStream.java:485)

            at org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.putArchiveEntry(TarArchiveOutputStream.java:312)

            at net.disy.lib.io.tar.TarUtilities.addFile(TarUtilities.java:116)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:158)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:162)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:162)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:162)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:162)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:162)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:162)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:162)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:162)

            at net.disy.lib.io.tar.TarUtilities.addDirectory(TarUtilities.java:162)

            at net.disy.lib.io.tar.TarUtilities.tar(TarUtilities.java:77)

            at net.disy.lib.io.tar.TarUtilities.tar(TarUtilities.java:42)

            at net.disy.gisterm.tilecacheset.export.TileCacheSetExporter.tarTreeStructure(TileCacheSetExporter.java:262)

            at net.disy.gisterm.tilecacheset.export.TileCacheSetExporter.export(TileCacheSetExporter.java:111)

            at net.disy.gisterm.tilecacheset.desktop.controller.ExportController$1.run(ExportController.java:81)

            ... 2 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Informal source code investigation points to the problem being that for directory entries the code assumes that the length is 0 in putArchiveEntry (see TarArchiveOutputStream:321 ) but when writing the data, it actually writes some data (the filename) and the length written (filename size) is larger than the length expected (0).&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 12.04 Linux 64 bit, Windows 7 64-bit&lt;/p&gt;</environment>
        <key id="12609756">COMPRESS-203</key>
            <summary>Long directory names can not be stored in a tar archive because of error when writing PAX headers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aggregat4">Boris Terzic</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Oct 2012 14:01:05 +0000</created>
                <updated>Fri, 21 Feb 2014 14:27:56 +0000</updated>
                            <resolved>Thu, 27 Dec 2012 21:35:09 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13540168" author="bodewig" created="Thu, 27 Dec 2012 21:28:59 +0000"  >&lt;p&gt;The problem is not with directories with long names per se, it happens when the name of the PAX header entry ends with a slash - which could happen for short non-ASCII directory names or long file names if the name is truncated in the wrong place.  I&apos;m working on a fix.&lt;/p&gt;</comment>
                            <comment id="13540171" author="bodewig" created="Thu, 27 Dec 2012 21:35:09 +0000"  >&lt;p&gt;fixed with svn revision 1426334&lt;/p&gt;</comment>
                            <comment id="13899352" author="paburk" created="Wed, 12 Feb 2014 17:59:45 +0000"  >&lt;p&gt;We are running in troubles with an example like this:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;0123456789/012345678901234567890123456789012345678901234567890123456789012345678901&lt;/tt&gt;&lt;b&gt;&#220;&lt;/b&gt;&lt;tt&gt;345678901234567890123456789.txt&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Please notice the character &lt;b&gt;&apos;&#220;&apos;&lt;/b&gt; in the file name.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;stripTo7Bits(entryName)&lt;/tt&gt; transforms the name to this string:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;./PaxHeaders.X/0123456789/012345678901234567890123456789012345678901234567890123456789012345678901\345678901234567890123456789.txt&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Then it gets truncated to:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;./PaxHeaders.X/0123456789/012345678901234567890123456789012345678901234567890123456789012345678901&lt;/tt&gt;\&lt;/p&gt;

&lt;p&gt;After that, the constructor of TarArchiveEntry does a normalization on the file name to change windows file separators to slashes:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;./PaxHeaders.X/0123456789/012345678901234567890123456789012345678901234567890123456789012345678901/&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;At the end &lt;tt&gt;isDir&lt;/tt&gt; is true:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;boolean isDir = name.endsWith(&quot;/&quot;);&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Our suggestion would be to change this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;TarArchiveOutputStream.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (name.endsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)) {
    &lt;span class=&quot;code-comment&quot;&gt;// TarEntry&apos;s constructor would think &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is a directory
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// and not allow any data to be written
&lt;/span&gt;     name = name.substring(0, name.length() - 1);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;TarArchiveOutputStream.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (name.endsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;) || name.endsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;\\&quot;&lt;/span&gt;)) {
    &lt;span class=&quot;code-comment&quot;&gt;// TarEntry&apos;s constructor would think &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is a directory
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// and not allow any data to be written
&lt;/span&gt;    name = name.substring(0, name.length() - 1);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We think that the problem also could be avoided by modifying the method &lt;tt&gt;stripTo7Bits&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13904196" author="bodewig" created="Tue, 18 Feb 2014 16:08:07 +0000"  >&lt;p&gt;Patrik, could you please open a new ticket for this as it is certainly related but still a different problem?  And we&apos;d also get better tracking of which version is affected by which of the two bugs.&lt;/p&gt;

&lt;p&gt;BTW, I agree that fixing &lt;tt&gt;stripTo7Bits&lt;/tt&gt; is the better place to avoid the problem.&lt;/p&gt;</comment>
                            <comment id="13908358" author="bodewig" created="Fri, 21 Feb 2014 14:27:56 +0000"  >&lt;p&gt;I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-265&quot; title=&quot;PAX headers with &amp;quot;strange&amp;quot; names can not be written&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-265&quot;&gt;&lt;del&gt;COMPRESS-265&lt;/del&gt;&lt;/a&gt; for the new issue&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Dec 2012 21:28:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244846</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05u8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31995</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-201] No constructor to create a TarArchiveEntry link with leading slash</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-201</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I want to create a link with a leading slash and put it in a tar archive (Debian package).&lt;/p&gt;

&lt;p&gt;The following constructors are provided&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TarArchiveEntry(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; preserveLeadingSlashes)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TarArchiveEntry(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; linkFlag)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but there is no&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; TarArchiveEntry(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; linkFlag, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; preserveLeadingSlashes)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so I have to overwrite the name using setName(String) which is not very clean.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12607069">COMPRESS-201</key>
            <summary>No constructor to create a TarArchiveEntry link with leading slash</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tmortagne">Thomas Mortagne</reporter>
                        <labels>
                            <label>link</label>
                            <label>tar</label>
                    </labels>
                <created>Tue, 11 Sep 2012 14:37:53 +0000</created>
                <updated>Tue, 1 Jan 2013 17:31:02 +0000</updated>
                            <resolved>Tue, 1 Jan 2013 17:31:02 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13541659" author="bodewig" created="Tue, 1 Jan 2013 17:31:02 +0000"  >&lt;p&gt;added new constructor with svn revision 1427488&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Jan 2013 17:31:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244873</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05uhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32038</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-200] Round trip conversion with more than 66 US-ASCII characters fails when using TarArchiveOutputStream.LONGFILE_GNU</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-200</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When using TarArchiveOutputStream.LONGFILE_GNU with an entry name of more than 66 US-ASCII characters, a round trip conversion (write the entry, then read it back) fails because of several bugs in TarArchiveOutputStream and TarArchiveInputStream.&lt;/p&gt;

&lt;p&gt;This has been reported as an issue to TrueZIP, which is why you can find a more detailed analysis here: &lt;a href=&quot;http://java.net/jira/browse/TRUEZIP-286&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.net/jira/browse/TRUEZIP-286&lt;/a&gt; .&lt;/p&gt;</description>
                <environment>&lt;p&gt;Any&lt;/p&gt;</environment>
        <key id="12604081">COMPRESS-200</key>
            <summary>Round trip conversion with more than 66 US-ASCII characters fails when using TarArchiveOutputStream.LONGFILE_GNU</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="christians">Christian Schlichtherle</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Aug 2012 17:06:55 +0000</created>
                <updated>Thu, 27 Dec 2012 21:15:14 +0000</updated>
                            <resolved>Thu, 27 Dec 2012 21:07:11 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13439391" author="christians" created="Wed, 22 Aug 2012 10:10:18 +0000"  >&lt;p&gt;The same problem applies when using LONGFILE_POSIX.&lt;/p&gt;</comment>
                            <comment id="13483217" author="christians" created="Wed, 24 Oct 2012 13:28:50 +0000"  >&lt;p&gt;Two months later still nobody cares?&lt;/p&gt;</comment>
                            <comment id="13483222" author="garydgregory" created="Wed, 24 Oct 2012 13:35:50 +0000"  >&lt;p&gt;As a volunteer here, I can say that if you are not happy with the current state of an issue, the best way to move it forward is to put some elbow grease into it and provide a patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13483230" author="christians" created="Wed, 24 Oct 2012 13:52:40 +0000"  >&lt;p&gt;Thanks, but I&apos;m busy taking care of my own mess.&lt;/p&gt;</comment>
                            <comment id="13529096" author="janos" created="Tue, 11 Dec 2012 16:27:34 +0000"  >&lt;p&gt;This issue is hitting us TrueZip users too. Speaking of which big thanks to Christian for TrueZip.&lt;/p&gt;</comment>
                            <comment id="13540084" author="bodewig" created="Thu, 27 Dec 2012 18:12:28 +0000"  >&lt;p&gt;First of all sorry for the long hiatus, I won&apos;t promise any changes, but let&apos;s see.&lt;/p&gt;

&lt;p&gt;I&apos;ve committed a unit test with svn revision 1426276 - &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/compress/trunk/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStreamTest.java?r1=1426276&amp;amp;r2=1426275&amp;amp;pathrev=1426276&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/commons/proper/compress/trunk/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStreamTest.java?r1=1426276&amp;amp;r2=1426275&amp;amp;pathrev=1426276&lt;/a&gt; and it passes.&lt;/p&gt;

&lt;p&gt;I&apos;ll look into Christian&apos;s analysis more closely soonish - if we really are using the ByteBuffer the wrong way (quite possible), then this may also affect the zip package.  Anyway, it would be good if we had a unit test that actually failed before I start &quot;fixing&quot; it.&lt;/p&gt;

&lt;p&gt;Unfortunately java.net is in a bad mood right now and I can&apos;t get to the thread refered to in the JIRA ticket over there - and I can&apos;t create an account in TrueZIP&apos;s JIRA right now either.&lt;/p&gt;</comment>
                            <comment id="13540141" author="bodewig" created="Thu, 27 Dec 2012 20:41:36 +0000"  >&lt;p&gt;OK, I now have a test case, I need to specify an encoding explicitly since the bug doesn&apos;t raise its head when using FallBackZipEncoding.&lt;/p&gt;</comment>
                            <comment id="13540151" author="bodewig" created="Thu, 27 Dec 2012 21:07:11 +0000"  >&lt;p&gt;fixed with svn revision 1426319&lt;/p&gt;</comment>
                            <comment id="13540156" author="christians" created="Thu, 27 Dec 2012 21:13:35 +0000"  >&lt;p&gt;Thanks a lot! Where is the snapshot repository I can point Maven to?&lt;/p&gt;</comment>
                            <comment id="13540157" author="christians" created="Thu, 27 Dec 2012 21:15:14 +0000"  >&lt;p&gt;Nevermind, I&apos;ll build it myself.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Oct 2012 13:35:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250763</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b19b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62316</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-199] Introduction of XZ breaks OSGi support</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-199</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The introduction of XZ seems to break the OSGi support for the compress bundle.&lt;/p&gt;

&lt;p&gt;The XZ component doesn&apos;t seem to be included or referred to (dependency).&lt;/p&gt;

&lt;p&gt;!ENTRY org.apache.commons.compress 4 0 2012-08-20 17:06:19.339&lt;br/&gt;
!MESSAGE FrameworkEvent ERROR&lt;br/&gt;
!STACK 0&lt;br/&gt;
org.osgi.framework.BundleException: The bundle &quot;org.apache.commons.compress_1.4.1 &lt;span class=&quot;error&quot;&gt;&amp;#91;20&amp;#93;&lt;/span&gt;&quot; could not be resolved. Reason: Missing Constraint: Import-Package: org.tukaani.xz; version=&quot;0.0.0&quot;&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(AbstractBundle.java:1327)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolutionFailureException(AbstractBundle.java:1311)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:323)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:389)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1131)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)&lt;br/&gt;
        at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)&lt;br/&gt;
        at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)&lt;/p&gt;

&lt;p&gt;Included in my project by maven and&lt;br/&gt;
&amp;lt;dependency&amp;gt;&lt;br/&gt;
	&amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;&lt;br/&gt;
	&amp;lt;artifactId&amp;gt;commons-compress&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
	&amp;lt;version&amp;gt;1.4.1&amp;lt;/version&amp;gt;&lt;br/&gt;
&amp;lt;/dependency&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Vista &amp;amp; RHEL 6.2, Java 1.6.0_33, Equinox  org.eclipse.osgi_3.7.2.v20120110-1415.jar.&lt;/p&gt;</environment>
        <key id="12604080">COMPRESS-199</key>
            <summary>Introduction of XZ breaks OSGi support</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gertoft">Niklas Gertoft</reporter>
                        <labels>
                            <label>osgi</label>
                    </labels>
                <created>Mon, 20 Aug 2012 17:04:15 +0000</created>
                <updated>Tue, 5 Mar 2013 05:20:15 +0000</updated>
                            <resolved>Thu, 27 Dec 2012 18:29:05 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13452971" author="andreas.aronsson" created="Tue, 11 Sep 2012 12:29:24 +0000"  >&lt;p&gt;It appears to me that the org.tukaani.xz does not have the correct entries in the MANIFEST.MF to allow it to be used as a bundle. &lt;/p&gt;</comment>
                            <comment id="13453000" author="gertoft" created="Tue, 11 Sep 2012 13:21:39 +0000"  >&lt;p&gt;That was also my guess. What is the requirement on commons projects, must they stay OSGi compliant?&lt;/p&gt;

&lt;p&gt;If so that gives that either (push for an) update (of) org.tukaani.xz, or removing the support as implemented today until an OSGi compliant version is possible!?&lt;/p&gt;</comment>
                            <comment id="13453035" author="andreas.aronsson" created="Tue, 11 Sep 2012 14:02:01 +0000"  >&lt;p&gt;Yes that would be the options available AFAICT. I could not find any references to bundle information in the build.xml of the git repo for tukaani so they would need a patch too before a possible new release with the required metadata. &lt;/p&gt;</comment>
                            <comment id="13536662" author="jukkaz" created="Thu, 20 Dec 2012 01:15:51 +0000"  >&lt;p&gt;The following patch implements an alternative solution by marking the xz dependency as optional when working with OSGi.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/pom.xml b/pom.xml
index 110e618..f51d628 100644
--- a/pom.xml
+++ b/pom.xml
@@ -151,6 +151,15 @@ These include: bzip2, gzip, pack200, xz and ar, cpio, jar,
           &amp;lt;/archive&amp;gt;
         &amp;lt;/configuration&amp;gt;
       &amp;lt;/plugin&amp;gt;
+      &amp;lt;plugin&amp;gt;
+        &amp;lt;groupId&amp;gt;org.apache.felix&amp;lt;/groupId&amp;gt;
+        &amp;lt;artifactId&amp;gt;maven-bundle-plugin&amp;lt;/artifactId&amp;gt;
+        &amp;lt;configuration&amp;gt;
+          &amp;lt;instructions&amp;gt;
+            &amp;lt;Import-Package&amp;gt;org.tukaani.xz;resolution:=optional&amp;lt;/Import-Package
+          &amp;lt;/instructions&amp;gt;
+        &amp;lt;/configuration&amp;gt;
+      &amp;lt;/plugin&amp;gt;
     &amp;lt;/plugins&amp;gt;
   &amp;lt;/build&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13540089" author="bodewig" created="Thu, 27 Dec 2012 18:21:22 +0000"  >&lt;p&gt;AFAIU people who use Compress as OSGi bundle wouldn&apos;t be able to use XZ compression as long as XZ for Java doesn&apos;t provide a bundle anyway - so marking it optional seems like a wonderful approach.  I&apos;ll commit Jukka&apos;s patch and reach out to Lasse to see whether there is an easy way for him to turn the next XZ for Java releases into bundles as well.&lt;/p&gt;</comment>
                            <comment id="13540093" author="bodewig" created="Thu, 27 Dec 2012 18:29:05 +0000"  >&lt;p&gt;applied Jukka&apos;s patch with svn revision 1426283&lt;/p&gt;</comment>
                            <comment id="13567662" author="bodewig" created="Thu, 31 Jan 2013 14:22:21 +0000"  >&lt;p&gt;XZ for Java 1.2 has just been released which provides a proper OSGi bundle.  I&apos;ve upgraded the dependency but using this one in an OSGi context might be a good workaround until Compress 1.5 is out.&lt;/p&gt;</comment>
                            <comment id="13592930" author="mquigley" created="Tue, 5 Mar 2013 01:50:46 +0000"  >&lt;p&gt;So will we be able to use Compress &lt;em&gt;without&lt;/em&gt; XZ after this patch is applied?  This is unnecessarily bloating my Android project, which does &lt;em&gt;not&lt;/em&gt; need XZ support but Compress crashes when the xz-lib is not bundled.&lt;/p&gt;</comment>
                            <comment id="13593081" author="bodewig" created="Tue, 5 Mar 2013 05:20:15 +0000"  >&lt;p&gt;As far as I understand it, yes.  The dependency is marked optional so it should be possible to use Compress in an OSGi context without XZ being present.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Sep 2012 12:29:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244874</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05ui7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-198] ZipArchiveInputStream truncates file in some condition</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-198</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ZipArchiveInputStream in some special situation truncates file silently without warning. The problem occurs when the source stream is a stream which does not support mark function and this stream is encapsulated in BufferedInputStream.&lt;br/&gt;
This behaviour can be easily reproduced.&lt;/p&gt;

&lt;p&gt;The test code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Test.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/**
 * Unzips test file and demonstrates the problem.
 * 
 *
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test {

    /**
     * Silly Stream.
     * It simulates situation, when mark function is not supported.
     *
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SillyStream &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; InputStream {
        FileInputStream source;
        
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; SillyStream(FileInputStream source) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.source = source;
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; read() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; source.read();
        }
        
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void close() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
            source.close();
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        File exportDirectory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;out&quot;&lt;/span&gt;);
        
        FileInputStream fis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;test.zip&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;//encapsulating with silly stream to simulate situation when mark function is not supported
&lt;/span&gt;        SillyStream ss = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SillyStream(fis);
        &lt;span class=&quot;code-comment&quot;&gt;//encapsulating with buffered stream - Buffered stream supports mark function
&lt;/span&gt;        BufferedInputStream bs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedInputStream(ss,30000);
        
        ZipArchiveInputStream zip = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveInputStream(bs);
        ZipArchiveEntry entry;
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((entry = zip.getNextZipEntry()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            File newFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(
                    exportDirectory.getAbsolutePath() + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;
                            + entry.getName());
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry.isDirectory()) {
                createDir(newFile);
                &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
            }
            createFile(newFile);
            FileOutputStream fos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(newFile);
            BufferedOutputStream bfos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedOutputStream(
                    fos);
            
            &lt;span class=&quot;code-comment&quot;&gt;//Buffered input stream is necessary there to simulate the 
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;//problem
&lt;/span&gt;            InputStream is = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedInputStream(zip);
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ch;
            
            &lt;span class=&quot;code-comment&quot;&gt;//silly reading &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; by &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;((ch = is.read()) != -1) {
                bfos.write(ch);
            }
            
            bfos.flush();
            bfos.close();
        }
        zip.close();

    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void createFile(File file) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;File:&quot;&lt;/span&gt; + file.getAbsolutePath());
                
        File parent = file.getParentFile();
        parent.mkdirs();
              
        file.createNewFile();        
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void createDir(File file) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Dir:&quot;&lt;/span&gt; + file.getAbsolutePath());
        file.mkdirs();
    }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The test file is there (300MB):&lt;br/&gt;
&lt;a href=&quot;http://uloz.to/x9kJLrt/test-zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://uloz.to/x9kJLrt/test-zip&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The ZIP file was created by common compress.&lt;/p&gt;

&lt;p&gt;The problem can be found in file txt/1_0050.tif.txt. The real size is 4300 bytes but after decompress with java code it has only 4240 bytes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12601341">COMPRESS-198</key>
            <summary>ZipArchiveInputStream truncates file in some condition</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="phaphe">phaphe</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Aug 2012 10:06:36 +0000</created>
                <updated>Tue, 14 Aug 2012 23:11:21 +0000</updated>
                            <resolved>Tue, 14 Aug 2012 23:11:20 +0000</resolved>
                                    <version>1.4.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13429040" author="sebb@apache.org" created="Mon, 6 Aug 2012 09:20:08 +0000"  >&lt;p&gt;Cannot access the test file; please attach the smallest possible example to the issue.&lt;br/&gt;
Or, better yet, create the sample from the source tree as part of the test case.&lt;/p&gt;

&lt;p&gt;Not sure the code example makes much sense.&lt;br/&gt;
The ZipArchiveInputStream stream already buffers internally.&lt;br/&gt;
It does not make sense to wrap it in a BufferedInputStream for each file.&lt;/p&gt;</comment>
                            <comment id="13434618" author="sebb@apache.org" created="Tue, 14 Aug 2012 23:11:21 +0000"  >&lt;p&gt;No response.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 Aug 2012 09:20:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>293617</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0th73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-197] Tar file for Android backup cannot be read</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-197</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Attached tar file was generated by some kind of backup tool on Android. Normal tar utilities seem to handle it fine, but Commons Compress doesn&apos;t.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalArgumentException: Invalid byte 0 at offset 5 in &apos;01750{NUL}{NUL}{NUL}&apos; len=8
    at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:99)
    at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:788)
    at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:308)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12601156">COMPRESS-197</key>
            <summary>Tar file for Android backup cannot be read</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="trejkaz">Trejkaz</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Thu, 2 Aug 2012 02:21:52 +0000</created>
                <updated>Sun, 5 Aug 2012 19:55:57 +0000</updated>
                            <resolved>Sun, 5 Aug 2012 19:55:57 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13428903" author="jukkaz" created="Sun, 5 Aug 2012 19:55:57 +0000"  >&lt;p&gt;The attached file contains a field with three trailing nul bytes, while Commons Compress only accepted one or two. In revision 1369655 relaxed that constraint to allow any number of trailing nuls or spaces.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12538862" name="android-backup.tar" size="5120" author="trejkaz" created="Thu, 2 Aug 2012 02:22:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 Aug 2012 19:55:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251090</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b493:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-194] Unable to create a TAR file that contains an entry which is &gt;8 GB in size. </title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-194</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The common-compress-1.4.1 api says it supports unlimited file sizes for tar and untar operations. &lt;a href=&quot;http://ant.apache.org/antlibs/compress/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ant.apache.org/antlibs/compress/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Only Untar operations on a file &amp;gt; 8GB is fixed,&lt;/p&gt;

&lt;p&gt;But creating a tar on a file &amp;gt;8GB is not working.&lt;/p&gt;

&lt;p&gt;When I try to do  &quot; tarOutputStream.putArchiveEntry(archiveEntry); &quot; &lt;br/&gt;
i get the below exception. &lt;br/&gt;
java.lang.RuntimeException: entry size &apos;9633985364&apos; is too big ( &amp;gt; 8589934591 )&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.failForBigNumber(TarArchiveOutputStream.java:572)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.failForBigNumbers(TarArchiveOutputStream.java:557)&lt;br/&gt;
	at org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.putArchiveEntry(TarArchiveOutputStream.java:297)&lt;/p&gt;

&lt;p&gt;Looking for a fix .. &lt;/p&gt;</description>
                <environment>&lt;p&gt;I am using win xp and Red HatLinux 5.1v, but this should be platform independent.&lt;/p&gt;</environment>
        <key id="12597717">COMPRESS-194</key>
            <summary>Unable to create a TAR file that contains an entry which is &gt;8 GB in size. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jessy_2012">Jessy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jul 2012 08:48:38 +0000</created>
                <updated>Wed, 28 Nov 2012 05:57:06 +0000</updated>
                            <resolved>Sat, 7 Jul 2012 05:10:35 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13408577" author="bodewig" created="Sat, 7 Jul 2012 05:10:35 +0000"  >&lt;p&gt;The docs of Ant&apos;s compress Antlib are not exactly Commons Compress&apos; docs &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;If you want to create archives with big files you have to explicitly enable it by setting bigNumberMode to something other than TarArchiveOutputStream.BIGNUMBER_ERROR (which is the default), i.e. you have to chose between posix and star modes.&lt;/p&gt;

&lt;p&gt;In the case of the Compress Antlib it means you have to chose a format that supports big files in the tar task, i.e. &quot;star&quot;, &quot;gnu&quot; or &quot;posix&quot;.&lt;/p&gt;</comment>
                            <comment id="13409300" author="jessy_2012" created="Mon, 9 Jul 2012 10:03:54 +0000"  >&lt;p&gt;Stefan,&lt;/p&gt;

&lt;p&gt;I tried to setBigNumberMode to tarOutputStream.BIGNUMBER_STAR [ =1 ]. &lt;br/&gt;
However, i found that tarring completes without any exceptions, and shows the tar archive size as 9GB(which is my input of 9GB content file).&lt;br/&gt;
But ,when i tried to unzip using winrar( windows ), I was unsuccessful in opening this tar. Got the error dialog &quot;The archive is corrupt&#8221; &lt;br/&gt;
When I tried to open the tar thru windows right click menu , I found my content file size is 0 bytes. I have taken care to close all streams . &lt;br/&gt;
I have attached my code snippet with this thread. &lt;/p&gt;

&lt;p&gt;Could you kindly look at my below code snippet and suggest what might be the rootcause for this. &lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Jes&lt;/p&gt;</comment>
                            <comment id="13410045" author="bodewig" created="Tue, 10 Jul 2012 04:35:57 +0000"  >&lt;p&gt;I don&apos;t know which dialect of tar Winrar supports, but I&apos;d rather expect it to support POSIX/PAX than STAR.  In fact it is possible it doesn&apos;t support either.  The same is true for right-clicking on Windows (I didn&apos;t know it would support tar at all).&lt;/p&gt;

&lt;p&gt;If I was you I&apos;d try POSIX and if that fails research if either of your targets supports tars with entries bigger than 8GB at all - and if so which dialect they want to speak.&lt;/p&gt;</comment>
                            <comment id="13410055" author="jessy_2012" created="Tue, 10 Jul 2012 05:15:09 +0000"  >&lt;p&gt;Stefan,&lt;/p&gt;

&lt;p&gt;Thank You for your timely response.&lt;/p&gt;

&lt;p&gt;I ported the tar archive to linux box and did untarring. It looks all good with no loss of data. Have used STAR .&lt;br/&gt;
However, winrar in windows does not support extracting tar file of &amp;gt;8GB . Had to extract using 7-zip  to extract successfully to view the contents. &lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13505239" author="jessy_2012" created="Wed, 28 Nov 2012 05:57:06 +0000"  >&lt;p&gt;Well Done &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12535641" name="tarImplntion.txt" size="4104" author="jessy_2012" created="Mon, 9 Jul 2012 10:02:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 7 Jul 2012 05:10:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s3dj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>162023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-193] java.io.IOException: This archives contains unclosed entries.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-193</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I am getting java.io.IOException: This archives contains unclosed entries.&lt;br/&gt;
Below is the code. Any help is much appreciated&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File output = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;c:\\testdata&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;shishir.zip&quot;&lt;/span&gt;); 
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File file1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File (&lt;span class=&quot;code-quote&quot;&gt;&quot;C:\\testdata\test1.xml&quot;&lt;/span&gt;); 
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File file2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File (&lt;span class=&quot;code-quote&quot;&gt;&quot;C:\\testdata\test2.xml&quot;&lt;/span&gt;); 

&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; OutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(output); 
ArchiveOutputStream os = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; 
FileInputStream input1=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
FileInputStream input2=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { 
    os = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArchiveStreamFactory() 
        .createArchiveOutputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;, out); 
    os.putArchiveEntry(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveEntry(&lt;span class=&quot;code-quote&quot;&gt;&quot;testdata\test1.xml&quot;&lt;/span&gt;)); 
    input1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(file1);
    IOUtils.copy(input1, os); 
    input1.close();
    os.closeArchiveEntry(); 
    input2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(file2);
    input2.close();
    os.putArchiveEntry(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveEntry(&lt;span class=&quot;code-quote&quot;&gt;&quot;testdata\test2.xml&quot;&lt;/span&gt;)); 
    IOUtils.copy(input2, os); 
    os.closeArchiveEntry(); 
    os.finish();
} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; { 
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (os != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        os.close(); 
    }&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (out != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        out.close();
    } 
} 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows Server 2008 R2&lt;/p&gt;</environment>
        <key id="12597427">COMPRESS-193</key>
            <summary>java.io.IOException: This archives contains unclosed entries.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shishir06">Shishir goswami</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Jul 2012 09:56:27 +0000</created>
                <updated>Sat, 7 Jul 2012 05:03:43 +0000</updated>
                            <resolved>Fri, 6 Jul 2012 17:06:16 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13408155" author="sebb@apache.org" created="Fri, 6 Jul 2012 17:06:16 +0000"  >&lt;p&gt;JIRA is not a support forum.&lt;/p&gt;

&lt;p&gt;Please subscribe to the Commons user list and ask there.&lt;/p&gt;</comment>
                            <comment id="13408575" author="bodewig" created="Sat, 7 Jul 2012 05:03:19 +0000"  >&lt;p&gt;you&apos;d get that exception when an exception is thrown between any of the putArchiveEntry and corresponding closeArchiveEntry calls.&lt;/p&gt;

&lt;p&gt;Otherwise, what Sebb said.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Jul 2012 17:06:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>293618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0th9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170106</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-191] Too relaxed tar detection in ArchiveStreamFactory</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-191</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The relaxed tar detection logic added in &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt; unfortunately matches also some non-tar files like a &lt;a href=&quot;https://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/test/resources/test-documents/testAIFF.aif&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;test AIFF file&lt;/a&gt; that Apache Tika uses. It would be good to improve the detection heuristics to still match files like the one in &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt; but avoid false positives like the AIFF file in Tika.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12596490">COMPRESS-191</key>
            <summary>Too relaxed tar detection in ArchiveStreamFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jukkaz">Jukka Zitting</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Sat, 30 Jun 2012 08:20:58 +0000</created>
                <updated>Thu, 1 Nov 2012 18:03:31 +0000</updated>
                            <resolved>Sat, 7 Jul 2012 05:32:41 +0000</resolved>
                                    <version>1.2</version>
                    <version>1.3</version>
                    <version>1.4</version>
                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13404430" author="jukkaz" created="Sat, 30 Jun 2012 09:05:54 +0000"  >&lt;p&gt;The attached patch adds heuristics for verifying the tar header checksum, and uses that mechanism to better avoid false positives in ArchiveStreamFactory.&lt;/p&gt;</comment>
                            <comment id="13408583" author="bodewig" created="Sat, 7 Jul 2012 05:32:41 +0000"  >&lt;p&gt;patch applied and a testcase added based on Tika&apos;s AIFF file.&lt;/p&gt;

&lt;p&gt;svn revisions 1358504 and 1358506&lt;/p&gt;

&lt;p&gt;Many thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12614405">COMPRESS-209</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12534095" name="0001-COMPRESS-191-Too-relaxed-tar-detection-in-ArchiveStr.patch" size="17438" author="jukkaz" created="Sat, 30 Jun 2012 09:05:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 7 Jul 2012 05:32:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251091</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b49b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-189] ZipArchiveInputStream may read 0 bytes when reading from a nested Zip file</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-189</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When the following code is run an error &quot;Underlying input stream returned zero bytes&quot; is produced. If the commented line is uncommented it can be seen that the ZipArchiveInputStream returned 0 bytes. This only happens the first time read is called, subsequent calls work as expected i.e. the following code actually works correctly with that line uncommented!&lt;/p&gt;

&lt;p&gt;The zip file used to produce this behavious is available at &lt;a href=&quot;http://wwmm.ch.cam.ac.uk/~dl387/test.ZIP&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wwmm.ch.cam.ac.uk/~dl387/test.ZIP&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If this is not the correct way of processing a zip file of zip files please let me know. Also I believe whilst ZipFile can iterate over entries fast due to being able to look at the master table whilst ZipArchiveInputStream cannot. Is there anyway of instantiating a ZipFile from a zip file inside another zip file without first extracting the nested zip file?&lt;/p&gt;

&lt;p&gt;    ZipFile zipFile = new ZipFile(&quot;C:/test.ZIP&quot;);&lt;br/&gt;
    for (Enumeration&amp;lt;ZipArchiveEntry&amp;gt; iterator = zipFile.getEntries(); iterator.hasMoreElements(); ) {&lt;br/&gt;
      ZipArchiveEntry entry = iterator.nextElement();&lt;br/&gt;
      InputStream is = new BufferedInputStream(zipFile.getInputStream(entry));&lt;br/&gt;
      ZipArchiveInputStream zipInput = new ZipArchiveInputStream(is);&lt;br/&gt;
      ZipArchiveEntry innerEntry;&lt;br/&gt;
      while ((innerEntry = zipInput.getNextZipEntry()) != null){&lt;br/&gt;
        if (innerEntry.getName().endsWith(&quot;XML&quot;))&lt;/p&gt;
{
          //zipInput.read();
          System.out.println(IOUtils.toString(zipInput));
        }
&lt;p&gt;      }&lt;br/&gt;
    }&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 1.6 64-bit, Windows 7&lt;/p&gt;</environment>
        <key id="12595985">COMPRESS-189</key>
            <summary>ZipArchiveInputStream may read 0 bytes when reading from a nested Zip file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dan2097">Daniel Lowe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jun 2012 21:30:39 +0000</created>
                <updated>Sat, 5 Jan 2013 13:09:13 +0000</updated>
                            <resolved>Fri, 28 Dec 2012 06:55:18 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13467058" author="dan2097" created="Mon, 1 Oct 2012 18:29:09 +0000"  >&lt;p&gt;This issue can be worked around by reading while 0 or more bytes are read. Unfortunately Java&apos;s built in InputStreamReader will throw an exception is 0 bytes are read which is the underlying reason why in the example above Commons-IO throws an exception.&lt;/p&gt;

&lt;p&gt;Marking and resetting seems to be a reasonable way to workaround the problem:&lt;br/&gt;
BufferedInputStream archiveBis = new BufferedInputStream(archiveInput);&lt;br/&gt;
archiveBis.mark(1);&lt;br/&gt;
archiveBis.read();//if the bug is encountered nothing will be read&lt;br/&gt;
archiveBis.reset();&lt;/p&gt;

&lt;p&gt;Obviously a proper fix would be better&lt;/p&gt;</comment>
                            <comment id="13473473" author="dan2097" created="Wed, 10 Oct 2012 18:59:10 +0000"  >&lt;p&gt;The bug is due to a bug in the implementation of ZipArchiveInputStream&apos;s readDeflated:&lt;/p&gt;

&lt;p&gt;int read = 0;&lt;br/&gt;
try {&lt;br/&gt;
read = inf.inflate(buffer, start, length);&lt;br/&gt;
} catch (DataFormatException e) {&lt;br/&gt;
throw new ZipException(e.getMessage());&lt;br/&gt;
}&lt;br/&gt;
if (read == 0) {&lt;br/&gt;
if (inf.finished()) {&lt;br/&gt;
return -1;&lt;br/&gt;
} else if (buf.lengthOfLastRead == -1) {&lt;br/&gt;
throw new IOException(&quot;Truncated ZIP file&quot;);&lt;br/&gt;
}&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;can return 0&lt;br/&gt;
&quot;A return value of 0 indicates that needsInput() or needsDictionary() should be called in order to determine if more input data or a preset dictionary is required.&quot;&lt;/p&gt;

&lt;p&gt;The assumedly correct implementation in InflaterInputStream:&lt;/p&gt;

&lt;p&gt;int n;&lt;br/&gt;
while ((n = inf.inflate(b, off, len)) == 0) {&lt;br/&gt;
if (inf.finished() || inf.needsDictionary()) {&lt;br/&gt;
reachEOF = true;&lt;br/&gt;
return -1;&lt;br/&gt;
}&lt;br/&gt;
if (inf.needsInput()) {&lt;br/&gt;
fill();&lt;br/&gt;
}&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;calls the method in a while loop to avoid this problem.&lt;/p&gt;</comment>
                            <comment id="13498834" author="dma_k" created="Fri, 16 Nov 2012 14:24:57 +0000"  >&lt;p&gt;I confirm the problem. I agree that &lt;tt&gt;java.util.zip.Inflater&lt;/tt&gt; is not used according to JavaDocs and that causes the problem in some cases.&lt;/p&gt;</comment>
                            <comment id="13540373" author="bodewig" created="Fri, 28 Dec 2012 06:55:18 +0000"  >&lt;p&gt;Many thanks for the analysis.&lt;/p&gt;

&lt;p&gt;fixed with svn revision 1426417.&lt;/p&gt;

&lt;p&gt;Can we ship the test ZIP as part of Commons Compress&apos; source distribution under the Apache License or does it contain sensitive information?&lt;/p&gt;

&lt;p&gt;Your original code works if you use the stream directly without a BufferedInputStream, BTW.&lt;/p&gt;</comment>
                            <comment id="13541130" author="dan2097" created="Sun, 30 Dec 2012 18:32:01 +0000"  >&lt;p&gt;Yes you can include the test ZIP in Commons Compress. I believe the content is in the public domain as it comes from the USPTO patent database.&lt;br/&gt;
Thanks for fixing this!&lt;/p&gt;

&lt;p&gt;On an unrelated topic, I&apos;ve added the exact changes required to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-205&quot; title=&quot;Unit tests can fail when path to project is non-trivial (fix in description)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-205&quot;&gt;&lt;del&gt;COMPRESS-205&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13541346" author="bodewig" created="Mon, 31 Dec 2012 11:44:54 +0000"  >&lt;p&gt;Hmm, I&apos;ll look around the website in time before the next release to asses whether it really is suitable to be included.  Maybe there is an easy way to create a similar testcase ourselves.&lt;/p&gt;

&lt;p&gt;As for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-205&quot; title=&quot;Unit tests can fail when path to project is non-trivial (fix in description)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-205&quot;&gt;&lt;del&gt;COMPRESS-205&lt;/del&gt;&lt;/a&gt;, I&apos;ve seen it - it will take some time until I get to it.&lt;/p&gt;</comment>
                            <comment id="13544696" author="bodewig" created="Sat, 5 Jan 2013 13:09:13 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The U.S. Patent and Trademark Office (USPTO), a non-commercial federal entity, provides electronic data products as one method of information dissemination.  There are no restrictions on the use of the data in these products, unless otherwise prohibited by law or specific agreement.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;in &lt;a href=&quot;http://www.uspto.gov/products/catalog/termsandconditions.doc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.uspto.gov/products/catalog/termsandconditions.doc&lt;/a&gt; linked from &lt;a href=&quot;http://www.uspto.gov/products/catalog/index.jsp&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.uspto.gov/products/catalog/index.jsp&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve added the zip as a testcase.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Nov 2012 14:24:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244848</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05u8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31997</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-187] ZipArchiveInputStream and ZipFile don&apos;t produce equals ZipArchiveEntry instances</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-187</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I&apos;m trying to use a ZipArchiveEntry coming from ZipArchiveInputStream that I stored somwhere for later with a ZipFile and it does not work.&lt;/p&gt;

&lt;p&gt;The reason is that it can&apos;t find the ZipArchiveEntry in the ZipFile entries map. It is exactly the same zip file but both entries are not equals so the Map#get fail.&lt;/p&gt;

&lt;p&gt;As far as I can see the main difference is that &lt;tt&gt;comment&lt;/tt&gt; is null in ZipArchiveInputStream while it&apos;s en empty string in ZipFile. I looked at ZipArchiveInputStream and it looks like the comment (whatever it is) is simply not parsed while I can find some code related to the comment at the end of ZIipFile#readCentralDirectoryEntry.&lt;/p&gt;

&lt;p&gt;Note that java.util.zip does not have this issue. Did not checked what they do but the zip entries are equals.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12557005">COMPRESS-187</key>
            <summary>ZipArchiveInputStream and ZipFile don&apos;t produce equals ZipArchiveEntry instances</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tmortagne">Thomas Mortagne</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 May 2012 14:00:58 +0000</created>
                <updated>Sun, 3 Jun 2012 15:31:14 +0000</updated>
                            <resolved>Sun, 3 Jun 2012 15:31:13 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13288177" author="bodewig" created="Sun, 3 Jun 2012 15:15:17 +0000"  >&lt;p&gt;The ZIP structure holds information about entries in two places.  First it contains all entries sequentially with some metadata attached to it and at the end it holds the so called central directory which holds all the metadata - including comments - for all entries.  The central directory is the real authority, any entry not listed there is not really part of the archive.&lt;/p&gt;

&lt;p&gt;ZipFile implements parsing ZIP archives correctly, it reads the central directory and from there calculates all necessary data to find the offset of a data entry when it comes to reading an entry.  ZipArchiveInputStream is forced to rely on the subset of metadata that is available with the entires themselves (the so called local file header) - it is supposed to work in streaming mode andcannot wait or the central directory to show up before returning the first result.&lt;/p&gt;

&lt;p&gt;I don&apos;t think java.util.zip works any different from Commons Compress.  In fact ZipEntry doesn&apos;t even override equals so I wouldn&apos;t excpect two ZipEntries to ever be the same, strange.&lt;/p&gt;

&lt;p&gt;We can change the code in equals to make empty comments and null comments compare to equal.  This may work for your particular case but won&apos;t work in general as metadata in local file header and central directory may be different for other fields as well.&lt;/p&gt;</comment>
                            <comment id="13288181" author="bodewig" created="Sun, 3 Jun 2012 15:31:13 +0000"  >&lt;p&gt;should be fixed with svn revision 1345687&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 3 Jun 2012 15:15:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251092</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b49j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-185] BZip2CompressorInputStream truncates files compressed with pbzip2</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-185</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I&apos;m using BZip2CompressorInputStream in Compress 1.3 to decompress a file that was created with pbzip2 1.1.6 (&lt;a href=&quot;http://compression.ca/pbzip2/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://compression.ca/pbzip2/&lt;/a&gt;).  The stream ends early after 900000 bytes, truncating the rest of the pbzip2-compressed file.  Decompressing the file with bunzip2 or compressing the original file with bzip2 both fix the issue.  I think both pbzip2 and Compress are to blame here: pbzip2 apparently does something non-standard when compressing files, and Compress should handle the non-standard format rather than pretending to be done decompressing.  Another option is that I&apos;m doing something wrong; in that case please let me know! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Here&apos;s how the problem can be reproduced:&lt;/p&gt;

&lt;p&gt; 1. Generate a file that&apos;s 900000+ bytes large: dd if=/dev/zero of=1mbfile count=1 bs=1M&lt;br/&gt;
 2. Compress with pbzip2: pbzip2 1mbfile&lt;br/&gt;
 3. Decompress with Bunzip2 class below&lt;br/&gt;
 4. Notice how the resulting 1mbfile is 900000 bytes large, not 1M.&lt;/p&gt;

&lt;p&gt;Now compare to using bunzip2/bzip2:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Do the steps above, but instead of 2, compress with bzip2: bzip2 1mbfile&lt;/li&gt;
	&lt;li&gt;Do the steps above, but instead of 3, decompress with bunzip2: bunzip2 1mbfile.bz2&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;import java.io.*;&lt;br/&gt;
import org.apache.commons.compress.compressors.bzip2.*;&lt;br/&gt;
public class Bunzip2 {&lt;br/&gt;
  public static void main(String[] args) throws Exception {&lt;br/&gt;
    File inFile = new File(args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
    File outFile = new File(args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.substring(0, args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.length() - 4));&lt;br/&gt;
    FileInputStream fis = new FileInputStream(inFile);&lt;br/&gt;
    BZip2CompressorInputStream bz2cis =&lt;br/&gt;
        new BZip2CompressorInputStream(fis);&lt;br/&gt;
    BufferedInputStream bis = new BufferedInputStream(bz2cis);&lt;br/&gt;
    BufferedOutputStream bos = new BufferedOutputStream(&lt;br/&gt;
        new FileOutputStream(outFile));&lt;br/&gt;
    int len;&lt;br/&gt;
    byte[] data = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;1024&amp;#93;&lt;/span&gt;;&lt;br/&gt;
    while ((len = bis.read(data, 0, 1024)) &amp;gt;= 0) &lt;/p&gt;
{
      bos.write(data, 0, len);
    }
&lt;p&gt;   &lt;br/&gt;
    bos.close();&lt;br/&gt;
    bis.close();&lt;br/&gt;
  }&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12548643">COMPRESS-185</key>
            <summary>BZip2CompressorInputStream truncates files compressed with pbzip2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="karsten">Karsten Loesing</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Mar 2012 10:47:51 +0000</created>
                <updated>Sat, 25 Jul 2015 09:00:35 +0000</updated>
                            <resolved>Thu, 29 Mar 2012 11:52:31 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13241158" author="bodewig" created="Thu, 29 Mar 2012 11:52:31 +0000"  >&lt;p&gt;This is &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-146&quot; title=&quot;BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-146&quot;&gt;&lt;del&gt;COMPRESS-146&lt;/del&gt;&lt;/a&gt; which has already been fixed in trunk (and thus will be fixed in 1.4).&lt;/p&gt;</comment>
                            <comment id="13241193" author="karsten" created="Thu, 29 Mar 2012 12:48:34 +0000"  >&lt;p&gt;Huh, you&apos;re right.  I can confirm that trunk solves the problem.  Thanks and sorry for the noise.&lt;/p&gt;</comment>
                            <comment id="13241235" author="bodewig" created="Thu, 29 Mar 2012 13:49:42 +0000"  >&lt;p&gt;Don&apos;t worry.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12515173">COMPRESS-146</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Mar 2012 11:52:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233740</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tgzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170060</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-184] PAX header parser fails for non-ASCII values</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-184</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The current logic parsing PAX extension headers fails if the number of bytes used to encode an entry is different from the number of characters - i.e. for any character outside of the ASCII range as the headers are UTF-8 encoded.  E.g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;11 path=&#228;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;takes 11 bytes (one has to account for the trailing newline) for 10 characters and the parser fails with &quot;Expected 3 chars, read 2&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547793">COMPRESS-184</key>
            <summary>PAX header parser fails for non-ASCII values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Mar 2012 13:33:32 +0000</created>
                <updated>Fri, 23 Mar 2012 13:48:26 +0000</updated>
                            <resolved>Fri, 23 Mar 2012 13:48:26 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13236593" author="bodewig" created="Fri, 23 Mar 2012 13:48:26 +0000"  >&lt;p&gt;fixed with svn revision 1304345&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12545639">COMPRESS-183</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-181] Tar files created by AIX native tar, and which contain symlinks, cannot be read by TarArchiveInputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-181</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;A simple tar file created on AIX using the native (&lt;tt&gt;/usr/bin/tar&lt;/tt&gt; tar utility) &lt;b&gt;and&lt;/b&gt; which contains a symbolic link, cannot be loaded by TarArchiveInputStream:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: Error detected parsing the header
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:201)
	at Extractor.extract(Extractor.java:13)
	at Extractor.main(Extractor.java:28)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:217)
	at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:152)
	at org.apache.tools.ant.taskdefs.Java.run(Java.java:771)
	at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:221)
	at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)
	at org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.Target.performTasks(Target.java:411)
	at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
	at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
	at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
	at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
	at org.apache.tools.ant.Main.runBuild(Main.java:809)
	at org.apache.tools.ant.Main.startAnt(Main.java:217)
	at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
	at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.lang.IllegalArgumentException: Invalid byte 0 at offset 0 in &apos;{NUL}1722000726 &apos; len=12
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:99)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:819)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:314)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:199)
	... 29 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tested with 1.2 and the 1.4 nightly build from Feb 23 (&lt;tt&gt;Implementation-Build: trunk@r1292625; 2012-02-23 03:20:30+0000&lt;/tt&gt;)&lt;/p&gt;</description>
                <environment>&lt;p&gt;AIX 5.3&lt;/p&gt;</environment>
        <key id="12544283">COMPRESS-181</key>
            <summary>Tar files created by AIX native tar, and which contain symlinks, cannot be read by TarArchiveInputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rjclark">Robert Clark</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Feb 2012 17:48:12 +0000</created>
                <updated>Fri, 2 Mar 2012 20:01:49 +0000</updated>
                            <resolved>Fri, 2 Mar 2012 20:01:49 +0000</resolved>
                                    <version>1.2</version>
                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13217327" author="rjclark" created="Mon, 27 Feb 2012 17:49:28 +0000"  >&lt;p&gt;An example tar file, containing a symbolic link, created by the AIX native tar utility&lt;/p&gt;</comment>
                            <comment id="13217827" author="sebb@apache.org" created="Tue, 28 Feb 2012 02:06:02 +0000"  >&lt;p&gt;The problem field is the modification time for the symbolic link, which Compress expects to be either all null or valid octal with trailing null/space.&lt;/p&gt;

&lt;p&gt;Note: 7zip reads the file OK but complains that there is data after the end of the archive.&lt;br/&gt;
It treats the link field as having no mtime.&lt;/p&gt;

&lt;p&gt;I&apos;ve yet to find any documentation that says a leading null is allowed.&lt;br/&gt;
Perhaps AIX tar is being lazy and failing to null the whole mtime field (which Compress could handle).&lt;/p&gt;</comment>
                            <comment id="13218073" author="bodewig" created="Tue, 28 Feb 2012 11:19:23 +0000"  >&lt;p&gt;GNU tar extracts it with a date/time of 1978-02-15 08:55 - which more or less looks as if it had translated the leading null to an ASCII 0 (and it looks as if that was supposed to be an ASCII 1 to match the timestamp of the dir).&lt;/p&gt;
</comment>
                            <comment id="13218093" author="bodewig" created="Tue, 28 Feb 2012 12:28:13 +0000"  >&lt;p&gt;GNU tar from_header in list.c contains a workaround for this case:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  /* Accommodate buggy tar of unknown vintage, which outputs leading
     NUL if the previous field overflows.  */
  where += !*where;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this basically skips the first byte if it is a binary 0.&lt;/p&gt;</comment>
                            <comment id="13218133" author="sebb@apache.org" created="Tue, 28 Feb 2012 13:05:57 +0000"  >&lt;p&gt;I don&apos;t think the previous field has overflowed in this case - it&apos;s all ascii &apos;0&apos;.&lt;/p&gt;

&lt;p&gt;Not sure that the GNU tar approach is sensible as the time value is then meaningless.&lt;br/&gt;
I think it would be better to skip the entire field.&lt;/p&gt;

&lt;p&gt;But do we just skip the field (as if it were all null), or skip it only on &quot;non-strict&quot; mode, or perhaps generate some kind of warning?&lt;/p&gt;</comment>
                            <comment id="13218198" author="bodewig" created="Tue, 28 Feb 2012 14:09:20 +0000"  >&lt;p&gt;It doesn&apos;t look like an overflow was the reason but if you look at the timestamp it certainly reads as if the first byte was a binary 0 by accident (if you put an ASCII 1 in there it is identical to the timestamp of the directory).&lt;/p&gt;

&lt;p&gt;In any case the resulting timestamp is not what it used to be, so using any other timestamp would be as valid as trying to parse the rest.&lt;/p&gt;</comment>
                            <comment id="13218225" author="sebb@apache.org" created="Tue, 28 Feb 2012 14:34:12 +0000"  >&lt;p&gt;I agree - it looks like the first byte was set to null accidentally, or possibly the intention was to invalidate the stamp.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In any case the resulting timestamp is not what it used to be, so using any other timestamp would be as valid as trying to parse the rest.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, I don&apos;t follow.&lt;/p&gt;

&lt;p&gt;I&apos;m suggesting that using the corrupted timestamp is worse than ignoring it by treating it as all nulls.&lt;/p&gt;</comment>
                            <comment id="13218245" author="bodewig" created="Tue, 28 Feb 2012 14:54:07 +0000"  >&lt;p&gt;We don&apos;t really have an option to ignore a timestamp unless we allow ArchiveEntry#getLastModifiedDate to return null.&lt;/p&gt;

&lt;p&gt;What I was trying to say is it doesn&apos;t matter much which timestamp we return as any choice is wrong.  Returning the equivalent of a 0 timestamp is fine with me.  Unfortunately we don&apos;t have an infrastructure for warnings (would have been good for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-176&quot; title=&quot;ArchiveInputStream#getNextEntry(): Problems with WinZip directories with Umlauts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-176&quot;&gt;&lt;del&gt;COMPRESS-176&lt;/del&gt;&lt;/a&gt; as well), something for an API redesign in 2.0, I guess.&lt;/p&gt;</comment>
                            <comment id="13218258" author="sebb@apache.org" created="Tue, 28 Feb 2012 15:12:03 +0000"  >&lt;p&gt;OK, let&apos;s return the timestamp as 0.&lt;br/&gt;
This will presumably display as 1970-01-01 00:00.&lt;/p&gt;</comment>
                            <comment id="13219982" author="bodewig" created="Thu, 1 Mar 2012 12:03:32 +0000"  >&lt;p&gt;Robert, could you delete and re-add the attachment, granting the ASF a license to include it this time?  That way we could add the tar to our testsuite.&lt;/p&gt;</comment>
                            <comment id="13220409" author="rjclark" created="Thu, 1 Mar 2012 21:57:26 +0000"  >&lt;p&gt;Re-uploaded example archive, with license grant so it can be included in the tests for the project.&lt;/p&gt;</comment>
                            <comment id="13221223" author="bodewig" created="Fri, 2 Mar 2012 20:01:49 +0000"  >&lt;p&gt;fixed with svn revision 1296420&lt;/p&gt;

&lt;p&gt;Thanks for the testcase&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12544770">COMPRESS-182</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12516740" name="simple-aix-native-tar.tar" size="10240" author="rjclark" created="Thu, 1 Mar 2012 21:57:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Feb 2012 02:06:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-180] new String(byte[]) conversions use default encoding</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-180</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Some classes convert byte[] to String without specifying the encoding to be used; this is potentially unsafe.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12543555">COMPRESS-180</key>
            <summary>new String(byte[]) conversions use default encoding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Feb 2012 20:16:37 +0000</created>
                <updated>Sat, 10 Aug 2013 17:05:56 +0000</updated>
                            <resolved>Sat, 10 Aug 2013 17:05:56 +0000</resolved>
                                                    <fixVersion>1.6</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13735970" author="bodewig" created="Sat, 10 Aug 2013 17:05:56 +0000"  >&lt;p&gt;svn revision 1512789 adds encoding support to the dump package - by accident it also contains a comment explaining why I wouldn&apos;t fix TarUtils and some charset literal to CharsetNames-constant changes.&lt;/p&gt;

&lt;p&gt;svn revision 1512804 adds encoding support to the CPIO package.&lt;/p&gt;

&lt;p&gt;AFAICT there is no other unexplained raw byte[] =&amp;gt; String conversion left.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 10 Aug 2013 17:05:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i19x53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>266003</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-179] TarUtils.formatLongOctalOrBinaryBytes() assumes the field will be 12 bytes long</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-179</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The TarUtils.formatLongOctalOrBinaryBytes method currently assumes that the field can hold 11 octal bytes.&lt;/p&gt;

&lt;p&gt;This is not necessarily the case; the uid and gid fields (8 bytes) can potentially be encoded as binary.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12543554">COMPRESS-179</key>
            <summary>TarUtils.formatLongOctalOrBinaryBytes() assumes the field will be 12 bytes long</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Feb 2012 20:14:35 +0000</created>
                <updated>Thu, 23 Feb 2012 00:36:48 +0000</updated>
                            <resolved>Thu, 23 Feb 2012 00:36:48 +0000</resolved>
                                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228793</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62809</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-178] TarArchiveInputStream throws IllegalArgumentException instead of IOException</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-178</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;TarArchiveInputStream is throwing  IllegalArgumentException instead of IOException on corrupt files, in direct contradiction to the Javadoc. Here is a stack-trace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.IllegalArgumentException: Invalid &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; -1 at offset 7 in &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;some bytes&amp;gt;&apos;&lt;/span&gt; len=8
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:86)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:790)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:308)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:198)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextEntry(TarArchiveInputStream.java:380)
	at de.schlichtherle.truezip.fs.archive.tar.TarInputShop.&amp;lt;init&amp;gt;(TarInputShop.java:91)
	at de.schlichtherle.truezip.fs.archive.tar.TarDriver.newTarInputShop(TarDriver.java:159)
	at de.schlichtherle.truezip.fs.archive.tar.TarGZipDriver.newTarInputShop(TarGZipDriver.java:82)
	at de.schlichtherle.truezip.fs.archive.tar.TarDriver.newInputShop(TarDriver.java:151)
	at de.schlichtherle.truezip.fs.archive.tar.TarDriver.newInputShop(TarDriver.java:47)
	at de.schlichtherle.truezip.fs.archive.FsDefaultArchiveController.mount(FsDefaultArchiveController.java:170)
	at de.schlichtherle.truezip.fs.archive.FsFileSystemArchiveController$ResetFileSystem.autoMount(FsFileSystemArchiveController.java:98)
	at de.schlichtherle.truezip.fs.archive.FsFileSystemArchiveController.autoMount(FsFileSystemArchiveController.java:47)
	at de.schlichtherle.truezip.fs.archive.FsArchiveController.autoMount(FsArchiveController.java:129)
	at de.schlichtherle.truezip.fs.archive.FsArchiveController.getEntry(FsArchiveController.java:160)
	at de.schlichtherle.truezip.fs.archive.FsContextController.getEntry(FsContextController.java:117)
	at de.schlichtherle.truezip.fs.FsDecoratingController.getEntry(FsDecoratingController.java:76)
	at de.schlichtherle.truezip.fs.FsDecoratingController.getEntry(FsDecoratingController.java:76)
	at de.schlichtherle.truezip.fs.FsConcurrentController.getEntry(FsConcurrentController.java:164)
	at de.schlichtherle.truezip.fs.FsSyncController.getEntry(FsSyncController.java:108)
	at de.schlichtherle.truezip.fs.FsFederatingController.getEntry(FsFederatingController.java:156)
	at de.schlichtherle.truezip.nio.file.TFileSystem.newDirectoryStream(TFileSystem.java:348)
	at de.schlichtherle.truezip.nio.file.TPath.newDirectoryStream(TPath.java:963)
	at de.schlichtherle.truezip.nio.file.TFileSystemProvider.newDirectoryStream(TFileSystemProvider.java:344)
	at java.nio.file.Files.newDirectoryStream(Files.java:400)
	at com.googlecode.boostmavenproject.GetSourcesMojo.convertToJar(GetSourcesMojo.java:248)
	at com.googlecode.boostmavenproject.GetSourcesMojo.download(GetSourcesMojo.java:221)
	at com.googlecode.boostmavenproject.GetSourcesMojo.execute(GetSourcesMojo.java:111)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	... 20 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Expected behavior: TarArchiveInputStream should wrap the IllegalArgumentException in an IOException.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12543501">COMPRESS-178</key>
            <summary>TarArchiveInputStream throws IllegalArgumentException instead of IOException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cowwoc">Gili</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Feb 2012 15:27:31 +0000</created>
                <updated>Thu, 23 Feb 2012 01:05:25 +0000</updated>
                            <resolved>Thu, 23 Feb 2012 01:05:25 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228747</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62810</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-177] TarArchiveInputStream rejects valid TAR file</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-177</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Issue originally reported at &lt;a href=&quot;http://java.net/jira/browse/TRUEZIP-219&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.net/jira/browse/TRUEZIP-219&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Download &lt;a href=&quot;http://sourceforge.net/projects/boost/files/boost/1.48.0/boost_1_48_0.tar.gz?use_mirror=autoselect&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sourceforge.net/projects/boost/files/boost/1.48.0/boost_1_48_0.tar.gz?use_mirror=autoselect&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;I invoke Files.newDirectoryStream() on a TPath pointing to the resulting .tar.gz file&lt;/li&gt;
	&lt;li&gt;The following exception is thrown:&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.IllegalArgumentException: Invalid &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; -1 at offset 7 in &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;some bytes&amp;gt;&apos;&lt;/span&gt; len=8
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:86)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:790)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:308)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:198)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextEntry(TarArchiveInputStream.java:380)
	at de.schlichtherle.truezip.fs.archive.tar.TarInputShop.&amp;lt;init&amp;gt;(TarInputShop.java:91)
	at de.schlichtherle.truezip.fs.archive.tar.TarDriver.newTarInputShop(TarDriver.java:159)
	at de.schlichtherle.truezip.fs.archive.tar.TarGZipDriver.newTarInputShop(TarGZipDriver.java:82)
	at de.schlichtherle.truezip.fs.archive.tar.TarDriver.newInputShop(TarDriver.java:151)
	at de.schlichtherle.truezip.fs.archive.tar.TarDriver.newInputShop(TarDriver.java:47)
	at de.schlichtherle.truezip.fs.archive.FsDefaultArchiveController.mount(FsDefaultArchiveController.java:170)
	at de.schlichtherle.truezip.fs.archive.FsFileSystemArchiveController$ResetFileSystem.autoMount(FsFileSystemArchiveController.java:98)
	at de.schlichtherle.truezip.fs.archive.FsFileSystemArchiveController.autoMount(FsFileSystemArchiveController.java:47)
	at de.schlichtherle.truezip.fs.archive.FsArchiveController.autoMount(FsArchiveController.java:129)
	at de.schlichtherle.truezip.fs.archive.FsArchiveController.getEntry(FsArchiveController.java:160)
	at de.schlichtherle.truezip.fs.archive.FsContextController.getEntry(FsContextController.java:117)
	at de.schlichtherle.truezip.fs.FsDecoratingController.getEntry(FsDecoratingController.java:76)
	at de.schlichtherle.truezip.fs.FsDecoratingController.getEntry(FsDecoratingController.java:76)
	at de.schlichtherle.truezip.fs.FsConcurrentController.getEntry(FsConcurrentController.java:164)
	at de.schlichtherle.truezip.fs.FsSyncController.getEntry(FsSyncController.java:108)
	at de.schlichtherle.truezip.fs.FsFederatingController.getEntry(FsFederatingController.java:156)
	at de.schlichtherle.truezip.nio.file.TFileSystem.newDirectoryStream(TFileSystem.java:348)
	at de.schlichtherle.truezip.nio.file.TPath.newDirectoryStream(TPath.java:963)
	at de.schlichtherle.truezip.nio.file.TFileSystemProvider.newDirectoryStream(TFileSystemProvider.java:344)
	at java.nio.file.Files.newDirectoryStream(Files.java:400)
	at com.googlecode.boostmavenproject.GetSourcesMojo.convertToJar(GetSourcesMojo.java:248)
	at com.googlecode.boostmavenproject.GetSourcesMojo.download(GetSourcesMojo.java:221)
	at com.googlecode.boostmavenproject.GetSourcesMojo.execute(GetSourcesMojo.java:111)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	... 20 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Christian Schlichtherle (the TrueZip author) is expecting the Commons Compress to throw IOException instead of IllegalArgumentException. I am expecting no exception to be thrown because as far as I can tell the TAR file is valid (opens up in WinRar and Ubuntu&apos;s built-in Archiver).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12543365">COMPRESS-177</key>
            <summary>TarArchiveInputStream rejects valid TAR file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cowwoc">Gili</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Feb 2012 16:12:50 +0000</created>
                <updated>Wed, 22 Feb 2012 23:52:13 +0000</updated>
                            <resolved>Wed, 22 Feb 2012 23:46:06 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13211969" author="christians" created="Mon, 20 Feb 2012 16:49:28 +0000"  >&lt;p&gt;Well, not quite correct. If the archive file is indeed intact, then I expect NO exception upon the call to TarArchiveInputStream.getNextEntry().&lt;/p&gt;

&lt;p&gt;In case it would be corrupt, then I expect an IOException, just as documented in the Javadoc.&lt;/p&gt;

&lt;p&gt;Other than calling the TarArchiveInputStream, TrueZIP is not involved in this bug.&lt;/p&gt;</comment>
                            <comment id="13212607" author="sebb@apache.org" created="Tue, 21 Feb 2012 14:17:17 +0000"  >&lt;p&gt;The tar file appears to be corrupt.&lt;/p&gt;

&lt;p&gt;The file contains the following:&lt;/p&gt;

&lt;p&gt;00000060:00 00 00 00 30 30 30 30 37 35 35 00 30 30 30 31    ....0000755.0001&lt;br/&gt;
00000070:30 34 30 00 80 00 00 00 ff ff ff ff 30 30 30 30    040.&#8364;...&#255;&#255;&#255;&#255;0000&lt;br/&gt;
00000080:30 30 30 36 35 34 33 00 31 31 36 35 37 34 37 34    0006543.11657474&lt;br/&gt;
00000090:32 36 35 00 30 32 31 32 30 36 00 20 30 00 00       265.021206. 0.. &lt;/p&gt;

&lt;p&gt;Note the strange entry starting at offset 74 - this should be the groupId.&lt;/p&gt;

&lt;p&gt;There seem to be quite a few other entries with the same problem.&lt;/p&gt;

&lt;p&gt;The header entries are supposed to use ASCII for portability.&lt;/p&gt;</comment>
                            <comment id="13212622" author="christians" created="Tue, 21 Feb 2012 14:41:09 +0000"  >&lt;p&gt;I thought so. However, in this case the code should throw an IOException from TarInputStream.getArchiveEntry(), not an IllegalArgumentException. This comes completely unexpected and is misleading because it&apos;s not an illegal argument to this method, but an invalid file content.&lt;/p&gt;

&lt;p&gt;I an IOException were thrown as documented by the Javadoc, then the TrueZIP Kernel would have identified it as a false positive archive file, which it is.&lt;/p&gt;</comment>
                            <comment id="13212628" author="cowwoc" created="Tue, 21 Feb 2012 14:50:51 +0000"  >&lt;p&gt;Sebb,&lt;/p&gt;

&lt;p&gt;How do WinRar and Ubuntu Archiver handle this TAR file? They don&apos;t report any errors and extract it just fine...&lt;/p&gt;</comment>
                            <comment id="13212631" author="sebb@apache.org" created="Tue, 21 Feb 2012 14:53:45 +0000"  >&lt;p&gt;Looks like the archive might be using the Joerg Schilling STAR format &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; for numeric fields:&lt;/p&gt;

&lt;p&gt;Star implements  a  vendor  specific  (and  thus  non-POSIX)&lt;br/&gt;
extension  to  put  bigger  numbers into the numeric fields.&lt;br/&gt;
This is done by using a base 256 coding.  The top bit of the&lt;br/&gt;
first character in the appropriate 8 character or 12 charac-&lt;br/&gt;
ter field is set to flag non octal coding.&lt;/p&gt;

&lt;p&gt;The value certainly makes sense in that context.&lt;/p&gt;

&lt;p&gt;As to the exception that is thrown, IAE makes sense in the context of the TarUtils.parseOctal() method.&lt;br/&gt;
Maybe that should be converted to IOE by one of the higher level methods.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cdrecord.berlios.de/private/man/star/star.4.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cdrecord.berlios.de/private/man/star/star.4.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13212633" author="christians" created="Tue, 21 Feb 2012 14:58:12 +0000"  >&lt;p&gt;Yes, please wrap it in an IOE because in the context of TarInputStream.getArchiveEntry() it&apos;s not an illegal argument, but an invalid file content, which is a side effect.&lt;/p&gt;

&lt;p&gt;In comparison, java.util.zip uses ZipException, which extends IOException, to flag invalid file contents.&lt;/p&gt;</comment>
                            <comment id="13212637" author="sebb@apache.org" created="Tue, 21 Feb 2012 15:03:51 +0000"  >&lt;p&gt;Please raise a separate JIRA issue for changing the exception type.&lt;/p&gt;</comment>
                            <comment id="13212657" author="cowwoc" created="Tue, 21 Feb 2012 15:28:15 +0000"  >&lt;p&gt;I filed a separate issue for the wrong exception type being thrown: &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-178&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COMPRESS-178&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13213961" author="cowwoc" created="Wed, 22 Feb 2012 20:14:14 +0000"  >&lt;p&gt;Sebb,&lt;/p&gt;

&lt;p&gt;Can you schedule this bug for version 1.4?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12541935">COMPRESS-175</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12414499">COMPRESS-16</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Feb 2012 16:49:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228611</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-176] ArchiveInputStream#getNextEntry(): Problems with WinZip directories with Umlauts</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-176</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;There is a problem when handling a WinZip-created zip with Umlauts in directories.&lt;/p&gt;

&lt;p&gt;I&apos;m accessing a zip file created with WinZip containing a directory with an umlaut (&quot;&#228;&quot;) with ArchiveInputStream. When creating the zip file the unicode-flag of winzip had been active.&lt;/p&gt;

&lt;p&gt;The following problem occurs when accessing the entries of the zip:&lt;br/&gt;
the ArchiveEntry for a directory containing an umlaut is not marked as a directory and the file names for the directory and all files contained in that directory contain backslashes instead of slashes (i.e. completely different to all other files in directories with no umlaut in their path).&lt;/p&gt;

&lt;p&gt;There is no difference when letting the ArchiveStreamFactory decide which ArchiveInputStream to create or when using the ZipArchiveInputStream constructor with the correct encoding (I&apos;ve tried different encodings CP437, CP850, ISO-8859-15, but still the problem persisted).&lt;/p&gt;

&lt;p&gt;This problem does not occur when using the very same zip file but compressed by 7zip or the built-in Windows 7 zip functionality.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7&lt;/p&gt;</environment>
        <key id="12543041">COMPRESS-176</key>
            <summary>ArchiveInputStream#getNextEntry(): Problems with WinZip directories with Umlauts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="wurstbrot">Wurstbrot mit Senf</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Feb 2012 12:05:24 +0000</created>
                <updated>Tue, 28 Feb 2012 14:06:30 +0000</updated>
                            <resolved>Tue, 28 Feb 2012 14:06:30 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13211794" author="sebb@apache.org" created="Mon, 20 Feb 2012 11:54:04 +0000"  >&lt;p&gt;Could you attach minimal sample archives which show the problem?&lt;/p&gt;</comment>
                            <comment id="13212635" author="wurstbrot" created="Tue, 21 Feb 2012 14:59:39 +0000"  >&lt;p&gt;Minimum test zip attached.&lt;/p&gt;</comment>
                            <comment id="13212641" author="sebb@apache.org" created="Tue, 21 Feb 2012 15:08:28 +0000"  >&lt;p&gt;Thanks, but you have not granted the ASF licence to use the file, which means we cannot include it in our test suite.&lt;/p&gt;

&lt;p&gt;Please could you delete and reattach it?&lt;/p&gt;

&lt;p&gt;Also, we will need the equivalent 7zip and Win7 archives for comparison.&lt;/p&gt;</comment>
                            <comment id="13212656" author="wurstbrot" created="Tue, 21 Feb 2012 15:28:11 +0000"  >&lt;p&gt;re-added winzip zip file plus identical ones packed with 7zip and windows built-in zip facility.&lt;/p&gt;</comment>
                            <comment id="13213223" author="sebb@apache.org" created="Wed, 22 Feb 2012 03:03:11 +0000"  >&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;I&apos;m beginning to wonder if Winzip is faulty.&lt;br/&gt;
The unicode filename that is stored uses \ whereas the base name uses /.&lt;/p&gt;</comment>
                            <comment id="13215664" author="wurstbrot" created="Fri, 24 Feb 2012 15:14:43 +0000"  >&lt;p&gt;Btw.: I have no problems to handle this jar using java.util.zip (Java 6) for some reason &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13215704" author="bodewig" created="Fri, 24 Feb 2012 15:58:23 +0000"  >&lt;p&gt;This is what InfoZIP&apos;s zip on Linux says:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;stefanb@brick:~$ zip -Tv Desktop/test-winzip.zip 
Archive:  Desktop/test-winzip.zip
    testing: doc.txt.gz               OK
    testing: doc2.txt                 OK
    testing: ??\                      OK
    testing: ??\??zip.zip             OK
    testing: ??\??.txt                OK
No errors detected in compressed data of Desktop/test-winzip.zip.
test of Desktop/test-winzip.zip OK
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The entry for the directory contains a Unicode extra field with 0xc3 0xa4 0x5c as UTF-8 encoded name.  This actually is &quot;&#228;\&quot;.&lt;/p&gt;

&lt;p&gt;Since directory names in ZIP archives must end with &quot;/&quot; Compress doesn&apos;t detect this as a directory.  It may be possible to create a workaround like &quot;if the &apos;plain name ends with a / and the unicode name uses a \ then bend it&quot;, but I can&apos;t say I&apos;d like that.&lt;/p&gt;

&lt;p&gt;Java6 likely works because it doesn&apos;t have any idea about unicode extra fields and simply uses the &quot;plain&quot; name.  You&apos;d get the same behavior from ZipArchiveInputStream by setting useUnicodeExtraFields to false in the constructor.&lt;/p&gt;</comment>
                            <comment id="13215732" author="sebb@apache.org" created="Fri, 24 Feb 2012 16:48:03 +0000"  >&lt;p&gt;The plain names use / and look OK when using CP437.&lt;/p&gt;

&lt;p&gt;For some odd reason, the unicode extra fields use \ instead of /&lt;br/&gt;
I think that may be a Winzip bug - it does not make sense to use a different separator for the extra fields.&lt;/p&gt;

&lt;p&gt;To confirm this is a bug, it would be useful to see how other zip tools use the extra fields - are there any?&lt;br/&gt;
Apart from Ant or other code based on Commons Compress, of course!&lt;/p&gt;

&lt;p&gt;Alternatively, find some documentation as to the correct contents of the field.&lt;/p&gt;

&lt;p&gt;My version of Winzip is too old to support the fields; if you have purchased a more recent one perhaps you could e-mail their support desk?&lt;/p&gt;

&lt;p&gt;A possible work-round would be to make the \ =&amp;gt; / behaviour optional; I agree we should not do this by default&lt;/p&gt;</comment>
                            <comment id="13216446" author="bodewig" created="Sat, 25 Feb 2012 13:41:45 +0000"  >&lt;p&gt;AFAIK what we have written down based on findings by Wolfgang Glas in &lt;a href=&quot;http://commons.apache.org/compress/zip.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/compress/zip.html&lt;/a&gt; still stands, WinZIP is the only one using Unicode extra fields, all other implementations have switched to the language encoding flag.  The only exceptions are Windows compressed folders - which doesn&apos;t understand either - and InfoZIP based tools if they are compiled to use the extra fields.&lt;/p&gt;

&lt;p&gt;A question to the original reporter (I&apos;m German so I know the name&apos;s a fake 8-): since you also have an installation of 7zip, what does 7zip think of your WinZIP created archive?&lt;/p&gt;</comment>
                            <comment id="13216468" author="sebb@apache.org" created="Sat, 25 Feb 2012 14:38:08 +0000"  >&lt;p&gt;I have 7zip installed, and it reads the archive OK.&lt;/p&gt;

&lt;p&gt;However, I don&apos;t think that proves anything, since the plain names are correct.&lt;/p&gt;

&lt;p&gt;I guess we could look at the 7zip source code to see if it uses the extra fields.&lt;/p&gt;

&lt;p&gt;A better test would be to create a zip file using a filename that cannot be represented in CP437, i.e. only the extra field would show the correct name.&lt;/p&gt;</comment>
                            <comment id="13216609" author="sebb@apache.org" created="Sun, 26 Feb 2012 01:34:24 +0000"  >&lt;p&gt;Copy of test-winzip.zip, but with plain file name changed from 3zip.zip to 3zap.zap.&lt;/p&gt;

&lt;p&gt;This shows only the plain file name in 7zip and in my copy of Winzip (9.0).&lt;/p&gt;

&lt;p&gt;This suggests that neither is processing the unicode extra fields.&lt;/p&gt;</comment>
                            <comment id="13216647" author="bodewig" created="Sun, 26 Feb 2012 06:42:02 +0000"  >&lt;p&gt;OK, this means nobody except for Commons Compress and InfoZIP tools seems to read the Unicode extra field.&lt;/p&gt;

&lt;p&gt;This is what I get when trying to extract the original ZIP on Linux:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;stefan@birdy:~/Desktop$ unzip test-winzip.zip 
Archive:  test-winzip.zip
  inflating: doc.txt.gz              
 extracting: doc2.txt                
warning:  test-winzip.zip appears to use backslashes as path separators
   creating: ??/
  inflating: ??/??zip.zip            
 extracting: ??/??.txt  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and it creates an &quot;&#228;&quot; directory.  I&apos;ll try to look through InfoZIPs sources what it bases it heuristics on, maybe we can use the same in Commons Compress to turn backslashes into slashes.&lt;/p&gt;</comment>
                            <comment id="13216652" author="bodewig" created="Sun, 26 Feb 2012 07:04:20 +0000"  >&lt;p&gt;In extract.c of unzip60 line 1310ff there is this code that replaces backslashes with slashes.  It only replaces them in names that don&apos;t contain forward slashes (MBSCHR looks up a character in a character array) and only if &quot;hostnum&quot; indicates a FAT system.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;            /* for files from DOS FAT, check for use of backslash instead
             *  of slash as directory separator (bug in some zipper(s); so
             *  far, not a problem in HPFS, NTFS or VFAT systems)
             */
#ifndef SFX
            if (G.pInfo-&amp;gt;hostnum == FS_FAT_ &amp;amp;&amp;amp; !MBSCHR(G.filename, &apos;/&apos;)) {
                char *p=G.filename;

                if (*p) do {
                    if (*p == &apos;\\&apos;) {
                        if (!G.reported_backslash) {
                            Info(slide, 0x21, ((char *)slide,
                              LoadFarString(BackslashPathSep), G.zipfn));
                            G.reported_backslash = TRUE;
                            if (!error_in_archive)
                                error_in_archive = PK_WARN;
                        }
                        *p = &apos;/&apos;;
                    }
                } while (*PREINCSTR(p));
            }
#endif /* !SFX */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;hostnum&quot; is the upper byte of &quot;version made by&quot; inside the central directory header - this is ZipArchiveEntry&apos;s get/setPlatform - and FS_FAT_ is 0 (ZipArchiveEntry#PLATFORM_FAT).  We&apos;d have all pieces together to emulate this.&lt;/p&gt;</comment>
                            <comment id="13216739" author="sebb@apache.org" created="Sun, 26 Feb 2012 13:18:06 +0000"  >&lt;p&gt;Excellent!&lt;br/&gt;
Since \ and / are not allowed in file or folder names on Windows systems, there should be no case where a \ is incorrectly replaced.&lt;br/&gt;
And it would still work if Winzip fixes its implementation to use /, and would also work with other applications that use / for the extra fields.&lt;/p&gt;

&lt;p&gt;==&lt;/p&gt;

&lt;p&gt;There&apos;s still potentially the reverse problem - can Winzip handle / in the unicode extra field, or does it expect only \ ?&lt;br/&gt;
If so, then I guess we might need to make the generated extra fields configurable to use \.&lt;br/&gt;
I don&apos;t have the required version of Winzip to check that.&lt;/p&gt;</comment>
                            <comment id="13217122" author="bodewig" created="Mon, 27 Feb 2012 09:10:53 +0000"  >&lt;p&gt;Whether we need forward slashes in Unicode extra fields can only be answered by somebody using WinZIP.  The best would be creating a test archive with a directory that contains a character in its name that is not part of CP437 - and to be safe not part of the platform&apos;s default encoding either.&lt;/p&gt;</comment>
                            <comment id="13217899" author="bodewig" created="Tue, 28 Feb 2012 05:01:30 +0000"  >&lt;p&gt;Workaround and tests are in svn revision 1294460&lt;/p&gt;

&lt;p&gt;I&apos;ll look into creating a test archive for the opposite direction today.&lt;/p&gt;</comment>
                            <comment id="13217974" author="wurstbrot" created="Tue, 28 Feb 2012 07:17:38 +0000"  >&lt;p&gt;Hi all, sounds promising. Thanks a lot, I&apos;m looking forward to the next release.&lt;/p&gt;

&lt;p&gt;And by the way, how could you tell that the name&apos;s a fake? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13218062" author="bodewig" created="Tue, 28 Feb 2012 10:46:30 +0000"  >&lt;p&gt;The attached ZIP (created by the trivial attached class) contains a file named &#8214;.txt and its parent directory &#8214; (that&apos;s a double vertical bar) using Unicode extra fields (and nothing else) and forward slashes.&lt;/p&gt;

&lt;p&gt;Can you please verify WinZIP is able to extract it?&lt;/p&gt;</comment>
                            <comment id="13218158" author="wurstbrot" created="Tue, 28 Feb 2012 13:32:06 +0000"  >&lt;p&gt;Seems to be OK. Got a directory &#8214; with the file &#8214;.txt in it.&lt;/p&gt;</comment>
                            <comment id="13218161" author="wurstbrot" created="Tue, 28 Feb 2012 13:33:52 +0000"  >&lt;p&gt;But 7Zip and windows built in zip both create a directory named %U2016 with a file named %U2016.txt in it.&lt;/p&gt;</comment>
                            <comment id="13218197" author="bodewig" created="Tue, 28 Feb 2012 14:06:30 +0000"  >&lt;p&gt;Great.&lt;/p&gt;

&lt;p&gt;I explicitly told ZipArchiveOutputStream to not use the language encoding flag to ensure WinZIP uses the Unicode extra field.  Otherwise 7Zip would have worked.  Windows Conmpressed Folders simply doesn&apos;t support file names with characters that are not part of the platform&apos;s namtive encoding.&lt;/p&gt;

&lt;p&gt;For a more complete discussion see &lt;a href=&quot;http://commons.apache.org/compress/zip.html#encoding&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/compress/zip.html#encoding&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12516310" name="MkZip.java" size="650" author="bodewig" created="Tue, 28 Feb 2012 10:46:30 +0000"/>
                            <attachment id="12515364" name="test-7zip.zip" size="800" author="wurstbrot" created="Tue, 21 Feb 2012 15:28:11 +0000"/>
                            <attachment id="12516311" name="test-doublevertical.zip" size="332" author="bodewig" created="Tue, 28 Feb 2012 10:46:30 +0000"/>
                            <attachment id="12515363" name="test-windows.zip" size="699" author="wurstbrot" created="Tue, 21 Feb 2012 15:28:11 +0000"/>
                            <attachment id="12515365" name="test-winzip.zip" size="903" author="wurstbrot" created="Tue, 21 Feb 2012 15:28:11 +0000"/>
                            <attachment id="12516072" name="testzap-winzip.zip" size="903" author="sebb@apache.org" created="Sun, 26 Feb 2012 01:34:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Feb 2012 11:54:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228327</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62812</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-175] GNU Tar sometimes uses binary encoding for UID and GID</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-175</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Some tar files have UID and GID fields that start with the binary marker 0x80. The TarArchiveEntry is unable to cope with that since it assumes that UID and GID are always ASCII.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541935">COMPRESS-175</key>
            <summary>GNU Tar sometimes uses binary encoding for UID and GID</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="thhal">Thomas Hallgren</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2012 07:26:25 +0000</created>
                <updated>Thu, 1 Mar 2012 11:50:11 +0000</updated>
                            <resolved>Wed, 22 Feb 2012 23:45:43 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13204327" author="thhal" created="Thu, 9 Feb 2012 07:28:35 +0000"  >&lt;p&gt;Patch that fixes the problem&lt;/p&gt;</comment>
                            <comment id="13204411" author="thhal" created="Thu, 9 Feb 2012 09:57:54 +0000"  >&lt;p&gt;Here&apos;s a link to a file that fails to unpack without the patch:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://forge.puppetlabs.com/system/releases/c/cparedes/cparedes-puppet_opsview-0.2.tar.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forge.puppetlabs.com/system/releases/c/cparedes/cparedes-puppet_opsview-0.2.tar.gz&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12543365">COMPRESS-177</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12544770">COMPRESS-182</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12513920" name="TarArchiveEntry.patch" size="955" author="thhal" created="Thu, 9 Feb 2012 07:28:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227222</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4br:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-174] BZip2CompressorInputStream doesn&apos;t handle being given a wrong-format compressed file</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-174</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When reading a file through BZip2CompressorInputStream, and the user selects a file of the wrong type (such as ZIP or GZIP), the read blows up with a strange ArrayIndexOutOfBoundException, instead of reporting immediately that the input data is of the wrong format.&lt;/p&gt;

&lt;p&gt;The Bzip2Compressor should be able to identify whether a stream is of BZip2 format or not, and immediately reject it with a meaningful exception (example: &quot;ProtocolException: not a BZip2 compressed file&quot;).&lt;/p&gt;

&lt;p&gt;Alternatively, are there functions in commons-compress that can identify the compression type of an InputStream by inspection?&lt;/p&gt;

&lt;p&gt;Example stack trace when using a ZIP input file:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;OSM Decompressor&quot; java.lang.ArrayIndexOutOfBoundsException: 900000 &lt;br/&gt;
        at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.getAndMoveToFrontDecode(BZip2CompressorInputStream.java:688) &lt;br/&gt;
        at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.initBlock(BZip2CompressorInputStream.java:322) &lt;br/&gt;
        at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.setupNoRandPartA(BZip2CompressorInputStream.java:880) &lt;br/&gt;
        at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.setupNoRandPartB(BZip2CompressorInputStream.java:936) &lt;br/&gt;
        at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.read0(BZip2CompressorInputStream.java:228) &lt;br/&gt;
        at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.read(BZip2CompressorInputStream.java:180) &lt;br/&gt;
        at java.io.InputStream.read(InputStream.java:82) &lt;br/&gt;
        at org.ka2ddo.yaac.osm.OsmXmlSegmenter$1.run(OsmXmlSegmenter.java:129) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:680) &lt;/p&gt;
</description>
                <environment>&lt;p&gt;Linux and Windows&lt;/p&gt;</environment>
        <key id="12540672">COMPRESS-174</key>
            <summary>BZip2CompressorInputStream doesn&apos;t handle being given a wrong-format compressed file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apavlin">Andrew Pavlin</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Feb 2012 04:08:38 +0000</created>
                <updated>Fri, 18 Apr 2014 13:49:45 +0000</updated>
                            <resolved>Fri, 18 Apr 2014 13:39:47 +0000</resolved>
                                    <version>1.3</version>
                                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13214199" author="sebb@apache.org" created="Thu, 23 Feb 2012 02:08:42 +0000"  >&lt;p&gt;The method CompressorStreamFactory.createCompressorInputStream(InputStream) can be used to autodetect the compression type.&lt;/p&gt;</comment>
                            <comment id="13428904" author="jukkaz" created="Sun, 5 Aug 2012 19:56:56 +0000"  >&lt;p&gt;Resolving as Not A Problem based on the existing CompressorStreamFactory functionality mentioned above by Sebb.&lt;/p&gt;</comment>
                            <comment id="13973175" author="darabos" created="Thu, 17 Apr 2014 17:40:21 +0000"  >&lt;p&gt;BZip2CompressorInputStream.read() throws IOException. I expected getting an IOException for corrupted files, not ArrayIndexOutOfBoundsException. What do you think about re-opening this?&lt;/p&gt;</comment>
                            <comment id="13974058" author="bodewig" created="Fri, 18 Apr 2014 13:25:29 +0000"  >&lt;p&gt;Hmm, the original report was about trying to read from a stream that&apos;s not in fact a bzip2 stream - are you talking about the same thing Daniel?&lt;/p&gt;

&lt;p&gt;By now the init method called by the constructor should fail with an IOException when handed such a stream.  I&apos;ll write a unit test for feeding a zip file to BZip2InputStream.&lt;/p&gt;</comment>
                            <comment id="13974066" author="darabos" created="Fri, 18 Apr 2014 13:32:58 +0000"  >&lt;p&gt;I get the same stack trace, but I&apos;m not entirely sure it is the same issue. I&apos;m still getting ArrayIndexOutOfBoundsException after using CompressorStreamFactory, so I think my file is in fact BZ2 compressed, just corrupted. Unfortunately it&apos;s one file out of a thousand in a distributed system. I&apos;ll report back when I&apos;ve narrowed down the problem. I&apos;m using commons-compress-1.8, so I&apos;ll also try with 1.9 or trunk. Thanks!&lt;/p&gt;</comment>
                            <comment id="13974080" author="bodewig" created="Fri, 18 Apr 2014 13:39:31 +0000"  >&lt;p&gt;added a test with svn revision 1588467 - and I&apos;m a bit surprised.  The test throws the expected IOException but from searching through the code it should have done so for many years and even in 1.3.  Unfortunately we&apos;ve never really tried to understand the problem back then.&lt;/p&gt;

&lt;p&gt;I&apos;ll re-close the bug.  &lt;/p&gt;

&lt;p&gt;Daniel, if you somehow manage to pass by the format check performed inside the constructor with a stream that&apos;s not a BZIP2 stream, then please reopen this issue with more information.  If you are talking about a corrupted BZIP2 stream then please create a new issue and provide a stacktrace so we get something to work from.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13974090" author="bodewig" created="Fri, 18 Apr 2014 13:49:45 +0000"  >&lt;p&gt;Compress 1.9 won&apos;t make any difference, the code hasn&apos;t changed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Feb 2012 02:08:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226067</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0thb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170113</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-173] ArchiveStreamFactory.createArchiveInputStream(in) returns a TarArchiveInputStream object if in is a simple text file </title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-173</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt; fix, ArchiveStreamFactory.createArchiveInputStream(in) returns a TarArchiveInputStream object if input is a simple text file.  In my test case, the file has two lines:&lt;/p&gt;

&lt;p&gt;BagIt-Version: 0.96&lt;br/&gt;
Tag-File-Character-Encoding: UTF-8&lt;/p&gt;
</description>
                <environment>&lt;p&gt;ubuntu&lt;/p&gt;</environment>
        <key id="12539962">COMPRESS-173</key>
            <summary>ArchiveStreamFactory.createArchiveInputStream(in) returns a TarArchiveInputStream object if in is a simple text file </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tongwang">Tong Wang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Jan 2012 20:46:41 +0000</created>
                <updated>Fri, 27 Jan 2012 08:30:32 +0000</updated>
                            <resolved>Fri, 27 Jan 2012 08:29:57 +0000</resolved>
                                    <version>1.3</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12539182">COMPRESS-171</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225465</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tgyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170056</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-171] createArchiveInputStream detects text files less than 100 bytes as tar archives</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-171</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-117&quot; title=&quot;Certain tar files not recognised by ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-117&quot;&gt;&lt;del&gt;COMPRESS-117&lt;/del&gt;&lt;/a&gt; which modified ArchiveStreamFactory().createArchiveInputStream(inputstream) results in short text files (empirically seems to be those &amp;lt;= 100 bytes) being detected as tar archives which obviously is not desirable if one wants to know whether or not the files are archives.&lt;br/&gt;
I&apos;m not an expert on compressed archives but perhaps the heuristic that if a stream is interpretable as a tar file without an exception being thrown should only be applied on archives greater than 100 bytes?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7/JDK 1.6&lt;/p&gt;</environment>
        <key id="12539182">COMPRESS-171</key>
            <summary>createArchiveInputStream detects text files less than 100 bytes as tar archives</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dan2097">Daniel Lowe</reporter>
                        <labels>
                            <label>detection</label>
                            <label>tar</label>
                    </labels>
                <created>Fri, 20 Jan 2012 17:54:09 +0000</created>
                <updated>Sun, 29 Jan 2012 20:57:38 +0000</updated>
                            <resolved>Sun, 29 Jan 2012 20:57:38 +0000</resolved>
                                    <version>1.2</version>
                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13195842" author="bodewig" created="Sun, 29 Jan 2012 20:57:38 +0000"  >&lt;p&gt;fixed with svn revision 1237475&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12539962">COMPRESS-173</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 29 Jan 2012 20:57:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>224684</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4bz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62814</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-169] RuntimeException on corrupted file</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-169</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;We wrote a tool to simulate file corruption before parsing them with tika. This caused a few strange problems including:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.RuntimeException: failed to skip file name in local file header
	at org.apache.commons.compress.archivers.zip.ZipFile.resolveLocalFileHeaderData(ZipFile.java:817)
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:207)
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:181)
	at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:142)
	at org.apache.tika.parser.pkg.ZipContainerDetector.detect(ZipContainerDetector.java:69)
	at org.apache.tika.detect.CompositeDetector.detect(CompositeDetector.java:60)
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:113)
	at org.apache.tika.Tika.parseToString(Tika.java:380)
	at org.apache.tika.Tika.parseToString(Tika.java:414)
	at no.finntech.tika.harderner.TikaIndexerHardenerTest.parseContent(TikaIndexerHardenerTest.java:106)
	at no.finntech.tika.harderner.TikaIndexerHardenerTest.flipBitAndIndexContent(TikaIndexerHardenerTest.java:89)
	at no.finntech.tika.harderner.TikaIndexerHardenerTest.originalFileIndexesProperly4(TikaIndexerHardenerTest.java:34)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:71)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:202)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is caused by:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (lenToSkip &amp;gt; 0) {
                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; skipped = archive.skipBytes(lenToSkip);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (skipped &amp;lt;= 0) {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;failed to skip file name in&quot;&lt;/span&gt;
                                               + &lt;span class=&quot;code-quote&quot;&gt;&quot; local file header&quot;&lt;/span&gt;);
                }
                lenToSkip -= skipped;
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Any reason this is using a RuntimeException instead of a IOException ? Changing it to a IOE would solve our problem.&lt;/p&gt;

&lt;p&gt;Finally, our test code is available from &lt;a href=&quot;https://github.com/lacostej/tika-hardener&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/lacostej/tika-hardener&lt;/a&gt;&lt;br/&gt;
You might want to reuse similar technique for your other decompressors. Let us know if you want help.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12535837">COMPRESS-169</key>
            <summary>RuntimeException on corrupted file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lacostej">Jerome Lacoste</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Dec 2011 12:38:35 +0000</created>
                <updated>Thu, 22 Dec 2011 17:23:32 +0000</updated>
                            <resolved>Thu, 22 Dec 2011 17:23:32 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13174910" author="bodewig" created="Thu, 22 Dec 2011 17:23:32 +0000"  >&lt;p&gt;fixed with svn revision 1222360&lt;/p&gt;

&lt;p&gt;I&apos;ve put giving the TIKA hardener a try on my TODO list, but that&apos;s not really too short anyway.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Dec 2011 17:23:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-168] getName of ZipArchiveEntry</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-168</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;getName method of ZipArchiveEntry is not giving arabic file names. Instead of that it gives some chunked characters.&lt;/p&gt;</description>
                <environment>&lt;p&gt;J2EE Environment with jdk 1.4&lt;/p&gt;</environment>
        <key id="12534758">COMPRESS-168</key>
            <summary>getName of ZipArchiveEntry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pavianand">Pavithra Kumar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Dec 2011 09:48:27 +0000</created>
                <updated>Tue, 1 Jan 2013 17:37:08 +0000</updated>
                            <resolved>Tue, 1 Jan 2013 17:37:08 +0000</resolved>
                                    <version>1.2</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13167454" author="bodewig" created="Mon, 12 Dec 2011 11:30:17 +0000"  >&lt;p&gt;Where does the ZipArchiveE (do you create it yourself or read it from a ZipFile or&lt;br/&gt;
a ZipArchiveInputStream)?&lt;/p&gt;

&lt;p&gt;If you have read it from somewhere, is there any chance you could provide a small&lt;br/&gt;
sample archive that doesn&apos;t work for you?&lt;/p&gt;</comment>
                            <comment id="13168100" author="pavianand" created="Tue, 13 Dec 2011 03:29:42 +0000"  >&lt;p&gt;This ZIP file is created using windows xp zip  utility.This has four files with English Filenames and four files with Arabic Filenames.&lt;/p&gt;</comment>
                            <comment id="13168102" author="pavianand" created="Tue, 13 Dec 2011 03:33:26 +0000"  >&lt;p&gt;    public static void main(String args[]){&lt;br/&gt;
        try{&lt;br/&gt;
            String zipname = &quot;D:\\Pavis\\TestUnZip&lt;br class=&quot;atl-forced-newline&quot; /&gt;TestZip.zip&quot;;&lt;br/&gt;
            ZipFile zFile = new ZipFile(zipname);&lt;br/&gt;
            Enumeration en = zFile.getEntries();&lt;br/&gt;
            long i = 0;&lt;br/&gt;
            while(en.hasMoreElements()){&lt;br/&gt;
                i += 1;&lt;br/&gt;
                ZipArchiveEntry zEntry = (ZipArchiveEntry)en.nextElement();&lt;br/&gt;
                System.out.println(zEntry.getName());&lt;br/&gt;
                FileOutputStream fout = new FileOutputStream(&quot;D:\\Pavis\\TestUnZip&lt;br class=&quot;atl-forced-newline&quot; /&gt;&quot; + i + &quot;.jpg&quot;);&lt;br/&gt;
                InputStream is = zFile.getInputStream(zEntry);&lt;br/&gt;
                for (int c = is.read(); c != -1; c = is.read()) &lt;/p&gt;
{
                    fout.write(c);
                }
&lt;p&gt;                is.close();&lt;br/&gt;
                fout.close();&lt;br/&gt;
            }&lt;br/&gt;
        }&lt;br/&gt;
        catch(Exception e)&lt;/p&gt;
{
            e.printStackTrace();
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;When I debug I can see the object of ZipArchiveEntry has a different filename for arabic files. &lt;/p&gt;</comment>
                            <comment id="13169412" author="bodewig" created="Wed, 14 Dec 2011 14:52:45 +0000"  >&lt;p&gt;Windows compressed folders facility seems to use the platform&apos;s native encoding when creating ZIPs.&lt;br/&gt;
See &amp;lt;&lt;a href=&quot;http://commons.apache.org/compress/zip.html#encoding&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/compress/zip.html#encoding&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;Do you get correct file names if you use something like&lt;/p&gt;

&lt;p&gt;new ZipFile(zipname, ENCODING)&lt;/p&gt;

&lt;p&gt;where ENCODING is whatever Java calls you platform&apos;s native encoding. I don&apos;t have any idea what that&lt;br/&gt;
would be and wouldn&apos;t recognize correct arabic characters either so I didn&apos;t try it myself on your&lt;br/&gt;
test archive.  One list I know of is &lt;a href=&quot;http://docs.oracle.com/javase/1.5.0/docs/guide/intl/encoding.doc.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/1.5.0/docs/guide/intl/encoding.doc.html&lt;/a&gt; and ISO8859_6 or Cp1256 don&apos;t sound bad (but you probably know better than me).&lt;/p&gt;</comment>
                            <comment id="13174900" author="bodewig" created="Thu, 22 Dec 2011 17:09:53 +0000"  >&lt;p&gt;Any news?&lt;/p&gt;</comment>
                            <comment id="13429907" author="jack fly" created="Tue, 7 Aug 2012 03:56:36 +0000"  >&lt;p&gt;I also got this problem. Here was the code I used :&lt;/p&gt;

&lt;p&gt; ArchiveInputStream in = new ArchiveStreamFactory().createArchiveInputStream(inputStream);&lt;br/&gt;
 It also got the wrong fileName when calling in.getNextEntry()&lt;/p&gt;</comment>
                            <comment id="13429941" author="bodewig" created="Tue, 7 Aug 2012 05:29:50 +0000"  >&lt;p&gt;Like I said earlier, if your archive is created by Window&apos;s compressed folders you will need to know the platform encoding used on the machine that generated the archive and explicitly specify it.  Commons Compress&apos; trunk allows you to set the filename encoding at the ArchiveStreamFactory level but for any released version you&apos;ll have to use ZipArchiveInputStream (or ZipFile) directly.&lt;/p&gt;</comment>
                            <comment id="13541661" author="bodewig" created="Tue, 1 Jan 2013 17:37:08 +0000"  >&lt;p&gt;use one of the existing ways to specify the encoding explicitly&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12507128" name="TestZip.zip" size="567236" author="pavianand" created="Tue, 13 Dec 2011 03:29:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Dec 2011 11:30:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220442</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16z5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248832</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-167] Parsing of Pax headers is not correct for values that contain embedded newlines</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-167</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-163?focusedCommentId=13163674&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13163674&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COMPRESS-163?focusedCommentId=13163674&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13163674&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12534168">COMPRESS-167</key>
            <summary>Parsing of Pax headers is not correct for values that contain embedded newlines</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Dec 2011 11:48:21 +0000</created>
                <updated>Wed, 7 Dec 2011 15:04:15 +0000</updated>
                            <resolved>Wed, 7 Dec 2011 15:04:15 +0000</resolved>
                                    <version>1.3</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13164441" author="bodewig" created="Wed, 7 Dec 2011 15:04:15 +0000"  >&lt;p&gt;svn revision 1211465 contains a passing test for a PAX&lt;br/&gt;
header with an embedded newline.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0th3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170080</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-164] Cannot Read Winzip Archives With Unicode Extra Fields</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-164</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I have a zip file created with WinZip containing Unicode extra fields. Upon attempting to extract it with org.apache.commons.compress.archivers.zip.ZipFile, ZipFile.getInputStream() returns null for ZipArchiveEntries previously retrieved with ZipFile.getEntry() or even ZipFile.getEntries(). See UTF8ZipFilesTest.patch in the attachments for a test case exposing the bug. The original test case stopped short of trying to read the entries, that&apos;s why this wasn&apos;t flagged up before. &lt;/p&gt;

&lt;p&gt;The problem lies in the fact that inside ZipFile.java entries are stored in a HashMap. However, at one point after populating the HashMap, the unicode extra fields are read, which leads to a change of the ZipArchiveEntry name, and therefore a change of its hash code. Because of this, subsequent gets on the HashMap fail to retrieve the original values.&lt;/p&gt;

&lt;p&gt;ZipFile.patch contains an (admittedly simple-minded) fix for this problem by reconstructing the entries HashMap after the Unicode extra fields have been parsed. The purpose of this patch is mainly to show that the problem is indeed what I think, rather than providing a well-designed solution.&lt;/p&gt;

&lt;p&gt;The patches have been tested against revision 1210416.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7, Oracle JDK 6&lt;/p&gt;</environment>
        <key id="12533871">COMPRESS-164</key>
            <summary>Cannot Read Winzip Archives With Unicode Extra Fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vleidl">Volker Leidl</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Dec 2011 12:30:30 +0000</created>
                <updated>Mon, 5 Dec 2011 16:33:16 +0000</updated>
                            <resolved>Mon, 5 Dec 2011 15:43:21 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13162742" author="vleidl" created="Mon, 5 Dec 2011 12:31:46 +0000"  >&lt;p&gt;Patch for UTF8ZipFilesTest.java&lt;/p&gt;</comment>
                            <comment id="13162743" author="vleidl" created="Mon, 5 Dec 2011 12:32:24 +0000"  >&lt;p&gt;Patch for ZipFile.java&lt;/p&gt;</comment>
                            <comment id="13162833" author="bodewig" created="Mon, 5 Dec 2011 15:43:21 +0000"  >&lt;p&gt;Fixed with svn revision 1210501&lt;/p&gt;

&lt;p&gt;My patch is a minor variation of yours.  The main other&lt;br/&gt;
option would be to populate an temporary map when reading the&lt;br/&gt;
central directory and only populate the final entries map&lt;br/&gt;
when resolving local file data.  In a way trunk now does so&lt;br/&gt;
but uses the entries map to transport the temporary map&lt;br/&gt;
between methods (in order to avoid changing two method&lt;br/&gt;
signatures).&lt;/p&gt;</comment>
                            <comment id="13162869" author="bodewig" created="Mon, 5 Dec 2011 16:33:16 +0000"  >&lt;p&gt;It was easier and cleaner to fix in Ant&apos;s code base where nobody cares for the order of entries from the central directory.&lt;/p&gt;

&lt;p&gt;See svn revision 1210522&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506108" name="UTF8ZipFilesTest.patch" size="1719" author="vleidl" created="Mon, 5 Dec 2011 12:31:46 +0000"/>
                            <attachment id="12506109" name="ZipFile.patch" size="1377" author="vleidl" created="Mon, 5 Dec 2011 12:32:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 5 Dec 2011 15:43:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219597</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-163] Unable to extract a file larger than 8GB from a Posix-format tar archive</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-163</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;An attempt to read a posix-format tar archive containing a file in excess of 8^11 bytes in size will fail with a &quot;Size out of range&quot; illegal argument exception.&lt;/p&gt;</description>
                <environment>&lt;p&gt;The tar archive used for testing was created by GNU tar, but the problem will occur with any Posix-formatted tar file containing files over 8GB in size.&lt;/p&gt;</environment>
        <key id="12533737">COMPRESS-163</key>
            <summary>Unable to extract a file larger than 8GB from a Posix-format tar archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kodis">John Kodis</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 Dec 2011 16:56:26 +0000</created>
                <updated>Thu, 8 Dec 2011 14:08:10 +0000</updated>
                            <resolved>Wed, 7 Dec 2011 11:36:39 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13162179" author="kodis" created="Sat, 3 Dec 2011 16:59:36 +0000"  >&lt;p&gt;An attempt to read a posix-format tar archive containing a file in excess of 8^11 bytes in size will fail with a &quot;Size out of range&quot; illegal argument exception.  We correct this by dropping the test for a too-large value in the TarArchiveEntry.setSize method, and making the corresponding modifications to the testMaxFileSize() junit test.&lt;/p&gt;

&lt;p&gt;Finally, in the getNextTarEntry method, we set the entrySize instance variable an additional time to pick up any larger size that may have been obtained as a result of processing any Posix Pax headers.&lt;/p&gt;</comment>
                            <comment id="13163640" author="bodewig" created="Tue, 6 Dec 2011 15:22:16 +0000"  >&lt;p&gt;I may be missing it, but is the code that actaully reads the PAX header and applies the size read available as well?&lt;/p&gt;</comment>
                            <comment id="13163674" author="kodis" created="Tue, 6 Dec 2011 16:19:06 +0000"  >&lt;p&gt;Yes, the Pax headers are read in TarArchiveInputStream.paxHeaders.  The pax header keyword=value pairs are first read into a hash table, and the table is subsequently scanned for values (namely, path, linkpath, uid, uname, gid, gname, and size) which are contained in a TarArchiveEntry.  If found, the values in the Pax header hash table are used to supersede those in the current TarArchiveEntry.&lt;/p&gt;

&lt;p&gt;Also, on reviewing this section of code, I noticed that there&apos;s a minor error.  The fields in the Pax header are stored as a length, a space character, the field name, an equals sign, the field value, and a newline character.  So, for example &quot;30 atime=1321711775.972059463\n&quot;.  The code which extracts the keyword=value pairs ignores the length field and instead looks for the newline character to mark the end of the value field.  This is okay for numeric values, but means that any path or linkpath values which contain a newline character will be misinterpreted.  So although the code isn&apos;t strictly correct, it&apos;s unlikely to cause a problem in practice. &lt;/p&gt;</comment>
                            <comment id="13163814" author="bodewig" created="Tue, 6 Dec 2011 20:36:27 +0000"  >&lt;p&gt;Sorry, I somehow missed the fact that we already had code that was parsing PAX headers.&lt;/p&gt;

&lt;p&gt;I agree the code should be corrected.&lt;/p&gt;</comment>
                            <comment id="13164333" author="bodewig" created="Wed, 7 Dec 2011 11:36:39 +0000"  >&lt;p&gt;The setSize Method is also used when creating entries prior to writing them and as long as Compress is unable to write archives with entries bigger than 8GiB it is better to keep the exception.&lt;/p&gt;

&lt;p&gt;Therefore I opted to add a new setter method with svn revision 1211393&lt;/p&gt;</comment>
                            <comment id="13165222" author="bodewig" created="Thu, 8 Dec 2011 14:08:10 +0000"  >&lt;p&gt;After applying John&apos;s other patches from &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-16&quot; title=&quot;unable to extract a TAR file that contains an entry which is 10 GB in size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-16&quot;&gt;&lt;del&gt;COMPRESS-16&lt;/del&gt;&lt;/a&gt; with 1211892 for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-165&quot; title=&quot;Support writing entries &amp;gt; 8GiB in tar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-165&quot;&gt;&lt;del&gt;COMPRESS-165&lt;/del&gt;&lt;/a&gt; it now is the output stream that throws if a big file is added (and star extensions haven&apos;t been enabled).  So I&apos;ve removed the adjustSize again and changed setSize as this patch suggested.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505998" name="0003-Allow-reading-large-files-from-Posix-tar-archives.patch" size="3387" author="kodis" created="Sat, 3 Dec 2011 16:59:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Dec 2011 15:22:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-162] BZip2CompressorInputStream still stops after 900,000 decompressed bytes of large compressed file</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-162</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Attempting to unzip the planet-110921.osm.bz2 file downloaded directly from planet.OpenStreetMaps.org aborts after exactly 900000 bytes are uncompressed. The uncompressed content looks like valid XML, and causes my application&apos;s parser to blow up with XML syntax errors due to missing closing tags. Tried using the example code to just uncompress, and got the same exact behavior.&lt;/p&gt;

&lt;p&gt;Uncompressing the same file planet-110921.osm.bz2 (19357793489 bytes long compressed) with the Linux bzip2 command-line utility (bzip2-1.0.6-1.fc13.i686.rpm) succeeds and produces a valid (and enormous) XML file that can be successfully parsed.&lt;/p&gt;

&lt;p&gt;Tried getting a subversion snapshot of the commons-compress trunk on 7 Nov 2011 and replacing the org.apache.commons.compress.compressors.bzip2 package in the commons-compress-1.3.jar with compiled code from the trunk (Subversion log reported that the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-146&quot; title=&quot;BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-146&quot;&gt;&lt;del&gt;COMPRESS-146&lt;/del&gt;&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; was in). Still the same failure.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux (Fedora Cores 13 &lt;span class=&quot;error&quot;&gt;&amp;#91;2.6.34.9-69.fc13.i686.PAE&amp;#93;&lt;/span&gt; and 15, at latest &apos;yum upgrade&apos; as of 7 Nov 2011), Sun Java 1.6.0_22&lt;/p&gt;</environment>
        <key id="12530680">COMPRESS-162</key>
            <summary>BZip2CompressorInputStream still stops after 900,000 decompressed bytes of large compressed file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apavlin">Andrew Pavlin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2011 05:13:48 +0000</created>
                <updated>Wed, 9 Nov 2011 15:53:41 +0000</updated>
                            <resolved>Wed, 9 Nov 2011 15:53:21 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13146178" author="bodewig" created="Tue, 8 Nov 2011 09:10:02 +0000"  >&lt;p&gt;Andrew, are you using the two-arg constructor for BZip2CompressorInputStream?  Concatenated files are not supported by default but only when you ask for it.&lt;/p&gt;</comment>
                            <comment id="13146294" author="apavlin" created="Tue, 8 Nov 2011 13:27:16 +0000"  >&lt;p&gt;switched to the two-arg constructor with true for the second argument, and now it isn&apos;t stopping (yet). I&apos;ll provide further feedback after it finishes the file (my app takes about 12 hours to parse the entire planet.osm file).&lt;/p&gt;</comment>
                            <comment id="13147017" author="apavlin" created="Wed, 9 Nov 2011 13:03:05 +0000"  >&lt;p&gt;Turns out everything works just fine when I use the 2-arg constructor. Please close this issue as a duplicate of 146.&lt;/p&gt;</comment>
                            <comment id="13147118" author="bodewig" created="Wed, 9 Nov 2011 15:53:41 +0000"  >&lt;p&gt;Thank you for checking.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12515173">COMPRESS-146</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Nov 2011 09:10:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tgzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170062</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-161] bzip2 decompression terminates after 900000 bytes</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-161</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;bzip2 decompression terminates (w/o error) after 900000 bytes&lt;/p&gt;

&lt;p&gt;    try {&lt;br/&gt;
      InputStream iin = new BZip2CompressorInputStream(new FileInputStream(bzip2 compressed file that was uncompressed &amp;gt; 900000 bytes in size);&lt;br/&gt;
      int data = iin.read();&lt;br/&gt;
      while (data != -1) &lt;/p&gt;
{
        System.out.print((char) data); ++nBytes;
        data = iin.read();
      }
&lt;p&gt;    } catch (IOException iox) &lt;/p&gt;
{ /**/ }
&lt;p&gt;    System.out.println(&quot;#Bytes read &quot; + nBytes);&lt;/p&gt;

&lt;p&gt;prints: #Bytes read 900000&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows7 64bit JDK7u1,2&lt;/p&gt;</environment>
        <key id="12530331">COMPRESS-161</key>
            <summary>bzip2 decompression terminates after 900000 bytes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hannes2horns">Hans horn</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Nov 2011 15:55:17 +0000</created>
                <updated>Wed, 9 Nov 2011 15:52:17 +0000</updated>
                            <resolved>Mon, 7 Nov 2011 16:40:21 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13144123" author="garydgregory" created="Fri, 4 Nov 2011 16:24:11 +0000"  >&lt;p&gt;Can you attach you example bzip2 file?&lt;/p&gt;</comment>
                            <comment id="13144159" author="hannes2horns" created="Fri, 4 Nov 2011 16:56:51 +0000"  >&lt;p&gt;Gary,&lt;/p&gt;

&lt;p&gt;most certainly.&lt;br/&gt;
the attached bzip2 compressed file should uncompress to a file of length &lt;br/&gt;
6045970.&lt;/p&gt;

&lt;p&gt;Thx for looking into this.&lt;/p&gt;

&lt;p&gt;Kindly,&lt;br/&gt;
H.&lt;/p&gt;

</comment>
                            <comment id="13145550" author="bodewig" created="Mon, 7 Nov 2011 15:22:02 +0000"  >&lt;p&gt;I can confirm the limit with the file you have attached.  At the same time I can easily uncompress even larger files completely so there must be something specific to the archive you are using.&lt;/p&gt;

&lt;p&gt;Any hints on how you have created it?&lt;/p&gt;</comment>
                            <comment id="13145558" author="bodewig" created="Mon, 7 Nov 2011 15:31:58 +0000"  >&lt;p&gt;I think the attached file consists of multiple concatenated streams which Commons Compress doesn&apos;t support, yet.  &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-146&quot; title=&quot;BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-146&quot;&gt;&lt;del&gt;COMPRESS-146&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13145574" author="hannes2horns" created="Mon, 7 Nov 2011 15:56:51 +0000"  >&lt;p&gt;Stefan,&lt;/p&gt;

&lt;p&gt;I probably compressed it using cygwin&apos;s pbzip2 in August when I started &lt;br/&gt;
to run out of disk space.&lt;br/&gt;
I just unpacked that file and repacked it using the non-parallel version &lt;br/&gt;
of cygwin bzip2 and it decompresses just fine with Commons Compress!&lt;/p&gt;

&lt;p&gt;Nice catch, Stefan!!!!&lt;/p&gt;

&lt;p&gt;What now? I&apos;ve got about 500GB of stuff compressed that way, that has &lt;br/&gt;
become inaccessible to Java.&lt;br/&gt;
Are there any plans to support &quot;multiple concatenated streams&quot; in &lt;br/&gt;
Commons Compress in the not so distant future?&lt;/p&gt;

&lt;p&gt;Thx.,&lt;br/&gt;
H.&lt;/p&gt;

</comment>
                            <comment id="13145592" author="bodewig" created="Mon, 7 Nov 2011 16:26:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-146&quot; title=&quot;BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-146&quot;&gt;&lt;del&gt;COMPRESS-146&lt;/del&gt;&lt;/a&gt; has got a patch attached that I&apos;ll look into.  If it fixes the problem with your archive I&apos;m going to commit it.&lt;/p&gt;</comment>
                            <comment id="13145608" author="bodewig" created="Mon, 7 Nov 2011 16:40:21 +0000"  >&lt;p&gt;This is &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-146&quot; title=&quot;BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-146&quot;&gt;&lt;del&gt;COMPRESS-146&lt;/del&gt;&lt;/a&gt; which has just been fixed.&lt;/p&gt;

&lt;p&gt;In order to make it work you must use the new two-arg constructor of the stream and pass in true as second argument.&lt;/p&gt;</comment>
                            <comment id="13145679" author="hannes2horns" created="Mon, 7 Nov 2011 18:28:51 +0000"  >&lt;p&gt;Stefan,&lt;/p&gt;

&lt;p&gt;just checked out compress trunk.&lt;br/&gt;
Due to issues with xz compression it wouldn&apos;t build out of the box, but &lt;br/&gt;
that was easily remedied.&lt;/p&gt;

&lt;p&gt;Works like a charm decompressing bz2 files that were either created &lt;br/&gt;
using the serial bzip2 as well as using pbzip2.&lt;br/&gt;
Thanks again for your efforts.&lt;/p&gt;

&lt;p&gt;Btw., are there any plans to add parallel bzip2 &lt;br/&gt;
compression/decompression to commons compress taking advantage of &lt;br/&gt;
multiprocessor cpus?&lt;/p&gt;

&lt;p&gt;Kindly,&lt;br/&gt;
H.&lt;/p&gt;

</comment>
                            <comment id="13146179" author="bodewig" created="Tue, 8 Nov 2011 09:12:33 +0000"  >&lt;p&gt;Hans, what kind of XZ problems did you have to work around?  trunk should be building out of the box.&lt;/p&gt;

&lt;p&gt;WRT parallel bzip2 - no concrete plans, patches welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13146333" author="hannes2horns" created="Tue, 8 Nov 2011 14:45:51 +0000"  >&lt;p&gt;Stefan,&lt;/p&gt;

&lt;p&gt;I had not bothered looking too closely at the errors I was getting. If I &lt;br/&gt;
had, I&apos;d noticed that I had not provided org.tukaani.&lt;br/&gt;
Now with org.tukaani, there&apos;re no more problems with common compress xz&lt;/p&gt;


&lt;p&gt;Wrt patches for parallel bzip2: I don&apos;t understand enough of the subject &lt;br/&gt;
matter to be able to contribute.&lt;/p&gt;

&lt;p&gt;Greets,&lt;br/&gt;
H.&lt;/p&gt;

</comment>
                            <comment id="13147117" author="bodewig" created="Wed, 9 Nov 2011 15:52:17 +0000"  >&lt;p&gt;Good to know trunk is actually buildable outside of my machine and our CI systems.&lt;/p&gt;

&lt;p&gt;The &quot;patches welcome&quot; statement is some sort of standard response in OSS land, I didn&apos;t seriously expect you to provide a patch.  But I don&apos;t have the time or itch to scratch (or current knowledge TBH) to provide one myself right now either.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12502483" name="ASF.LICENSE.NOT.GRANTED--INT1_aminey.inp.bz2" size="2020085" author="hannes2horns" created="Fri, 4 Nov 2011 16:56:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Nov 2011 16:24:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216069</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tgxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-160] TarArchiveOutputStream.getBytesWritten() returns invalid value</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-160</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;It appears the TarArchiveOutputStream.getBytesWritten()returns zero or invalid value when queried.&lt;br/&gt;
In the code sample below, it returns zero, even after an sizeable file was processed.&lt;br/&gt;
I&apos;ve printed it twice, once before closing the output stream, and once after, just for the reference.&lt;br/&gt;
It is also demonstrable on multiple processed files.&lt;/p&gt;

&lt;p&gt;Within the TarArchiveOutputStream.getBytesWritten() implementation, it appears the call for count(numToWrite) is made after the numToWrite is depleted in the process of actual byte writing. When call for count(numToWrite); is moved up, the returned values for TarArchiveOutputStream.getBytesWritten() are getting equal to the sum of the sizes of processed files. This is much closer to expected value (&quot;Returns the current number of bytes written to this stream.&quot;) but still not correct, for that number should include the tar header sizes as well.&lt;/p&gt;

&lt;p&gt;At any rate, please find the proposed patch below, merely moving count(numToWrite); up a few lines. This makes TarArchiveOutputStream.getBytesWritten() closer to true value.&lt;/p&gt;


&lt;p&gt;Test code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void tartest() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		
		FileOutputStream myOutputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/temp/tartest.tar&quot;&lt;/span&gt;);
		
		ArchiveOutputStream sTarOut = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArchiveStreamFactory().createArchiveOutputStream(ArchiveStreamFactory.TAR, myOutputStream);
		
		File sSource = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/share/od_l.txt&quot;&lt;/span&gt;);
		TarArchiveEntry sEntry = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveEntry(sSource);
		sTarOut.putArchiveEntry(sEntry);
		
		FileInputStream sInput = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(sSource);
		&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] cpRead = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[8192];
		
		&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; iRead = 0;
		&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((iRead = sInput.read(cpRead)) &amp;gt; 0) {
			sTarOut.write(cpRead, 0, iRead);
		}
		
		sLog.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Processed: &quot;&lt;/span&gt;+sTarOut.getBytesWritten()+&lt;span class=&quot;code-quote&quot;&gt;&quot; bytes. File Len: &quot;&lt;/span&gt;+sSource.length());
		
		sInput.close();
		sTarOut.closeArchiveEntry();
		sTarOut.close();

		sLog.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Processed: &quot;&lt;/span&gt;+sTarOut.getBytesWritten()+&lt;span class=&quot;code-quote&quot;&gt;&quot; bytes. File Len: &quot;&lt;/span&gt;+sSource.length());

		
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
			
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test Output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Oct 21, 2011 9:09:28 AM com.cronsult.jndmpd.test.Backup tartest
INFO: Processed: 0 bytes. File Len: 186974208
Oct 21, 2011 9:09:28 AM com.cronsult.jndmpd.test.Backup tartest
INFO: Processed: 0 bytes. File Len: 186974208
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Proposed Patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java
===================================================================
--- src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java	(revision 1187150)
+++ src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java	(working copy)
@@ -276,6 +276,8 @@
             &lt;span class=&quot;code-comment&quot;&gt;// eliminate some of the buffer copying.
&lt;/span&gt;             &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;         }
+        
+        count(numToWrite);
 
         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (assemLen &amp;gt; 0) {
             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((assemLen + numToWrite) &amp;gt;= recordBuf.length) {
@@ -325,7 +327,7 @@
             wOffset += num;
         }
         
-        count(numToWrite);
+        
     }
 
     /**

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;java.runtime.name=Java(TM) SE Runtime Environment&lt;br/&gt;
java.runtime.version=1.6.0_27-b07&lt;br/&gt;
os.arch=x86&lt;br/&gt;
os.name=Windows 7&lt;br/&gt;
os.version=6.1&lt;br/&gt;
This issue may be unrelated to environment&lt;/p&gt;</environment>
        <key id="12528274">COMPRESS-160</key>
            <summary>TarArchiveOutputStream.getBytesWritten() returns invalid value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rsimac">Robert Simac</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Oct 2011 13:23:08 +0000</created>
                <updated>Sun, 23 Oct 2011 12:13:53 +0000</updated>
                            <resolved>Sun, 23 Oct 2011 12:13:53 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.3</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13133624" author="bodewig" created="Sun, 23 Oct 2011 12:13:53 +0000"  >&lt;p&gt;fixed with svn revision 1187874&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 23 Oct 2011 12:13:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97634</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62827</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-159] ChangeSetPerformer not reliable for ZipArchiveInputStreams</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-159</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ChangeSetPerformer&apos;s perform function takes an ArchiveInputStream as an argument and thus frequently runs into issues described under heading &apos;ZipArchiveInputStream vs ZipFile&apos; at &lt;a href=&quot;http://commons.apache.org/compress/zip.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/compress/zip.html&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Personally for a simple local solution I&apos;ve added a slightly modified performZip function taking a ZipFile argument in place of the ArchiveInputStream argument:&lt;/p&gt;

&lt;p&gt;diff perform performZip&lt;br/&gt;
1c1&lt;br/&gt;
&amp;lt;     public ChangeSetResults perform(ArchiveInputStream in, ArchiveOutputStream out)&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt;     public ChangeSetResults performZip(ZipFile zf, ArchiveOutputStream out)&lt;br/&gt;
17,18c17,18&lt;br/&gt;
&amp;lt;         ArchiveEntry entry = null;&lt;br/&gt;
&amp;lt;         while ((entry = in.getNextEntry()) != null) {&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt;         ArrayList&amp;lt;ZipArchiveEntry&amp;gt; entries = Collections.list(zf.getEntriesInPhysicalOrder());&lt;br/&gt;
&amp;gt;         for (ZipArchiveEntry entry : entries) {&lt;br/&gt;
46c46&lt;br/&gt;
&amp;lt;                 copyStream(in, out, entry);&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt;                 copyStream(zf.getInputStream(entry), out, entry);&lt;/p&gt;

&lt;p&gt;A permanent fix may require some re-design, the perform(ArchiveInputStream in, ArchiveOutputStream out) abstraction may be overly general.&lt;/p&gt;</description>
                <environment>&lt;p&gt;OpenJDK Runtime Environment (IcedTea6 1.8.7) (6b18-1.8.7-4)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 16.0-b13, mixed mode)&lt;br/&gt;
Linux 2.6.38-1-amd64 #1 SMP Wed Mar 16 17:38:02 UTC 2011 x86_64 GNU/Linux&lt;/p&gt;</environment>
        <key id="12524948">COMPRESS-159</key>
            <summary>ChangeSetPerformer not reliable for ZipArchiveInputStreams</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jbmchuck">Jon Michaelchuck</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Sep 2011 18:19:02 +0000</created>
                <updated>Tue, 1 Jan 2013 18:34:06 +0000</updated>
                            <resolved>Tue, 1 Jan 2013 18:34:06 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Changesets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13541897" author="bodewig" created="Tue, 1 Jan 2013 18:34:06 +0000"  >&lt;p&gt;added a new perform overload with svn revision 1427509&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Jan 2013 18:34:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33589</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16z6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248834</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-158] Empty directories missing in zip archive</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-158</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When zipping a directory that contains several files and subdirectories of which some can be empty, I am missing empty directories. When using a tar archive format empty directories are present.&lt;/p&gt;

&lt;p&gt;I have found &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-105&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COMPRESS-105&lt;/a&gt; which describes a similar issue, however I am unable to reproduce the solution suggested there. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.6, Ubuntu Linux (ext4 fs)&lt;/p&gt;</environment>
        <key id="12524411">COMPRESS-158</key>
            <summary>Empty directories missing in zip archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="daniel.spicar">Daniel Spicar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Sep 2011 12:57:02 +0000</created>
                <updated>Thu, 23 Feb 2012 01:47:54 +0000</updated>
                            <resolved>Thu, 23 Feb 2012 01:47:54 +0000</resolved>
                                    <version>1.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13113400" author="daniel.spicar" created="Fri, 23 Sep 2011 13:02:21 +0000"  >&lt;p&gt;CompressionUtil - Code used to produce the problem.&lt;br/&gt;
test.zip - contains a directory that when ziped using the code from CompressionUtil exhibits the problem of the empty directory disappearing&lt;/p&gt;</comment>
                            <comment id="13123628" author="bodewig" created="Sun, 9 Oct 2011 05:43:54 +0000"  >&lt;p&gt;Hi Daniel,&lt;/p&gt;

&lt;p&gt;I&apos;m completely unable to reproduce the problem.  Just to double check, I&apos;ve downloaded and compiled your CompressionUtil class, I have downloaded and extracted the test.zip which creates a test directory, I&apos;ve created and compiled the following trivial class&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.clerezza.tools.backupfelixcache.CompressionUtil;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Driver {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Throwable {
        CompressionUtil.zip(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;output.zip&quot;&lt;/span&gt;));
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll attach the resulting output.zip created on Ubuntu 10.4 with &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;stefan@birdy:~/Desktop/compress-158$ java -version
java version &quot;1.6.0_20&quot;
OpenJDK Runtime Environment (IcedTea6 1.9.9) (6b20-1.9.9-0ubuntu1~10.04.2)
OpenJDK Client VM (build 19.0-b09, mixed mode, sharing)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see it contains everything your original test.zip contained as well.&lt;/p&gt;</comment>
                            <comment id="13126638" author="daniel.spicar" created="Thu, 13 Oct 2011 14:50:05 +0000"  >&lt;p&gt;Hi Stefan,&lt;/p&gt;

&lt;p&gt;the Problem persists in my environment. I will try to investigate further. I use Sun&apos;s JDK, but I will try OpenJDK as well.&lt;/p&gt;</comment>
                            <comment id="13214189" author="sebb@apache.org" created="Thu, 23 Feb 2012 01:47:54 +0000"  >&lt;p&gt;No further input, so assume problem has been resolved&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496262" name="CompressionUtil.java" size="5888" author="daniel.spicar" created="Fri, 23 Sep 2011 13:02:21 +0000"/>
                            <attachment id="12498338" name="output.zip" size="764" author="bodewig" created="Sun, 9 Oct 2011 05:44:22 +0000"/>
                            <attachment id="12496261" name="test.zip" size="968" author="daniel.spicar" created="Fri, 23 Sep 2011 13:02:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 9 Oct 2011 05:43:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19389</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0th7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-157] Wrong EOF detection in CBZip2InputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-157</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The following snippet form CBZip2InputStream does a wrong EOF check. The char &apos;thech&apos; will never be equal to the integer &apos;-1&apos;. You have to check for #read() returning -1 before casting to char. &lt;/p&gt;

&lt;p&gt;I found the bug in &lt;a href=&quot;http://svn.wikimedia.org/svnroot/mediawiki/trunk/mwdumper/src/org/apache/commons/compress/bzip2/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.wikimedia.org/svnroot/mediawiki/trunk/mwdumper/src/org/apache/commons/compress/bzip2/&lt;/a&gt; not in your TRUNK.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                            int zzi;
                            char thech = 0;
                            try
                            {
                                thech = (char)m_input.read();
                            }
                            catch( IOException e )
                            {
                                compressedStreamEOF();
                            }
                            if( thech == -1 ) //HERE
                            {
                                compressedStreamEOF();
                            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12523320">COMPRESS-157</key>
            <summary>Wrong EOF detection in CBZip2InputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jtheuer">Jan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Sep 2011 12:08:30 +0000</created>
                <updated>Fri, 16 Sep 2011 15:18:47 +0000</updated>
                            <resolved>Fri, 16 Sep 2011 14:57:58 +0000</resolved>
                                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13106082" author="sebb@apache.org" created="Fri, 16 Sep 2011 14:05:26 +0000"  >&lt;p&gt;Are you sure the class is in Compress? I can only find BZip2CompressorInputStream which does not have the problem.&lt;/p&gt;

&lt;p&gt;Commons VFS does have a file called CBZip2InputStream, and there is one instance of casting read() to a char:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;619       &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (bsLive &amp;lt; 1)
620       {
621           &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; ch = 0;
622           &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
623           {
624               ch = (&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;) inputStream.read();
625           }
626           &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e)
627           {
628               compressedStreamEOF();
629           }
630
631           bsBuff = (bsBuff &amp;lt;&amp;lt; 8) | (ch &amp;amp; 0xff);
632           bsLive += 8;
633       }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That does look wrong.&lt;/p&gt;</comment>
                            <comment id="13106499" author="bodewig" created="Fri, 16 Sep 2011 14:57:58 +0000"  >&lt;p&gt;The bug has been present in pre-release code of Commons Compress but it has been fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-29&quot; title=&quot;Closing an CBZip2OutputStream when no data has been written fails with an java.lang.ArithmeticException: / by zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-29&quot;&gt;&lt;del&gt;COMPRESS-29&lt;/del&gt;&lt;/a&gt; with svn revision 732685&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12523346">VFS-363</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Sep 2011 14:05:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60391</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 28 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62874</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-155] CompressorStreamFactory hangs when creating BZip2CompressorInputStream from ReaderInputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-155</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Assume that one wants to read a BZIP2 file but only has a reference to a BufferedReader object and not to the File object itself.&lt;/p&gt;

&lt;p&gt;An approach would be creating an InputStream from the BufferedReader reference, using the org.apache.commons.io.input.ReaderInputStream class, as follows:&lt;/p&gt;

&lt;p&gt;BufferedReader reader = &amp;lt;the reader to the actual BZIP2 file&amp;gt;;&lt;br/&gt;
InputStream is = new ReaderInputStream(reader);&lt;br/&gt;
CompressorInputStream cis = new CompressorStreamFactory().createCompressorInputStream(is);&lt;/p&gt;

&lt;p&gt;However, the call to the createCompressorInputStream() method hangs on the statement&lt;/p&gt;

&lt;p&gt;int signatureLength = in.read(signature); // CompressorStreamFactory line 93 in commons-compress v1.2&lt;/p&gt;

&lt;p&gt;The problem seems to be in the read(byte[] b, int off, int len) method of ReaderInputStream, which is called by the method fill(), in turn called by read1(byte[] b, int off, int len) in BufferedInputStream.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519513">COMPRESS-155</key>
            <summary>CompressorStreamFactory hangs when creating BZip2CompressorInputStream from ReaderInputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pns">PNS</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Aug 2011 21:41:24 +0000</created>
                <updated>Thu, 23 Feb 2012 01:46:18 +0000</updated>
                            <resolved>Thu, 23 Feb 2012 01:46:18 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13214188" author="sebb@apache.org" created="Thu, 23 Feb 2012 01:46:18 +0000"  >&lt;p&gt;Compressed files are a stream of bytes.&lt;/p&gt;

&lt;p&gt;It does not make sense to try and decompress a stream of characters.&lt;/p&gt;

&lt;p&gt;If there are problems using ReaderInputStream as far as I can tell that is not a bug in Compress.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Feb 2012 01:46:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64319</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0th2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-154] GzipCompressorInputStream doesn&apos;t support concatenated .gz files</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-154</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The .gz format allows concatenating multiple .gz files as is. A decompressor should decompress the resulting multimember file as if it were a single .gz file.&lt;/p&gt;

&lt;p&gt;GzipCompressorInputStream is a wrapper for java.util.zip.GZIPInputStream which doesn&apos;t support concatenated .gz files. Only the first .gz member is decompressed and the rest of the compressed data is silently ignored.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519497">COMPRESS-154</key>
            <summary>GzipCompressorInputStream doesn&apos;t support concatenated .gz files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="larhzu">Lasse Collin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Aug 2011 10:47:25 +0000</created>
                <updated>Wed, 9 Nov 2011 15:57:49 +0000</updated>
                            <resolved>Wed, 9 Nov 2011 15:57:49 +0000</resolved>
                                                    <fixVersion>1.4</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13088180" author="larhzu" created="Sat, 20 Aug 2011 11:01:47 +0000"  >&lt;p&gt;I attached a new version of GzipCompressorInputStream. It is a reimplementation of the .gz container decoding and supports concatenated .gz files. Like GZIPInputStream, this uses java.util.zip.Inflater for the actual decompression.&lt;/p&gt;

&lt;p&gt;There is a new constructor that allows getting the old behavior where decompressor stops after the first .gz member.&lt;/p&gt;</comment>
                            <comment id="13147123" author="bodewig" created="Wed, 9 Nov 2011 15:57:49 +0000"  >&lt;p&gt;The patch is in with svn revision 1199812 (but defaults to not support concatenated streams).&lt;/p&gt;

&lt;p&gt;Missing are docs and testcases, but in order to keep discussion in a single place, Reply-To: &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-146&quot; title=&quot;BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-146&quot;&gt;&lt;del&gt;COMPRESS-146&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12491045" name="GzipCompressorInputStream.java" size="11411" author="larhzu" created="Sat, 20 Aug 2011 11:01:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 9 Nov 2011 15:57:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64333</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4cv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62818</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-153] close() in several OutputStream implementations doesn&apos;t close the underlying stream if the archive would be corrupt</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-153</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;In some cases like when ZiparchiveOutputStream&apos;s File-arg constructor is used, the user code doesn&apos;t even have any chance to close the underlying stream, even if it would catch the exception from close() and then close the wrapped stream by itself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519393">COMPRESS-153</key>
            <summary>close() in several OutputStream implementations doesn&apos;t close the underlying stream if the archive would be corrupt</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2011 09:18:27 +0000</created>
                <updated>Fri, 19 Aug 2011 09:48:03 +0000</updated>
                                                            <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13087624" author="bodewig" created="Fri, 19 Aug 2011 09:47:25 +0000"  >&lt;p&gt;It turns out ArchiveOutputStreamTest#testCallSequence*() explicitly checks one can call closeArchiveEntry after a failed call to close (line 176 in svn revision 1157880), i.e. one can recover from a failed close.&lt;/p&gt;

&lt;p&gt;I find this dubious at best but since it obviously breaks the current contract as stated in the tests I&apos;ve pushed this issue to the &quot;rethink for 2.0&quot; list of issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64428</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i19x4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>266001</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COMPRESS-152] ZiparchiveInputStream and ZiparchiveOutputStream don&apos;t clean up Inflater/Deflater instances</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-152</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;This is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-139&quot; title=&quot;ZipFile fails to clean up Inflater resources&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-139&quot;&gt;&lt;del&gt;COMPRESS-139&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The Inflater and Deflater instances kept by the streams should be cleaned up by calling end() inside the close method so native resources get freed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12517789">COMPRESS-152</key>
            <summary>ZiparchiveInputStream and ZiparchiveOutputStream don&apos;t clean up Inflater/Deflater instances</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Aug 2011 13:24:32 +0000</created>
                <updated>Wed, 3 Aug 2011 13:42:29 +0000</updated>
                            <resolved>Wed, 3 Aug 2011 13:42:29 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.3</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13078748" author="bodewig" created="Wed, 3 Aug 2011 13:42:29 +0000"  >&lt;p&gt;fixed with svn revision 1153483&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4f3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62828</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-151] ZipArchiveOutputStream sets general purpose bit 3 even for stored entries without a data descriptor</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-151</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I found this while testing ZIP64 support at the byte level.&lt;/p&gt;

&lt;p&gt;General purpose bit 3 is set if the size is stored inside a data descriptor which ZipArchiveOutputStream will only do if it writes DEFLATED entries to a non-seekable stream.  Still that bit seems to be always set.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t seem to cause interop problems, that&apos;s why I lowered its priority.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515832">COMPRESS-151</key>
            <summary>ZipArchiveOutputStream sets general purpose bit 3 even for stored entries without a data descriptor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Sat, 30 Jul 2011 06:08:09 +0000</created>
                <updated>Sat, 30 Jul 2011 06:55:17 +0000</updated>
                            <resolved>Sat, 30 Jul 2011 06:55:17 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13073141" author="bodewig" created="Sat, 30 Jul 2011 06:55:17 +0000"  >&lt;p&gt;I got confused and looked at the wrong byte.  The bit set is bit 11, the EFS flag and it is absolutely valid to set that.&lt;/p&gt;

&lt;p&gt;Will adjust my tests accordingly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66636</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0th5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170089</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-146] BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-146</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS&lt;br/&gt;
This error occurs mostly on large size files as sudden EOF somwere in the middle of the file.&lt;/p&gt;

&lt;p&gt;An example of data from archived file:&lt;br/&gt;
$ cat fastq.ax.bz2 | od -t x1 | grep -A 1 &apos;17 72 45&apos;&lt;br/&gt;
22711660 d0 ff b6 01 20 10 ff ff 17 72 45 38 50 90 2e ff&lt;br/&gt;
22711700 b2 d3 42 5a 68 39 31 41 59 26 53 59 84 3c 41 75&lt;br/&gt;
&amp;#8211;&lt;br/&gt;
24637020 c5 49 ff 19 80 49 20 7f ff 17 72 45 38 50 90 a4&lt;br/&gt;
24637040 a8 ac bd 42 5a 68 39 31 41 59 26 53 59 0d 9a b4&lt;br/&gt;
&amp;#8211;&lt;br/&gt;
40302720 ff b1 24 80 10 ff ff 17 72 45 38 50 90 24 cb c5&lt;br/&gt;
40302740 90 42 5a 68 39 31 41 59 26 53 59 42 05 ae 5e 05&lt;br/&gt;
.....&lt;/p&gt;


&lt;p&gt;Suggested solution:&lt;/p&gt;

&lt;p&gt;    private void initBlock() throws IOException {&lt;br/&gt;
        char magic0 = bsGetUByte();&lt;br/&gt;
        char magic1 = bsGetUByte();&lt;br/&gt;
        char magic2 = bsGetUByte();&lt;br/&gt;
        char magic3 = bsGetUByte();&lt;br/&gt;
        char magic4 = bsGetUByte();&lt;br/&gt;
        char magic5 = bsGetUByte();&lt;/p&gt;

&lt;p&gt;        if( magic0 == 0x17 &amp;amp;&amp;amp; magic1 == 0x72 &amp;amp;&amp;amp; magic2 == 0x45&lt;br/&gt;
            &amp;amp;&amp;amp; magic3 == 0x38 &amp;amp;&amp;amp; magic4 == 0x50 &amp;amp;&amp;amp; magic5 == 0x90 ) &lt;/p&gt;

&lt;p&gt;        {&lt;br/&gt;
        	if( complete() ) // end of file);&lt;br/&gt;
        	&lt;/p&gt;
{
        		return;
        	}
&lt;p&gt; else&lt;/p&gt;
        	{
        		magic0 = bsGetUByte();
                magic1 = bsGetUByte();
                magic2 = bsGetUByte();
                magic3 = bsGetUByte();
                magic4 = bsGetUByte();
                magic5 = bsGetUByte();
        	}
&lt;p&gt;        } &lt;/p&gt;

&lt;p&gt;        if (magic0 != 0x31 || // &apos;1&apos;&lt;br/&gt;
                   magic1 != 0x41 || // &apos;A&apos;&lt;br/&gt;
                   magic2 != 0x59 || // &apos;Y&apos;&lt;br/&gt;
                   magic3 != 0x26 || // &apos;&amp;amp;&apos;&lt;br/&gt;
                   magic4 != 0x53 || // &apos;S&apos;&lt;br/&gt;
                   magic5 != 0x59 // &apos;Y&apos;&lt;br/&gt;
                   ) &lt;/p&gt;
{
            this.currentState = EOF;
            throw new IOException(&quot;bad block header&quot;);
        }
&lt;p&gt; else {&lt;br/&gt;
            this.storedBlockCRC = bsGetInt();&lt;br/&gt;
            this.blockRandomised = bsR(1) == 1;&lt;/p&gt;

&lt;p&gt;            /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Allocate data here instead in constructor, so we do not allocate&lt;/li&gt;
	&lt;li&gt;it if the input file is empty.&lt;br/&gt;
             */&lt;br/&gt;
            if (this.data == null) 
{
                this.data = new Data(this.blockSize100k);
            }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;            // currBlockNo++;&lt;br/&gt;
            getAndMoveToFrontDecode();&lt;/p&gt;

&lt;p&gt;            this.crc.initialiseCRC();&lt;br/&gt;
            this.currentState = START_BLOCK_STATE;&lt;br/&gt;
        }&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;    private boolean &lt;br/&gt;
    complete() throws IOException &lt;br/&gt;
    { &lt;br/&gt;
    	boolean result = false;&lt;br/&gt;
        this.storedCombinedCRC = bsGetInt();&lt;br/&gt;
        try&lt;br/&gt;
        {&lt;br/&gt;
            if (in.available() == 0 ) &lt;/p&gt;
            {
                throw new IOException( &quot;EOF&quot; );
            }
&lt;p&gt;            checkMagicChar(&apos;B&apos;, &quot;first&quot;);&lt;br/&gt;
            checkMagicChar(&apos;Z&apos;, &quot;second&quot;);&lt;br/&gt;
            checkMagicChar(&apos;h&apos;, &quot;third&quot;);&lt;/p&gt;

&lt;p&gt;            int blockSize = this.in.read();&lt;br/&gt;
            if ((blockSize &amp;lt; &apos;1&apos;) || (blockSize &amp;gt; &apos;9&apos;)) &lt;/p&gt;
{
                throw new IOException(&quot;Stream is not BZip2 formatted: illegal &quot;
                                      + &quot;blocksize &quot; + (char) blockSize);
            }

&lt;p&gt;            this.blockSize100k = blockSize - &apos;0&apos;;&lt;br/&gt;
            this.bsLive = 0;&lt;br/&gt;
            this.bsBuff = 0;&lt;/p&gt;

&lt;p&gt;        } catch( IOException e )&lt;/p&gt;
        {
        	this.currentState = EOF;
        	
        	result = true;
        }

&lt;p&gt;        this.data = null;&lt;br/&gt;
        if (this.storedCombinedCRC != this.computedCombinedCRC) &lt;/p&gt;
{
            throw new IOException(&quot;BZip2 CRC error&quot;);
        }
&lt;p&gt;        this.computedCombinedCRC = 0;    &lt;br/&gt;
        return result;&lt;br/&gt;
    }&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12515173">COMPRESS-146</key>
            <summary>BZip2CompressorInputStream always treats 0x177245385090 as EOF, but should treat this as EOS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dsmirnov">Dmitriy Smirnov</reporter>
                        <labels>
                            <label>0x177245385090</label>
                    </labels>
                <created>Sun, 24 Jul 2011 00:00:39 +0000</created>
                <updated>Tue, 30 Apr 2013 13:41:45 +0000</updated>
                            <resolved>Mon, 7 Nov 2011 16:38:30 +0000</resolved>
                                                    <fixVersion>1.4</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                        <comments>
                            <comment id="13088237" author="larhzu" created="Sat, 20 Aug 2011 17:56:45 +0000"  >&lt;p&gt;I didn&apos;t test, but I think the suggested fix has a few problems:&lt;/p&gt;

&lt;p&gt;in.available() == 0 cannot be used to test if end of input was reached.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t handle concatenated empty .bz2 streams.&lt;/p&gt;

&lt;p&gt;The test for magic bytes and some other code is duplicated.&lt;/p&gt;

&lt;p&gt;IOException in complete() is lost.&lt;/p&gt;</comment>
                            <comment id="13088239" author="larhzu" created="Sat, 20 Aug 2011 18:02:58 +0000"  >&lt;p&gt;I attached a patch that adds support for concatenated .bz2 streams. There is a new constructor that allows getting the old behavior where the decompressor stops after the first .bz2 stream.&lt;/p&gt;

&lt;p&gt;There is also a fix for another bug: The error detail messages of the exceptions in the init and checkMagicChar functions could contain control characters. Having that information in the exceptions isn&apos;t very useful so I omitted them. I had to modify one of those messages so I thought I&apos;ll include a fix for the other too.&lt;/p&gt;</comment>
                            <comment id="13145606" author="bodewig" created="Mon, 7 Nov 2011 16:38:30 +0000"  >&lt;p&gt;applied Lasse&apos;s patch with a small modification.  The default constructor will not support concatenated streams for maximum backwards compatibility.&lt;/p&gt;

&lt;p&gt;This will need some docs that I&apos;m going to add once I&apos;ve looked into the similar patch by Lasse for gzip as well.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13145620" author="larhzu" created="Mon, 7 Nov 2011 17:10:40 +0000"  >&lt;p&gt;XZCompressorInputStream defaults to concatenated, so doing it differently in BZip2CompressorInputStream is inconsistent. Maybe XZ needs to be changed too.&lt;/p&gt;

&lt;p&gt;I think that in most cases concatenation support is wanted. Maybe the one-argument constructor should have a warning in the docs that usually one doesn&apos;t want to use it. It would still be easy to forget to use the right constructor since non-concatenated version works on most files. I wouldn&apos;t be surprised if most of the existing users of these classes would never get fixed to use the new constructor.&lt;/p&gt;</comment>
                            <comment id="13146180" author="bodewig" created="Tue, 8 Nov 2011 09:14:46 +0000"  >&lt;p&gt;yes, we probably want all three formats to be consistent here.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what the danger of changing the default really would be, I vaguelly recall people complaining about GzipInputStream after JDK7 added support for concatenated streams (I may be totally wrong on this, though).&lt;/p&gt;</comment>
                            <comment id="13146202" author="larhzu" created="Tue, 8 Nov 2011 10:22:25 +0000"  >&lt;p&gt;The danger is that when you have compressed data inside another file format, you want the decompressor to stop after it has decompressed one compressed stream. For example, if you have bzip2 data in a .zip file, the decompressor must stop after the first stream or things will go wrong.&lt;/p&gt;

&lt;p&gt;If the default is changed, a few applications that need the above feature (I don&apos;t know if there actually are any) will break badly. At the same time it would fix many other applications that handle standalone .gz or .bz2 files and thus should support concatenated streams. Since concatenated streams aren&apos;t very common, many don&apos;t know that their application has such a bug.&lt;/p&gt;

&lt;p&gt;Maybe the default should be changed in Compress 2.0, if API changes are OK at that point. Or maybe the single-argument constructor should be marked as deprecated so that it creates a warning at compile time, which should hopefully make people notice that there&apos;s a new two-argument constructor.&lt;/p&gt;</comment>
                            <comment id="13147139" author="bodewig" created="Wed, 9 Nov 2011 16:30:10 +0000"  >&lt;p&gt;I&apos;ve updated the documentation with svn revision 1199823.&lt;/p&gt;

&lt;p&gt;It would be good to have testcases with concatenated streams, I&apos;ll look into creating some.&lt;/p&gt;

&lt;p&gt;Yes, I think we should change the defaults with 2.0.  Deprecations won&apos;t help in the light of our factory that people may use instead of using the constructors directly.  Adding a new flag to the factory method looks wrong since there are formats (pack200) supported by the factory that don&apos;t know anything about concatenated streams.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12645206">COMPRESS-224</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12530680">COMPRESS-162</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12548643">COMPRESS-185</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12491064" name="bzip2-concatenated.patch" size="7270" author="larhzu" created="Sat, 20 Aug 2011 18:02:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 20 Aug 2011 17:56:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64327</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4d3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62819</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-139] ZipFile fails to clean up Inflater resources</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-139</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;This bug has been reported to Ant&apos;s original code as &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=42696&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=42696&lt;/a&gt; .  It seems as if InflaterInputStream.close() didn&apos;t clean up the Inflater instance if one is passed in to the constructor.  I&apos;m currently testing the patch to Ant and will merge it over once I&apos;m ready.&lt;/p&gt;

&lt;p&gt;The code in Harmony&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; does invoke inflater.end but calling it again won&apos;t hurt.  OpenJDK&apos;s InflaterInputStream&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; in fact behaves as described in Mounir&apos;s comment to Ant&apos;s Bugzilla.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/repos/asf/harmony/enhanced/java/trunk/classlib/modules/archive/src/main/java/java/util/zip/InflaterInputStream.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/harmony/enhanced/java/trunk/classlib/modules/archive/src/main/java/java/util/zip/InflaterInputStream.java&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/506b35a2f558/src/share/classes/java/util/zip/InflaterInputStream.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/506b35a2f558/src/share/classes/java/util/zip/InflaterInputStream.java&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12513921">COMPRESS-139</key>
            <summary>ZipFile fails to clean up Inflater resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jul 2011 13:40:22 +0000</created>
                <updated>Wed, 13 Jul 2011 13:53:56 +0000</updated>
                            <resolved>Wed, 13 Jul 2011 13:53:56 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13064556" author="bodewig" created="Wed, 13 Jul 2011 13:53:56 +0000"  >&lt;p&gt;fixed with svn revision 1146027&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>68200</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4g7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62833</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-137] TarArchiveEntry.getFile() always returns null + no way to get an InputStream from TarArchiveInputStream similar to what you do with (java.util.zip.ZipFile())..getInputStream(ZipEntry);</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-137</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;~ &lt;br/&gt;
 this is a test run using httpd-2.2.19.tar&lt;span class=&quot;error&quot;&gt;&amp;#91;.gz,bz2&amp;#93;&lt;/span&gt; to show what I mean&lt;br/&gt;
~ &lt;br/&gt;
 lbrtchx&lt;br/&gt;
~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ &lt;br/&gt;
$ wget &lt;a href=&quot;http://apache.cyberuse.com//httpd/httpd-2.2.19.tar.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://apache.cyberuse.com//httpd/httpd-2.2.19.tar.gz&lt;/a&gt;&lt;br/&gt;
-&lt;del&gt;2011-06-27 11:21:46&lt;/del&gt;-  &lt;a href=&quot;http://apache.cyberuse.com//httpd/httpd-2.2.19.tar.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://apache.cyberuse.com//httpd/httpd-2.2.19.tar.gz&lt;/a&gt;&lt;br/&gt;
Resolving apache.cyberuse.com... 174.132.149.89&lt;br/&gt;
Connecting to apache.cyberuse.com|174.132.149.89|:80... connected.&lt;br/&gt;
HTTP request sent, awaiting response... 200 OK&lt;br/&gt;
Length: 7113418 (6.8M) &lt;span class=&quot;error&quot;&gt;&amp;#91;application/x-gzip&amp;#93;&lt;/span&gt;&lt;br/&gt;
Saving to: `httpd-2.2.19.tar.gz&apos;&lt;/p&gt;

&lt;p&gt;100%&lt;span class=&quot;error&quot;&gt;&amp;#91;===...===&amp;gt;&amp;#93;&lt;/span&gt; 7,113,418    296K/s   in 24s     &lt;/p&gt;

&lt;p&gt;2011-06-27 11:22:10 (285 KB/s) - `httpd-2.2.19.tar.gz&apos; saved &lt;span class=&quot;error&quot;&gt;&amp;#91;7113418/7113418&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;$ wget &lt;a href=&quot;http://apache.cyberuse.com//httpd/httpd-2.2.19.tar.bz2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://apache.cyberuse.com//httpd/httpd-2.2.19.tar.bz2&lt;/a&gt;&lt;br/&gt;
-&lt;del&gt;2011-06-27 11:22:19&lt;/del&gt;-  &lt;a href=&quot;http://apache.cyberuse.com//httpd/httpd-2.2.19.tar.bz2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://apache.cyberuse.com//httpd/httpd-2.2.19.tar.bz2&lt;/a&gt;&lt;br/&gt;
Resolving apache.cyberuse.com... 174.132.149.89&lt;br/&gt;
Connecting to apache.cyberuse.com|174.132.149.89|:80... connected.&lt;br/&gt;
HTTP request sent, awaiting response... 200 OK&lt;br/&gt;
Length: 5322082 (5.1M) &lt;span class=&quot;error&quot;&gt;&amp;#91;application/x-bzip2&amp;#93;&lt;/span&gt;&lt;br/&gt;
Saving to: `httpd-2.2.19.tar.bz2&apos;&lt;/p&gt;

&lt;p&gt;100%&lt;span class=&quot;error&quot;&gt;&amp;#91;===...===&amp;gt;&amp;#93;&lt;/span&gt; 5,322,082    256K/s   in 25s     &lt;/p&gt;

&lt;p&gt;2011-06-27 11:22:44 (207 KB/s) - `httpd-2.2.19.tar.bz2&apos; saved &lt;span class=&quot;error&quot;&gt;&amp;#91;5322082/5322082&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;$ wget &lt;a href=&quot;http://www.apache.org/dist/httpd/httpd-2.2.19.tar.gz.md5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/dist/httpd/httpd-2.2.19.tar.gz.md5&lt;/a&gt;&lt;br/&gt;
-&lt;del&gt;2011-06-27 11:22:51&lt;/del&gt;-  &lt;a href=&quot;http://www.apache.org/dist/httpd/httpd-2.2.19.tar.gz.md5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/dist/httpd/httpd-2.2.19.tar.gz.md5&lt;/a&gt;&lt;br/&gt;
Resolving www.apache.org... 140.211.11.131&lt;br/&gt;
Connecting to www.apache.org|140.211.11.131|:80... connected.&lt;br/&gt;
HTTP request sent, awaiting response... 200 OK&lt;br/&gt;
Length: 54 &lt;span class=&quot;error&quot;&gt;&amp;#91;text/plain&amp;#93;&lt;/span&gt;&lt;br/&gt;
Saving to: `httpd-2.2.19.tar.gz.md5&apos;&lt;/p&gt;

&lt;p&gt;100%&lt;span class=&quot;error&quot;&gt;&amp;#91;===...===&amp;gt;&amp;#93;&lt;/span&gt; 54          --.-K/s   in 0s      &lt;/p&gt;

&lt;p&gt;2011-06-27 11:22:51 (4.23 MB/s) - `httpd-2.2.19.tar.gz.md5&apos; saved &lt;span class=&quot;error&quot;&gt;&amp;#91;54/54&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;$ wget &lt;a href=&quot;http://www.apache.org/dist/httpd/httpd-2.2.19.tar.bz2.md5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/dist/httpd/httpd-2.2.19.tar.bz2.md5&lt;/a&gt;&lt;br/&gt;
-&lt;del&gt;2011-06-27 11:23:02&lt;/del&gt;-  &lt;a href=&quot;http://www.apache.org/dist/httpd/httpd-2.2.19.tar.bz2.md5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/dist/httpd/httpd-2.2.19.tar.bz2.md5&lt;/a&gt;&lt;br/&gt;
Resolving www.apache.org... 140.211.11.131&lt;br/&gt;
Connecting to www.apache.org|140.211.11.131|:80... connected.&lt;br/&gt;
HTTP request sent, awaiting response... 200 OK&lt;br/&gt;
Length: 55 &lt;span class=&quot;error&quot;&gt;&amp;#91;text/plain&amp;#93;&lt;/span&gt;&lt;br/&gt;
Saving to: `httpd-2.2.19.tar.bz2.md5&apos;&lt;/p&gt;

&lt;p&gt;100%&lt;span class=&quot;error&quot;&gt;&amp;#91;===...===&amp;gt;&amp;#93;&lt;/span&gt; 55          --.-K/s   in 0s      &lt;/p&gt;

&lt;p&gt;2011-06-27 11:23:02 (4.91 MB/s) - `httpd-2.2.19.tar.bz2.md5&apos; saved &lt;span class=&quot;error&quot;&gt;&amp;#91;55/55&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;$ ls -l httpd-2.2.19.tar.*&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 knoppix knoppix 5322082 May 21 18:58 httpd-2.2.19.tar.bz2&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 knoppix knoppix      55 May 21 18:58 httpd-2.2.19.tar.bz2.md5&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 knoppix knoppix 7113418 May 21 18:58 httpd-2.2.19.tar.gz&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 knoppix knoppix      54 May 21 18:58 httpd-2.2.19.tar.gz.md5&lt;br/&gt;
$ md5sum -b httpd-2.2.19.tar.bz2&lt;br/&gt;
832f96a6ec4b8fc7cf49b9efd4e89060 *httpd-2.2.19.tar.bz2&lt;br/&gt;
$ md5sum -b httpd-2.2.19.tar.gz&lt;br/&gt;
e9f5453e1e4d7aeb0e7ec7184c6784b5 *httpd-2.2.19.tar.gz&lt;br/&gt;
$ cat *.md5&lt;br/&gt;
832f96a6ec4b8fc7cf49b9efd4e89060 *httpd-2.2.19.tar.bz2&lt;br/&gt;
e9f5453e1e4d7aeb0e7ec7184c6784b5 *httpd-2.2.19.tar.gz&lt;/p&gt;

&lt;p&gt;~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ &lt;/p&gt;


&lt;p&gt;/*&lt;br/&gt;
 TarArchiveEntry.getFile() always returns null + no way to get an InputStream from TarArchiveInputStream similar to what you do with (java.util.zip.ZipFile())..getInputStream(ZipEntry);&lt;br/&gt;
*/&lt;/p&gt;

&lt;p&gt;import org.apache.commons.compress.compressors.bzip2.*;&lt;br/&gt;
import org.apache.commons.compress.compressors.gzip.*;&lt;br/&gt;
import org.apache.commons.compress.archivers.tar.*;&lt;br/&gt;
import org.apache.commons.compress.utils.*;&lt;br/&gt;
import org.apache.commons.compress.archivers.*;&lt;/p&gt;

&lt;p&gt;import java.io.*;&lt;br/&gt;
import java.util.*;&lt;br/&gt;
import java.text.*;&lt;/p&gt;

&lt;p&gt;// __ &lt;br/&gt;
public class TAR00Test{&lt;br/&gt;
// __ &lt;br/&gt;
 public static void main(String[] args){&lt;br/&gt;
// __ &lt;br/&gt;
  TarArchiveInputStream TArkIS = null;&lt;br/&gt;
  TarArchiveEntry TArkEntry = null;&lt;/p&gt;

&lt;p&gt;  File TARFl, IFl, IDir = new File(&quot;/media/sda1/prjx/sw/text_synch/XML_Fls/test&quot;);&lt;br/&gt;
  String[] aIFl = new String[]&lt;/p&gt;
{&quot;httpd-2.2.19.tar.bz2&quot;, &quot;httpd-2.2.19.tar.gz&quot;}
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;  String aFlPth;&lt;br/&gt;
// __ &lt;br/&gt;
  try{&lt;br/&gt;
   for(int i = 0; (i &amp;lt; aIFl.length); ++i){&lt;br/&gt;
    IFl = new File(IDir, aIFl&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;);&lt;br/&gt;
    aFlPth = IFl.getCanonicalPath();&lt;br/&gt;
    if(IFl.exists()){&lt;br/&gt;
     aFlPth = aFlPth.toLowerCase();&lt;br/&gt;
// __ &lt;br/&gt;
     if(aFlPth.endsWith(&quot;.tar.bz2&quot;))&lt;/p&gt;
{
      TArkIS = new TarArchiveInputStream(new BZip2CompressorInputStream(new FileInputStream(IFl)));
     }
&lt;p&gt;     else if(aFlPth.endsWith(&quot;.tar.gz&quot;))&lt;/p&gt;
{
      TArkIS = new TarArchiveInputStream(new GzipCompressorInputStream(new FileInputStream(IFl)));
     }
&lt;p&gt;     else{} // ...&lt;br/&gt;
// __ &lt;br/&gt;
     TArkEntry = (TarArchiveEntry)TArkIS.getNextEntry();&lt;br/&gt;
     while(TArkEntry != null){&lt;br/&gt;
      if(!TArkEntry.isDirectory()){&lt;br/&gt;
       System.err.println(TArkEntry);&lt;br/&gt;
// __ org/apache/commons/compress/archivers/tar/TarArchiveEntry.html&lt;br/&gt;
       System.err.println(&quot;// __ getName: |&quot; + TArkEntry.getName() + &quot;|&quot;);&lt;br/&gt;
       System.err.println(&quot;// __ getSize: |&quot; + TArkEntry.getSize() + &quot;|&quot;);&lt;br/&gt;
       System.err.println(&quot;// __ getUserId: |&quot; + TArkEntry.getUserId() + &quot;|&quot;);&lt;br/&gt;
       System.err.println(&quot;// __ GroupId: |&quot; + TArkEntry.getGroupId() + &quot;|&quot;);&lt;br/&gt;
       System.err.println(&quot;// __ GroupName: |&quot; + TArkEntry.getGroupName() + &quot;|&quot;);&lt;br/&gt;
       System.err.println(&quot;// __ LastModifiedDate: |&quot; + TArkEntry.getLastModifiedDate() + &quot;|&quot;);&lt;br/&gt;
       System.err.println(&quot;// __ LinkName: |&quot; + TArkEntry.getLinkName() + &quot;|&quot;);&lt;br/&gt;
       System.err.println(&quot;// __ Mode: |&quot; + TArkEntry.getMode() + &quot;|&quot;);&lt;br/&gt;
       System.err.println(&quot;// __ ModTime: |&quot; + TArkEntry.getModTime() + &quot;|&quot;);&lt;br/&gt;
       TARFl = TArkEntry.getFile();&lt;br/&gt;
       System.err.println(&quot;// __ File: |&quot; + TARFl + &quot;|&quot;);&lt;/p&gt;

&lt;p&gt;       if(TARFl != null)&lt;/p&gt;
{ System.err.println(&quot;~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~ * ~&quot;); }
&lt;p&gt;       else&lt;/p&gt;
{ System.err.println(&quot;~&quot;); }

&lt;p&gt;      }&lt;br/&gt;
      TArkEntry = (TarArchiveEntry)TArkIS.getNextEntry();&lt;br/&gt;
     }&lt;br/&gt;
// __ &lt;br/&gt;
     TArkIS.close();&lt;br/&gt;
    }// (IFl.exists())&lt;br/&gt;
    else&lt;/p&gt;
{ System.err.println(&quot;// __ File not found! |&quot; + aFlPth + &quot;|&quot;); }
&lt;p&gt;   }// i [0, aIFl.length)&lt;br/&gt;
  }catch(FileNotFoundException FlNFX)&lt;/p&gt;
{ FlNFX.printStackTrace(System.err); }
&lt;p&gt;    catch(IOException IOX)&lt;/p&gt;
{ IOX.printStackTrace(System.err); }
&lt;p&gt; }&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment>&lt;p&gt;$ uname -a&lt;br/&gt;
Linux Microknoppix 2.6.31.6 #4 SMP PREEMPT Tue Nov 10 19:11:11 CET 2009 i686 GNU/Linux&lt;/p&gt;

&lt;p&gt;$ java -version&lt;br/&gt;
java version &quot;1.6.0_16&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_16-b01)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 14.2-b01, mixed mode, sharing)&lt;/p&gt;

&lt;p&gt;$ echo $CLASSPATH&lt;br/&gt;
/media/sdb3/prjx/Java/JUtils:/media/sdb3/prjx/Java/JUtils/jars/commons-compress-1.1.jar:.&lt;/p&gt;</environment>
        <key id="12511665">COMPRESS-137</key>
            <summary>TarArchiveEntry.getFile() always returns null + no way to get an InputStream from TarArchiveInputStream similar to what you do with (java.util.zip.ZipFile())..getInputStream(ZipEntry);</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="tcurdt">Torsten Curdt</assignee>
                                    <reporter username="lbrtchx">Albretch Mueller</reporter>
                        <labels>
                            <label>zip_through_XMLReader</label>
                    </labels>
                <created>Mon, 27 Jun 2011 17:01:23 +0000</created>
                <updated>Fri, 25 Nov 2011 14:49:17 +0000</updated>
                            <resolved>Mon, 27 Jun 2011 23:53:11 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.1</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13055662" author="lbrtchx" created="Mon, 27 Jun 2011 17:06:58 +0000"  >&lt;p&gt; Let me add that my goal (as explained in user@commons.apache.org: &lt;span class=&quot;error&quot;&gt;&amp;#91;compress&amp;#93;&lt;/span&gt; trying to feed data from tar.gz and tar.bz2 files directly to an XMLReader ...) is being able to do something like this:&lt;br/&gt;
~ &lt;br/&gt;
  BufferedReader BfrRdr = null;&lt;br/&gt;
  XMLReader XMLRdr = null;&lt;br/&gt;
  FileInputStream FIS = null;&lt;br/&gt;
  ZipInputStream ZIS = null;&lt;br/&gt;
  ZipFile ZFl = null;&lt;br/&gt;
  int OPEN_READ = 0x1;&lt;br/&gt;
  ZipEntry ZEntry;&lt;br/&gt;
// __ &lt;/p&gt;

&lt;p&gt;  try{&lt;br/&gt;
   SAXParserFactory SAXFctry = SAXParserFactory.newInstance();&lt;br/&gt;
   SAXFctry.setValidating(false); // stop standard validation to allow custom schema&lt;br/&gt;
   SAXFctry.setNamespaceAware(true);&lt;/p&gt;

&lt;p&gt;   SchemaFactory SchmFctry = SchemaFactory.newInstance(javax.xml.XMLConstants.W3C_XML_SCHEMA_NS_URI);&lt;br/&gt;
   SAXFctry.setSchema(SchmFctry.newSchema(new Source[] &lt;/p&gt;
{new StreamSource(aIXSDFl)}
&lt;p&gt;));&lt;br/&gt;
   SAXParser SAXPrsr = SAXFctry.newSAXParser();&lt;/p&gt;

&lt;p&gt;// __ Create and register the content handler&lt;br/&gt;
   XMLRdr = SAXPrsr.getXMLReader();&lt;br/&gt;
   XMLRdr.setContentHandler(new DefaultHandler2());&lt;/p&gt;

&lt;p&gt;// __ &lt;br/&gt;
   File IZFl = new File(aIXMLFl);&lt;br/&gt;
   ZFl = new ZipFile(IZFl, OPEN_READ);&lt;br/&gt;
// __ &lt;br/&gt;
   Enumeration&amp;lt;? extends ZipEntry&amp;gt; ZENum = ZFl.entries();&lt;br/&gt;
   while(ZENum.hasMoreElements())&lt;/p&gt;
{
    ZEntry = (ZipEntry)ZENum.nextElement();
    System.out.println(&quot;// __ XML Scanning: |&quot; + ZEntry.getName() + &quot;|&quot;);
    InputStream IS = ZFl.getInputStream(ZEntry);
    BfrRdr = new BufferedReader(new InputStreamReader(IS, &quot;UTF-8&quot;));
// __ 
    XMLRdr.parse(new InputSource(BfrRdr)); // XMLReader is directly fed the InputStream from the zip file
// __ 
    IS.close();
   }
&lt;p&gt;// __ &lt;br/&gt;
  }catch(FileNotFoundException FNFX)&lt;/p&gt;
{ FNFX.printStackTrace(System.err); }
&lt;p&gt;    catch(IOException IOX)&lt;/p&gt;
{ IOX.printStackTrace(System.err); }
&lt;p&gt;   catch(ParserConfigurationException PrsConfX)&lt;/p&gt;
{ PrsConfX.printStackTrace(System.err); }
&lt;p&gt;    catch(SAXException SAXX)&lt;/p&gt;
{ SAXX.printStackTrace(System.err); }</comment>
                            <comment id="13056213" author="tcurdt" created="Mon, 27 Jun 2011 23:52:38 +0000"  >&lt;p&gt;As demonstrated in &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/commons/proper/compress/trunk/src/test/java/org/apache/commons/compress/ChainingTestCase.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/commons/proper/compress/trunk/src/test/java/org/apache/commons/compress/ChainingTestCase.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;chaining works just fine.&lt;/p&gt;

&lt;p&gt;You misunderstood the meaning of &quot;getFile&quot; (TBH I think that method should not exist at all) and are using the API the wrong way. Compress uses the same approach as the standard JDK classes.&lt;/p&gt;

&lt;p&gt;In your case this means you need to find your ArchiveEntry and then the InputStream is positioned right where you need it. Search for &quot;testTarUnarchive&quot; to see an example.&lt;/p&gt;</comment>
                            <comment id="13056898" author="lbrtchx" created="Tue, 28 Jun 2011 23:51:17 +0000"  >&lt;p&gt; OK, let me put it this way. There is:&lt;br/&gt;
~ &lt;br/&gt;
 java/util/zip/ZipFile.html#getInputStream(java.util.zip.ZipEntry)&lt;br/&gt;
~ &lt;br/&gt;
 Where is (something (even a hack!) like):&lt;br/&gt;
~ &lt;br/&gt;
 final BZip2CompressorInputStream BZ2KIS = new BZip2CompressorInputStream(new FileInputStream(IFlBZ2));&lt;br/&gt;
 final TarArchiveInputStream TArkIS = new TarArchiveInputStream(BZ2KIS);&lt;br/&gt;
 TarArchiveEntry entry = (TarArchiveEntry)is.getNextEntry();&lt;br/&gt;
 InputStream EntryIS = TArkIS.getInputStream(entry);&lt;br/&gt;
~ &lt;br/&gt;
 so that you may go then, may go:&lt;br/&gt;
~ &lt;br/&gt;
 XMLReader XMLRdr = SAXPrsr.getXMLReader();&lt;br/&gt;
 BufferedReader BfrRdr = new BufferedReader(new InputStreamReader(EntryIS, &quot;UTF-8&quot;));&lt;br/&gt;
 XMLRdr.parse(new InputSource(BfrRdr));&lt;br/&gt;
~ &lt;br/&gt;
 I am not sure if your answer to my question/request was that &quot;getFile shouldn&apos;t be there to begin with&quot; &lt;br/&gt;
~ &lt;br/&gt;
 Why do you have to untar the whole thing in order to get what you want?&lt;br/&gt;
~ &lt;br/&gt;
 Why can&apos;t you get a grip just on the InputStream relating to one entry inside or a tarball? That was/is my question.&lt;br/&gt;
~ &lt;br/&gt;
 Thanks&lt;br/&gt;
 lbrtchx&lt;/p&gt;</comment>
                            <comment id="13154255" author="adranale" created="Mon, 21 Nov 2011 15:42:55 +0000"  >&lt;p&gt;I think what Torsten meant is that you should use the original TarArchiveInputStream to read the data of the next file, as shown here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;			
is = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(tarfilename);
debInputStream = (TarArchiveInputStream) &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArchiveStreamFactory().createArchiveInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;tar&quot;&lt;/span&gt;, is);
TarArchiveEntry entry;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((entry = (TarArchiveEntry) debInputStream.getNextEntry()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File entryFile = (entry).getFile();
	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; entryName = entry.getName();
	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!entry.isDirectory()) {
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;consuming file: &quot;&lt;/span&gt; + entryName);
                Document doc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SAXBuilder().build(debInputStream); 
	} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;consuming folder: &quot;&lt;/span&gt; + entryName);
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem with this is that the &lt;cite&gt;depInputStream&lt;/cite&gt; is closed by the &lt;cite&gt;SAXBuilder&lt;/cite&gt;, so the second call to &lt;cite&gt;debInputStream.getNextEntry()&lt;/cite&gt; will throw &lt;cite&gt;java.io.IOException: input buffer is closed&lt;/cite&gt;&lt;/p&gt;
</comment>
                            <comment id="13157177" author="bodewig" created="Fri, 25 Nov 2011 14:49:17 +0000"  >&lt;p&gt;You can wrap the stream in something like the BoundedInputStream found as nested class in ZipFile or more conveniently in commons-io.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Jun 2011 23:52:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>69815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0th8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170103</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-135] Original file creation date is not retained when files are added to a zip archive </title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-135</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I have a Java program using the Apache zip archives library to zip together files with a common create month. However, when the resulting zip archives are examined the create date of all the files in the archive has been changed to the date the archive was created. It is critical that we retain the create date in these archives as they will be used for troubleshooting at a future date. Is there a way that this can be done currently, or is it something that will need to be addressed in a future build?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP &amp;amp; Server 2003&lt;/p&gt;</environment>
        <key id="12511388">COMPRESS-135</key>
            <summary>Original file creation date is not retained when files are added to a zip archive </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="csalac">Claire Salac</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jun 2011 17:46:41 +0000</created>
                <updated>Fri, 24 Jun 2011 13:31:55 +0000</updated>
                            <resolved>Fri, 24 Jun 2011 13:31:55 +0000</resolved>
                                    <version>1.1</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13054369" author="bodewig" created="Fri, 24 Jun 2011 11:09:56 +0000"  >&lt;p&gt;You don&apos;t say how you are zipping your entries.&lt;/p&gt;

&lt;p&gt;If you use the ZipArchiveEntry constructor accepting a file argument it should read the last modification time from the file instance.  If you use any of the other ZipArchiveEntry constructors you are responsible of setting the time yourself - see java.util.zip.ZipEntry#setTime.&lt;/p&gt;</comment>
                            <comment id="13054386" author="csalac" created="Fri, 24 Jun 2011 11:59:12 +0000"  >&lt;p&gt;I use the following:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
dest = new FileOutputStream(zipFilePath);&lt;br/&gt;
zip = new ZipArchiveOutputStream(dest);&lt;br/&gt;
origin = new BufferedInputStream(new FileInputStream(InnerContents&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;));&lt;br/&gt;
ZipArchiveEntry zippy = new ZipArchiveEntry(InnerContents&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.getName());&lt;/p&gt;

&lt;p&gt;zip.createArchiveEntry(InnerContents&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;, InnerContents&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.getName());&lt;br/&gt;
zip.setEncoding(null);&lt;br/&gt;
zip.setUseLanguageEncodingFlag(false);&lt;br/&gt;
zip.putArchiveEntry(zippy);&lt;br/&gt;
while((count = origin.read(data)) != -1)&lt;br/&gt;
{&lt;br/&gt;
     zip.write(data, 0, count);&lt;br/&gt;
}&lt;br/&gt;
zip.closeArchiveEntry();&lt;br/&gt;
origin.close();&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;If what you say is the case then I should still be seeing different dates in the zip archive. Instead, I see all files have one uniform date: the date the archive was created.&lt;/p&gt;
</comment>
                            <comment id="13054431" author="bodewig" created="Fri, 24 Jun 2011 13:06:41 +0000"  >&lt;p&gt;I don&apos;t see any call to zippy.setTime() so you can&apos;t expect it to be the one of your original file - that would only be the case if you used new ZipArchiveEntry(InnerContents&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;) if InnerContents&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; is a File instance.&lt;/p&gt;

&lt;p&gt;The way the code is written each entry will get the time the entry instance has been created as its time.  Given that ZIPs store time with two seconds granularity you will only see different time results if it takes more than two seconds to create the archive.&lt;/p&gt;</comment>
                            <comment id="13054439" author="csalac" created="Fri, 24 Jun 2011 13:18:45 +0000"  >&lt;p&gt;Stefan,&lt;/p&gt;

&lt;p&gt;InnerContents is an array of Files (File [] InnerContents&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Are you saying I could use zippy.setTime() to manually set the date stored in the archive for each file? I think I can make that work. Thank you so much!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Jun 2011 11:09:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>70110</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uo9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>177074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-131] ArrayOutOfBounds while decompressing bz2</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-131</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Decompressing a bz2 file generated by bzip2 utility throws an ArrayIndexOutOfBounds at method recvDecodingTables() line 469.&lt;br/&gt;
I believe it is related to encodings used to generate the original text file (the compressed file).&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu linux&lt;/p&gt;</environment>
        <key id="12509200">COMPRESS-131</key>
            <summary>ArrayOutOfBounds while decompressing bz2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="orair">Gustavo Orair</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jun 2011 16:25:45 +0000</created>
                <updated>Thu, 23 Feb 2012 01:31:59 +0000</updated>
                            <resolved>Thu, 23 Feb 2012 01:31:59 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="604800">168h</timeoriginalestimate>
                            <timeestimate seconds="604800">168h</timeestimate>
                                        <comments>
                            <comment id="13043450" author="orair" created="Fri, 3 Jun 2011 16:29:42 +0000"  >&lt;p&gt;The bz2 file that can be extracted okay using bzip2 utility (Ubuntu) but results in an ArrayOutOfBoundException when decompressing using Apache Commons Compress.&lt;/p&gt;</comment>
                            <comment id="13214176" author="sebb@apache.org" created="Thu, 23 Feb 2012 01:31:59 +0000"  >&lt;p&gt;Did not actually fail, so presumably was fixed in an earlier version of Compress.&lt;/p&gt;

&lt;p&gt;Added test case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12481368" name="BDIN.Teste.xml.bz2" size="340" author="orair" created="Fri, 3 Jun 2011 16:29:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Feb 2012 01:31:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62820</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-130] ZipArchiveInputStream.skip could use safer comparison; inherited Javadoc is incorrect</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-130</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ZipArchiveInputStream.skip uses the condition (skipped != value) to detect when it has skipped enough. &lt;br/&gt;
It would be safer to use (skipped &amp;lt; value) in case skipped somehow exceeds value.&lt;/p&gt;

&lt;p&gt;Also, the inherited Javadoc says that skip(value) may skip fewer than value bytes - AFAICT this is precisely the potential error that this method was written to solve.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12506997">COMPRESS-130</key>
            <summary>ZipArchiveInputStream.skip could use safer comparison; inherited Javadoc is incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 May 2011 14:45:27 +0000</created>
                <updated>Wed, 20 Jul 2011 15:00:08 +0000</updated>
                            <resolved>Wed, 20 Jul 2011 15:00:08 +0000</resolved>
                                                    <fixVersion>1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13068421" author="bodewig" created="Wed, 20 Jul 2011 15:00:08 +0000"  >&lt;p&gt;The code was heavily inspired by Harmony&apos;s and I never looked at the Javadocs, fixed now in svn revision 1148806.&lt;/p&gt;

&lt;p&gt;I don&apos;t believe skipped could become larger than value, but still made the suggested change.&lt;/p&gt;

&lt;p&gt;As a sidenote, our implementation - as Harmony&apos;s - breaks InputStream&apos;s contract WRT negative arguments.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jul 2011 15:00:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>67345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62834</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-129] &quot;java.io.EOFException: Truncated ZIP entry: &lt;some entry&gt;&quot;- while extracting a zip file that contains a entry which lager than 2 GB (Integer#MAX_VALUE)</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-129</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Issue:&lt;br/&gt;
&quot;java.io.EOFException: Truncated ZIP entry: &amp;lt;some entry&amp;gt;&quot; will be threw while extracting a zip file that contains a entry with size larger than Integer#MAX_VALUE bytes (about 2 GB). After the big entry has been read, then try to get next entry by calling ZipArchiveInputStream#getNextZipEntry(), and it throws that EOFException.&lt;/p&gt;

&lt;p&gt;Cause:&lt;br/&gt;
before getting next zip entry, ZipArchiveInputStream tries to close the current entry and in the close- method it use the field &quot;bytesReadFromStream&quot; to ensure all entry bytes are read, however the field &quot;bytesReadFromStream&quot; is a integer, that means it is already overflowed and it leads to a false ensure result.&lt;/p&gt;

&lt;p&gt;Solution suggestion:&lt;br/&gt;
instead integer using long for &quot;bytesReadFromStream&quot; and possibly for &quot;readBytesOfEntry&quot; too.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 10; java 6 of sun&lt;/p&gt;</environment>
        <key id="12506977">COMPRESS-129</key>
            <summary>&quot;java.io.EOFException: Truncated ZIP entry: &lt;some entry&gt;&quot;- while extracting a zip file that contains a entry which lager than 2 GB (Integer#MAX_VALUE)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="twang8341">tinghui wang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 May 2011 13:13:56 +0000</created>
                <updated>Tue, 26 Jul 2011 14:14:21 +0000</updated>
                            <resolved>Tue, 26 Jul 2011 14:14:21 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13032448" author="sebb@apache.org" created="Thu, 12 May 2011 15:05:09 +0000"  >&lt;p&gt;It does look like bytesReadFromStream could be changed to long. &lt;/p&gt;

&lt;p&gt;However, that won&apos;t necessarily solve all such problems, because the Java 1.4 java.util.zip.Inflater class only allows for returning an int for getTotalIn() and getRemaining().&lt;/p&gt;

&lt;p&gt;The Zip deflate/inflate standard allows for a max. of 2**32-1 bytes which is too big to fit into a signed int.&lt;/p&gt;

&lt;p&gt;Java 1.5 adds some new methods which return long; to fix this properly probably requires moving to Java 1.5.&lt;/p&gt;</comment>
                            <comment id="13068788" author="bodewig" created="Thu, 21 Jul 2011 03:52:16 +0000"  >&lt;p&gt;Should be (at least partially) be resolved by svn revision 1149029&lt;/p&gt;

&lt;p&gt;I agree with Sebb that a more complete fix is not possible without requiring Java5.  This will become more pressing if we start to support ZIP64 so I&apos;ll kick of a thread for this on the dev list later.&lt;/p&gt;</comment>
                            <comment id="13069892" author="bodewig" created="Sat, 23 Jul 2011 03:19:33 +0000"  >&lt;p&gt;A partial fix that will work for some (Many?) archives will be in version 1.2, the more complete solution in 1.3.&lt;/p&gt;</comment>
                            <comment id="13070406" author="bodewig" created="Mon, 25 Jul 2011 09:54:26 +0000"  >&lt;p&gt;should be fixed with svn revision 1150608 of the zip64 branch, will resolve this issue once the branch is merged to trunk&lt;/p&gt;</comment>
                            <comment id="13071113" author="bodewig" created="Tue, 26 Jul 2011 14:14:21 +0000"  >&lt;p&gt;For non-ZIP64 entries, i.e. for ZIPs Commons Compress 1.2 can actually deal with, svn revision 1151104 should work.&lt;/p&gt;

&lt;p&gt;The zip64 branch already contains the more general solution.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 May 2011 15:05:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62835</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-127] Calling close() on inputStream returned by CompressorStreamFactory.createCompressorInputStream() does not close the underlying input stream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-127</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When creating and closing a stream like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;InputStream is = csFactory.createCompressorInputStream(CompressorStreamFactory.GZIP, in);
is.close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The underlying stream &lt;b&gt;in&lt;/b&gt; is not closed.&lt;/p&gt;

&lt;p&gt;It seems like  a bug - for instance it prevents from deleting the file on which that stream was opened.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12502111">COMPRESS-127</key>
            <summary>Calling close() on inputStream returned by CompressorStreamFactory.createCompressorInputStream() does not close the underlying input stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="doronc">Doron Cohen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2011 21:44:36 +0000</created>
                <updated>Thu, 2 May 2013 02:29:37 +0000</updated>
                            <resolved>Wed, 23 Mar 2011 11:07:15 +0000</resolved>
                                                    <fixVersion>1.2</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13009859" author="doronc" created="Tue, 22 Mar 2011 21:50:40 +0000"  >&lt;p&gt;Attached simple program creates the bug.&lt;br/&gt;
As written the program fails.&lt;br/&gt;
Uncomment line 39 and it should pass.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// uncomment the following line to make the test pass
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// but I think it should have passed without &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line and &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is actually a bug 
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//bis.close(); &lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13010046" author="doronc" created="Wed, 23 Mar 2011 10:20:20 +0000"  >&lt;p&gt;The attached test will fail in Windows but might pass in Linux.&lt;br/&gt;
Still the problem is real.&lt;br/&gt;
It is not too difficult to write a test that will fail also in Linux - see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2980?focusedCommentId=13009986&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13009986&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Shai&apos;s suggestion in LUCENE-2980&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13010054" author="sebb@apache.org" created="Wed, 23 Mar 2011 10:48:06 +0000"  >&lt;p&gt;It does seem to be an omission, because the BZip2 version closes the wrapped stream, as do the ArchiveInputStream sub-classes that I checked..&lt;/p&gt;</comment>
                            <comment id="13010060" author="doronc" created="Wed, 23 Mar 2011 11:05:42 +0000"  >&lt;p&gt;hi Sebb, thanks for looking into this!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;because the BZip2 version closes the wrapped stream,&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I verified this in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2980&quot; title=&quot;Benchmark&amp;#39;s ContentSource should not rely on file suffixes to be lower cased when detecting file type (gzip/bzip2/text)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-2980&quot;&gt;&lt;del&gt;LUCENE-2980&lt;/del&gt;&lt;/a&gt; where I put a workaround for this - indeed, it is not needed for BZip2, only for GZIP.&lt;/p&gt;</comment>
                            <comment id="13010061" author="sebb@apache.org" created="Wed, 23 Mar 2011 11:07:15 +0000"  >&lt;p&gt;Fixed by adding close() method to GZipCompressorInputStream&lt;/p&gt;</comment>
                            <comment id="13010068" author="doronc" created="Wed, 23 Mar 2011 11:22:19 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12502077">LUCENE-2980</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12502116">LUCENE-2982</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12474344" name="CreateCompressorInputStreamTest.java" size="1726" author="doronc" created="Tue, 22 Mar 2011 21:50:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Mar 2011 10:48:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110622</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4gv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-126] ZipArchiveEntry.isDirectory() doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-126</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I have a ZIP Archive that contains 1 file that itself is within a directory. ZipArchiveEntry.getName() returns as expected:&lt;/p&gt;

&lt;p&gt;test/file.txt&lt;/p&gt;

&lt;p&gt;but ZipArchiveEntry.isDirectory() returns false!&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP, JDK 1.6.0_24&lt;/p&gt;</environment>
        <key id="12499715">COMPRESS-126</key>
            <summary>ZipArchiveEntry.isDirectory() doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mhilpert">MH</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Feb 2011 14:11:20 +0000</created>
                <updated>Fri, 25 Feb 2011 19:14:34 +0000</updated>
                            <resolved>Fri, 25 Feb 2011 14:19:28 +0000</resolved>
                                    <version>1.1</version>
                                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12999364" author="sebb@apache.org" created="Fri, 25 Feb 2011 14:19:28 +0000"  >&lt;p&gt;That&apos;s because the entry is a file, not a directory.&lt;/p&gt;</comment>
                            <comment id="12999461" author="mhilpert" created="Fri, 25 Feb 2011 18:39:20 +0000"  >&lt;p&gt;But it is a file with a possible leading relative path! I git an IOException because if this. So, far, I only had plain files in an Archive. Now I have files within directories. The method isDirectory() seems to be &quot;isEmptyDirectory()&quot;, right? I found a workaround unzipping such Archives by first getting the parent of the zip entry as a file object and then call mkDirs() to create such directories before unzipping the entry.&lt;/p&gt;</comment>
                            <comment id="12999480" author="sebb@apache.org" created="Fri, 25 Feb 2011 19:14:29 +0000"  >&lt;p&gt;JIRA is not a support forum.&lt;/p&gt;

&lt;p&gt;Please subscribe to the Commons User mailing list &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and ask there.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://commons.apache.org/compress/mail-lists.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/compress/mail-lists.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Feb 2011 14:19:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110621</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uo9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>177071</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-125] BZip2CompressorInputStream throws IOException if underlying stream returns available() == 0</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-125</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;BZip2CompressorInputStream,init() will throw an IOException, if the passed stream returns 0 for available():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;BZip2CompressorInputStream.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void init() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        ...
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (in.available() == 0) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Empty InputStream&quot;&lt;/span&gt;);
        }
        ...
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;I think this is not correct, because the underlying stream may indeed be able to only return 0 bytes without blocking but may be able to block a little and then return some more bytes.&lt;br/&gt;
Note also the change in the API documentation from: &quot;Returns the number of bytes that can be read &quot; (1.4.2) to &quot;Returns an estimate of the number of bytes that can be read&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12496111">COMPRESS-125</key>
            <summary>BZip2CompressorInputStream throws IOException if underlying stream returns available() == 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="effad">Robert Lichtenberger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jan 2011 10:08:47 +0000</created>
                <updated>Wed, 23 Mar 2011 11:18:17 +0000</updated>
                            <resolved>Wed, 23 Mar 2011 11:18:17 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13010062" author="sebb@apache.org" created="Wed, 23 Mar 2011 11:10:49 +0000"  >&lt;p&gt;Fix class name&lt;/p&gt;</comment>
                            <comment id="13010067" author="sebb@apache.org" created="Wed, 23 Mar 2011 11:18:17 +0000"  >&lt;p&gt;Agreed - the check serves no purpose and can cause unnecessary failures&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Mar 2011 11:10:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110620</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-119] TarArchiveOutputStream#finish doesn&apos;t flush content to underlying stream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-119</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Originally reported against Ant &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=50014&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=50014&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The finish() method of TarOutputStream does not flush the TarBuffer to the&lt;br/&gt;
underlying output stream. A subsequent flush() on the TarOutputStream&lt;br/&gt;
unexpectedly does not flush all written data to the underlying stream.&lt;/p&gt;

&lt;p&gt;Case: If an outputStream is tied to a Socket OutputStream, the receiving server&lt;br/&gt;
can be notified that the stream has finished by calling the&lt;br/&gt;
Socket.shutdownOutput() method while still allowing the server to respond to&lt;br/&gt;
the client e.g. for sending a status report of the finished data transfer. This&lt;br/&gt;
is in particular usefull if the size of the stream is not known in advance such&lt;br/&gt;
as for a tar stream generated on the fly at the client side.&lt;/p&gt;

&lt;p&gt;The above case relies on all data being sent to the server before invoking&lt;br/&gt;
Socket.shutdownOutput(). The TarOutputStream finish() method suggests to be&lt;br/&gt;
doing just this but in practice does not send any remaining data in the&lt;br/&gt;
TarBuffer. Calling the TarOutputStream close() method is not an option in this&lt;br/&gt;
case since this also closes the Socket connection.&lt;/p&gt;

&lt;p&gt;Quick fix: insert a buffer.flushBlock() statement at the end of the&lt;br/&gt;
TarOutputStream.finish() method.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12475758">COMPRESS-119</key>
            <summary>TarArchiveOutputStream#finish doesn&apos;t flush content to underlying stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Oct 2010 12:28:53 +0000</created>
                <updated>Tue, 26 Oct 2010 09:46:00 +0000</updated>
                            <resolved>Tue, 26 Oct 2010 09:46:00 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12924908" author="bodewig" created="Tue, 26 Oct 2010 09:46:00 +0000"  >&lt;p&gt;fixed with svn revision 1027427&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110617</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-117] Certain tar files not recognised by ArchiveStreamFactory</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-117</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Certain tar files, like this one: &lt;a href=&quot;http://leo.scruffohio.net/cgi-bin/uploads/lzma912.tar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://leo.scruffohio.net/cgi-bin/uploads/lzma912.tar&lt;/a&gt; aren&apos;t being recognized by the ArchiveInputStream detector.&lt;/p&gt;

&lt;p&gt;I can open this tar file perfectly well with WinRAR and 7-zip. Neither of these complain. I can also open it with the command tar -xvf. However, I narrowed it down, and it turns out the TarArchiveInputStream.matches() is returning false, even though it is a valid tar file. This glitch should be fixed.&lt;/p&gt;</description>
                <environment>&lt;p&gt;MS Windows Vista, NetBeans IDE&lt;/p&gt;</environment>
        <key id="12471241">COMPRESS-117</key>
            <summary>Certain tar files not recognised by ArchiveStreamFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="thebombzen">Leo Izen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Aug 2010 00:14:34 +0000</created>
                <updated>Sat, 23 Jan 2016 20:40:43 +0000</updated>
                            <resolved>Wed, 23 Mar 2011 12:50:51 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12897107" author="thebombzen" created="Wed, 11 Aug 2010 01:42:17 +0000"  >&lt;p&gt;Uploaded is the tar I had problems with&lt;/p&gt;</comment>
                            <comment id="13010084" author="sebb@apache.org" created="Wed, 23 Mar 2011 12:04:28 +0000"  >&lt;p&gt;The tar file has no identifying magic string, which is what the matcher is looking for.&lt;br/&gt;
What was used to create it?&lt;/p&gt;

&lt;p&gt;The file can be read OK with TarArchiveInputStream; the only minor issue is that the file is not auto-recognised.&lt;/p&gt;

&lt;p&gt;As a work-round, you could use ArchiveStreamFactory.createArchiveInputStream(String archiverName, InputStream in) to create the reader from the file extension.&lt;/p&gt;</comment>
                            <comment id="13010092" author="sebb@apache.org" created="Wed, 23 Mar 2011 12:22:13 +0000"  >&lt;p&gt;Fix subject and severity&lt;/p&gt;</comment>
                            <comment id="13010093" author="sebb@apache.org" created="Wed, 23 Mar 2011 12:26:05 +0000"  >&lt;p&gt;One possible approach would be to check if the first entry parses OK, and if so, assume that it is a tar file.&lt;/p&gt;

&lt;p&gt;This should be done in ArchiveStreamFactory, not TarArchiveInputStream.matches(), because matches() is a signature check only.&lt;/p&gt;</comment>
                            <comment id="13010101" author="sebb@apache.org" created="Wed, 23 Mar 2011 12:50:51 +0000"  >&lt;p&gt;ArchiveStreamFactory now tries to read the first archive entry if the match test fails.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12933625">COMPRESS-331</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12451730" name="lzma912.tar" size="2595328" author="thebombzen" created="Wed, 11 Aug 2010 01:42:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Mar 2011 12:04:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62839</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-116] ZipArchiveInputStream fails to uncompress stream generated by InfoZip</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-116</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Current Compress implementation silently fails to uncompress streaming zip coming from Info-ZIP. &lt;br/&gt;
Should this behaviour proven to be adherent to spec, some sort of Exception should be thrown instead of silencing the error.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;p&gt;1. Download sample-*.zip. These two files were generated with Info-ZIP. &lt;/p&gt;

&lt;p&gt;sample-ordinary.zip was generated with &quot;zip -r sample-ordinary.zip temp/&quot;.&lt;/p&gt;

&lt;p&gt;sample-streaming.zip was generated with &quot;zip -fd -r - temp/ &amp;gt; sample-streaming.zip&quot;. Note that &quot;-fd&quot; flag forces data descriptors in stream. This is enabled automatically if the pipe sink is not the file, e.g. if you call it as &quot;zip -r - temp/ | pv &amp;gt; sample-streaming.zip&quot;. For convenience, I did it by forcing descriptors via flag.&lt;/p&gt;

&lt;p&gt;2. Download, compile and run TestInfoZip.java, placing Compress on classpath.&lt;/p&gt;

&lt;p&gt;3. Observe the following output:&lt;/p&gt;

&lt;p&gt;Reading sample-ordinary.zip&lt;br/&gt;
name=temp/, size=0&lt;br/&gt;
Read 0 bytes&lt;br/&gt;
name=temp/test.100, size=100&lt;br/&gt;
Read 100 bytes&lt;br/&gt;
name=temp/test.10000, size=10000&lt;br/&gt;
Read 10000 bytes&lt;br/&gt;
name=temp/test.10000.zip, size=10170&lt;br/&gt;
Read 10170 bytes&lt;br/&gt;
name=temp/test.1M, size=1048576&lt;br/&gt;
Read 1048576 bytes&lt;br/&gt;
name=temp/test.10M, size=10485760&lt;br/&gt;
Read 10485760 bytes&lt;/p&gt;

&lt;p&gt;Reading sample-streaming.zip&lt;br/&gt;
name=temp/, size=0&lt;br/&gt;
Read 0 bytes&lt;br/&gt;
name=temp/test.100, size=-1&lt;br/&gt;
Read 100 bytes&lt;br/&gt;
name=temp/test.10000, size=-1&lt;br/&gt;
Read 10000 bytes&lt;br/&gt;
name=temp/test.10M, size=-1&lt;br/&gt;
Read 10485760 bytes&lt;br/&gt;
name=temp/test.10000.zip, size=-1&lt;br/&gt;
Read 0 bytes&lt;/p&gt;

&lt;p&gt;Note that sample-ordinary is read OK, while streaming version had failed read on one of the entries. &lt;br/&gt;
No exceptions are thrown, the implementation thinks the stream is actually over.&lt;/p&gt;

&lt;p&gt;Another finding: this reproduces perfectly when there&apos;s at least one STORED entry in the stream. &lt;br/&gt;
Generating Info-ZIP files with maximum compression (e.g. all entries are DEFLATED) works around this problem.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, Info-ZIP 3.0 (July 5th 2008), Compress 1.0&lt;/p&gt;</environment>
        <key id="12468556">COMPRESS-116</key>
            <summary>ZipArchiveInputStream fails to uncompress stream generated by InfoZip</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aleksey.shipilev">Aleksey Shipilev</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Jul 2010 12:27:05 +0000</created>
                <updated>Mon, 5 Jul 2010 13:53:00 +0000</updated>
                            <resolved>Mon, 5 Jul 2010 13:09:03 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12885204" author="aleksey.shipilev" created="Mon, 5 Jul 2010 12:28:08 +0000"  >&lt;p&gt;Sample ZIP files and test.&lt;/p&gt;</comment>
                            <comment id="12885209" author="bodewig" created="Mon, 5 Jul 2010 12:48:42 +0000"  >&lt;p&gt;I think this is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-103&quot; title=&quot;allow data descriptors to follow STORED entries in ZIP archives being read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-103&quot;&gt;&lt;del&gt;COMPRESS-103&lt;/del&gt;&lt;/a&gt; which is fixed in trunk.&lt;/p&gt;</comment>
                            <comment id="12885221" author="aleksey.shipilev" created="Mon, 5 Jul 2010 13:05:44 +0000"  >&lt;p&gt;Hi Stefan, thanks for the pointer!&lt;br/&gt;
This is with today&apos;s trunk:&lt;/p&gt;

&lt;p&gt;------------------- cut ---------------------&lt;/p&gt;

&lt;p&gt;$ java -cp ~/trunks/commons-compress/target/commons-compress-1.1-SNAPSHOT.jar:. TestInfoZip&lt;br/&gt;
Reading sample-ordinary.zip&lt;br/&gt;
name=temp/, size=0&lt;br/&gt;
Read 0 bytes&lt;br/&gt;
name=temp/test.100, size=100&lt;br/&gt;
Read 100 bytes&lt;br/&gt;
name=temp/test.10000, size=10000&lt;br/&gt;
Read 10000 bytes&lt;br/&gt;
name=temp/test.10000.zip, size=10170&lt;br/&gt;
Read 10170 bytes&lt;br/&gt;
name=temp/test.1M, size=1048576&lt;br/&gt;
Read 1048576 bytes&lt;br/&gt;
name=temp/test.10M, size=10485760&lt;br/&gt;
Read 10485760 bytes&lt;/p&gt;


&lt;p&gt;Reading sample-streaming.zip&lt;br/&gt;
name=temp/, size=0&lt;br/&gt;
Read 0 bytes&lt;br/&gt;
name=temp/test.100, size=-1&lt;br/&gt;
Read 100 bytes&lt;br/&gt;
name=temp/test.10000, size=-1&lt;br/&gt;
Read 10000 bytes&lt;br/&gt;
name=temp/test.10M, size=-1&lt;br/&gt;
Read 10485760 bytes&lt;br/&gt;
name=temp/test.10000.zip, size=-1&lt;br/&gt;
Exception in thread &quot;main&quot; org.apache.commons.compress.archivers.zip.UnsupportedZipFeatureException: unsupported feature data descriptor used in entry temp/test.10000.zip&lt;br/&gt;
	at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.read(ZipArchiveInputStream.java:245)&lt;br/&gt;
	at java.io.InputStream.read(InputStream.java:85)&lt;br/&gt;
	at TestInfoZip.read(TestInfoZip.java:27)&lt;br/&gt;
	at TestInfoZip.main(TestInfoZip.java:13)&lt;/p&gt;

&lt;p&gt;------------------- cut ---------------------&lt;/p&gt;

&lt;p&gt;Is this intended behaviour?&lt;/p&gt;</comment>
                            <comment id="12885227" author="bodewig" created="Mon, 5 Jul 2010 13:09:03 +0000"  >&lt;p&gt;Yep, I&apos;ve tested your test archive against trunk, enabling data descriptors for STORED entries explicitly, and it extracts just fine.&lt;/p&gt;

&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-103&quot; title=&quot;allow data descriptors to follow STORED entries in ZIP archives being read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-103&quot;&gt;&lt;del&gt;COMPRESS-103&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12885229" author="aleksey.shipilev" created="Mon, 5 Jul 2010 13:14:51 +0000"  >&lt;p&gt;Stafan, I&apos;m puzzled. You had tested against the fresh trunk, with these two archives attached to this issue, and had not see the exception?&lt;br/&gt;
Because I seem to be doing precisely the same, and exception is there.&lt;/p&gt;</comment>
                            <comment id="12885232" author="bodewig" created="Mon, 5 Jul 2010 13:24:33 +0000"  >&lt;p&gt;The piece you&apos;ve missed from my comment was &quot;enabling data descriptors for STORED entries explicitly&quot; 8-)&lt;/p&gt;

&lt;p&gt;Data Descriptors, STORED entries and streaming are a dangerous combination and you must explicitly&lt;br/&gt;
enable it with a new constructor argument in order to use it.  If you don&apos;t enable it you get the exception&lt;br/&gt;
(rather than a truncated entry like in 1.0).&lt;/p&gt;</comment>
                            <comment id="12885233" author="bodewig" created="Mon, 5 Jul 2010 13:30:23 +0000"  >&lt;p&gt;Background: &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/compress/trunk/src/site/xdoc/zip.xml?p2=%2Fcommons%2Fproper%2Fcompress%2Ftrunk%2Fsrc%2Fsite%2Fxdoc%2Fzip.xml&amp;amp;p1=%2Fcommons%2Fproper%2Fcompress%2Ftrunk%2Fsrc%2Fsite%2Fxdoc%2Fzip.xml&amp;amp;r1=925271&amp;amp;r2=925270&amp;amp;view=diff&amp;amp;pathrev=925271&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/commons/proper/compress/trunk/src/site/xdoc/zip.xml?p2=%2Fcommons%2Fproper%2Fcompress%2Ftrunk%2Fsrc%2Fsite%2Fxdoc%2Fzip.xml&amp;amp;p1=%2Fcommons%2Fproper%2Fcompress%2Ftrunk%2Fsrc%2Fsite%2Fxdoc%2Fzip.xml&amp;amp;r1=925271&amp;amp;r2=925270&amp;amp;view=diff&amp;amp;pathrev=925271&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12885237" author="aleksey.shipilev" created="Mon, 5 Jul 2010 13:53:00 +0000"  >&lt;p&gt;Right, I see now. The proposed workaround seem to be very dangerous.&lt;br/&gt;
Let me think about it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12448694" name="TestInfoZip.java" size="1213" author="aleksey.shipilev" created="Mon, 5 Jul 2010 12:28:07 +0000"/>
                            <attachment id="12448692" name="sample-ordinary.zip" size="32437" author="aleksey.shipilev" created="Mon, 5 Jul 2010 12:28:07 +0000"/>
                            <attachment id="12448693" name="sample-streaming.zip" size="32527" author="aleksey.shipilev" created="Mon, 5 Jul 2010 12:28:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 5 Jul 2010 12:48:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0th0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170067</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-114] TarUtils.parseName does not properly handle characters outside the range 0-127</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-114</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;if a tarfile contains files with special characters, the names of the tar entries are wrong.&lt;/p&gt;

&lt;p&gt;example:&lt;br/&gt;
correct name: 0302-0601-3&#177;&#177;&#177;F06&#177;W220&#177;ZB&#177;LALALA&#177;&#177;&#177;&#177;&#177;&#177;&#177;&#177;&#177;&#177;CAN&#177;&#177;DC&#177;&#177;&#177;04&#177;060302&#177;MOE.model&lt;br/&gt;
name resolved by TarUtils.parseName: 0302-0101-3&#65457;&#65457;&#65457;F06&#65457;W220&#65457;ZB&#65457;HECKMODUL&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;ECE&#65457;&#65457;DC&#65457;&#65457;&#65457;07&#65457;060302&#65457;DOERN.model&lt;/p&gt;

&lt;p&gt;please use: &lt;br/&gt;
result.append(new String(new byte[] &lt;/p&gt;
{ buffer[i] }
&lt;p&gt;));&lt;/p&gt;

&lt;p&gt;instead of: &lt;br/&gt;
result.append((char) buffer&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;);&lt;/p&gt;

&lt;p&gt;to solve this encoding problem.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows/Suse&lt;/p&gt;</environment>
        <key id="12464672">COMPRESS-114</key>
            <summary>TarUtils.parseName does not properly handle characters outside the range 0-127</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hminst">Helmut Minst</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 May 2010 12:05:11 +0000</created>
                <updated>Thu, 5 Aug 2010 08:04:41 +0000</updated>
                            <resolved>Mon, 17 May 2010 15:10:06 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12868206" author="sebb@apache.org" created="Mon, 17 May 2010 12:52:28 +0000"  >&lt;p&gt;Could you provide a small sample tar file containing some files with the special names?&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Perhaps the file contents could be the expected name&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;We can then add the file to the test cases.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12868211" author="sebb@apache.org" created="Mon, 17 May 2010 12:56:21 +0000"  >&lt;p&gt;Forgot to mention:&lt;/p&gt;

&lt;p&gt;The &quot;String(byte[])&quot; constructor depends on the default charset encoding, which might not always be what is wanted.&lt;/p&gt;</comment>
                            <comment id="12868212" author="hminst" created="Mon, 17 May 2010 13:02:50 +0000"  >&lt;p&gt;tarfile which includes such files with a filename containing special characters&lt;/p&gt;</comment>
                            <comment id="12868217" author="hminst" created="Mon, 17 May 2010 13:25:11 +0000"  >&lt;p&gt;that&apos;s right, but the cast from byte to char is not a beautiful way.&lt;/p&gt;

&lt;p&gt;String charsetName = &quot;ISO-8859-1&quot;;&lt;br/&gt;
                try {&lt;br/&gt;
                    result.append(new String(new byte[] &lt;/p&gt;
{ buffer[i] }, charsetName));&lt;br/&gt;
                } catch (UnsupportedEncodingException e) {&lt;br/&gt;
                    result.append(new String(new byte[] { buffer[i] }
&lt;p&gt;));&lt;br/&gt;
                }&lt;/p&gt;

&lt;p&gt;where charsetName may be set via a system property or sth else by the customer of commons compress.&lt;/p&gt;
</comment>
                            <comment id="12868219" author="hminst" created="Mon, 17 May 2010 13:36:05 +0000"  >&lt;p&gt;example where charset may be set by a setter in TarArchiveInpustream.&lt;br/&gt;
if an UnsupportedEncodingException occurs, the default charset of the system&lt;br/&gt;
is used.&lt;/p&gt;

&lt;p&gt;Please have a look. Hope this helps to solve the problem.&lt;/p&gt;</comment>
                            <comment id="12868220" author="sebb@apache.org" created="Mon, 17 May 2010 13:42:08 +0000"  >&lt;p&gt;Thanks for the test case - unfortunately you did not grant a license to the ASF to use it.&lt;br/&gt;
Could you re-attach it with the option selected please?&lt;/p&gt;</comment>
                            <comment id="12868222" author="hminst" created="Mon, 17 May 2010 13:46:37 +0000"  >&lt;p&gt;same file, but now the license is available&lt;/p&gt;</comment>
                            <comment id="12868225" author="sebb@apache.org" created="Mon, 17 May 2010 13:57:02 +0000"  >&lt;p&gt;As to how to determine the charset, it looks as though &quot;ASCII&quot; or &quot;ISO-8859-1&quot; are suitable as the default.&lt;br/&gt;
Gnu docs mention &quot;local variant of ASCII&quot;.&lt;/p&gt;</comment>
                            <comment id="12868232" author="hminst" created="Mon, 17 May 2010 14:25:08 +0000"  >&lt;p&gt;yes, i think &quot;ISO-8859-1&quot; seems to be the suitable default value for the charset, too.&lt;/p&gt;

&lt;p&gt;i&apos;ve tested it with several special characters&lt;/p&gt;

&lt;p&gt;&#228;&#246;&#252; in german for example&lt;/p&gt;</comment>
                            <comment id="12868238" author="sebb@apache.org" created="Mon, 17 May 2010 14:32:40 +0000"  >&lt;p&gt;I think there may also be a problem with the TarUtils.formatNameBytes() method, which assumes that String.charAt() can be stored in a byte.&lt;/p&gt;

&lt;p&gt;I&apos;ll add some round-trip tests for formatNameBytes() / parseName()&lt;/p&gt;</comment>
                            <comment id="12868244" author="sebb@apache.org" created="Mon, 17 May 2010 14:54:56 +0000"  >&lt;p&gt;Turned out to be easy to fix the round-trip problem - just ensure that the byte entries are treated as unsigned.&lt;br/&gt;
So no need to worry about charsets.&lt;/p&gt;

&lt;p&gt;Still need to check that this works OK when reading from the test tar file.&lt;/p&gt;</comment>
                            <comment id="12868248" author="sebb@apache.org" created="Mon, 17 May 2010 15:10:06 +0000"  >&lt;p&gt;Now fixed; the test tar file reads OK&lt;/p&gt;</comment>
                            <comment id="12868256" author="hminst" created="Mon, 17 May 2010 15:47:25 +0000"  >&lt;p&gt;I&apos;ve had a look on your solution. This is a better way to solve this Problem. &lt;br/&gt;
Thanks a lot!&lt;/p&gt;</comment>
                            <comment id="12895204" author="partysan" created="Wed, 4 Aug 2010 10:18:22 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;


&lt;p&gt;I&apos;ve checked out the trunk from &lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/compress&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/compress&lt;/a&gt; and run the testRoundTripNames() test from TarUtilsTest. It failed (the last checkName() call with spec. characters). The test was performed on Ubuntu 8.10.&lt;/p&gt;

&lt;p&gt;Has the fix been tested on Linux? In which version can find the final fix to this special characters problem?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;


</comment>
                            <comment id="12895219" author="bodewig" created="Wed, 4 Aug 2010 11:07:28 +0000"  >&lt;p&gt;The test passes for me using Ubuntu 10.4 and OpenJDK 6 - I guess it may even more depend on the Java VM than the OS.  Which flavor of Java are you using, Pavel?&lt;/p&gt;</comment>
                            <comment id="12895228" author="partysan" created="Wed, 4 Aug 2010 11:59:44 +0000"  >&lt;p&gt;Stefan, thanks for a swift reply,&lt;/p&gt;

&lt;p&gt;I&apos;m using Sun JDK 1.6.0_14_b08, but I&apos;ve just tried it with OpenJDK 1.6.0_0-b12 and have the same result... &lt;/p&gt;

&lt;p&gt;In case it helps: I&apos;ve checked out the trunc using Eclipse 3.6 (Subversive plugin) and build it using Maven2 plugin&lt;/p&gt;

&lt;p&gt;Do you know where I can get a commons-compress.jar (1.1) distro?&lt;/p&gt;

&lt;p&gt;thx&lt;/p&gt;</comment>
                            <comment id="12895379" author="bodewig" created="Wed, 4 Aug 2010 19:34:22 +0000"  >&lt;p&gt;A snapshot I compiled myself can be found at &lt;a href=&quot;http://people.apache.org/~bodewig/commons-compress-1.1-SNAPSHOT.jar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~bodewig/commons-compress-1.1-SNAPSHOT.jar&lt;/a&gt; and I&apos;ll remove it once 1.1 has been released.&lt;/p&gt;

&lt;p&gt;The unit tests pass for me on my Ubuntu system and it&apos;s pretty likely it is more of an environment setting thing.  I may also note that the tests pass in the Apache Gump builds both on Linux (Ubuntu 8.4) and Solaris 10.&lt;/p&gt;

&lt;p&gt;Returning to the original problem, commons-compress really doesn&apos;t implement POSIX tar or even comes close to it.  It mostly lives at the least common denominator of all tar dialects, ustar.  And this means the only characters that are really supported come from the seven bit ASCII set - with anything else you can only hope it works.&lt;/p&gt;
</comment>
                            <comment id="12895608" author="hminst" created="Thu, 5 Aug 2010 08:03:20 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;ve tested it at the time when the bug was fixed by Sebb on following OS:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ubuntu&lt;/li&gt;
	&lt;li&gt;Windows&lt;/li&gt;
	&lt;li&gt;Mac&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;and the solution worked fine.&lt;/p&gt;

&lt;p&gt;grz&lt;/p&gt;</comment>
                            <comment id="12895609" author="hminst" created="Thu, 5 Aug 2010 08:04:41 +0000"  >&lt;p&gt;see last comment. issue was tested on several OS&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12444673" name="TarArchiveEntry.java" size="20320" author="hminst" created="Mon, 17 May 2010 13:36:05 +0000"/>
                            <attachment id="12444674" name="TarArchiveInputStream.java" size="11593" author="hminst" created="Mon, 17 May 2010 13:36:05 +0000"/>
                            <attachment id="12444675" name="TarUtils.java" size="9472" author="hminst" created="Mon, 17 May 2010 13:36:05 +0000"/>
                            <attachment id="12444676" name="plusMinusForJIRAwithLicense.tar" size="10240" author="hminst" created="Mon, 17 May 2010 13:46:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 May 2010 12:52:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62843</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-113] TarArchiveEntry.parseTarHeader() includes the trailing space/NUL when parsing the octal size</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-113</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;TarArchiveEntry.parseTarHeader() includes the trailing space/NUL when parsing the octal size.&lt;/p&gt;

&lt;p&gt;Although the size field in the header is 12 bytes, the last byte is supposed to be space or NUL - i.e. only 11 octal digits are allowed for the size.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464437">COMPRESS-113</key>
            <summary>TarArchiveEntry.parseTarHeader() includes the trailing space/NUL when parsing the octal size</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sebb@apache.org">Sebb</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 May 2010 15:30:40 +0000</created>
                <updated>Wed, 2 Jun 2010 11:02:35 +0000</updated>
                            <resolved>Wed, 2 Jun 2010 11:02:35 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12867156" author="sebb@apache.org" created="Thu, 13 May 2010 15:40:08 +0000"  >&lt;p&gt;The code will work OK for valid input, but an invalid file could have 12 octal digits.&lt;/p&gt;

&lt;p&gt;Possible solutions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ignore the trailing byte when converting&lt;/li&gt;
	&lt;li&gt;change the parsing routine to insist on a trailing space or NUL for all numeric fields.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12873610" author="cgrobmeier" created="Mon, 31 May 2010 10:13:24 +0000"  >&lt;p&gt;Christian Grobmeier:&lt;br/&gt;
&amp;gt;  &amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-113&quot; title=&quot;TarArchiveEntry.parseTarHeader() includes the trailing space/NUL when parsing the octal size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-113&quot;&gt;&lt;del&gt;COMPRESS-113&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
&amp;gt;  &amp;gt; TarArchiveEntry.parseTarHeader() includes the trailing space/NUL when&lt;br/&gt;
&amp;gt;  &amp;gt; parsing the octal&lt;br/&gt;
&amp;gt;  &amp;gt; Suggestion from Sebb available. If a trailing NUL is in the tar specs,&lt;br/&gt;
&amp;gt;  &amp;gt; I wold go for option 2 otherwise 1.&lt;br/&gt;
&amp;gt;&lt;/p&gt;

&lt;p&gt;Stefan Bodewig&lt;br/&gt;
&amp;gt; If only there was &lt;b&gt;the&lt;/b&gt; tar spec.  The best source I know is the FreeBSD&lt;br/&gt;
&amp;gt;  man page&lt;br/&gt;
&amp;gt;  &amp;lt;&lt;a href=&quot;http://www.freebsd.org/cgi/man.cgi?query=tar&amp;amp;sektion=5&amp;amp;manpath=FreeBSD+8-current&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.freebsd.org/cgi/man.cgi?query=tar&amp;amp;sektion=5&amp;amp;manpath=FreeBSD+8-current&lt;/a&gt;&amp;gt;&lt;br/&gt;
&amp;gt;  and it says &quot;must end in a space&quot; for &apos;old archives&apos; and &quot;allows&lt;br/&gt;
&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;numeric fields&amp;#93;&lt;/span&gt; to be terminated with either space or NUL&quot;.  Similar&lt;br/&gt;
&amp;gt;  rules (slightly twisted for &apos;old archives&apos;) apply to other fields than&lt;br/&gt;
&amp;gt;  size as well, like mode or uid.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;  I&apos;d go with &quot;insist on a trailing space or NUL&quot;.&lt;/p&gt;

&lt;p&gt;It seems that there is a strong preference for option 2.&lt;/p&gt;</comment>
                            <comment id="12873995" author="sebb@apache.org" created="Tue, 1 Jun 2010 13:29:26 +0000"  >&lt;p&gt;TarUtils.parseOctal() currently stops processing when it detects a non-leading space or null, so &quot;0777 7 &quot; is not rejected.&lt;/p&gt;

&lt;p&gt;It also ignores both leading &apos;0&apos; and spaces, so &quot;0 0 0777 &quot; is not rejected.&lt;/p&gt;

&lt;p&gt;AFAICT, there is no format that allows embedded space or NUL, so it seems to me that these should also be rejected.&lt;/p&gt;

&lt;p&gt;Looks like there are several conventions for terminating numeric fields:&lt;/p&gt;

&lt;p&gt;space,NUL - mode, uid, and gid&lt;br/&gt;
NUL, space - checksum&lt;br/&gt;
space - size and mtime; POSIX&lt;br/&gt;
NUL - POSIX&lt;/p&gt;

&lt;p&gt;Maybe the most portable approach for parsing octal numbers would be to allow:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;leading spaces&lt;/li&gt;
	&lt;li&gt;1 or 2 trailing space or NUL characters.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12874038" author="sebb@apache.org" created="Tue, 1 Jun 2010 14:49:08 +0000"  >&lt;p&gt;Just discovered that one also needs to allow for fields which are not in the original tar formats.&lt;br/&gt;
For example devmajor, devminor - these fields will be all null.&lt;/p&gt;</comment>
                            <comment id="12874536" author="sebb@apache.org" created="Wed, 2 Jun 2010 11:02:35 +0000"  >&lt;p&gt;Fixed in r950489.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 May 2010 10:13:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110613</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4in:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62844</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-110] Tar fails to handle ustar &quot;prefix&quot; field</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-110</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Tar fails to handle the ustar &quot;prefix&quot; field, which is used when file paths are longer than 100 (but no longer than 256) characters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464096">COMPRESS-110</key>
            <summary>Tar fails to handle ustar &quot;prefix&quot; field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sebb@apache.org">Sebb</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 May 2010 20:37:52 +0000</created>
                <updated>Sun, 9 May 2010 20:41:57 +0000</updated>
                            <resolved>Sun, 9 May 2010 20:41:57 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12865632" author="sebb@apache.org" created="Sun, 9 May 2010 20:41:57 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=942617&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?rev=942617&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-110&quot; title=&quot;Tar fails to handle ustar &amp;quot;prefix&amp;quot; field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-110&quot;&gt;&lt;del&gt;COMPRESS-110&lt;/del&gt;&lt;/a&gt; Support &quot;ustar&quot; prefix field&lt;br/&gt;
Add support for identifying Pax headers&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
   commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveEntry.java&lt;br/&gt;
   commons/proper/compress/trunk/src/main/java/org/apache/commons/compress/archivers/tar/TarConstants.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110611</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4iv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62845</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-109] Tar implementation does not support Pax headers</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-109</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The tar implementation does not currently support Pax extended or global headers; they are treated as normal files.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://www.opengroup.org/onlinepubs/009695399/utilities/pax.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.opengroup.org/onlinepubs/009695399/utilities/pax.html&lt;/a&gt; for details.&lt;/p&gt;

&lt;p&gt;Pax headers have a different linkType (typeflag) of &apos;g&apos; or &apos;x&apos;, so can easily be detected.&lt;/p&gt;

&lt;p&gt;It would be quite a bit of work to process all the possible headers, so perhaps it would be worth providing an initial implementation that just ignores them?&lt;br/&gt;
This should probably be an optional setting.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464095">COMPRESS-109</key>
            <summary>Tar implementation does not support Pax headers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sebb@apache.org">Sebb</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 May 2010 20:20:01 +0000</created>
                <updated>Mon, 10 May 2010 14:44:16 +0000</updated>
                            <resolved>Mon, 10 May 2010 14:44:16 +0000</resolved>
                                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12865783" author="sebb@apache.org" created="Mon, 10 May 2010 14:44:16 +0000"  >&lt;p&gt;Added support for reading Pax headers.&lt;/p&gt;

&lt;p&gt;Note: global pax headers are not supported.&lt;br/&gt;
No support for writing pax headers.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110610</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4j3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62846</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-107] ArchiveStreamFactory does not recognise tar files created by Ant</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-107</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;ArchiveStreamFactory does not recognise tar files created by Ant.&lt;/p&gt;

&lt;p&gt;These appear to have magic of  &quot;ustar\0&quot; (i.e. same as MAGIC_POSIX) followed by &quot;\0\0&quot;.&lt;/p&gt;

&lt;p&gt;Note that Compress can process the files OK.&lt;/p&gt;

&lt;p&gt;Patch to follow after checking what Ant writes as the signature.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464056">COMPRESS-107</key>
            <summary>ArchiveStreamFactory does not recognise tar files created by Ant</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 May 2010 15:34:15 +0000</created>
                <updated>Mon, 10 May 2010 14:41:14 +0000</updated>
                            <resolved>Mon, 10 May 2010 14:41:14 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12865476" author="sebb@apache.org" created="Sat, 8 May 2010 15:49:07 +0000"  >&lt;p&gt;Ant 1.7.0 writes &quot;ustar&quot; (no trailing space or null) to the magic field, which it assumes is 8 chars long.&lt;br/&gt;
It does not appear to write any version information.&lt;/p&gt;

&lt;p&gt;So the &quot;magic&quot; for Ant tar files appears to be &quot;ustar\0\0&quot; with no following version information.&lt;/p&gt;

&lt;p&gt;Unless there are better ideas, I propose to add that to the factory tar matching algorithm.&lt;/p&gt;</comment>
                            <comment id="12865780" author="sebb@apache.org" created="Mon, 10 May 2010 14:41:14 +0000"  >&lt;p&gt;Ant tar recognition fixed using MAGIC=&quot;ustar\0&quot; and VERSION=&quot;\0\0&quot;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110608</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62847</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-105] While Archiving the empty directories are not archived to the archive.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-105</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I am trying to create a zip archive. I am having a empty directory &quot;test&quot; . When i try to create it to archive . The archive created but the test folder is created as file. And also I got the below exception.&lt;/p&gt;

&lt;p&gt;Temp file created at C:\Users\Soundar\AppData\Local\Temp\sample5278197872513888977.zip&lt;br/&gt;
Exception in thread &quot;main&quot; java.io.IOException: This archives contains unclosed entries.&lt;br/&gt;
	at org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream.finish(ZipArchiveOutputStream.java:343)&lt;br/&gt;
	at org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream.close(ZipArchiveOutputStream.java:550)&lt;br/&gt;
	at com.tcs.tools.archive.test.ArchiveTest.createArchive(ArchiveTest.java:64)&lt;br/&gt;
	at com.tcs.tools.archive.test.ArchiveTest.main(ArchiveTest.java:119)&lt;/p&gt;

&lt;p&gt;Code used&lt;br/&gt;
-------------&lt;/p&gt;

&lt;p&gt;	protected File createArchive(String archivename) throws Exception {&lt;br/&gt;
		ArchiveOutputStream out = null;&lt;br/&gt;
		OutputStream stream = null;&lt;br/&gt;
		ArchiveStreamFactory factory = new ArchiveStreamFactory();&lt;br/&gt;
		try &lt;/p&gt;
{
			File archive = File.createTempFile(&quot;sample&quot;, &quot;.&quot; + archivename);
			System.out.println(&quot;Temp file created at &quot; + archive.getAbsolutePath());
			List archiveList = new ArrayList();

			stream = new FileOutputStream(archive);
			out = factory.createArchiveOutputStream(archivename, stream);
			final File file7 = new File(&quot;C:\\Users\\Soundar\\Desktop\\test&quot;);

			addArchiveEntry(out, &quot;test&quot;, file7);
			System.out.println(&quot;Going to process directory&quot;);
			System.out.println(&quot;Directory Name =&quot; + file7.getName());
			ArchiveEntry entry = out.createArchiveEntry(file7, &quot;test&quot;);
			out.putArchiveEntry(entry);
			IOUtils.copy(new FileInputStream(file7), out);
			out.closeArchiveEntry();

			out.finish();
			return archive;
		}
&lt;p&gt; finally {&lt;br/&gt;
			if (out != null) &lt;/p&gt;
{
				out.close();
			}
&lt;p&gt; else if (stream != null) &lt;/p&gt;
{
				stream.close();
			}
&lt;p&gt;		}&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;Note&lt;br/&gt;
------&lt;/p&gt;

&lt;p&gt;I tried the same archiving using the compressed zip of Windows Vista default feature. It creates the Sample.zip which contains the empty test folder as archived.&lt;/p&gt;

&lt;p&gt;I know there is a work around  using java.util.zip.zipEntry. But is there a  work around in our Compress itself?&lt;/p&gt;</description>
                <environment>&lt;p&gt;64 bit Windows Vista, JDK1.4.1_11&lt;/p&gt;</environment>
        <key id="12462322">COMPRESS-105</key>
            <summary>While Archiving the empty directories are not archived to the archive.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="soundararajan@jira">Soundararajan Thevaraj</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Apr 2010 14:39:44 +0000</created>
                <updated>Mon, 19 Apr 2010 16:17:06 +0000</updated>
                            <resolved>Mon, 19 Apr 2010 16:17:06 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12858442" author="bodewig" created="Mon, 19 Apr 2010 10:05:11 +0000"  >&lt;p&gt;We don&apos;t see your addArchiveEntry method, but I suspect I know what the problem is.&lt;/p&gt;

&lt;p&gt;It isn&apos;t properly document and I&apos;ll change that soonish: the name of an ZipArchiveEntry determines whether an entry is considered a directory or not.  If you don&apos;t use the constructor with the File argument the entry&apos;s name must end in a &quot;/&quot; in order for the entry to be known as a directory.&lt;/p&gt;</comment>
                            <comment id="12858476" author="soundararajan@jira" created="Mon, 19 Apr 2010 12:48:28 +0000"  >&lt;p&gt;Hi Stefan,&lt;/p&gt;

&lt;p&gt;   Thanks for your comments. But i tried by adding the &quot;/&quot; at the end of the entry name. It was not working. I have attached the java file for your reference. Kindly review that.&lt;/p&gt;

&lt;p&gt;I am trying to archive a folder &quot;test&quot; which contains the child folder called &quot;empty folder&quot; with zero entries.&lt;/p&gt;

&lt;p&gt;But Getting the same exception as below&lt;br/&gt;
File Created in PathC:\DOCUME~1\157558\LOCALS~1\Temp\sample738293534710494610.zip&lt;br/&gt;
FileName =test/&lt;br/&gt;
Exception in thread &quot;main&quot; java.io.IOException: This archives contains unclosed entries.&lt;br/&gt;
	at org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream.finish(ZipArchiveOutputStream.java:343)&lt;br/&gt;
	at org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream.close(ZipArchiveOutputStream.java:550)&lt;br/&gt;
	at TestDirectory.createArchive(TestDirectory.java:49)&lt;br/&gt;
	at TestDirectory.main(TestDirectory.java:66)&lt;/p&gt;</comment>
                            <comment id="12858480" author="soundararajan@jira" created="Mon, 19 Apr 2010 12:55:34 +0000"  >&lt;p&gt;For your reference . I have attached screen shot of the archive created using Compressed Zip of Windows XP.&lt;/p&gt;</comment>
                            <comment id="12858489" author="bodewig" created="Mon, 19 Apr 2010 13:51:19 +0000"  >&lt;p&gt;I&apos;m having a hard time converting your source file from RTF to a real source file. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Does the problem go away if you remove the IOUtils.copy() line from addArchiveEntry?&lt;/p&gt;

&lt;p&gt;I think the exception you see stemming from close() in your finally block is actualy hiding a different exception thrown in addArchiveEntry.&lt;/p&gt;</comment>
                            <comment id="12858571" author="soundararajan@jira" created="Mon, 19 Apr 2010 16:05:35 +0000"  >&lt;p&gt;Hi Stefan,&lt;/p&gt;

&lt;p&gt;    My sincere apologize for the file corruption. !!&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (Hurray) not found.&lt;/span&gt;!!!. After removing IOUtils.copy it worked. I can able to generate the Zip archive containing test/emptyfolder. Great help. Bunch of thanks to you.&lt;/p&gt;</comment>
                            <comment id="12858582" author="bodewig" created="Mon, 19 Apr 2010 16:17:06 +0000"  >&lt;p&gt;this is between &quot;not a problem&quot; and &quot;fixed via better documentation&quot;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12442180" name="ArchiveIssue.JPG" size="79807" author="soundararajan@jira" created="Mon, 19 Apr 2010 12:55:34 +0000"/>
                            <attachment id="12442179" name="TestDirectory.java" size="4237" author="soundararajan@jira" created="Mon, 19 Apr 2010 12:48:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Apr 2010 10:05:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62848</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-104] The SHA1 files uploaded to the maven repository are not formatted correctly, and make it impossible to use Commons-Compress with maven or ivy</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-104</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;In the maven repository at &lt;a href=&quot;http://repo1.maven.org/maven2/org/apache/commons/commons-compress/1.0/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo1.maven.org/maven2/org/apache/commons/commons-compress/1.0/&lt;/a&gt; (and mirrors), the SHA1 file for each uploaded file looks like this (shown is commons-compress-1.0.pom.sha1):&lt;/p&gt;

&lt;p&gt;commons-compress-1.0.pom: 3259 80A0 9DBB D0C1 08EC  E8E7 733B 462B 00E6 F2A8&lt;/p&gt;

&lt;p&gt;This file is in the wrong format for maven and ivy to parse, causing them not to be able to download and use commons-compress.&lt;/p&gt;

&lt;p&gt;The file should contain only the sha1 hash, with no spaces, as&lt;/p&gt;

&lt;p&gt;325980a09dbbd0c108ece8e7733b462b00e6f2a8&lt;/p&gt;

&lt;p&gt;Please fix the sha1 key for all files and re-upload.  &lt;/p&gt;

&lt;p&gt;(For reference, see: &lt;a href=&quot;http://maven.apache.org/guides/mini/guide-central-repository-upload.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/guides/mini/guide-central-repository-upload.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;See corresponding maven upload bug report at &lt;a href=&quot;http://jira.codehaus.org/browse/MAVENUPLOAD-2756&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jira.codehaus.org/browse/MAVENUPLOAD-2756&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;maven 2.0&lt;br/&gt;
ivy 2.1.0&lt;/p&gt;</environment>
        <key id="12459612">COMPRESS-104</key>
            <summary>The SHA1 files uploaded to the maven repository are not formatted correctly, and make it impossible to use Commons-Compress with maven or ivy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kmsquire">Kevin Squire</reporter>
                        <labels>
                            <label>maven</label>
                    </labels>
                <created>Fri, 19 Mar 2010 07:34:56 +0000</created>
                <updated>Thu, 29 Apr 2010 08:20:46 +0000</updated>
                            <resolved>Thu, 29 Apr 2010 08:20:46 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="1800">0.5h</timeoriginalestimate>
                            <timeestimate seconds="1800">0.5h</timeestimate>
                                        <comments>
                            <comment id="12847259" author="kmsquire" created="Fri, 19 Mar 2010 07:47:44 +0000"  >&lt;p&gt;Maven dependency:&lt;/p&gt;

&lt;p&gt;&amp;lt;dependency&amp;gt;&lt;br/&gt;
    &amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;&lt;br/&gt;
    &amp;lt;artifactId&amp;gt;commons-compress&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
    &amp;lt;version&amp;gt;1.0&amp;lt;/version&amp;gt;&lt;br/&gt;
&amp;lt;/dependency&amp;gt;&lt;/p&gt;


&lt;p&gt;Ivy dependency:&lt;/p&gt;

&lt;p&gt;  &amp;lt;dependency org=&quot;org.apache.commons&quot; name=&quot;commons-compress&quot; rev=&quot;1.0&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;(from: &lt;a href=&quot;http://mvnrepository.com/artifact/org.apache.commons/commons-compress/1.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mvnrepository.com/artifact/org.apache.commons/commons-compress/1.0&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12862128" author="sebb@apache.org" created="Thu, 29 Apr 2010 08:20:46 +0000"  >&lt;p&gt;Reported on dev@maven, and the problem has been fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Apr 2010 08:20:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4pj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62875</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-101] ZipArchiveInputStream doesn&apos;t handle data descriptors without signatures</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-101</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;from &lt;a href=&quot;http://www.pkware.com/documents/casestudies/APPNOTE.TXT&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.pkware.com/documents/casestudies/APPNOTE.TXT&lt;/a&gt; :&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;      Although not originally assigned a signature, the value &lt;br/&gt;
      0x08074b50 has commonly been adopted as a signature value &lt;br/&gt;
      for the data descriptor record.  Implementers should be &lt;br/&gt;
      aware that ZIP files may be encountered with or without this &lt;br/&gt;
      signature marking data descriptors and should account for&lt;br/&gt;
      either case when reading ZIP files to ensure compatibility.&lt;br/&gt;
      When writing ZIP files, it is recommended to include the&lt;br/&gt;
      signature value marking the data descriptor record.  When&lt;br/&gt;
      the signature is used, the fields currently defined for&lt;br/&gt;
      the data descriptor record will immediately follow the&lt;br/&gt;
      signature.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The current code skips over 16 bytes while the descriptor may be using only 12 bytes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12458948">COMPRESS-101</key>
            <summary>ZipArchiveInputStream doesn&apos;t handle data descriptors without signatures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Mar 2010 15:13:16 +0000</created>
                <updated>Fri, 12 Mar 2010 15:36:21 +0000</updated>
                            <resolved>Fri, 12 Mar 2010 15:36:21 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12844543" author="bodewig" created="Fri, 12 Mar 2010 15:36:21 +0000"  >&lt;p&gt;svn revision 922298 but untested since I&apos;ve failed to create such an archive so far.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110603</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62849</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-100] ZipArchiveInputStream should throw an exception if a data descriptor is used for STORED entries</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-100</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;There is no reliable way to determine the end of data when the method is STORE and in fact the current code relies on the method to be DEFLATE in that case.&lt;/p&gt;

&lt;p&gt;I propose to make this figure into the canReadEntryData method and to throw an exception if any attempt is made&lt;br/&gt;
to read the data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12458947">COMPRESS-100</key>
            <summary>ZipArchiveInputStream should throw an exception if a data descriptor is used for STORED entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Mar 2010 15:09:25 +0000</created>
                <updated>Fri, 12 Mar 2010 16:07:47 +0000</updated>
                            <resolved>Fri, 12 Mar 2010 16:07:47 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12844556" author="bodewig" created="Fri, 12 Mar 2010 16:07:47 +0000"  >&lt;p&gt;svn revision 922309&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110602</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-96] Corrupt zip files can cause infinite loop</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-96</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I have a corrupt .zip file (in my Download directory) that causes ZipArchiveInputStream to enter an infinite loop on the second call to getEntry().  This was discovered while testing a Tika/Lucene based search application.  Obviously, it would be preferable to detect and throw an exception.  The short explanation is that closeEntry() calls skip(Long.MAX_VALUE).  skip() calls read() which returns 0 and inf.finished() remains false, so no progress is made and skip() spins.&lt;/p&gt;

&lt;p&gt;If it helps, entry.getSize() returns -1 for the first entry.  I can provide the file to repro (775800 bytes).&lt;/p&gt;

&lt;p&gt;UPDATE: I just hit he same error scanning a truncated commons-compress-1.0-bin.zip (437687 bytes) with this code.&lt;/p&gt;

&lt;p&gt;package main;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.compress.archivers.ArchiveEntry;&lt;br/&gt;
import org.apache.commons.compress.archivers.zip.ZipArchiveInputStream;&lt;/p&gt;

&lt;p&gt;import java.io.File;&lt;br/&gt;
import java.io.FileInputStream;&lt;br/&gt;
import java.io.IOException;&lt;/p&gt;

&lt;p&gt;public class Main&lt;br/&gt;
{&lt;br/&gt;
    public static void main(String[] args) throws IOException&lt;br/&gt;
    {&lt;br/&gt;
        File f = new File(args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
        FileInputStream fis = new FileInputStream(f);&lt;br/&gt;
        ZipArchiveInputStream zip = new ZipArchiveInputStream(fis);&lt;br/&gt;
        ArchiveEntry entry;&lt;/p&gt;

&lt;p&gt;        entry = zip.getNextEntry();&lt;br/&gt;
        while (null != entry)&lt;/p&gt;
        {
            if (entry.isDirectory())
                System.out.printf(&quot;%s/\n&quot;, entry.getName());
            else
                System.out.printf(&quot;%s %d\n&quot;, entry.getName(), entry.getSize());
            entry = zip.getNextEntry();
        }
&lt;p&gt;        System.out.print(&quot;DONE\n&quot;);&lt;br/&gt;
    }&lt;br/&gt;
}&lt;/p&gt;

</description>
                <environment>&lt;p&gt;OS/X java 1.6&lt;/p&gt;</environment>
        <key id="12455976">COMPRESS-96</key>
            <summary>Corrupt zip files can cause infinite loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="matthew_bellew">Matthew Bellew</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Feb 2010 01:52:09 +0000</created>
                <updated>Wed, 5 May 2010 10:23:35 +0000</updated>
                            <resolved>Fri, 12 Feb 2010 10:11:50 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12832520" author="bodewig" created="Thu, 11 Feb 2010 15:26:33 +0000"  >&lt;p&gt;I think this is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-87&quot; title=&quot;ZipArchiveInputStream doesn&amp;#39;t report the end of a truncated archive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-87&quot;&gt;&lt;del&gt;COMPRESS-87&lt;/del&gt;&lt;/a&gt; and has been fixed with svn revision 831204&lt;/p&gt;

&lt;p&gt;Could you build commons-compress from trunk and verify that you receive an exception now?  At least I can&apos;t reproduce the error you describe anymore.&lt;/p&gt;</comment>
                            <comment id="12832551" author="matthew_bellew" created="Thu, 11 Feb 2010 16:34:36 +0000"  >&lt;p&gt;I agree, definitely duplicate.  Thank you.&lt;/p&gt;</comment>
                            <comment id="12832924" author="bodewig" created="Fri, 12 Feb 2010 10:11:50 +0000"  >&lt;p&gt;duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-87&quot; title=&quot;ZipArchiveInputStream doesn&amp;#39;t report the end of a truncated archive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-87&quot;&gt;&lt;del&gt;COMPRESS-87&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12439017">COMPRESS-87</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Feb 2010 15:26:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110598</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tgxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-94] Creating zip files with many entries will ocassionally produce corrupted output</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-94</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Our application produces large numbers of zip files, often with 1000&apos;s of similarly named files contained within the zip. &lt;br/&gt;
When we switched from the standard JDK zip classes to those in commons compress, we would ocassionally produce a zip file that had corrupted index entries and would fail to unzip successfully using 7-zip, winzip, etc.&lt;/p&gt;

&lt;p&gt;Debugging the zip creation showed that the the wrong offsets were being returned from the hashmap in ZipOutputStream for the entries that were being corrupted.  Further analysis revealed that this occurred when the filenames being added had a hash collision with another entry in the same output zip (which appears to happen quite frequently for us).&lt;/p&gt;

&lt;p&gt;The issue appears to stem from the fact that ZipArchiveEntry can store the entry name either in its superclass if passed in on the ctor or in its own member attribute if set later via setName().  Not sure whether this functionality is really required?  Regardless, the root cause of the bug is that the equals() and hashCode() methods in ZipArchiveEntry do not always use the same filename value in their comparisons.  In fact if the filename of the entry is set in the ctor it will always treat two ZipArchiveEntries as equal.  This will break the offset hashmap whenever there is a hash collision as it will overwrite the previous entry, believeing it to be equal.&lt;/p&gt;

&lt;p&gt;Patch to follow.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows 2003 Server 64 bit, Java 6.0&lt;/p&gt;</environment>
        <key id="12444848">COMPRESS-94</key>
            <summary>Creating zip files with many entries will ocassionally produce corrupted output</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="anon.devs">Anon Devs</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jan 2010 22:33:15 +0000</created>
                <updated>Tue, 26 Jan 2010 05:25:02 +0000</updated>
                            <resolved>Tue, 26 Jan 2010 05:25:02 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12797367" author="anon.devs" created="Wed, 6 Jan 2010 22:42:40 +0000"  >&lt;p&gt;Patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-94&quot; title=&quot;Creating zip files with many entries will ocassionally produce corrupted output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-94&quot;&gt;&lt;del&gt;COMPRESS-94&lt;/del&gt;&lt;/a&gt; to fix the equals() implementation in ZipArchiveEntry.&lt;/p&gt;</comment>
                            <comment id="12797570" author="bodewig" created="Thu, 7 Jan 2010 09:37:08 +0000"  >&lt;p&gt;Good catch! Many thanks.&lt;/p&gt;

&lt;p&gt;svn revision 896818 contains an extended version of your patch (which came in just in time to allow me to merge it into Ant&apos;s codebase before the 1.8.0 release, great).&lt;/p&gt;</comment>
                            <comment id="12797573" author="bodewig" created="Thu, 7 Jan 2010 09:49:54 +0000"  >&lt;p&gt;Ant&apos;s codebase didn&apos;t have the same problem since Ant&apos;s ZipEntry class has a completely different implementation of equals (basically Object#equals).&lt;/p&gt;

&lt;p&gt;I&apos;m not convinced that CC&apos;s equals implementation is a good idea since it only takes an entry&apos;s name into account and nothing else (size, extra fields, compression mode, last modified date and all that).&lt;/p&gt;</comment>
                            <comment id="12804894" author="bodewig" created="Tue, 26 Jan 2010 05:25:02 +0000"  >&lt;p&gt;ZipArchiveEntry#equals should now compare all data.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12429590" name="COMPRESS-94.patch" size="1638" author="anon.devs" created="Wed, 6 Jan 2010 22:42:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Jan 2010 09:37:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110596</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62851</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-91] jar recognition is curently impossible.</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-91</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;In ArchiveStreamFactory.createArchiveInputStream(final InputStream in),&lt;br/&gt;
JarArchiveInputStream must be before ZipArchiveInputStream&lt;/p&gt;

&lt;p&gt;and a positive jar identification have to be confirmed by the first file entry (META-INF/MANIFEST.MF).&lt;/p&gt;

&lt;p&gt;Regards.&lt;/p&gt;</description>
                <environment>&lt;p&gt;W2K and unbuntu JRE1.4 to 1.6.&lt;/p&gt;</environment>
        <key id="12441094">COMPRESS-91</key>
            <summary>jar recognition is curently impossible.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="axone.jar">Torelli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Nov 2009 20:55:59 +0000</created>
                <updated>Wed, 23 Mar 2011 13:10:49 +0000</updated>
                                            <version>1.0</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12867152" author="sebb@apache.org" created="Thu, 13 May 2010 15:11:34 +0000"  >&lt;p&gt;There is no difference currently between JarArchiveInputStream and ZipArchiveInputStream - the former is a subclass of the latter, but the behaviour is identical.&lt;/p&gt;

&lt;p&gt;So although it is true that jar files are currently treated as zip files, it does not affect the behaviour of the InputStream.&lt;/p&gt;</comment>
                            <comment id="12901592" author="thebombzen" created="Mon, 23 Aug 2010 21:28:09 +0000"  >&lt;p&gt;I tried this myself. If JarArchiveInputStream is before ZipArchiveInputStream, then when you open a file that is .zip but not .jar, it will return JarArchiveInputStream. There is no way to tell the difference between a jar and a zip file without looking at the file extension.&lt;/p&gt;</comment>
                            <comment id="12902561" author="axone.jar" created="Wed, 25 Aug 2010 18:39:13 +0000"  >&lt;p&gt;No matter to know the extension, jar or zip, if it&apos;s a simple archive.&lt;/p&gt;

&lt;p&gt;Currently the commons compress is not able to see the differences between  zip and jar. .jar contains less informations for each entry. For exemple&lt;br/&gt;
it doesn&apos;t have the size before compression, you have to unzip to know that. An usual zip entry contains the size before compression for each entry.&lt;/p&gt;

&lt;p&gt;Another clue is that an usual zip contains an entry for each folder.&lt;br/&gt;
For exemple, if the archive contains file with the path &quot;xx/yy/zz.txt&quot;, the entries are &quot;xx&quot;, then &quot;xx/yy&quot; and finaly &quot;xx/yy/zz.txt&quot;.&lt;br/&gt;
A .jar (done with the java tools) contains only &quot;xx/yy/zz.txt&quot;, not the folder.&lt;/p&gt;

&lt;p&gt;If the compressed file is zipped AND the first entry is META-INF/MANIFEST.MF, the file is probably a java application, an applet or a middlet.&lt;br/&gt;
In that case, the extension must be .jar and it&apos;s not a good idea to modify the archive.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 May 2010 15:11:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110595</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i19x1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>265987</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COMPRESS-90] French accent</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-90</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I have a zip file containing files with names containing accents like &#233; or &#232; (&#224;, ...)&lt;/p&gt;

&lt;p&gt;When extracting the namefile from a ZipArchiveEntry (zae.getName() ), it shows &#65533; in place of accents&lt;/p&gt;

&lt;p&gt;Thanks in advance, &lt;/p&gt;

&lt;p&gt;Ben&lt;/p&gt;</description>
                <environment>&lt;p&gt;windows XP&lt;/p&gt;</environment>
        <key id="12440921">COMPRESS-90</key>
            <summary>French accent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bdupont">bdupont</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Nov 2009 10:22:22 +0000</created>
                <updated>Thu, 11 Feb 2010 17:05:17 +0000</updated>
                            <resolved>Thu, 11 Feb 2010 17:05:17 +0000</resolved>
                                    <version>1.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12778814" author="julien.ayme@gmail.com" created="Tue, 17 Nov 2009 10:44:43 +0000"  >&lt;p&gt;Did you try setting the encoding in your ZipArchiveInputStream ?&lt;br/&gt;
See ZipArchiveInputStream(InputStream inputStream, String encoding, boolean useUnicodeExtraFields) constructor.&lt;/p&gt;

&lt;p&gt;Try null to use the platform default encoding, or ISO-8859-1or UTF-8 to read french accent.&lt;/p&gt;

&lt;p&gt;I hope this helps,&lt;br/&gt;
Regards,&lt;/p&gt;

&lt;p&gt;Julien&lt;/p&gt;</comment>
                            <comment id="12778851" author="bdupont" created="Tue, 17 Nov 2009 13:05:27 +0000"  >&lt;p&gt;I&apos;m doing that (tried every combination) but still no right display :&lt;/p&gt;

&lt;p&gt;ZipArchiveInputStream zais = new ZipArchiveInputStream(new FileInputStream(fci.getFile()), &quot;UTF-8&quot;, false );&lt;br/&gt;
&#65533; la plage.txt	&lt;br/&gt;
&#65533;phith&#65533;te.txt	&lt;br/&gt;
&#65533;t&#65533;.txt&lt;/p&gt;

&lt;p&gt;ZipArchiveInputStream zais = new ZipArchiveInputStream(new FileInputStream(fci.getFile()), null, true );&lt;br/&gt;
... la plage.txt	&lt;br/&gt;
&#8218;phith&#352;te.txt	&lt;br/&gt;
&#8218;t&#8218;.txt	&lt;/p&gt;

&lt;p&gt;ZipArchiveInputStream zais = new ZipArchiveInputStream(new FileInputStream(fci.getFile()), &quot;ISO-8859-1&quot;, true );&lt;br/&gt;
... la plage.txt	0 B	0 B&lt;br/&gt;
&#8218;phith&#352;te.txt	0 B	0 B&lt;br/&gt;
&#8218;t&#8218;.txt&lt;/p&gt;

&lt;p&gt;Thanks for the answer, &lt;/p&gt;

&lt;p&gt;Ben&lt;/p&gt;

</comment>
                            <comment id="12832563" author="bodewig" created="Thu, 11 Feb 2010 17:05:17 +0000"  >&lt;p&gt;the default encoding used by many native ZIP applications is Codepage 437 and in fact your ZIP archive uses it.&lt;/p&gt;

&lt;p&gt;Try cp437 as encoding and you should get your accented characters decoded properly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12425209" name="demo.zip" size="408" author="bdupont" created="Tue, 17 Nov 2009 10:30:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Nov 2009 10:44:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0th9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170108</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-87] ZipArchiveInputStream doesn&apos;t report the end of a truncated archive</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-87</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;If a Zip archive is truncated, (e.g. because it is the first volume in a multi-volume archive) the ZipArchiveInputStream.read() method will not detect that fact. All calls to read() will return 0 bytes read. They will not return -1 (end of stream), nor will they throw any exception (which would seem like a good idea to me because the archive is truncated).&lt;/p&gt;

&lt;p&gt;I have tracked this problem to ZipArchiveInputStream.java, line 239. It contains a check&lt;/p&gt;

&lt;p&gt;if (read == 0 &amp;amp;&amp;amp; inf.finished()) {&lt;br/&gt;
    return -1;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;For truncated archives the read is always zero but the inf is never finished(). I suggest adding two lines below:&lt;/p&gt;

&lt;p&gt;if (read == 0 &amp;amp;&amp;amp; inf.finished()) {&lt;br/&gt;
    return -1;&lt;br/&gt;
} else if (read == 0 &amp;amp;&amp;amp; lengthOfLastRead == -1) {&lt;br/&gt;
	throw new IOException(&quot;Truncated ZIP file&quot;);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;This solves the problem in my tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12439017">COMPRESS-87</key>
            <summary>ZipArchiveInputStream doesn&apos;t report the end of a truncated archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="antheque">Antoni Mylka</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Oct 2009 21:28:02 +0000</created>
                <updated>Wed, 5 May 2010 10:23:35 +0000</updated>
                            <resolved>Fri, 30 Oct 2009 05:30:55 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.1</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12769717" author="antheque" created="Sat, 24 Oct 2009 21:31:35 +0000"  >&lt;p&gt;A patch containing the two lines I talked about in the issue description as well as a unit test.&lt;/p&gt;

&lt;p&gt;The test file is a part of the Maven 2.2.1 distribution so it&apos;s already copyrighted by ASF. It should be placed in src/test/resources folder&lt;/p&gt;</comment>
                            <comment id="12769899" author="bodewig" created="Mon, 26 Oct 2009 05:15:48 +0000"  >&lt;p&gt;I&apos;ll look into this - thanks for the testcase - but let me add that in general ZipFile should be preferred over ZipArchiveInputStream when reading  file since the later may return entries that aren&apos;t supposed to be there at all.  ZipFile should terminate with a reasonable exception for truncated ZIPs OOTB.&lt;/p&gt;</comment>
                            <comment id="12770900" author="antheque" created="Wed, 28 Oct 2009 11:43:09 +0000"  >&lt;p&gt;I know, just that I need to crawl zips that aren&apos;t necessarily files (like zips attached to emails, or zips inside other zips). For this we have to use the stream and our crawler fell into an infinite loop waiting for the &apos;-1&apos; returned from read() method, and kept getting &apos;0&apos; instead. This is bad IMHO.&lt;/p&gt;</comment>
                            <comment id="12771808" author="bodewig" created="Fri, 30 Oct 2009 05:30:55 +0000"  >&lt;p&gt;I had to modify the test a little since the byte-counts for some existing entries were different on my Linux box (so I simply ignored them) and the first read of the last entry succeeded (with a count &amp;gt; 0) for me.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;svn revision 831204&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12455976">COMPRESS-96</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12423131" name="apache-maven-2.2.1.zip.001" size="65536" author="antheque" created="Sat, 24 Oct 2009 21:31:35 +0000"/>
                            <attachment id="12423130" name="commons-compress-87.patch" size="5579" author="antheque" created="Sat, 24 Oct 2009 21:31:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 26 Oct 2009 05:15:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110593</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62852</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-86] tar entries don&apos;t set &quot;magic&quot; value properly for &quot;oldgnu&quot; longname entries</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-86</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When using the GNU longfile mode the tar classes create special archive entries containing the file name if the original name was longer than 100 characters.&lt;/p&gt;

&lt;p&gt;Each tar entry header holds a &quot;magic&quot; value indicating the format.&lt;/p&gt;

&lt;p&gt;For the special entries containing the file name the magic value should be &quot;ustar  &quot; indicating the &quot;oldgnu&quot; format.&lt;/p&gt;

&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=47653&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=47653&lt;/a&gt; and &lt;a href=&quot;http://sunsite.ualberta.ca/Documentation/Gnu/tar-1.13/html_chapter/tar_8.html#SEC126&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sunsite.ualberta.ca/Documentation/Gnu/tar-1.13/html_chapter/tar_8.html#SEC126&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12437593">COMPRESS-86</key>
            <summary>tar entries don&apos;t set &quot;magic&quot; value properly for &quot;oldgnu&quot; longname entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Oct 2009 11:33:58 +0000</created>
                <updated>Thu, 8 Oct 2009 12:09:53 +0000</updated>
                            <resolved>Thu, 8 Oct 2009 12:09:53 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12763462" author="bodewig" created="Thu, 8 Oct 2009 12:09:53 +0000"  >&lt;p&gt;fixed with svn revision 823139 using an adapted patch by Lorenz Diener originally created for Ant.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-85] cpio archive final entry corrupt</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-85</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The code below is called with an array of 4 file names. The cpio archive archive.cpio is created with no error messages, but when I then run the Unix command &quot;cpio -ivct &amp;lt;archive.cpio&quot; it reports the error &quot;Can&apos;t read input&quot; on the last file in the archive. If I run &quot;cpio -ivcBmu &amp;lt;archive.cpio&quot; the last file is incomplete, but the other files are extracted correctly. Same result in AIX and Linux.&lt;/p&gt;

&lt;p&gt;{{&lt;br/&gt;
  private void createArchive(String[] outFiles)&lt;br/&gt;
  throws FileNotFoundException, IOException, ArchiveException {&lt;br/&gt;
    short format = CpioArchiveOutputStream.FORMAT_OLD_ASCII;&lt;br/&gt;
    final OutputStream out = new FileOutputStream(&quot;archive.cpio&quot;);&lt;br/&gt;
    ArchiveOutputStream os = new CpioArchiveOutputStream(out, format);&lt;/p&gt;

&lt;p&gt;    for (int j = 0; j &amp;lt; outFiles.length; j++) &lt;/p&gt;
{
      System.out.println(&quot;Entry = &quot; + outFiles[j]);
      File f = new File(outFiles[j]);
      CpioArchiveEntry entry = new CpioArchiveEntry(format);
      entry.setName(outFiles[j]);
      entry.setSize(f.length());
      os.putArchiveEntry(entry);
      IOUtils.copy(new FileInputStream(outFiles[j]), os);
      os.closeArchiveEntry();
    }
&lt;p&gt;    os.finish();&lt;br/&gt;
    os.close();&lt;br/&gt;
  }&lt;br/&gt;
}}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.4.2 run on AIX and Linux&lt;/p&gt;</environment>
        <key id="12436922">COMPRESS-85</key>
            <summary>cpio archive final entry corrupt</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bmaier">Bill Maier</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Sep 2009 14:58:58 +0000</created>
                <updated>Thu, 18 Feb 2010 14:56:20 +0000</updated>
                            <resolved>Thu, 18 Feb 2010 14:56:20 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12833875" author="bodewig" created="Mon, 15 Feb 2010 16:26:57 +0000"  >&lt;p&gt;It may be that the result depends on the actual files being archived.  I&apos;ve turned your snippet into the trivial program (soon to be) attached and created an archive of four files from the current svn tree of commons compress (as of 2010-02-15) and cpio on my Linux box is happy with the result created with either the 1.0 version or currsnt svn trunk.&lt;/p&gt;

&lt;p&gt;Would it be possible for you to provide a set of files where creation fails?&lt;/p&gt;</comment>
                            <comment id="12833946" author="bmaier" created="Mon, 15 Feb 2010 19:51:02 +0000"  >&lt;p&gt;I&apos;ve attached a .tar file containing 4 class files and a readme.txt description. Saw the same problem when tried to put the 4 class files into a cpio archive. I used your file Creator.java to run. I suspect now that the files are not the problem - might be a combination of the older Java version we use (1.4.2) and the operating system. The attached readme.txt file shows the result in AIX. I also tried on Linux, which gave the error &quot;cpio: premature end of file&quot; when running cpio -ivct on the resulting file.&lt;/p&gt;</comment>
                            <comment id="12834083" author="bodewig" created="Tue, 16 Feb 2010 05:17:06 +0000"  >&lt;p&gt;At least the VM seems to be part of the problem, yes.  I&apos;ve just tried your classes (thanks!) on my Linux box and the archive seems to be fine, unfortunately I don&apos;t have a 1.4 JVM for Linux around, will try later today on my work Windows box where I have an old Sun 1.4.2 around.&lt;/p&gt;

&lt;p&gt;In any case, could you please also attach the archive that has been created so I can do a byte by byte comparison with the one I have created on Linux which works?  This may help diagnosing the problem even if I can&apos;t reproduce it myself.&lt;/p&gt;</comment>
                            <comment id="12834084" author="bodewig" created="Tue, 16 Feb 2010 05:22:37 +0000"  >&lt;p&gt;CPIO archive created with Creator.java from Bill&apos;s class files which seems to work fine on my Linux machine for reference&lt;/p&gt;</comment>
                            <comment id="12834141" author="bodewig" created="Tue, 16 Feb 2010 10:01:15 +0000"  >&lt;p&gt;I get the exact same cpio file using JDK 1.4.2 (Sun&apos;s) on Windows as well.&lt;/p&gt;</comment>
                            <comment id="12834196" author="bmaier" created="Tue, 16 Feb 2010 13:08:35 +0000"  >&lt;p&gt;Archive created by Creator class. The system cpio command on AIX and Linux is unable to read this file.&lt;/p&gt;</comment>
                            <comment id="12834203" author="bmaier" created="Tue, 16 Feb 2010 13:21:19 +0000"  >&lt;p&gt;I downloaded the archive you attached, and copied it to my AIX machine. I get the same error when the system command cpio tries to read the file:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;npd1:/home/bmaier/test/java/creator&amp;#93;&lt;/span&gt; cpio -ivct &amp;lt;archive.cpio&lt;br/&gt;
0      root         593 Dec 31 18:00:00 1969 ApplicationException.class&lt;br/&gt;
0      root         857 Dec 31 18:00:00 1969 BData.class&lt;br/&gt;
0      root         342 Dec 31 18:00:00 1969 BufException.class&lt;br/&gt;
Can&apos;t read input&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;npd1:/home/bmaier/test/java/creator&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Compared Stefan&apos;s archive with mine and they are byte-for-byte identical. I&apos;m running SUSE on the Linux machine:&lt;/p&gt;

&lt;p&gt;bmaier@ftw-srv-arv2-02:~&amp;gt; cat /etc/*-release&lt;br/&gt;
LSB_VERSION=&quot;core-2.0-noarch:core-3.0-noarch:core-2.0-ia32:core-3.0-ia32&quot;&lt;br/&gt;
SUSE Linux Enterprise Server 10 (i586)&lt;br/&gt;
VERSION = 10&lt;br/&gt;
PATCHLEVEL = 2&lt;/p&gt;
</comment>
                            <comment id="12834229" author="bodewig" created="Tue, 16 Feb 2010 14:33:23 +0000"  >&lt;p&gt;OK, so the problem is the version of cpio not the version of Java or the files - that&apos;s even worse.&lt;/p&gt;

&lt;p&gt;In my case it has been Ubuntu 9.04 which provides GNU cpio 2.9 (that&apos;s what cpio --version says).  I&apos;ll see whether I do have access to a Unix machine running a different flavor of cpio.&lt;/p&gt;

&lt;p&gt;Does it help (as a workaround) if you switch to one of the other formats the CPIO classes provide?&lt;/p&gt;</comment>
                            <comment id="12834232" author="bodewig" created="Tue, 16 Feb 2010 14:48:07 +0000"  >&lt;p&gt;The other one I&apos;ve found so far (Solaris) doesn&apos;t like the archive at all&lt;/p&gt;

&lt;p&gt;$ cpio -ivct &amp;lt; archive.cpio&lt;br/&gt;
cpio: Not a cpio file, bad header.&lt;br/&gt;
1 errors&lt;/p&gt;

&lt;p&gt;I guess I have some reading on the different cpio formats to do ...&lt;/p&gt;</comment>
                            <comment id="12834239" author="bmaier@nhsrx.com" created="Tue, 16 Feb 2010 14:58:30 +0000"  >&lt;p&gt;The cpio version on our SUSE is GNU cpio 2.6, quite a bit earlier than Stefan&apos;s version. Cpio on AIX doesn&apos;t seem to have an equivalent way of getting the version number.&lt;/p&gt;

&lt;p&gt;I have tried other formats (although for our specific application we need the old ASCII format). It has the same trouble with all the formats I&apos;ve tried, FORMAT_NEW and FORMAT_OLD_BINARY. Sometimes I get an &quot;Out of phase&quot; error, but I think this is when my flags don&apos;t match the archive format:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;npd1:/home/bmaier/test/java/creator&amp;#93;&lt;/span&gt; cpio -ivct &amp;lt;archive.cpio&lt;/p&gt;


&lt;p&gt;Out of phase!&lt;br/&gt;
cpio attempting to continue...&lt;br/&gt;
Can&apos;t read input&lt;/p&gt;

</comment>
                            <comment id="12834265" author="bodewig" created="Tue, 16 Feb 2010 15:43:25 +0000"  >&lt;p&gt;So far I&apos;ve found a few places where we seem to deviate a bit from &lt;a href=&quot;http://people.freebsd.org/~kientzle/libarchive/man/cpio.5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.freebsd.org/~kientzle/libarchive/man/cpio.5.txt&lt;/a&gt; or our own description in the javadocs of CpioArchiveEntry.  Mainly:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;namelen could be wrong in non.ASCII cases - not the case with the example files&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;dev/ino are always 0 but should be different for each entry&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;nlink is always 0 but should at least be 1 for files and 2 for directories&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The permissions and gid/uid are also 0 but that should be OK.  Neither of these things would explain why cpio would be happy with the first three entries but doesn&apos;t like the forth one.  Can you isolate the forth one as the one causing the problem?  I.e. do you get valid archives when putting only the first three into it, or just the forth one?&lt;/p&gt;

&lt;p&gt;Back into hexl-mode trying to see whether there is anything fishy with the last entry.&lt;/p&gt;</comment>
                            <comment id="12834269" author="bmaier" created="Tue, 16 Feb 2010 15:49:12 +0000"  >&lt;p&gt;Still get &quot;can&apos;t read input&quot; error from cpio -ivct when only 3 files are in the archive.&lt;/p&gt;</comment>
                            <comment id="12834284" author="bodewig" created="Tue, 16 Feb 2010 16:13:46 +0000"  >&lt;p&gt;After explicitly setting inode, device and nlink Solaris at least sees the entries:&lt;/p&gt;

&lt;p&gt;-bash-3.00$ cpio -ivct &amp;lt; archive.cpio&lt;br/&gt;
cpio: Impossible file type&lt;br/&gt;
----------    1 root     root         593 Feb 16 16:08 2010, ApplicationException.class&lt;br/&gt;
cpio: Impossible file type&lt;br/&gt;
----------    1 root     root         857 Feb 16 16:08 2010, BData.class&lt;br/&gt;
cpio: Impossible file type&lt;br/&gt;
----------    1 root     root         342 Feb 16 16:08 2010, BufException.class&lt;br/&gt;
cpio: Impossible file type&lt;br/&gt;
----------    1 root     root        1274 Feb 16 16:08 2010, ByteArrayUtil.class&lt;/p&gt;

&lt;p&gt;7 blocks&lt;br/&gt;
4 error(s)&lt;/p&gt;</comment>
                            <comment id="12834288" author="bodewig" created="Tue, 16 Feb 2010 16:18:07 +0000"  >&lt;p&gt;and now with explicit file mode.  Solaris is happy.  What does your cpio say?&lt;/p&gt;</comment>
                            <comment id="12834294" author="bmaier" created="Tue, 16 Feb 2010 16:27:10 +0000"  >&lt;p&gt;Got same error on AIX with the attached archive, but on SUSE cpio now reports &quot;cpio:premature end of file&quot;.&lt;/p&gt;</comment>
                            <comment id="12834815" author="bodewig" created="Wed, 17 Feb 2010 16:00:52 +0000"  >&lt;p&gt;OK, I created a cpio archive of your example files with GNU cpio.  It looks as if cpio archives are supposed to write files in blocks of 512 bytes - actually the block size is a command line option for cpio.&lt;/p&gt;

&lt;p&gt;The attached archive has been created with Creator.java and svn revision 911031 of commons compress.  Does it work for your cpio versions?&lt;/p&gt;</comment>
                            <comment id="12834829" author="bmaier" created="Wed, 17 Feb 2010 16:37:41 +0000"  >&lt;p&gt;That archive works on AIX using either&lt;/p&gt;

&lt;p&gt;  cpio -ivct &amp;lt;archive.cpio&lt;/p&gt;

&lt;p&gt;for listing or&lt;/p&gt;

&lt;p&gt;  cpio -ivcmu &amp;lt;archive.cpio&lt;/p&gt;

&lt;p&gt;for extraction. Apparently the block size is a factor here, so you&apos;ve&lt;br/&gt;
made some progress. Interestingly it still doesn&apos;t work using&lt;/p&gt;

&lt;p&gt;  cpio -ivcBmu &amp;lt;archive.cpio&lt;/p&gt;

&lt;p&gt;where the B option is supposed to force 512-byte blocks (?!).&lt;/p&gt;

&lt;p&gt;Cpio still can&apos;t read the archive in SUSE. I tried all of these commands:&lt;/p&gt;

&lt;p&gt;  cpio -ivct &amp;lt;archive.cpio&lt;br/&gt;
  cpio -ivctB &amp;lt;archive.cpio&lt;br/&gt;
  cpio -ivctC512 &amp;lt;archive.cpio&lt;br/&gt;
  cpio -ivctC5120 &amp;lt;archive.cpio&lt;br/&gt;
  cpio -ivctC 5120 &amp;lt;archive.cpio&lt;br/&gt;
  cpio -ivctC 512 &amp;lt;archive.cpio&lt;br/&gt;
  cpio -ivct --block-size=512 &amp;lt;archive.cpio&lt;br/&gt;
  cpio -ivct --block-size=5120 &amp;lt;archive.cpio&lt;/p&gt;

&lt;p&gt;It always reports &quot;cpio: premature end of file&quot;.&lt;/p&gt;</comment>
                            <comment id="12835176" author="bodewig" created="Thu, 18 Feb 2010 12:18:33 +0000"  >&lt;p&gt;This is both frustrating and fun in a strange way.&lt;/p&gt;

&lt;p&gt;-B sets the block size to 5120 while the archive is created with a size of 512, so it isn&apos;t supposed to work.  With svn revision 911353 I&apos;ve made the block size configurable.&lt;/p&gt;

&lt;p&gt;I&apos;ve also introduced some logic inside the library so you don&apos;t have to set inode and device explicitly in order to get unique values.  nlink and mode should now at least provide reasonable default values.&lt;/p&gt;

&lt;p&gt;archive.cpio has been created with Creator.java and commons-compress svn revision 911353, archive2.cpio has been created with GNU cpio 2.9 on Ubuntu Linux 9.04.  They only differ in device and inode numbers and timestamps.&lt;/p&gt;

&lt;p&gt;Since the archive doesn&apos;t work for your Suse system, could you please create a cpio archive of your our files and upload it here as well?&lt;/p&gt;</comment>
                            <comment id="12835185" author="bmaier" created="Thu, 18 Feb 2010 13:33:04 +0000"  >&lt;p&gt;archive3.cpio was made with this command:&lt;/p&gt;

&lt;p&gt;  ls *class |cpio -ovc &amp;gt;archive3.cpio&lt;/p&gt;

&lt;p&gt;archive4.cpio was made with this command:&lt;/p&gt;

&lt;p&gt;  ls *class |cpio -ovcB &amp;gt;archive4.cpio&lt;/p&gt;

&lt;p&gt;Both were made on SUSE Linux (SLES 10).&lt;/p&gt;</comment>
                            <comment id="12835214" author="bodewig" created="Thu, 18 Feb 2010 14:20:48 +0000"  >&lt;p&gt;both archives use the &quot;new ascii&quot; format, so it looks as if -c didn&apos;t work.&lt;/p&gt;

&lt;p&gt;If I use my GNU cpio 2.9 and &quot;cpio -cvt &amp;lt; archive?.cpio&quot; I now get the &quot;premature end of file&quot;.&lt;/p&gt;

&lt;p&gt;The alternative to -c is &quot;-H odc&quot; - does that work to list/extract archive.cpio?&lt;/p&gt;</comment>
                            <comment id="12835223" author="bmaier" created="Thu, 18 Feb 2010 14:35:05 +0000"  >&lt;p&gt;These commands work on cpio.archive for SUSE to list and extract:&lt;/p&gt;

&lt;p&gt;   cpio -ivt -H odc &amp;lt;archive.cpio&lt;br/&gt;
   cpio -iv -H odc &amp;lt;archive.cpio&lt;/p&gt;

&lt;p&gt;So SUSE cpio won&apos;t do old ASCII format apparently.&lt;/p&gt;</comment>
                            <comment id="12835228" author="bodewig" created="Thu, 18 Feb 2010 14:47:58 +0000"  >&lt;p&gt;I&apos;m not sure whether you are saying that the commands with -D odc work for my cpio archives on Suse or not.  If they do then Suse&apos;s cpio works for old ascii but the -c switch is broken.&lt;/p&gt;

&lt;p&gt;In any case it means compress now creates cpio archives that can be extracted on AIX and Solaris and with GNU cpio 2.9.  I&apos;ll resolve this issue once I&apos;ve documented the fix.&lt;/p&gt;</comment>
                            <comment id="12835234" author="bodewig" created="Thu, 18 Feb 2010 14:56:20 +0000"  >&lt;p&gt;fixed and documented with svn revision 911427&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12436197" name="Creator.java" size="1188" author="bodewig" created="Thu, 18 Feb 2010 12:18:33 +0000"/>
                            <attachment id="12436198" name="archive.cpio" size="3584" author="bodewig" created="Thu, 18 Feb 2010 12:18:33 +0000"/>
                            <attachment id="12436199" name="archive2.cpio" size="3584" author="bodewig" created="Thu, 18 Feb 2010 12:18:33 +0000"/>
                            <attachment id="12436203" name="archive3.cpio" size="4096" author="bmaier" created="Thu, 18 Feb 2010 13:33:04 +0000"/>
                            <attachment id="12436204" name="archive4.cpio" size="5120" author="bmaier" created="Thu, 18 Feb 2010 13:33:04 +0000"/>
                            <attachment id="12435900" name="cpio.tar" size="10240" author="bmaier" created="Mon, 15 Feb 2010 19:51:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Feb 2010 16:26:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40276</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4kv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62854</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-84] GZip corrupt files are partially unzipped</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-84</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;While trying to decompres gzipped data with random removed bytes, no exceptions are thrown. Same file with zcat command line utility produces error below&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;gzip: badfiles-red-64/data.txt.gz: invalid compressed data--crc error
gzip: badfiles-red-64/data.txt.gz: invalid compressed data--length error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;The code below should throw an exception about corrupted file&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Sample extraction code&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        CompressorInputStream cis = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            cis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompressorStreamFactory().createCompressorInputStream(
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;gz&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;badfiles-red-64/data.txt.gz&quot;&lt;/span&gt;));
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (CompressorException e) {
            &lt;span class=&quot;code-comment&quot;&gt;// This will never happen unless &lt;span class=&quot;code-quote&quot;&gt;&quot;gz&quot;&lt;/span&gt; is changed 2 lines above
&lt;/span&gt;            log.error(e.getMessage(), e);
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ProcessingException(e);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (cis.read() &amp;gt; 0) {
            }
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
            log.error(e.getMessage(), e);
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ProcessingException(e);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Apache Maven 2.2.0 (r788681; 2009-06-26 15:04:01+0200)&lt;br/&gt;
Java version: 1.6.0_14&lt;br/&gt;
Java home: /opt/jdk1.6.0_14/jre&lt;br/&gt;
Default locale: fr_FR, platform encoding: UTF-8&lt;br/&gt;
OS name: &quot;linux&quot; version: &quot;2.6.30.5-28.rc2.fc11.i586&quot; arch: &quot;i386&quot; Family: &quot;unix&quot;&lt;/p&gt;

&lt;p&gt;In POM : &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;		&amp;lt;dependency&amp;gt;
			&amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;
			&amp;lt;artifactId&amp;gt;commons-compress&amp;lt;/artifactId&amp;gt;
			&amp;lt;version&amp;gt;1.0&amp;lt;/version&amp;gt;
			&amp;lt;type&amp;gt;jar&amp;lt;/type&amp;gt;
			&amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;
		&amp;lt;/dependency&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</environment>
        <key id="12433567">COMPRESS-84</key>
            <summary>GZip corrupt files are partially unzipped</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="traydent">Florent Charton</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Aug 2009 12:24:26 +0000</created>
                <updated>Sat, 13 Apr 2013 17:05:00 +0000</updated>
                            <resolved>Sat, 13 Apr 2013 17:05:00 +0000</resolved>
                                    <version>1.0</version>
                                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12745424" author="traydent" created="Thu, 20 Aug 2009 12:27:27 +0000"  >&lt;p&gt;Added precision about commons-compress library version.&lt;/p&gt;</comment>
                            <comment id="12840171" author="bodewig" created="Tue, 2 Mar 2010 13:42:56 +0000"  >&lt;p&gt;I&apos;ve committed a simple testcase with svn revision 918032 where I remove the last byte of a stream and I do get an exception.&lt;/p&gt;

&lt;p&gt;Maybe there is something special about your testfile, but in general it seems to work.&lt;/p&gt;

&lt;p&gt;Also note that the stream is just a layer on top of java.util.zip.GZIPInputStream - if the later doesn&apos;t throw an exception for any reason, commons-conpress&apos; stream won&apos;t either.&lt;/p&gt;</comment>
                            <comment id="13069894" author="bodewig" created="Sat, 23 Jul 2011 03:33:18 +0000"  >&lt;p&gt;Can you provide a test file where no exception is thrown?  I still can&apos;t reproduce this.&lt;/p&gt;</comment>
                            <comment id="13069944" author="traydent" created="Sat, 23 Jul 2011 11:29:47 +0000"  >&lt;p&gt;Sorry, the files i was working on are lost, with the computer hosting them.&lt;/p&gt;</comment>
                            <comment id="13088175" author="larhzu" created="Sat, 20 Aug 2011 10:15:42 +0000"  >&lt;p&gt;The test program is buggy. It tests for cis.read() &amp;gt; 0 instead of &amp;gt;= 0. If the input is corrupt, cis.read() may return many corrupt bytes before detecting an error. So cis.read() may return 0 even if the original file was a text file.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Mar 2010 13:42:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i19x13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>265985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-82] cpio is terribly slow</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-82</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I have a directory with 20 jar files in it to be placed into a cpio archive.  This seems VERY slow (about 3 minutes).  It is almost immediate with the linux cpio command (of course its non-java).  is there any way to improve speed for the cpio archiving?&lt;/p&gt;</description>
                <environment>&lt;p&gt;linux java6&lt;/p&gt;</environment>
        <key id="12431458">COMPRESS-82</key>
            <summary>cpio is terribly slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="deckrider">deckrider</reporter>
                        <labels>
                    </labels>
                <created>Sun, 26 Jul 2009 13:57:15 +0000</created>
                <updated>Fri, 12 Feb 2010 14:33:28 +0000</updated>
                            <resolved>Fri, 12 Feb 2010 14:33:28 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12736068" author="deckrider" created="Tue, 28 Jul 2009 13:50:18 +0000"  >&lt;p&gt;It seems that the attached patch fixes the speed issue.&lt;/p&gt;

&lt;p&gt;I&apos;m not familiar with java.io that much.  I thought just switching to java.io.BufferedOutputStream would be sufficient, but I had to use flush() or it broke things.&lt;/p&gt;

&lt;p&gt;Hopefully someone more experienced can translate this patch to a more correct way of handling the issue.&lt;/p&gt;</comment>
                            <comment id="12736241" author="ebourg" created="Tue, 28 Jul 2009 19:38:58 +0000"  >&lt;p&gt;There is probably the same issue with the other archive output streams.&lt;/p&gt;

&lt;p&gt;I don&apos;t know if it&apos;s best to change the code in CpioArchiveOutputStream, or tell the user to initialize the CpioArchiveOutputStream with a buffered stream. If the code is changed and the user initialize the class with a buffered stream, there would be 2 buffered stream encapsulated.&lt;/p&gt;</comment>
                            <comment id="12736271" author="deckrider" created="Tue, 28 Jul 2009 20:36:12 +0000"  >&lt;p&gt;Thanks for the clue, your suggestion works perfectly!&lt;/p&gt;

&lt;p&gt;I&apos;m happy to continue that way and make this simply a request that the hint be included in the docs/examples. &lt;/p&gt;</comment>
                            <comment id="12833011" author="bodewig" created="Fri, 12 Feb 2010 14:33:28 +0000"  >&lt;p&gt;Documentation enhanced with svn revision 909426&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12414741" name="cpio-speed-patch.txt" size="2724" author="deckrider" created="Tue, 28 Jul 2009 13:50:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Jul 2009 19:38:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62855</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COMPRESS-81] TarOutputStream can leave garbage at the end of the archive</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-81</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;when the last block of the tar archive is incomplete it will contain two EOF blocks potentially followed by partial contents of the next-to-last block.  This causes problems with some &quot;bad&quot; untar implementations that read past the EOF blocks.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=47421&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=47421&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=40195&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=40195&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12429165">COMPRESS-81</key>
            <summary>TarOutputStream can leave garbage at the end of the archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="bodewig">Stefan Bodewig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2009 07:02:54 +0000</created>
                <updated>Tue, 30 Jun 2009 07:26:28 +0000</updated>
                            <resolved>Tue, 30 Jun 2009 07:26:28 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12725510" author="bodewig" created="Tue, 30 Jun 2009 07:26:28 +0000"  >&lt;p&gt;svn revision 789597 merges the fix from Ant&apos;s trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62856</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>