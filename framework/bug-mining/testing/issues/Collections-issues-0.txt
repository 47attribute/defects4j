<!--
RSS generated by JIRA (7.6.3#76005-sha1:8a4e38d34af948780dbf52044e7aafb13a7cae58) at Tue Mar 06 08:27:07 UTC 2018

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+Collections+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="200" total="327"/>
                <build-info>
            <version>7.6.3</version>
            <build-number>76005</build-number>
            <build-date>09-01-2018</build-date>
        </build-info>

<item>
            <title>[COLLECTIONS-673] ListUtils.partition potential integer overflow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-673</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When calling &lt;tt&gt;ListUtils.partition()&lt;/tt&gt; with a large size and large list, it is possible that an integer overflow will occur in the &lt;tt&gt;size()&lt;/tt&gt;&#160;method that causes incorrect behavior. This will occur when using a size that, when added to list.size() will be larger than &lt;tt&gt;Integer.MAX_VALUE&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Current version of Guava&apos;s &lt;tt&gt;Lists.partition()&lt;/tt&gt; handle this correctly, so perhaps the code for &lt;tt&gt;ListUtils.partition()&lt;/tt&gt; needs to be updated based on the latest Guava code.&lt;/p&gt;

&lt;p&gt;A simple illustration of this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; aList = Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;4&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;5&quot;&lt;/span&gt;);
List&amp;lt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; partitioned = ListUtils.partition(aList, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE);
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of partitions: &quot;&lt;/span&gt; + partitioned.size());
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; l : partitioned)  {
     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(l);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above code works correctly when using Guava&apos;s &lt;tt&gt;Lists.partition()&lt;/tt&gt; instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135817">COLLECTIONS-673</key>
            <summary>ListUtils.partition potential integer overflow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jmark">John Mark</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Feb 2018 17:18:18 +0000</created>
                <updated>Sat, 3 Feb 2018 01:03:04 +0000</updated>
                                            <version>4.1</version>
                                                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16351143" author="garydgregory" created="Sat, 3 Feb 2018 01:03:04 +0000"  >&lt;p&gt;Thank for your report &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmark&quot; class=&quot;user-hover&quot; rel=&quot;jmark&quot;&gt;John Mark&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We welcome patches, with unit tests of course! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 3 Feb 2018 01:03:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ppz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COLLECTIONS-663] Unexpected ConcurrentModificationException when altering Collection of a MultiValuedMap</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-663</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Testcase:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test() {
		MultiValuedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; multiMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSetValuedHashMap&amp;lt;&amp;gt;();
		multiMap.put(1, 10);
		multiMap.put(2, 20);
		&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Collection&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; innerCollection : multiMap.asMap().values()) {
			&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Iterator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; iterator = innerCollection.iterator(); iterator.hasNext();) {
				&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; i = iterator.next();
				iterator.remove(); &lt;span class=&quot;code-comment&quot;&gt;// only the innerCollection is altered
&lt;/span&gt;			}
			&lt;span class=&quot;code-comment&quot;&gt;// innerCollection.add(6); // adding stuff back should also work...
&lt;/span&gt;		}
	}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This test unexpectedly throws a ConcurrentModificationException.&lt;br/&gt;
The issue is that when calling &lt;tt&gt;iterator.remove()&lt;/tt&gt; the &lt;tt&gt;AbstractMultiValuedMap.ValuesIterator&lt;/tt&gt; detects that the Collection is empty and calls &lt;tt&gt;AbstractMultiValuedMap.this.remove(key);&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It may be better if the iterator of the inner collection had a reference on the iterator if the outer map and called &lt;tt&gt;containerIterator.remove()&lt;/tt&gt; instead.&lt;br/&gt;
&lt;b&gt;Note:&lt;/b&gt; this solution would again present issues if the user tries to add new elements in this now empty collection (which was removed from the parent).&lt;/p&gt;


&lt;p&gt;In the current state, it is quite unclear why an exception is thrown, without debugging the code. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13116181">COLLECTIONS-663</key>
            <summary>Unexpected ConcurrentModificationException when altering Collection of a MultiValuedMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="chris333">Christophe Schmaltz</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Nov 2017 17:38:29 +0000</created>
                <updated>Mon, 6 Nov 2017 03:44:34 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16239363" author="kinow" created="Sun, 5 Nov 2017 03:21:04 +0000"  >&lt;p&gt;I believe the Javadocs from asMap from MultiValuedMap indicate it works for as a view for a state in the collection. If you have to alter the map or the values collection, I&apos;d try first using the mapIterator() method from the MultiValuedMap. It returns a custom iterator.&lt;/p&gt;

&lt;p&gt;The following altered code works for me:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testAlteringCollection() {
        MultiValuedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; multiMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSetValuedHashMap&amp;lt;&amp;gt;();
        multiMap.put(1, 10);
        multiMap.put(2, 20);
        Iterator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; it = multiMap.mapIterator();
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Iterator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; iterator = multiMap.mapIterator(); iterator.hasNext();) {
            &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; i = iterator.next();
            iterator.remove(); &lt;span class=&quot;code-comment&quot;&gt;// only the innerCollection is altered
&lt;/span&gt;        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Does it help? Bruno&lt;/p&gt;</comment>
                            <comment id="16239524" author="chris333" created="Sun, 5 Nov 2017 13:18:28 +0000"  >&lt;p&gt;Thank you for your response.&lt;/p&gt;

&lt;p&gt;I once used the &lt;tt&gt;MapIterator&lt;/tt&gt;, sadly I found out that it doesn&apos;t support what I try to achieve:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testWhatINeedToWork() {
		&lt;span class=&quot;code-comment&quot;&gt;// ArrayListValuedHashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; multiMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayListValuedHashMap&amp;lt;&amp;gt;();
&lt;/span&gt;		MultiValuedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; multiMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSetValuedHashMap&amp;lt;&amp;gt;();

		multiMap.put(1, 10);
		multiMap.put(1, 11);
		multiMap.put(2, 20);
		Iterator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; it = multiMap.mapIterator();
		&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (MapIterator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; iterator = multiMap.mapIterator(); iterator.hasNext();) {
			iterator.next();
			&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; value = iterator.getValue();
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((value % 2) == 0) {
				&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; is immutable, we need to replace using setValue(.)
&lt;/span&gt;				iterator.setValue(value * 2);
			}
		}
	}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;My issue was that &lt;tt&gt;MapIterator.setValue(.)&lt;/tt&gt; is not supported.&lt;/p&gt;

&lt;p&gt;(My current workaround is storing the elements I need to change in a list, and pushing them back in the map afterwards)&lt;/p&gt;

&lt;p&gt;I understand the difficulty in implementing it for &lt;tt&gt;HashSetValuedHashMap&lt;/tt&gt; though, as the &lt;tt&gt;HashSet.iterator&lt;/tt&gt; doesn&apos;t support it either (sadly, that&apos;s what I need).&lt;br/&gt;
I observed that &lt;tt&gt;ArrayListValuedHashMap&lt;/tt&gt; doesn&apos;t support &lt;tt&gt;setValue(.)&lt;/tt&gt; either (should be possible, as &lt;tt&gt;ArrayList.listIterator&lt;/tt&gt; has this feature.&lt;/p&gt;</comment>
                            <comment id="16239856" author="kinow" created="Mon, 6 Nov 2017 03:44:34 +0000"  >&lt;p&gt;Oh, not sure if there&apos;s a better way. Got what I think is your desired result with a not very elegant code.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testWhatINeedToWork() {
        &lt;span class=&quot;code-comment&quot;&gt;// ArrayListValuedHashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; multiMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayListValuedHashMap&amp;lt;&amp;gt;();
&lt;/span&gt;        MultiValuedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; multiMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSetValuedHashMap&amp;lt;&amp;gt;();

        multiMap.put(1, 10);
        multiMap.put(1, 11);
        multiMap.put(2, 20);

        MapIterator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; it = multiMap.mapIterator();
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (it.hasNext()) {
            &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; key = it.next();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (key % 2 == 0) {
                Collection&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; values = multiMap.get(key);
                multiMap.putAll(key * 2, values);
                it.remove();
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 Nov 2017 03:21:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3meo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COLLECTIONS-662] Build failures when building with Java 9</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-662</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;&lt;b&gt;mvn clean test&lt;/b&gt; fails with following errors when using with java-9&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Tests in error: 
  MapUtilsTest.testgetByteValue:1051 &#187; ServiceConfiguration sun.util.locale.prov...
  MapUtilsTest.testgetDoubleValue:956 &#187; ServiceConfiguration sun.util.locale.pro...
  MapUtilsTest.testgetFloatValue:974 &#187; ServiceConfiguration sun.util.locale.prov...
  MapUtilsTest.testgetIntValue:1012 &#187; ServiceConfiguration sun.util.locale.provi...
  MapUtilsTest.testgetLongValue:992 &#187; ServiceConfiguration sun.util.locale.provi...
  MapUtilsTest.testgetShortValue:1031 &#187; ServiceConfiguration sun.util.locale.pro...
  ListIteratorWrapperTest.testRemove:116 &#187; ServiceConfiguration sun.util.locale....

Tests run: 16088, Failures: 0, Errors: 7, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13108787">COLLECTIONS-662</key>
            <summary>Build failures when building with Java 9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascalschumacher">Pascal Schumacher</assignee>
                                    <reporter username="vamsi.kavuri">Vamsi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Oct 2017 04:12:59 +0000</created>
                <updated>Fri, 20 Oct 2017 16:33:39 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 14:09:10 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="16201415" author="githubbot" created="Thu, 12 Oct 2017 04:16:19 +0000"  >&lt;p&gt;GitHub user vamsi-kavuri opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/30&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/30&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;     &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-662&quot; title=&quot;Build failures when building with Java 9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-662&quot;&gt;&lt;del&gt;COLLECTIONS-662&lt;/del&gt;&lt;/a&gt; : Override Jacoco version for Java9 compatibility&lt;/p&gt;

&lt;p&gt;    Overriding Jacoco version fixed the failures in Java 9.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vamsi-kavuri/commons-collections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/vamsi-kavuri/commons-collections&lt;/a&gt; java9_compat&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/30.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/30.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #30&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 191826a52a3d77a821d3715cc4074ed6348b6e0a&lt;br/&gt;
Author: Kavuri, Vamsi &amp;lt;vamsi.kavuri@capitalone.com&amp;gt;&lt;br/&gt;
Date:   2017-10-12T04:04:10Z&lt;/p&gt;

&lt;p&gt;    override jacoco version for java9 compatibiltiy&lt;/p&gt;

&lt;p&gt;commit 627b825a24eb03fb5d29f2eb5243034bafc12d94&lt;br/&gt;
Author: Vamsi &amp;lt;vamsi.kavuri@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-10-12T04:05:46Z&lt;/p&gt;

&lt;p&gt;    Update pom.xml&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16201416" author="githubbot" created="Thu, 12 Oct 2017 04:16:19 +0000"  >&lt;p&gt;GitHub user vamsi-kavuri opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/30&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/30&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;     &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-662&quot; title=&quot;Build failures when building with Java 9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-662&quot;&gt;&lt;del&gt;COLLECTIONS-662&lt;/del&gt;&lt;/a&gt; : Override Jacoco version for Java9 compatibility&lt;/p&gt;

&lt;p&gt;    Overriding Jacoco version fixed the failures in Java 9.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/vamsi-kavuri/commons-collections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/vamsi-kavuri/commons-collections&lt;/a&gt; java9_compat&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/30.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/30.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #30&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 191826a52a3d77a821d3715cc4074ed6348b6e0a&lt;br/&gt;
Author: Kavuri, Vamsi &amp;lt;vamsi.kavuri@capitalone.com&amp;gt;&lt;br/&gt;
Date:   2017-10-12T04:04:10Z&lt;/p&gt;

&lt;p&gt;    override jacoco version for java9 compatibiltiy&lt;/p&gt;

&lt;p&gt;commit 627b825a24eb03fb5d29f2eb5243034bafc12d94&lt;br/&gt;
Author: Vamsi &amp;lt;vamsi.kavuri@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-10-12T04:05:46Z&lt;/p&gt;

&lt;p&gt;    Update pom.xml&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16201417" author="githubbot" created="Thu, 12 Oct 2017 04:20:19 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/30&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/30&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/13681730/badge)](https://coveralls.io/builds/13681730&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/13681730/badge)](https://coveralls.io/builds/13681730&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage remained the same at 86.616% when pulling *&lt;b&gt;627b825a24eb03fb5d29f2eb5243034bafc12d94 on vamsi-kavuri:java9_compat&lt;/b&gt;* into *&lt;b&gt;07de4dd578727555bb94ed421498f455838b317d on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="16201582" author="githubbot" created="Thu, 12 Oct 2017 07:55:34 +0000"  >&lt;p&gt;Github user PascalSchumacher commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/30&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/30&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks!&lt;/p&gt;</comment>
                            <comment id="16201583" author="githubbot" created="Thu, 12 Oct 2017 07:55:41 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/30&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/30&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16201584" author="githubbot" created="Thu, 12 Oct 2017 07:55:41 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/30&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/30&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16212681" author="chtompki" created="Fri, 20 Oct 2017 14:09:10 +0000"  >&lt;p&gt;Pascal merged this, I think.&lt;/p&gt;</comment>
                            <comment id="16212851" author="pascalschumacher" created="Fri, 20 Oct 2017 16:33:39 +0000"  >&lt;p&gt;Yes. Thanks for resolving the issue and adding the changes.xml entry. I forgot to do that. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Sorry.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Oct 2017 04:16:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l60v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-661] Intermittent test failures in Windows for HashSetValuedHashMap</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-661</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The collection HashSetValuedHashMap was added in 4.1. On Windows, test failures are not so common on JVM 8. But on Linux they are harder to happen (but still do &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;).&lt;/p&gt;

&lt;p&gt;When using Windows and JVM 8, running tests on Eclipse, or Maven fail. But debugging on Windows with Eclipse sometimes work. Indicating it may be due to a concurrency issue, where debugging adds some extra time hiding the real issue.&lt;/p&gt;

&lt;p&gt;I have a few ideas of where/why it could be happening, but am without a Windows box for a few days as I&apos;m travelling. I&apos;m reading the codebase in the meantime, but if anybody feels like working on it, feel free to chime in and suggest a fix/patch.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://travis-ci.org/apache/commons-collections/jobs/282169803&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://travis-ci.org/apache/commons-collections/jobs/282169803&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://markmail.org/thread/exwm7ggjtxzbtlkd&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://markmail.org/thread/exwm7ggjtxzbtlkd&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13106660">COLLECTIONS-661</key>
            <summary>Intermittent test failures in Windows for HashSetValuedHashMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="kinow">Bruno P. Kinoshita</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Oct 2017 09:54:08 +0000</created>
                <updated>Thu, 12 Oct 2017 06:31:44 +0000</updated>
                            <resolved>Thu, 12 Oct 2017 06:31:44 +0000</resolved>
                                    <version>4.1</version>
                                    <fixVersion>4.2</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="16190118" author="garydgregory" created="Tue, 3 Oct 2017 18:37:16 +0000"  >&lt;p&gt;Could this be related to this note in &lt;tt&gt;Object.hashCode(Object)&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     * &amp;lt;li&amp;gt;It is &amp;lt;em&amp;gt;not&amp;lt;/em&amp;gt; required that &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; two objects are unequal
     *     according to the {@link java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;#equals(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)}
     *     method, then calling the {@code hashCode} method on each of the
     *     two objects must produce distinct integer results.  However, the
     *     programmer should be aware that producing distinct integer results
     *     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; unequal objects may improve the performance of hash tables.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16199913" author="githubbot" created="Wed, 11 Oct 2017 07:37:48 +0000"  >&lt;p&gt;GitHub user kinow opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/28&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/28&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-661&quot; title=&quot;Intermittent test failures in Windows for HashSetValuedHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-661&quot;&gt;&lt;del&gt;COLLECTIONS-661&lt;/del&gt;&lt;/a&gt;: fix for concurrency issue in HashSetValuedHashMapTest&lt;/p&gt;

&lt;p&gt;    The `getMap()` method, when testing a `HashSetValuedHashMap`, would return an object of this type. Which is an instance of `SetValuedMap`.&lt;/p&gt;

&lt;p&gt;    Running it in debug mode would - most of the times - run the tests and succeed. Running normally - especially on Windows - would result in intermittent, but very frequent, failures.&lt;/p&gt;

&lt;p&gt;    The `getMap()` method sometimes, depending on the order and execution of tests, will be null. So the collection added to the map will be either a `Hashset`, or a `Arrays$ArrayList`. When the types are different, `hashCode()` and `equals()` calls return incorrect values, resulting in the errors we have seen in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-661&quot; title=&quot;Intermittent test failures in Windows for HashSetValuedHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-661&quot;&gt;&lt;del&gt;COLLECTIONS-661&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;    A good solution would be to re-design the tests. The `TestMultiValuedMapAsMap` is testing `MultiValuedMap`&apos;s, which include `HashSetValuedHashMap`. However, some of its methods contain extra logic for when the type under test has some characteristics like being an instance of `SetValuedMap`.&lt;/p&gt;

&lt;p&gt;    It might be possible to come up with a better design, where there are multiple test classes, for `MultiValuedMap`&apos;s that use `SetValuedMap`&apos;s; `MultieValuedMap`&apos;s that use `List`&apos;s, and so it goes.&lt;/p&gt;

&lt;p&gt;    Or we could add a class to the parent class, with a flag defining the type under test. For now, I have used the `makeObject()` method, which returns the collection under test. Then I validate its instance type. There is also a comment above the code to indicate why we are using `makeObject()` and not `getMap()`.&lt;/p&gt;

&lt;p&gt;    It was a fun ticket. Happy to get feedback on better solutions, or feel free to edit this pull request if you have right to it, or merge if you are happy and it has gathered some consensus.&lt;/p&gt;

&lt;p&gt;    Cheers,&lt;br/&gt;
    Bruno&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kinow/commons-collections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/kinow/commons-collections&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-661&quot; title=&quot;Intermittent test failures in Windows for HashSetValuedHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-661&quot;&gt;&lt;del&gt;COLLECTIONS-661&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/28.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/28.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #28&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6e8951ed0325abe3e07e32aded0b27aacdbc1011&lt;br/&gt;
Author: Bruno P. Kinoshita &amp;lt;brunodepaulak@yahoo.com.br&amp;gt;&lt;br/&gt;
Date:   2017-10-11T07:27:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-661&quot; title=&quot;Intermittent test failures in Windows for HashSetValuedHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-661&quot;&gt;&lt;del&gt;COLLECTIONS-661&lt;/del&gt;&lt;/a&gt;: fix for concurrency issue in HashSetValuedHashMapTest&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16199914" author="githubbot" created="Wed, 11 Oct 2017 07:37:48 +0000"  >&lt;p&gt;GitHub user kinow opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/28&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/28&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-661&quot; title=&quot;Intermittent test failures in Windows for HashSetValuedHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-661&quot;&gt;&lt;del&gt;COLLECTIONS-661&lt;/del&gt;&lt;/a&gt;: fix for concurrency issue in HashSetValuedHashMapTest&lt;/p&gt;

&lt;p&gt;    The `getMap()` method, when testing a `HashSetValuedHashMap`, would return an object of this type. Which is an instance of `SetValuedMap`.&lt;/p&gt;

&lt;p&gt;    Running it in debug mode would - most of the times - run the tests and succeed. Running normally - especially on Windows - would result in intermittent, but very frequent, failures.&lt;/p&gt;

&lt;p&gt;    The `getMap()` method sometimes, depending on the order and execution of tests, will be null. So the collection added to the map will be either a `Hashset`, or a `Arrays$ArrayList`. When the types are different, `hashCode()` and `equals()` calls return incorrect values, resulting in the errors we have seen in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-661&quot; title=&quot;Intermittent test failures in Windows for HashSetValuedHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-661&quot;&gt;&lt;del&gt;COLLECTIONS-661&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;    A good solution would be to re-design the tests. The `TestMultiValuedMapAsMap` is testing `MultiValuedMap`&apos;s, which include `HashSetValuedHashMap`. However, some of its methods contain extra logic for when the type under test has some characteristics like being an instance of `SetValuedMap`.&lt;/p&gt;

&lt;p&gt;    It might be possible to come up with a better design, where there are multiple test classes, for `MultiValuedMap`&apos;s that use `SetValuedMap`&apos;s; `MultieValuedMap`&apos;s that use `List`&apos;s, and so it goes.&lt;/p&gt;

&lt;p&gt;    Or we could add a class to the parent class, with a flag defining the type under test. For now, I have used the `makeObject()` method, which returns the collection under test. Then I validate its instance type. There is also a comment above the code to indicate why we are using `makeObject()` and not `getMap()`.&lt;/p&gt;

&lt;p&gt;    It was a fun ticket. Happy to get feedback on better solutions, or feel free to edit this pull request if you have right to it, or merge if you are happy and it has gathered some consensus.&lt;/p&gt;

&lt;p&gt;    Cheers,&lt;br/&gt;
    Bruno&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kinow/commons-collections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/kinow/commons-collections&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-661&quot; title=&quot;Intermittent test failures in Windows for HashSetValuedHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-661&quot;&gt;&lt;del&gt;COLLECTIONS-661&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/28.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/28.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #28&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6e8951ed0325abe3e07e32aded0b27aacdbc1011&lt;br/&gt;
Author: Bruno P. Kinoshita &amp;lt;brunodepaulak@yahoo.com.br&amp;gt;&lt;br/&gt;
Date:   2017-10-11T07:27:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-661&quot; title=&quot;Intermittent test failures in Windows for HashSetValuedHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-661&quot;&gt;&lt;del&gt;COLLECTIONS-661&lt;/del&gt;&lt;/a&gt;: fix for concurrency issue in HashSetValuedHashMapTest&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16199917" author="githubbot" created="Wed, 11 Oct 2017 07:40:32 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/28&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/28&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/13663731/badge)](https://coveralls.io/builds/13663731&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://coveralls.io/builds/13663731/badge)](https://coveralls.io/builds/13663731&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.008%) to 85.126% when pulling *&lt;b&gt;6e8951ed0325abe3e07e32aded0b27aacdbc1011 on kinow:&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-661&quot; title=&quot;Intermittent test failures in Windows for HashSetValuedHashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-661&quot;&gt;&lt;del&gt;COLLECTIONS-661&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;1d21a49c27d9eab8d02785a783fcfba387a3e8e1 on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="16201516" author="githubbot" created="Thu, 12 Oct 2017 06:29:56 +0000"  >&lt;p&gt;Github user kinow commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/28&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/28&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merged inhttps://github.com/apache/commons-collections/commit/eed8a7adb3de7441751e846f4a75d110dd205f23. Closing it.&lt;/p&gt;</comment>
                            <comment id="16201517" author="githubbot" created="Thu, 12 Oct 2017 06:29:56 +0000"  >&lt;p&gt;Github user kinow closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/28&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/28&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16201518" author="githubbot" created="Thu, 12 Oct 2017 06:29:56 +0000"  >&lt;p&gt;Github user kinow closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/28&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/28&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Oct 2017 18:37:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kthr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-660] Uncomment test in AbstractMapTest regarding LRUMap equals</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-660</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;AbstractMapTest has a &lt;a href=&quot;https://github.com/apache/commons-collections/blob/c8bdf60d1d0be609094e14054be0b9af0fb05521/src/test/java/org/apache/commons/collections4/map/AbstractMapTest.java#L1959&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;commented out&lt;/a&gt; line, with a comment as follows:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;his fails for LRUMap because confirmed.equals() somehow modifies map, causing concurrent modification exceptions.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;While working on another test failing on Windows, I believe I&apos;ve found the why for that comment, and how to fix it. Just need to finish debugging another part, and find a good Internet connection to push the fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13106652">COLLECTIONS-660</key>
            <summary>Uncomment test in AbstractMapTest regarding LRUMap equals</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="kinow">Bruno P. Kinoshita</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Oct 2017 09:41:18 +0000</created>
                <updated>Wed, 4 Oct 2017 04:44:06 +0000</updated>
                            <resolved>Wed, 4 Oct 2017 04:39:14 +0000</resolved>
                                    <version>4.1</version>
                                    <fixVersion>4.2</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="16190799" author="kinow" created="Wed, 4 Oct 2017 04:40:27 +0000"  >&lt;p&gt;Due to the order of the arguments of the assertEquals, we were calling TreeMap#equals, which would create a normal iterator instead of calling mapIterator().&lt;/p&gt;

&lt;p&gt;This would change the modCount in the parent, resulting finally in the concurrent modification exception.&lt;/p&gt;</comment>
                            <comment id="16190806" author="kinow" created="Wed, 4 Oct 2017 04:44:06 +0000"  >&lt;p&gt;Fixed in 9d4f2ba886b003980f2c37a4de7a3e6c3c701820, and changes.xml entry in 1d21a49c27d9eab8d02785a783fcfba387a3e8e1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ktfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-657] &quot;union&quot; method is resulting in data loss</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-657</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Create 2 instances of StringReader from strings (1 and 2), put them into a list A.&lt;br/&gt;
Create empty list B.&lt;br/&gt;
Call CollectionUtils.union(A, B);&lt;/p&gt;

&lt;p&gt;Expected result: &lt;span class=&quot;error&quot;&gt;&amp;#91;1, 2&amp;#93;&lt;/span&gt;&lt;br/&gt;
Actual result: &lt;span class=&quot;error&quot;&gt;&amp;#91;1, 1&amp;#93;&lt;/span&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13103306">COLLECTIONS-657</key>
            <summary>&quot;union&quot; method is resulting in data loss</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kibertoad">Igor Savin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Sep 2017 18:12:38 +0000</created>
                <updated>Tue, 19 Sep 2017 18:38:53 +0000</updated>
                            <resolved>Tue, 19 Sep 2017 18:38:53 +0000</resolved>
                                    <version>4.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="16172149" author="kibertoad" created="Tue, 19 Sep 2017 18:38:45 +0000"  >&lt;p&gt;After digging in further to create a reproduction test, figured out it&apos;s actually an issue with how equals is implemented in Drools library.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3k8wv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-656] Fix site build on Java 8</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-656</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Building the current master branch from git fails with&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] Generating &quot;FindBugs&quot; report             --- findbugs-maven-plugin:2.5.5:findbugs
[INFO] Locale is en
[INFO] Fork Value is true
     [java] The following errors occurred during analysis:
     [java]   Error scanning java/util/Map$Entry for referenced classes
     [java]     java.lang.ArrayIndexOutOfBoundsException: 5735
     [java]       At org.objectweb.asm.ClassReader.readClass(Unknown Source)
     [java]       At org.objectweb.asm.ClassReader.accept(Unknown Source)
     [java]       At edu.umd.cs.findbugs.asm.FBClassReader.accept(FBClassReader.java:44)
     [java]       At org.objectweb.asm.ClassReader.accept(Unknown Source)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassParserUsingASM.parse(ClassParserUsingASM.java:110)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassParserUsingASM.parse(ClassParserUsingASM.java:587)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassInfoAnalysisEngine.analyze(ClassInfoAnalysisEngine.java:76)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassInfoAnalysisEngine.analyze(ClassInfoAnalysisEngine.java:38)
     [java]       At edu.umd.cs.findbugs.classfile.impl.AnalysisCache.getClassAnalysis(AnalysisCache.java:268)
     [java]       At edu.umd.cs.findbugs.FindBugs2.buildReferencedClassSet(FindBugs2.java:891)
     [java]       At edu.umd.cs.findbugs.FindBugs2.execute(FindBugs2.java:222)
     [java]       At edu.umd.cs.findbugs.FindBugs.runMain(FindBugs.java:393)
     [java]       At edu.umd.cs.findbugs.FindBugs2.main(FindBugs2.java:1317)
     [java]   Error scanning java/util/Comparator for referenced classes
     [java]     java.lang.ArrayIndexOutOfBoundsException: 1320
     [java]       At org.objectweb.asm.ClassReader.readClass(Unknown Source)
     [java]       At org.objectweb.asm.ClassReader.accept(Unknown Source)
     [java]       At edu.umd.cs.findbugs.asm.FBClassReader.accept(FBClassReader.java:44)
     [java]       At org.objectweb.asm.ClassReader.accept(Unknown Source)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassParserUsingASM.parse(ClassParserUsingASM.java:110)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassParserUsingASM.parse(ClassParserUsingASM.java:587)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassInfoAnalysisEngine.analyze(ClassInfoAnalysisEngine.java:76)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassInfoAnalysisEngine.analyze(ClassInfoAnalysisEngine.java:38)
     [java]       At edu.umd.cs.findbugs.classfile.impl.AnalysisCache.getClassAnalysis(AnalysisCache.java:268)
     [java]       At edu.umd.cs.findbugs.FindBugs2.buildReferencedClassSet(FindBugs2.java:891)
     [java]       At edu.umd.cs.findbugs.FindBugs2.execute(FindBugs2.java:222)
     [java]       At edu.umd.cs.findbugs.FindBugs.runMain(FindBugs.java:393)
     [java]       At edu.umd.cs.findbugs.FindBugs2.main(FindBugs2.java:1317)
     [java]   Unable to get XClass for java/util/AbstractMap$SimpleEntry
     [java]     java.lang.ArrayIndexOutOfBoundsException: 5735
     [java]       At org.objectweb.asm.ClassReader.readClass(Unknown Source)
     [java]       At org.objectweb.asm.ClassReader.accept(Unknown Source)
     [java]       At edu.umd.cs.findbugs.asm.FBClassReader.accept(FBClassReader.java:44)
     [java]       At org.objectweb.asm.ClassReader.accept(Unknown Source)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassParserUsingASM.parse(ClassParserUsingASM.java:110)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassParserUsingASM.parse(ClassParserUsingASM.java:587)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassInfoAnalysisEngine.analyze(ClassInfoAnalysisEngine.java:76)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassInfoAnalysisEngine.analyze(ClassInfoAnalysisEngine.java:38)
     [java]       At edu.umd.cs.findbugs.classfile.impl.AnalysisCache.getClassAnalysis(AnalysisCache.java:268)
     [java]       At edu.umd.cs.findbugs.FindBugs2.buildReferencedClassSet(FindBugs2.java:891)
     [java]       At edu.umd.cs.findbugs.FindBugs2.execute(FindBugs2.java:222)
     [java]       At edu.umd.cs.findbugs.FindBugs.runMain(FindBugs.java:393)
     [java]       At edu.umd.cs.findbugs.FindBugs2.main(FindBugs2.java:1317)
     [java]   Unable to get XClass for org/apache/commons/collections4/map/StaticBucketMap$Node
     [java]     java.lang.ArrayIndexOutOfBoundsException: 5735
     [java]       At org.objectweb.asm.ClassReader.readClass(Unknown Source)
     [java]       At org.objectweb.asm.ClassReader.accept(Unknown Source)
     [java]       At edu.umd.cs.findbugs.asm.FBClassReader.accept(FBClassReader.java:44)
     [java]       At org.objectweb.asm.ClassReader.accept(Unknown Source)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassParserUsingASM.parse(ClassParserUsingASM.java:110)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassParserUsingASM.parse(ClassParserUsingASM.java:587)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassInfoAnalysisEngine.analyze(ClassInfoAnalysisEngine.java:76)
     [java]       At edu.umd.cs.findbugs.classfile.engine.ClassInfoAnalysisEngine.analyze(ClassInfoAnalysisEngine.java:38)
     [java]       At edu.umd.cs.findbugs.classfile.impl.AnalysisCache.getClassAnalysis(AnalysisCache.java:268)
     [java]       At edu.umd.cs.findbugs.FindBugs2.buildReferencedClassSet(FindBugs2.java:891)
     [java]       At edu.umd.cs.findbugs.FindBugs2.execute(FindBugs2.java:222)
     [java]       At edu.umd.cs.findbugs.FindBugs.runMain(FindBugs.java:393)
     [java]       At edu.umd.cs.findbugs.FindBugs2.main(FindBugs2.java:1317)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tested locally, and updating the commons-parent version to 42, and specifying the findbugs version from the parent property seems to fix the issue. As it could affect other parts of the build/release artefacts, I&apos;ll send a pull request to allow others to review before the parent is updated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13101595">COLLECTIONS-656</key>
            <summary>Fix site build on Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="kinow">Bruno P. Kinoshita</reporter>
                        <labels>
                            <label>documentation</label>
                            <label>site</label>
                    </labels>
                <created>Tue, 12 Sep 2017 10:42:33 +0000</created>
                <updated>Wed, 13 Sep 2017 07:52:56 +0000</updated>
                            <resolved>Wed, 13 Sep 2017 07:52:56 +0000</resolved>
                                    <version>4.1</version>
                                    <fixVersion>4.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16163797" author="githubbot" created="Tue, 12 Sep 2017 22:45:57 +0000"  >&lt;p&gt;Github user kinow commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fixed in 1081b725bea339fcda33d70c71b9eb1859d60d8f and 6a10051a7b5b3c615180413fe116c61780754969. Thanks to @garydgregory !&lt;/p&gt;</comment>
                            <comment id="16163798" author="githubbot" created="Tue, 12 Sep 2017 22:45:57 +0000"  >&lt;p&gt;Github user kinow closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/26&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16163799" author="githubbot" created="Tue, 12 Sep 2017 22:45:57 +0000"  >&lt;p&gt;Github user kinow closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/26&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Sep 2017 22:45:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jyhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-652] An obvious bug in CollectionUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-652</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In CollectionUtils.java:&lt;br/&gt;
Line number: 1121&lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removes the elements in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; from &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;. That is, this&lt;/li&gt;
	&lt;li&gt;method returns a collection containing all the elements in &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;that are not in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;. The cardinality of an element &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in the returned collection is the same as the cardinality of &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; unless &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; contains &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;, in which&lt;/li&gt;
	&lt;li&gt;case the cardinality is zero. This method is useful if you do not wish to modify&lt;/li&gt;
	&lt;li&gt;the collection &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt; and thus cannot call &amp;lt;code&amp;gt;collection.removeAll(remove);&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param collection  the collection from which items are removed (in the returned collection)&lt;/li&gt;
	&lt;li&gt;@param remove  the items to be removed from the returned &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;@return a &amp;lt;code&amp;gt;Collection&amp;lt;/code&amp;gt; containing all the elements of &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; except&lt;/li&gt;
	&lt;li&gt;any elements that also occur in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if either parameter is null&lt;/li&gt;
	&lt;li&gt;@since Commons Collections 3.2&lt;br/&gt;
     */&lt;br/&gt;
    public static Collection removeAll(Collection collection, Collection remove) 
{
        return ListUtils.retainAll(collection, remove);
    }
&lt;p&gt;The method should call ListUtils.removeAll(Collection collection, Collection remove) instead of calling ListUtils.retailAll(collection,remove)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;windows 7, jdk8. This bug is so obvious so I think it is nothing to do with environment&lt;/p&gt;</environment>
        <key id="13086518">COLLECTIONS-652</key>
            <summary>An obvious bug in CollectionUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="samray">samray leung</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Wed, 12 Jul 2017 08:49:31 +0000</created>
                <updated>Wed, 2 Aug 2017 16:50:12 +0000</updated>
                            <resolved>Wed, 2 Aug 2017 16:50:02 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.2.2</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="600">10m</timeoriginalestimate>
                            <timeestimate seconds="600">10m</timeestimate>
                                        <comments>
                            <comment id="16111271" author="sebb@apache.org" created="Wed, 2 Aug 2017 16:50:02 +0000"  >&lt;p&gt;This was fixed in 3.2.2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Aug 2017 16:50:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312720" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Docs Text</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* Removes the elements in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; from &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;. That is, this&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* method returns a collection containing all the elements in &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* that are not in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;. The cardinality of an element &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* in the returned collection is the same as the cardinality of &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; unless &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; contains &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;, in which&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* case the cardinality is zero. This method is useful if you do not wish to modify&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* the collection &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt; and thus cannot call &amp;lt;code&amp;gt;collection.removeAll(remove);&amp;lt;/code&amp;gt;.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* @param collection  the collection from which items are removed (in the returned collection)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* @param remove  the items to be removed from the returned &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* @return a &amp;lt;code&amp;gt;Collection&amp;lt;/code&amp;gt; containing all the elements of &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; except&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* any elements that also occur in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* @throws NullPointerException if either parameter is null&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* @since Commons Collections 3.2&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hf0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-604] More uniform safe-null methods in CollectionUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-604</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Currently, there are 65 public methods in `CollectionUtils`. And 53 without the deprecated ones. Out of these, 24 handle `null` arguments. The remaining methods throw a `NullPointerException` (NPE) at some part of its code.&lt;/p&gt;

&lt;p&gt;The methods that handle nulls, throw NPE, or return empty columns, boolean values, or just doesn&apos;t do anything.&lt;/p&gt;

&lt;p&gt;As a user of the API, I would expect a more uniform behaviour across the methods of `CollectionUtils`. &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-600&quot; title=&quot;Make CollectionUtils (in particular isEqualCollection) null-safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-600&quot;&gt;COLLECTIONS-600&lt;/a&gt; address one of these methods.&lt;/p&gt;

&lt;p&gt;`removeAll` (2x) and `retainAll` (2x) both state that a NPE will be thrown if either parameter is `null`. However, they never check if the values are null, and instead allow the code to run until a NPE is thrown.&lt;/p&gt;

&lt;p&gt;And the following code shows that `isEmpty` and `isFull` behave differently too.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Collection&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; c = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(CollectionUtils.isEmpty(c)); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(CollectionUtils.isFull(c));  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; a NPE&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I don&apos;t have to worry about `null`s with `#isEmpty`, I would expect the same from its related-method `#isFull`.&lt;/p&gt;

&lt;p&gt;What would be a good approach for it? Define a behaviour to all methods? Or leave as is, but add more documentation?&lt;/p&gt;

&lt;p&gt;There are a few methods that can easily be updated to check for `null` values. Others would require a bit more thinking. An example if the method in question for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-600&quot; title=&quot;Make CollectionUtils (in particular isEqualCollection) null-safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-600&quot;&gt;COLLECTIONS-600&lt;/a&gt;. It checks equality of collections, and when both collections are `null`, it says that they are equals. Google Guava &lt;a href=&quot;https://github.com/google/guava/blob/312aeb938bd35b5b7c8930e19ff5d1ca38e49424/guava/src/com/google/common/collect/Iterables.java#L232&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Iterables#elementsEqual&lt;/a&gt; and &lt;a href=&quot;https://github.com/google/guava/blob/312aeb938bd35b5b7c8930e19ff5d1ca38e49424/guava/src/com/google/common/collect/Iterators.java#L274&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Iterators#elementsEqual&lt;/a&gt; do not check for null values, for what it is worth.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13075163">COLLECTIONS-604</key>
            <summary>More uniform safe-null methods in CollectionUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="kinow">Bruno P. Kinoshita</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 May 2017 12:41:58 +0000</created>
                <updated>Thu, 29 Jun 2017 00:44:07 +0000</updated>
                                            <version>4.1</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16026239" author="kinow" created="Fri, 26 May 2017 12:51:36 +0000"  >&lt;p&gt;CSV file used for this issue.&lt;/p&gt;</comment>
                            <comment id="16027827" author="jholtkamp" created="Sun, 28 May 2017 14:00:17 +0000"  >&lt;p&gt;A good comparison for &lt;tt&gt;null&lt;/tt&gt;-behaviour would be a look to &lt;tt&gt;StringUtils&lt;/tt&gt; et. al. in my mind, because &lt;br/&gt;
a) &lt;tt&gt;StringUtils&lt;/tt&gt; handles &lt;tt&gt;null&lt;/tt&gt; values reasonably and&lt;br/&gt;
b) that would align behaviours across the different Commons libraries&lt;/p&gt;</comment>
                            <comment id="16037292" author="jholtkamp" created="Mon, 5 Jun 2017 18:00:31 +0000"  >&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=britter&quot; class=&quot;user-hover&quot; rel=&quot;britter&quot;&gt;Benedikt Ritter&lt;/a&gt; writes on the Mailing List:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Nobody seems to have an opinion on this issue so you should start implementing your preference.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Should we design an approach together or what is your favourite way of implementing this here?&lt;/p&gt;</comment>
                            <comment id="16038520" author="kinow" created="Tue, 6 Jun 2017 10:05:18 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jholtkamp&quot; class=&quot;user-hover&quot; rel=&quot;jholtkamp&quot;&gt;Jonas Holtkamp&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;&amp;gt;Should we design an approach together&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&amp;gt; or what is your favourite way of implementing this here?&lt;/p&gt;

&lt;p&gt;I liked your arguments for an approach that follows the behaviour in `StringUtils`.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tn&quot; class=&quot;user-hover&quot; rel=&quot;tn&quot;&gt;Thomas Neidhart&lt;/a&gt;, any feedback on this? We might change some JavaDocs, and make it null-safe in some cases, without breaking binary compatibility, but still changing the behaviour. I was reading the last updates in the tickets, and I think we drove the design of many changes in 4.x. So if you have anything in mind I&apos;d appreciate any feedback before we start changing the code. Later we may look at other classes to make this behaviour consistent across the whole &lt;span class=&quot;error&quot;&gt;&amp;#91;collections&amp;#93;&lt;/span&gt; component.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Bruno &lt;/p&gt;</comment>
                            <comment id="16066266" author="jholtkamp" created="Wed, 28 Jun 2017 10:05:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kinow&quot; class=&quot;user-hover&quot; rel=&quot;kinow&quot;&gt;Bruno P. Kinoshita&lt;/a&gt; No feedback from his side, so I&apos;d start implementing some example cases on the weekend.&lt;/p&gt;</comment>
                            <comment id="16067524" author="kinow" created="Thu, 29 Jun 2017 00:44:07 +0000"  >&lt;p&gt;Sounds like a good idea &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jholtkamp&quot; class=&quot;user-hover&quot; rel=&quot;jholtkamp&quot;&gt;Jonas Holtkamp&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="13041499">COLLECTIONS-600</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12870066" name="COLLECTIONS-604.csv" size="3811" author="kinow" created="Fri, 26 May 2017 12:51:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 28 May 2017 14:00:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fipr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COLLECTIONS-603] Small improvements for generics, conditional statements, and warnings suppressions</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-603</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Place holder for pull request #17&lt;/p&gt;</description>
                <environment></environment>
        <key id="13074427">COLLECTIONS-603</key>
            <summary>Small improvements for generics, conditional statements, and warnings suppressions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="kinow">Bruno P. Kinoshita</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 May 2017 08:02:31 +0000</created>
                <updated>Wed, 24 May 2017 08:21:31 +0000</updated>
                            <resolved>Wed, 24 May 2017 08:21:31 +0000</resolved>
                                                    <fixVersion>4.2</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fe67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-602] Improve efficiency of DefaultedMap.get</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-602</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The current implementation of &lt;tt&gt;org.apache.commons.collections4.map.DefaultedMap.get()&lt;/tt&gt; is inefficient since it always require two map lookups. There is no need to check map.containsKey() every time. I would suggest implementing this method similar to the way that Java 8 does with &lt;tt&gt;Map.getOrDefault()&lt;/tt&gt;. My proposed implementation would be something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; V get(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; key) {
    V v;
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((v = map.get(key) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) || map.containsKey(key)) ? v : value.transform((K) key);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It can be further optimized to not even call map.containsKey() if map is known to not contain null values.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13073447">COLLECTIONS-602</key>
            <summary>Improve efficiency of DefaultedMap.get</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="jmark">John Mark</reporter>
                        <labels>
                            <label>help-wanted</label>
                    </labels>
                <created>Fri, 19 May 2017 14:23:36 +0000</created>
                <updated>Wed, 24 May 2017 09:35:28 +0000</updated>
                            <resolved>Wed, 24 May 2017 09:35:28 +0000</resolved>
                                                    <fixVersion>4.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16018175" author="kinow" created="Fri, 19 May 2017 23:43:23 +0000"  >&lt;p&gt;Sounds like a good argument &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmark&quot; class=&quot;user-hover&quot; rel=&quot;jmark&quot;&gt;John Mark&lt;/a&gt;. Would you be interested in submitting a pull request? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16018672" author="jmark" created="Sun, 21 May 2017 02:56:42 +0000"  >&lt;p&gt;Sure, just let me know what the process for that is.&lt;/p&gt;</comment>
                            <comment id="16018694" author="kinow" created="Sun, 21 May 2017 05:13:49 +0000"  >&lt;p&gt;For general information on how to contribute, see &lt;a href=&quot;https://commons.apache.org/patches.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this page&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Commons Collections is still using Subversion for code management, this is the repository &lt;a href=&quot;https://svn.apache.org/repos/asf/commons/proper/collections/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/commons/proper/collections/trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you are comfortable with Subversion, you can check out that repository, make your changes, and follow the information in the first link to create a JIRA ticket, and a patch to attach to the ticket with your changes.&lt;/p&gt;

&lt;p&gt;If you are more comfortable or prefer to use Git, you can fork &lt;a href=&quot;https://github.com/apache/commons-collections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections&lt;/a&gt;, make all the changes in your own forked repository, and then &lt;a href=&quot;https://help.github.com/articles/about-pull-requests/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;submit a pull request&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A committer will review your patch or pull request, and either ask for feedback or changes, and then merge it (-:&lt;/p&gt;

&lt;p&gt;Hope that helps&lt;br/&gt;
Bruno&lt;/p&gt;</comment>
                            <comment id="16019576" author="jmark" created="Mon, 22 May 2017 13:26:12 +0000"  >&lt;p&gt;Yes, that is what I was looking for, thanks.&lt;/p&gt;

&lt;p&gt;I am attaching a patch to this ticket.&lt;/p&gt;</comment>
                            <comment id="16019578" author="jmark" created="Mon, 22 May 2017 13:26:37 +0000"  >&lt;p&gt;Patch for proposed solution.&lt;/p&gt;</comment>
                            <comment id="16022611" author="kinow" created="Wed, 24 May 2017 09:35:28 +0000"  >&lt;p&gt;Patch applied. All tests pass, coverage of the get method kept at 100%, no issues found in CPD, PMD, FindBugs, or Checkstyle. Nice and simple improvement, if the object exists in the map, it will avoid some work. The class javadocs cover thread safety, and this change is aligned with what is stated there.&lt;/p&gt;

&lt;p&gt;Thanks for taking your time to submit this patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmark&quot; class=&quot;user-hover&quot; rel=&quot;jmark&quot;&gt;John Mark&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Bruno&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12869258" name="COLLECTIONS-602.patch" size="853" author="jmark" created="Mon, 22 May 2017 13:26:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 May 2017 23:43:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3f84f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-601] commons-collections unit tests broken in Java 8</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-601</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Building the upstream trunk (currently, patch 30b2aca) fails the unit tests in Java 8, but passes in Java 7 on the same machine. Attached logs with env details an errors of a successful Java 7 build and an unsuccessful Java 8 build&lt;/p&gt;</description>
                <environment>&lt;p&gt;Maven 3.3.9, Java 1.8.0-121-1.b14, Fedora 25 - full details in attached logs&lt;/p&gt;</environment>
        <key id="13057481">COLLECTIONS-601</key>
            <summary>commons-collections unit tests broken in Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mureinik">Allon Mureinik</reporter>
                        <labels>
                            <label>test</label>
                    </labels>
                <created>Mon, 20 Mar 2017 10:38:17 +0000</created>
                <updated>Thu, 25 May 2017 11:07:29 +0000</updated>
                            <resolved>Wed, 24 May 2017 08:25:24 +0000</resolved>
                                    <version>Nightly Builds</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15933649" author="sebb@apache.org" created="Mon, 20 Mar 2017 21:51:54 +0000"  >&lt;p&gt;Does not fail on Jenkins:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/Apache%20Commons/job/Commons-Collections-Java8/1/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/Apache%20Commons/job/Commons-Collections-Java8/1/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The error looks like it may be an ordering issue.&lt;br/&gt;
Could be due to a test bug, a code bug or a JVM bug.&lt;/p&gt;</comment>
                            <comment id="16022526" author="kinow" created="Wed, 24 May 2017 08:25:10 +0000"  >&lt;p&gt;The job mentioned above was run against: jdk1.8.0_121&lt;/p&gt;

&lt;p&gt;And for me&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Results :

Tests run: 16069, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 25.850 s
[INFO] Finished at: 2017-05-24T20:23:49+12:00
[INFO] Final Memory: 29M/561M
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running on&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T05:41:47+13:00)
Maven home: /opt/maven
Java version: 1.8.0_131, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-8-oracle/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;4.4.0-78-generic&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As this can&apos;t be reproduced now with recent Java 8 releases, will resolve this issue.&lt;/p&gt;</comment>
                            <comment id="16024554" author="mureinik" created="Thu, 25 May 2017 11:07:29 +0000"  >&lt;p&gt;I can confirm the build passes on my machine with the following environment:&lt;/p&gt;

&lt;p&gt;    Apache Maven 3.3.9 (NON-CANONICAL_2016-07-01T11:53:38Z_mockbuild; 2016-07-01T14:53:38+03:00)&lt;br/&gt;
    Maven home: /usr/share/maven&lt;br/&gt;
    Java version: 1.8.0_131, vendor: Oracle Corporation&lt;br/&gt;
    Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.131-1.b12.fc25.x86_64/jre&lt;br/&gt;
    Default locale: en_US, platform encoding: UTF-8&lt;br/&gt;
    OS name: &quot;linux&quot;, version: &quot;4.10.15-200.fc25.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brunodepaulak%40yahoo.com.br&quot; class=&quot;user-hover&quot; rel=&quot;brunodepaulak@yahoo.com.br&quot;&gt;Bruno P. Kinoshita&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12859544" name="commons-collections.java7.build.log" size="41596" author="mureinik" created="Mon, 20 Mar 2017 10:45:21 +0000"/>
                            <attachment id="12859543" name="commons-collections.java8.build.log" size="98690" author="mureinik" created="Mon, 20 Mar 2017 10:45:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Mar 2017 21:51:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ciav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-599] HashEntry array object naming data initialized with double the size during deserialization</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-599</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Common collections 3.1 and 3.2 are used at many places and frameworks including struts2. &lt;br/&gt;
Supose a LinkedMap object it is created and have size greater than zero is serialized. While deserializing this object , array of HashEntry naming data delacred in AbstractHashedMap always initialises with a new capacity of double its double of the serialized object. &lt;/p&gt;

&lt;p&gt;Please see the below API declared in AbstractHashedMap class :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void checkCapacity()
  {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.size &amp;gt;= &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.threshold)
    {
      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; newCapacity = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.data.length * 2;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (newCapacity &amp;lt;= 1073741824) {
        ensureCapacity(newCapacity);
      }
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13025071">COLLECTIONS-599</key>
            <summary>HashEntry array object naming data initialized with double the size during deserialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tejast5">Tejas Patel</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Dec 2016 11:58:48 +0000</created>
                <updated>Fri, 2 Feb 2018 10:10:00 +0000</updated>
                                            <version>3.1</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Collection</component>
                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15714952" author="tejast5" created="Fri, 2 Dec 2016 12:05:02 +0000"  >&lt;p&gt;Possible fix would be calculating threshold before putting the data in doReadObject API. &lt;br/&gt;
Calculating threshold would not initialize the array by double.&lt;br/&gt;
Please find the code below : &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void doReadObject(ObjectInputStream in)
    &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, ClassNotFoundException
  {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.loadFactor = in.readFloat();
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; capacity = in.readInt();
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; size = in.readInt();
    init();
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.data = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashEntry[capacity];
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.threshold = calculateThreshold(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.data.length, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.loadFactor);
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; size; i++)
    {
      &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; key = in.readObject();
      &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = in.readObject();
      put(key, value);
    }
    
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why these is critical because this version of jar are been used by struts 2 . &lt;br/&gt;
I saw these been changed in version 4.1 , but if you classes in 4.1 are declared in different package.&lt;br/&gt;
We should have provide fix for these version as we cant change jars which is internally using these stuff. &lt;/p&gt;
</comment>
                            <comment id="16239959" author="mingleizhang" created="Mon, 6 Nov 2017 06:16:19 +0000"  >&lt;p&gt;Does anyone give me a permission that can contribute code to apache/commons ? Thank you very much! Minglei.&lt;/p&gt;</comment>
                            <comment id="16240470" author="garydgregory" created="Mon, 6 Nov 2017 15:55:26 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mingleizhang&quot; class=&quot;user-hover&quot; rel=&quot;mingleizhang&quot;&gt;mingleizhang&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Please feel free to provide a pull request on GitHub with a unit test.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-collections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Are you expecting that such a change would be in the 3.x AND 4.x (master) branches?&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16241304" author="mingleizhang" created="Tue, 7 Nov 2017 01:30:23 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;Gary Gregory&lt;/a&gt; I would think this change should be in 3.X, then 4.X master branches can rebase code from 3.X. As I found its affects versions is 3.1.&lt;/p&gt;</comment>
                            <comment id="16241347" author="mingleizhang" created="Tue, 7 Nov 2017 02:09:36 +0000"  >&lt;p&gt;I suspect that whether this issue belongs to a bug, instead, I think it should be a performance issue.&lt;/p&gt;</comment>
                            <comment id="16241348" author="mingleizhang" created="Tue, 7 Nov 2017 02:09:43 +0000"  >&lt;p&gt;I suspect that whether this issue belongs to a bug, instead, I think it should be a performance issue.&lt;/p&gt;</comment>
                            <comment id="16348998" author="saleem-akbar" created="Thu, 1 Feb 2018 17:50:36 +0000"  >&lt;p&gt;I also came across this problem (in my scenario I ended up with an out-of-memory error using non-sticky session replication) and also figured out the same solution, which was to to calculate the threshold before populating the data.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Anyway, I&apos;ve submitted the following PR&apos;s for 3.2.x (we&apos;re currently using 3.2.2) and master.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-collections/pull/34&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/34&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-collections/pull/35&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/35&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If approved, could we please have an official 3.2.x release (at this point 3.2.3) asap?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Cheers&lt;/p&gt;

&lt;p&gt;Saleem&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16349105" author="garydgregory" created="Thu, 1 Feb 2018 18:51:00 +0000"  >&lt;p&gt;The fix has been committed to git master. I re-wrote the unit test method to use Java 7 idioms.&lt;/p&gt;</comment>
                            <comment id="16350096" author="saleem-akbar" created="Fri, 2 Feb 2018 10:10:00 +0000"  >&lt;p&gt;Thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 Nov 2017 06:16:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i372nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COLLECTIONS-597] Correction of Javadoc for org.apache.commons.collections4.functors.CatchAndRethrowClosure</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-597</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Correct the javadoc for org.apache.commons.collections4.functors.CatchAndRethrowClosure, replacing:&lt;br/&gt;
CollctionUtils.forAllDo(strList, writer);&lt;br/&gt;
by:&lt;br/&gt;
CollectionUtils.forAllDo(strList, writer);&lt;/p&gt;</description>
                <environment></environment>
        <key id="13013873">COLLECTIONS-597</key>
            <summary>Correction of Javadoc for org.apache.commons.collections4.functors.CatchAndRethrowClosure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="garydgregory">Gary Gregory</assignee>
                                    <reporter username="sadguten">Enrique</reporter>
                        <labels>
                            <label>documentation</label>
                    </labels>
                <created>Thu, 20 Oct 2016 13:47:22 +0000</created>
                <updated>Fri, 21 Oct 2016 05:53:34 +0000</updated>
                            <resolved>Fri, 21 Oct 2016 05:53:34 +0000</resolved>
                                    <version>4.0</version>
                    <version>4.1</version>
                                    <fixVersion>4.2</fixVersion>
                                    <component>Functor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="15594166" author="garydgregory" created="Fri, 21 Oct 2016 05:53:34 +0000"  >&lt;p&gt;In SVN trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Oct 2016 05:53:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i355kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-596] FileInputStream is not closed</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-596</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In ExtendedProperties class on 602 line the function load is called with input stream. I do not see anywhere stream to be closed. Is there any reason for that?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13008874">COLLECTIONS-596</key>
            <summary>FileInputStream is not closed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kal0ian">Kaloyan Spiridonov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Sep 2016 13:36:12 +0000</created>
                <updated>Wed, 24 May 2017 08:34:34 +0000</updated>
                            <resolved>Wed, 24 May 2017 08:34:33 +0000</resolved>
                                    <version>3.2.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16022535" author="kinow" created="Wed, 24 May 2017 08:34:22 +0000"  >&lt;p&gt;This class has been removed from &lt;span class=&quot;error&quot;&gt;&amp;#91;collections&amp;#93;&lt;/span&gt; when the 4.x version was released. See &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-351&quot; title=&quot;Remove features now supported in the JDK&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-351&quot;&gt;&lt;del&gt;COLLECTIONS-351&lt;/del&gt;&lt;/a&gt; for more.&lt;/p&gt;

&lt;p&gt;The place where you can find a similar class now is &lt;span class=&quot;error&quot;&gt;&amp;#91;configuration&amp;#93;&lt;/span&gt;, probably PropertiesConfiguration. PropertiesConfiguration also contains some calls to a load method passing an InputSteam, which is never closed... but the input stream is passed to the library by the user, so the library in this case should not close it, as users may decide to do something else with it, and are then responsible for properly handling the stream.&lt;/p&gt;

&lt;p&gt;Marking as Won&apos;t Resolve.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 May 2017 08:34:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34avr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-595] ListOrderedSet remove()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-595</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hello Apache,&lt;/p&gt;

&lt;p&gt;I have a class which overrides equals() and hashCode().&lt;br/&gt;
I create a ListOrderedSet&amp;lt;MyClass&amp;gt; mySet= new ListOrderedSet&amp;lt;MyClass&amp;gt;(), and add objects to it:&lt;br/&gt;
mySet.add(obj1);&lt;br/&gt;
etc.&lt;/p&gt;

&lt;p&gt;Each object is initialized in the constructor with two properties first. The other properties are set afterwards, when&lt;br/&gt;
they are already contained in the ListOrderedSet. After I change/add some properties, then if I do mySet.contains(obj1), false is returned.&lt;br/&gt;
I read about that when a hashmap is created with the objects inside and then changing the objects inside it does not change&lt;br/&gt;
the hasmap&apos;s internal hashcode for the objects or something like that.&lt;/p&gt;

&lt;p&gt;These properties are found in the equals and hashcode. (When not there is no issue.).&lt;/p&gt;

&lt;p&gt;The following happens. If I still want to remove an object which was changed afterwards, in the method: public E remove(final int index),&lt;br/&gt;
inside public E remove(final int index) false is returned. But the object is still removed and in the debugger the following can be seen:&lt;/p&gt;

&lt;p&gt;DEBUG Info:&lt;/p&gt;

&lt;p&gt;this.collections.map.size == 5 (internal HashMap)&lt;br/&gt;
this.collections.setOrder.size == 4. (internal ArrayList)&lt;/p&gt;

&lt;p&gt;Afterwards if I print the list with the overrided toString() method IndexOutOfBoundsException is thrown when getting the size of mySet&lt;br/&gt;
via mySet.size(), but not when I use an iterator to count the objects in the set.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getSize() {
    	
    	OrderedIterator it = mySet.iterator();
    	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0;
    	&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(it.hasNext()){
    		
    		it.next();
		i++;
    		
    	}
&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; i &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; i then the items are 4, when returning memorySet.size(), the items are 5.
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//    	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; i;
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; mySet.size();

    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toReturn = &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;;
 

        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; getSize(); i++) {


            toReturn = toReturn + mySet.get(i) + &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;;


        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; toReturn;

    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So my question is: is this a bug or is it because of my changing/updating the objects in the list, and why if it returns false when removing it got deleted anyway?&lt;br/&gt;
Should it not got deleted to start with? &lt;/p&gt;

&lt;p&gt;Thank you for your effort.&lt;/p&gt;

&lt;p&gt;P.S. I am a self taught programmer. It&apos;s my first time sending a bug issue, maybe it&apos;s a bit long or I did not send with it other information I should have.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10, Eclipse Neon Release (4.6.0)&lt;/p&gt;</environment>
        <key id="13007463">COLLECTIONS-595</key>
            <summary>ListOrderedSet remove()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="maleven">Maleven</reporter>
                        <labels>
                    </labels>
                <created>Sun, 25 Sep 2016 21:08:21 +0000</created>
                <updated>Wed, 24 May 2017 09:52:29 +0000</updated>
                            <resolved>Wed, 24 May 2017 09:52:29 +0000</resolved>
                                    <version>4.1</version>
                                                    <component>Set</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15615947" author="xaerxess" created="Fri, 28 Oct 2016 16:57:20 +0000"  >&lt;p&gt;If I understand correctly, you modify elements of your type &lt;tt&gt;MyClass&lt;/tt&gt; after putting them into set? If so, you&apos;re violating set contract&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, which expects immutable elements (or at least in terms of equals and hashCode):&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: Great care must be exercised if mutable objects are used as set elements. The behavior of a set is not specified if the value of an object is changed in a manner that affects equals comparisons while the object is an element in the set. A special case of this prohibition is that it is not permissible for a set to contain itself as an element.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/Set.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.oracle.com/javase/8/docs/api/java/util/Set.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16022633" author="kinow" created="Wed, 24 May 2017 09:52:13 +0000"  >&lt;p&gt;+1 to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Xaerxess&quot; class=&quot;user-hover&quot; rel=&quot;Xaerxess&quot;&gt;Grzegorz Ro&#380;niecki&lt;/a&gt;&apos;s comment. Also think it is not a bug in the code, but rather the way you are using the class.&lt;/p&gt;

&lt;p&gt;The class Javadoc also hints on that direction.&lt;/p&gt;

&lt;p&gt;&amp;gt;This class cannot implement the List interface directly as various interface methods (notably equals/hashCode) are incompatible with a set.&lt;/p&gt;

&lt;p&gt;Which indicates this class&apos; behaviour is closer related to a Set, rather than a List.&lt;/p&gt;

&lt;p&gt;Marking as not a defect and resolving the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2016 16:57:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34267:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-593] Compilation errors (generics) with JDK9</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-593</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Current codebase does not compile with JDK9 (build 125): 28 errors below.&lt;/p&gt;

&lt;p&gt;I am not sure if this is a bug of JDK9 of a stricter compilation rule with generics.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/BagUtils.java:98: error: incompatible types: Bag&amp;lt;CAP#1&amp;gt; cannot be converted to Bag&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return UnmodifiableBag.unmodifiableBag(bag);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                               ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;unmodifiableBag(Bag&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/CollectionUtils.java:795: error: incompatible types: Collection&amp;lt;CAP#1&amp;gt; cannot be converted to Collection&amp;lt;C&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                 final Collection&amp;lt;C&amp;gt; resultCollection = collect(collection, transformer);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                               ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where C is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     C extends Object declared in method &amp;lt;C&amp;gt;transform(Collection&amp;lt;C&amp;gt;,Transformer&amp;lt;? super C,? extends C&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends C from capture of ? extends C&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/CollectionUtils.java:1835: error: incompatible types: Collection&amp;lt;CAP#1&amp;gt; cannot be converted to Collection&amp;lt;C&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return UnmodifiableCollection.unmodifiableCollection(collection);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                             ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where C is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     C extends Object declared in method &amp;lt;C&amp;gt;unmodifiableCollection(Collection&amp;lt;? extends C&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends C from capture of ? extends C&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/FluentIterable.java:311: error: incompatible types: FluentIterable&amp;lt;CAP#1&amp;gt; cannot be converted to FluentIterable&amp;lt;O&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return of(IterableUtils.transformedIterable(iterable, transformer));&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                  ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where O,E are type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O extends Object declared in method &amp;lt;O&amp;gt;transform(Transformer&amp;lt;? super E,? extends O&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in class FluentIterable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends O from capture of ? extends O&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/IterableUtils.java:429: error: incompatible types: Iterator&amp;lt;CAP#1&amp;gt; cannot be converted to Iterator&amp;lt;O&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                 return IteratorUtils.transformedIterator(iterable.iterator(), transformer);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                         ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where O,I are type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O extends Object declared in method &amp;lt;I,O&amp;gt;transformedIterable(Iterable&amp;lt;I&amp;gt;,Transformer&amp;lt;? super I,? extends O&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     I extends Object declared in method &amp;lt;I,O&amp;gt;transformedIterable(Iterable&amp;lt;I&amp;gt;,Transformer&amp;lt;? super I,? extends O&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends O from capture of ? extends O&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/IterableUtils.java:833: error: no suitable method found for partition(Iterable&amp;lt;CAP#1&amp;gt;,Factory&amp;lt;List&amp;lt;O#1&amp;gt;&amp;gt;,Predicate&amp;lt;? super O#1&amp;gt;[])&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return partition(iterable, factory, predicates);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     method IterableUtils.&amp;lt;O#1&amp;gt;partition(Iterable&amp;lt;? extends O#1&amp;gt;,Predicate&amp;lt;? super O#1&amp;gt;) is not applicable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;       (cannot infer type-variable(s) O#1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         (actual and formal argument lists differ in length))&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     method IterableUtils.&amp;lt;O#2&amp;gt;partition(Iterable&amp;lt;? extends O#2&amp;gt;,Predicate&amp;lt;? super O#2&amp;gt;...) is not applicable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;       (cannot infer type-variable(s) O#2&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         (varargs mismatch; Factory&amp;lt;List&amp;lt;O#1&amp;gt;&amp;gt; cannot be converted to Predicate&amp;lt;? super O#2&amp;gt;))&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     method IterableUtils.&amp;lt;O#3,R&amp;gt;partition(Iterable&amp;lt;? extends O#3&amp;gt;,Factory&amp;lt;R&amp;gt;,Predicate&amp;lt;? super O#3&amp;gt;...) is not applicable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;       (cannot infer type-variable(s) O#3,R&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         (varargs mismatch; Predicate&amp;lt;? super O#1&amp;gt;[] cannot be converted to Predicate&amp;lt;? super O#3&amp;gt;))&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where O#1,O#2,O#3,R are type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#1 extends Object declared in method &amp;lt;O#1&amp;gt;partition(Iterable&amp;lt;? extends O#1&amp;gt;,Predicate&amp;lt;? super O#1&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#2 extends Object declared in method &amp;lt;O#2&amp;gt;partition(Iterable&amp;lt;? extends O#2&amp;gt;,Predicate&amp;lt;? super O#2&amp;gt;...)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#3 extends Object declared in method &amp;lt;O#3,R&amp;gt;partition(Iterable&amp;lt;? extends O#3&amp;gt;,Factory&amp;lt;R&amp;gt;,Predicate&amp;lt;? super O#3&amp;gt;...)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     R extends Collection&amp;lt;O#3&amp;gt; declared in method &amp;lt;O#3,R&amp;gt;partition(Iterable&amp;lt;? extends O#3&amp;gt;,Factory&amp;lt;R&amp;gt;,Predicate&amp;lt;? super O#3&amp;gt;...)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends O#1 from capture of ? extends O#1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/IterableUtils.java:873: error: no suitable method found for partition(Iterable&amp;lt;CAP#1&amp;gt;,Factory&amp;lt;List&amp;lt;O#1&amp;gt;&amp;gt;,Predicate&amp;lt;? super O#1&amp;gt;[])&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return partition(iterable, factory, predicates);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     method IterableUtils.&amp;lt;O#2&amp;gt;partition(Iterable&amp;lt;? extends O#2&amp;gt;,Predicate&amp;lt;? super O#2&amp;gt;) is not applicable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;       (cannot infer type-variable(s) O#2&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         (actual and formal argument lists differ in length))&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     method IterableUtils.&amp;lt;O#1&amp;gt;partition(Iterable&amp;lt;? extends O#1&amp;gt;,Predicate&amp;lt;? super O#1&amp;gt;...) is not applicable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;       (cannot infer type-variable(s) O#1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         (varargs mismatch; Factory&amp;lt;List&amp;lt;O#1&amp;gt;&amp;gt; cannot be converted to Predicate&amp;lt;? super O#1&amp;gt;))&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     method IterableUtils.&amp;lt;O#3,R&amp;gt;partition(Iterable&amp;lt;? extends O#3&amp;gt;,Factory&amp;lt;R&amp;gt;,Predicate&amp;lt;? super O#3&amp;gt;...) is not applicable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;       (cannot infer type-variable(s) O#3,R&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         (varargs mismatch; Predicate&amp;lt;? super O#1&amp;gt;[] cannot be converted to Predicate&amp;lt;? super O#3&amp;gt;))&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where O#1,O#2,O#3,R are type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#1 extends Object declared in method &amp;lt;O#1&amp;gt;partition(Iterable&amp;lt;? extends O#1&amp;gt;,Predicate&amp;lt;? super O#1&amp;gt;...)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#2 extends Object declared in method &amp;lt;O#2&amp;gt;partition(Iterable&amp;lt;? extends O#2&amp;gt;,Predicate&amp;lt;? super O#2&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#3 extends Object declared in method &amp;lt;O#3,R&amp;gt;partition(Iterable&amp;lt;? extends O#3&amp;gt;,Factory&amp;lt;R&amp;gt;,Predicate&amp;lt;? super O#3&amp;gt;...)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     R extends Collection&amp;lt;O#3&amp;gt; declared in method &amp;lt;O#3,R&amp;gt;partition(Iterable&amp;lt;? extends O#3&amp;gt;,Factory&amp;lt;R&amp;gt;,Predicate&amp;lt;? super O#3&amp;gt;...)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends O#1 from capture of ? extends O#1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/IteratorUtils.java:438: error: incompatible types: BoundedIterator&amp;lt;CAP#1&amp;gt; cannot be converted to BoundedIterator&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return boundedIterator(iterator, 0, max);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                               ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;boundedIterator(Iterator&amp;lt;? extends E&amp;gt;,long)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/IteratorUtils.java:862: error: incompatible types: PeekingIterator&amp;lt;CAP#1&amp;gt; cannot be converted to Iterator&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return PeekingIterator.peekingIterator(iterator);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                               ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;peekingIterator(Iterator&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/IteratorUtils.java:878: error: incompatible types: PushbackIterator&amp;lt;CAP#1&amp;gt; cannot be converted to Iterator&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return PushbackIterator.pushbackIterator(iterator);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                 ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;pushbackIterator(Iterator&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/IteratorUtils.java:1086: error: incompatible types: List&amp;lt;CAP#1&amp;gt; cannot be converted to List&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         final List&amp;lt;E&amp;gt; list = toList(iterator, 100);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                    ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;toArray(Iterator&amp;lt;? extends E&amp;gt;,Class&amp;lt;E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/IteratorUtils.java:1104: error: incompatible types: List&amp;lt;CAP#1&amp;gt; cannot be converted to List&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return toList(iterator, 10);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                      ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;toList(Iterator&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/ListUtils.java:394: error: incompatible types: List&amp;lt;CAP#1&amp;gt; cannot be converted to List&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return UnmodifiableList.unmodifiableList(list);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                 ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;unmodifiableList(List&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/MapUtils.java:1272: error: incompatible types: Map&amp;lt;CAP#1,CAP#2&amp;gt; cannot be converted to Map&amp;lt;K,V&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return UnmodifiableMap.unmodifiableMap(map);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                               ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where K,V are type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     K extends Object declared in method &amp;lt;K,V&amp;gt;unmodifiableMap(Map&amp;lt;? extends K,? extends V&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     V extends Object declared in method &amp;lt;K,V&amp;gt;unmodifiableMap(Map&amp;lt;? extends K,? extends V&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1,CAP#2 are fresh type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends K from capture of ? extends K&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#2 extends V from capture of ? extends V&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/MapUtils.java:1537: error: incompatible types: SortedMap&amp;lt;K,CAP#1&amp;gt; cannot be converted to SortedMap&amp;lt;K,V&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return UnmodifiableSortedMap.unmodifiableSortedMap(map);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                           ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where K,V are type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     K extends Object declared in method &amp;lt;K,V&amp;gt;unmodifiableSortedMap(SortedMap&amp;lt;K,? extends V&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     V extends Object declared in method &amp;lt;K,V&amp;gt;unmodifiableSortedMap(SortedMap&amp;lt;K,? extends V&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends V from capture of ? extends V&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/MultiSetUtils.java:85: error: incompatible types: MultiSet&amp;lt;CAP#1&amp;gt; cannot be converted to MultiSet&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return UnmodifiableMultiSet.unmodifiableMultiSet(multiset);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                         ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;unmodifiableMultiSet(MultiSet&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/PredicateUtils.java:537: error: incompatible types: Predicate&amp;lt;CAP#1&amp;gt; cannot be converted to Predicate&amp;lt;T&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return TransformedPredicate.transformedPredicate(transformer, predicate);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                         ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where T is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     T extends Object declared in method &amp;lt;T&amp;gt;transformedPredicate(Transformer&amp;lt;? super T,? extends T&amp;gt;,Predicate&amp;lt;? super T&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends T from capture of ? extends T&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/QueueUtils.java:56: error: incompatible types: Queue&amp;lt;CAP#1&amp;gt; cannot be converted to Queue&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return UnmodifiableQueue.unmodifiableQueue(queue);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                   ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;unmodifiableQueue(Queue&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/SetUtils.java:225: error: incompatible types: Set&amp;lt;CAP#1&amp;gt; cannot be converted to Set&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return UnmodifiableSet.unmodifiableSet(set);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                               ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;unmodifiableSet(Set&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/SetUtils.java:505: error: incompatible types: Iterator&amp;lt;CAP#1&amp;gt; cannot be converted to Iterator&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                 return IteratorUtils.filteredIterator(a.iterator(), notContainedInB);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                      ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;difference(Set&amp;lt;? extends E&amp;gt;,Set&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/SetUtils.java:543: error: incompatible types: Iterator&amp;lt;CAP#1&amp;gt; cannot be converted to Iterator&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                 return IteratorUtils.filteredIterator(a.iterator(), containedInB);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                      ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in method &amp;lt;E&amp;gt;intersection(Set&amp;lt;? extends E&amp;gt;,Set&amp;lt;? extends E&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/TransformerUtils.java:187: error: incompatible types: no instance(s) of type variable(s) I#1 exist so that Transformer&amp;lt;I#1,CAP#1&amp;gt; conforms to Transformer&amp;lt;I#2,O#2&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return FactoryTransformer.factoryTransformer(factory);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                     ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where I#1,O#1,O#2,I#2 are type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     I#1 extends Object declared in method &amp;lt;I#1,O#1&amp;gt;factoryTransformer(Factory&amp;lt;? extends O#1&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#1 extends Object declared in method &amp;lt;I#1,O#1&amp;gt;factoryTransformer(Factory&amp;lt;? extends O#1&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#2 extends Object declared in method &amp;lt;I#2,O#2&amp;gt;asTransformer(Factory&amp;lt;? extends O#2&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     I#2 extends Object declared in method &amp;lt;I#2,O#2&amp;gt;asTransformer(Factory&amp;lt;? extends O#2&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends O#2 from capture of ? extends O#2&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/TransformerUtils.java:235: error: incompatible types: Transformer&amp;lt;CAP#1,CAP#1&amp;gt; cannot be converted to Transformer&amp;lt;T,T&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return IfTransformer.ifTransformer(predicate, trueTransformer);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                           ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where T is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     T extends Object declared in method &amp;lt;T&amp;gt;ifTransformer(Predicate&amp;lt;? super T&amp;gt;,Transformer&amp;lt;? super T,? extends T&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends T from capture of ? extends T&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/TransformerUtils.java:428: error: incompatible types: no instance(s) of type variable(s) I#1 exist so that Transformer&amp;lt;I#1,CAP#1&amp;gt; conforms to Transformer&amp;lt;I#2,O#2&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return MapTransformer.mapTransformer(map);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                             ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where I#1,O#1,O#2,I#2 are type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     I#1 extends Object declared in method &amp;lt;I#1,O#1&amp;gt;mapTransformer(Map&amp;lt;? super I#1,? extends O#1&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#1 extends Object declared in method &amp;lt;I#1,O#1&amp;gt;mapTransformer(Map&amp;lt;? super I#1,? extends O#1&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     O#2 extends Object declared in method &amp;lt;I#2,O#2&amp;gt;mapTransformer(Map&amp;lt;? super I#2,? extends O#2&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     I#2 extends Object declared in method &amp;lt;I#2,O#2&amp;gt;mapTransformer(Map&amp;lt;? super I#2,? extends O#2&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends O#2 from capture of ? extends O#2&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/TrieUtils.java:46: error: incompatible types: Trie&amp;lt;K,CAP#1&amp;gt; cannot be converted to Trie&amp;lt;K,V&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         return UnmodifiableTrie.unmodifiableTrie(trie);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                 ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where K,V are type-variables:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     K extends Object declared in method &amp;lt;K,V&amp;gt;unmodifiableTrie(Trie&amp;lt;K,? extends V&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     V extends Object declared in method &amp;lt;K,V&amp;gt;unmodifiableTrie(Trie&amp;lt;K,? extends V&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends V from capture of ? extends V&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/iterators/IteratorIterable.java:118: error: incompatible types: Iterator&amp;lt;CAP#1&amp;gt; cannot be converted to Iterator&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         this.typeSafeIterator = createTypesafeIterator(this.iterator);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                       ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where E is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     E extends Object declared in class IteratorIterable&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends E from capture of ? extends E&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/collections4/multimap/TransformedMultiValuedMap.java:162: error: incompatible types: FluentIterable&amp;lt;CAP#1&amp;gt; cannot be converted to Iterable&amp;lt;V&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         final Iterable&amp;lt;V&amp;gt; transformedValues = FluentIterable.of(values).transform(valueTransformer);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                                                  ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where V is a type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     V extends Object declared in class TransformedMultiValuedMap&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends V from capture of ? extends V&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /var/lib/jenkins/jobs/Java-EarlyAccess-JOSM-Plugins/workspace/jdk/JDK9/apache-commons/src/org/apache/commons/imaging/util/Debug.java:125: error: incompatible types: ArrayList&amp;lt;CAP#1&amp;gt; cannot be converted to List&amp;lt;Object&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         final List&amp;lt;Object&amp;gt; keys = new ArrayList&amp;lt;&amp;gt;(map.keySet());&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                   ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   where CAP#1 is a fresh type-variable:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;     CAP#1 extends Object from capture of ?&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 28 errors&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 1 warning&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 9b125&lt;/p&gt;</environment>
        <key id="12986486">COLLECTIONS-593</key>
            <summary>Compilation errors (generics) with JDK9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Don-vip">Vincent Privat</reporter>
                        <labels>
                            <label>generics</label>
                            <label>jdk9</label>
                            <label>josm-found</label>
                    </labels>
                <created>Sun, 3 Jul 2016 18:55:52 +0000</created>
                <updated>Tue, 28 Mar 2017 22:54:06 +0000</updated>
                            <resolved>Tue, 28 Mar 2017 22:54:06 +0000</resolved>
                                    <version>4.x</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15583276" author="jglick@netbeans.org" created="Mon, 17 Oct 2016 20:00:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8075793&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JDK-8075793&lt;/a&gt; perhaps?&lt;/p&gt;</comment>
                            <comment id="15583303" author="don-vip" created="Mon, 17 Oct 2016 20:10:23 +0000"  >&lt;p&gt;Indeed we were compiling with 1.7 option at this time. We now have switched to 1.8 option and don&apos;t have the error anymore.&lt;/p&gt;</comment>
                            <comment id="15594179" author="garydgregory" created="Fri, 21 Oct 2016 05:57:16 +0000"  >&lt;p&gt;Can this ticket be closed then?&lt;/p&gt;</comment>
                            <comment id="15809580" author="don-vip" created="Sun, 8 Jan 2017 15:42:31 +0000"  >&lt;p&gt;yes sure!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Oct 2016 20:00:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30hcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-592] Deletions/insertions get lost in the ReplacementsFinder if they&apos;re at the end of the compared sequences</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-592</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In the &lt;tt&gt;sequence&lt;/tt&gt; package, when comparing 2 lists with a &lt;tt&gt;SequencesComparator&lt;/tt&gt; and visiting the &lt;tt&gt;EditScript&lt;/tt&gt; with a &lt;tt&gt;ReplacementsFinder&lt;/tt&gt;, pending deletions and insertions get lost in the &lt;tt&gt;ReplacementsFinder&lt;/tt&gt; when they&apos;re at the end of the sequences.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;ReplacementsFinder&lt;/tt&gt; stores the deletions and insertions until it encounters a &lt;tt&gt;KeepCommand&lt;/tt&gt;, when it flushes the pending commands by triggering the &lt;tt&gt;handleReplacement&lt;/tt&gt; method of its &lt;tt&gt;ReplacementHandler&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The problem is, when edit commands are at the end of the sequences, the &lt;tt&gt;ReplacementsFinder&lt;/tt&gt; will never encounter a &lt;tt&gt;KeepCommand&lt;/tt&gt; to flush them, so they&apos;re stuck here and will never be handed over the &lt;tt&gt;ReplacementHandler&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;To fix this behavior in client code, one can manually call &lt;tt&gt;ReplacementsFinder.visitKeepCommand(null)&lt;/tt&gt; after the &lt;tt&gt;EditScript.visit()&lt;/tt&gt; call.&lt;/p&gt;

&lt;p&gt;I patched this bug in the library by adding a &lt;tt&gt;CommandVisitor.endOfVisit&lt;/tt&gt; method and calling it at the end of the &lt;tt&gt;EditScript.visit&lt;/tt&gt; method, so it allows to flush the pending deletions/insertions in the &lt;tt&gt;ReplacementsFinder&lt;/tt&gt; when the end of the &lt;tt&gt;EditScript&lt;/tt&gt; is reached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12980680">COLLECTIONS-592</key>
            <summary>Deletions/insertions get lost in the ReplacementsFinder if they&apos;re at the end of the compared sequences</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Unda">Alexis Mestag</reporter>
                        <labels>
                    </labels>
                <created>Sun, 19 Jun 2016 22:19:09 +0000</created>
                <updated>Mon, 20 Jun 2016 07:31:57 +0000</updated>
                                            <version>4.0</version>
                    <version>4.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                            <attachment id="12811732" name="ReplacementsFinder.patch" size="4646" author="Unda" created="Sun, 19 Jun 2016 22:20:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zpnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COLLECTIONS-588] Redundant computation in CollectionBag and CollectionSortedBag</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-588</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;There appears to be redundant computations in &quot;CollectionBag.retainAll&quot;&lt;br/&gt;
method in the version 4.4.1. I have attached a test and proposed a small &lt;br/&gt;
patch which ensures that &quot;contains&quot; method is called on hashset of&lt;br/&gt;
input collection. This patch gives 892X speed up on my &lt;br/&gt;
machine for the provided test.&lt;br/&gt;
Similar patches can be applied for, &quot;CollectionSortedBag.retainAll&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12964334">COLLECTIONS-588</key>
            <summary>Redundant computation in CollectionBag and CollectionSortedBag</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="monikadhok">Monika Dhok</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 May 2016 16:18:51 +0000</created>
                <updated>Mon, 2 May 2016 16:20:16 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                        <attachments>
                            <attachment id="12801768" name="Test1.java" size="988" author="monikadhok" created="Mon, 2 May 2016 16:20:16 +0000"/>
                            <attachment id="12801767" name="file.patch" size="365" author="monikadhok" created="Mon, 2 May 2016 16:20:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x1pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COLLECTIONS-587] commons-collections-3.2.2 does not compile under docker fedora21</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-587</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In a clean environment using docker, compile errors&lt;/p&gt;

&lt;p&gt;$cat Dockerfile &lt;br/&gt;
FROM fedora:21 &lt;br/&gt;
RUN yum update -y &lt;br/&gt;
RUN yum install -y java-1.8.0-openjdk unzip maven wget&lt;br/&gt;
RUN wget &lt;a href=&quot;http://apache.mirror.rafal.ca//commons/collections/source/commons-collections-3.2.2-src.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://apache.mirror.rafal.ca//commons/collections/source/commons-collections-3.2.2-src.zip&lt;/a&gt;&lt;br/&gt;
RUN unzip commons-collections-3.2.2-src.zip&lt;br/&gt;
RUN cd commons-collections-3.2.2-src &amp;amp;&amp;amp; mvn initialize&lt;br/&gt;
RUN cd commons-collections-3.2.2-src &amp;amp;&amp;amp; mvn install&lt;br/&gt;
RUN chmod -R 755 /root&lt;br/&gt;
CMD /bin/bash&lt;br/&gt;
$docker build .&lt;br/&gt;
&amp;lt;snip/&amp;gt;&lt;br/&gt;
Downloaded: &lt;a href=&quot;http://repo.maven.apache.org/maven2/commons-[INFO&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo.maven.apache.org/maven2/commons-[INFO&lt;/a&gt;] Changes detected - recompiling the module!&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Compiling 273 source files to /commons-collections-3.2.2-src/target/classes&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /commons-collections-3.2.2-src/src/java/org/apache/commons/collections/MultiHashMap.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;334,19&amp;#93;&lt;/span&gt; remove(java.lang.Object,java.lang.Object) in org.apache.commons.collections.MultiHashMap cannot implement remove(java.lang.Object,java.lang.Object) in java.util.Map&lt;br/&gt;
  return type java.lang.Object is not compatible with boolean&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /commons-collections-3.2.2-src/src/java/org/apache/commons/collections/MultiMap.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;69,19&amp;#93;&lt;/span&gt; remove(java.lang.Object,java.lang.Object) in org.apache.commons.collections.MultiMap clashes with remove(java.lang.Object,java.lang.Object) in java.util.Map&lt;br/&gt;
  return type java.lang.Object is not compatible with boolean&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /commons-collections-3.2.2-src/src/java/org/apache/commons/collections/map/MultiValueMap.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;156,19&amp;#93;&lt;/span&gt; remove(java.lang.Object,java.lang.Object) in org.apache.commons.collections.map.MultiValueMap cannot implement remove(java.lang.Object,java.lang.Object) in java.util.Map&lt;br/&gt;
  return type java.lang.Object is not compatible with boolean&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /commons-collections-3.2.2-src/src/java/org/apache/commons/collections/map/MultiKeyMap.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;200,19&amp;#93;&lt;/span&gt; remove(java.lang.Object,java.lang.Object) in org.apache.commons.collections.map.MultiKeyMap cannot implement remove(java.lang.Object,java.lang.Object) in java.util.Map&lt;br/&gt;
  return type java.lang.Object is not compatible with boolean&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; 4 errors &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD FAILURE&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 19.104 s&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: 2016-04-26T12:35:24-04:00&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 19M/203M&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.3:compile (default-compile) on project commons-collections: Compilation failure: Compilation failure:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /commons-collections-3.2.2-src/src/java/org/apache/commons/collections/MultiHashMap.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;334,19&amp;#93;&lt;/span&gt; remove(java.lang.Object,java.lang.Object) in org.apache.commons.collections.MultiHashMap cannot implement remove(java.lang.Object,java.lang.Object) in java.util.Map&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; return type java.lang.Object is not compatible with boolean&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /commons-collections-3.2.2-src/src/java/org/apache/commons/collections/MultiMap.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;69,19&amp;#93;&lt;/span&gt; remove(java.lang.Object,java.lang.Object) in org.apache.commons.collections.MultiMap clashes with remove(java.lang.Object,java.lang.Object) in java.util.Map&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; return type java.lang.Object is not compatible with boolean&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /commons-collections-3.2.2-src/src/java/org/apache/commons/collections/map/MultiValueMap.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;156,19&amp;#93;&lt;/span&gt; remove(java.lang.Object,java.lang.Object) in org.apache.commons.collections.map.MultiValueMap cannot implement remove(java.lang.Object,java.lang.Object) in java.util.Map&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; return type java.lang.Object is not compatible with boolean&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /commons-collections-3.2.2-src/src/java/org/apache/commons/collections/map/MultiKeyMap.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;200,19&amp;#93;&lt;/span&gt; remove(java.lang.Object,java.lang.Object) in org.apache.commons.collections.map.MultiKeyMap cannot implement remove(java.lang.Object,java.lang.Object) in java.util.Map&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; return type java.lang.Object is not compatible with boolean&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;br/&gt;
The command &apos;/bin/sh -c cd commons-collections-3.2.2-src &amp;amp;&amp;amp; mvn install&apos; returned a non-zero code: 1&lt;/p&gt;</description>
                <environment>&lt;p&gt;docker, fedora21&lt;/p&gt;</environment>
        <key id="12962651">COLLECTIONS-587</key>
            <summary>commons-collections-3.2.2 does not compile under docker fedora21</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marcpawl@gmail.com">Marc Pawlowsky</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Apr 2016 16:36:50 +0000</created>
                <updated>Tue, 26 Apr 2016 21:10:37 +0000</updated>
                            <resolved>Tue, 26 Apr 2016 21:10:37 +0000</resolved>
                                    <version>3.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15258590" author="tn" created="Tue, 26 Apr 2016 18:09:36 +0000"  >&lt;p&gt;Commons Collections 3.X can not be compiled with Java 8+ due to incompatible additions to the Map interface.&lt;/p&gt;

&lt;p&gt;The conflicting methods have been renamed in Collections 4.X.&lt;/p&gt;</comment>
                            <comment id="15258923" author="ebourg" created="Tue, 26 Apr 2016 21:08:53 +0000"  >&lt;p&gt;This was fixed in Fedora 24. There is a patch available you could use to build with Java 8 in Fedora 21:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://pkgs.fedoraproject.org/cgit/rpms/apache-commons-collections.git/tree/0001-Port-to-Java-8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://pkgs.fedoraproject.org/cgit/rpms/apache-commons-collections.git/tree/0001-Port-to-Java-8.patch&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Apr 2016 18:09:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wrdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-586] PatriciaTrie prefixMap clear throws NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-586</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Clearing all entries of a prefixMap returned by PatriciaTrie using the &lt;tt&gt;clear&lt;/tt&gt; method throws a NullPointerException. The workaround of removing each entry using the &lt;tt&gt;remove&lt;/tt&gt; method seems to work.&lt;/p&gt;

&lt;p&gt;Here are the test cases for the bug and the workaround:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PatriciaTrieTest {

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Trie&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; trie;

    @Before
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setUp() {
        trie = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PatriciaTrie&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();
        trie.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;Anna&quot;&lt;/span&gt;, 1);
        trie.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;Anael&quot;&lt;/span&gt;, 2);
        trie.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;Analu&quot;&lt;/span&gt;, 3);
        trie.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;Andreas&quot;&lt;/span&gt;, 4);
        trie.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;Andrea&quot;&lt;/span&gt;, 5);
        trie.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;Andres&quot;&lt;/span&gt;, 6);
        trie.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;Anatole&quot;&lt;/span&gt;, 7);
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testPrefixMapClear() {
        SortedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; prefixMap = trie.prefixMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;And&quot;&lt;/span&gt;);
        assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&amp;gt;(Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;Andrea&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Andreas&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Andres&quot;&lt;/span&gt;)), prefixMap.keySet());
        assertEquals(Arrays.asList(5, 4, 6), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(prefixMap.values()));

        prefixMap.clear();
        assertTrue(prefixMap.keySet().isEmpty());
        assertTrue(prefixMap.values().isEmpty());
        assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&amp;gt;(Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;Anael&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Analu&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Anatole&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Anna&quot;&lt;/span&gt;)), trie.keySet());
        assertEquals(Arrays.asList(2, 3, 7, 1), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(trie.values()));
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testPrefixMapClearUsingRemove() {
        SortedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; prefixMap = trie.prefixMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;And&quot;&lt;/span&gt;);
        assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&amp;gt;(Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;Andrea&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Andreas&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Andres&quot;&lt;/span&gt;)), prefixMap.keySet());
        assertEquals(Arrays.asList(5, 4, 6), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(prefixMap.values()));

        Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; keys = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;(prefixMap.keySet());
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key : keys) {
            prefixMap.remove(key);
        }
        assertTrue(prefixMap.keySet().isEmpty());
        assertTrue(prefixMap.values().isEmpty());
        assertEquals(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&amp;gt;(Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;Anael&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Analu&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Anatole&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Anna&quot;&lt;/span&gt;)), trie.keySet());
        assertEquals(Arrays.asList(2, 3, 7, 1), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(trie.values()));
    }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The stacktrace of the NullPointerException thrown by the &lt;tt&gt;testPrefixMapClear&lt;/tt&gt; test case is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
	at org.apache.commons.collections4.trie.AbstractPatriciaTrie$PrefixRangeEntrySet$EntryIterator.remove(AbstractPatriciaTrie.java:2370)
	at java.util.AbstractCollection.clear(AbstractCollection.java:432)
	at java.util.AbstractMap.clear(AbstractMap.java:288)
	at PatriciaTrieTest.testPrefixMapClear(PatriciaTrieTest.java:39)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12958267">COLLECTIONS-586</key>
            <summary>PatriciaTrie prefixMap clear throws NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shailender.bathula@tvnz.co.nz">Shailender Bathula</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Apr 2016 21:59:19 +0000</created>
                <updated>Tue, 18 Jul 2017 18:56:02 +0000</updated>
                            <resolved>Thu, 4 Aug 2016 17:33:10 +0000</resolved>
                                    <version>4.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15408007" author="githubbot" created="Thu, 4 Aug 2016 16:00:10 +0000"  >&lt;p&gt;GitHub user marko-bekhta opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/18&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/18&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-586&quot; title=&quot;PatriciaTrie prefixMap clear throws NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-586&quot;&gt;&lt;del&gt;COLLECTIONS-586&lt;/del&gt;&lt;/a&gt; PatriciaTrie prefixMap clear throws NullPointerException&lt;/p&gt;

&lt;p&gt;    added unit tests for the case mentioned in the issue and overrode clear method so it is not throwing exceptions&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/marko-bekhta/commons-collections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/marko-bekhta/commons-collections&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/18.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/18.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #18&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3627b954830acbe45ea08e9e1be31738ee759422&lt;br/&gt;
Author: marko.bekhta &amp;lt;markob@prykladna.lviv.ua&amp;gt;&lt;br/&gt;
Date:   2016-08-04T15:58:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-586&quot; title=&quot;PatriciaTrie prefixMap clear throws NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-586&quot;&gt;&lt;del&gt;COLLECTIONS-586&lt;/del&gt;&lt;/a&gt; PatriciaTrie prefixMap clear throws NullPointerException&lt;/p&gt;

&lt;p&gt;    added unit tests for the case mentioned in the issue and overrode clear method so it is not throwing exceptions&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15408180" author="garydgregory" created="Thu, 4 Aug 2016 17:33:10 +0000"  >&lt;p&gt;Please verify and close. This closes #18.&lt;/p&gt;</comment>
                            <comment id="15408688" author="shailender.bathula@tvnz.co.nz" created="Fri, 5 Aug 2016 00:29:04 +0000"  >&lt;p&gt;Closing based on the unit tests passing in &lt;a href=&quot;https://github.com/marko-bekhta/commons-collections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/marko-bekhta/commons-collections&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="16090231" author="githubbot" created="Mon, 17 Jul 2017 18:22:42 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/18&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/18&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16090232" author="githubbot" created="Mon, 17 Jul 2017 18:22:43 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/18&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/18&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16091516" author="githubbot" created="Tue, 18 Jul 2017 12:49:42 +0000"  >&lt;p&gt;Github user chtompki commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/18&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/18&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @marko-bekhta - Do you mind rebasing to the `master` branch, and re-opening this pull request?&lt;/p&gt;</comment>
                            <comment id="16091991" author="githubbot" created="Tue, 18 Jul 2017 18:56:02 +0000"  >&lt;p&gt;Github user marko-bekhta commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/18&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/18&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @chtompki there seems nothing to rebase now. The patch was copied and applied here &lt;br/&gt;
    &lt;a href=&quot;https://github.com/apache/commons-collections/commit/a270ff62852e62b5ac0f943a7e57292a72b77271&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/commit/a270ff62852e62b5ac0f943a7e57292a72b77271&lt;/a&gt;&lt;br/&gt;
    let me know if anything else is needed. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 4 Aug 2016 16:00:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w0vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-585] When use commons collection 3.2.2, show &quot;JavaSE not found&quot;</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-585</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi all, when i use commons-collections 3.2.2, and build my rcp application. it always show this error:&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;eclipse.generateFeature&amp;#93;&lt;/span&gt; Some inter-plug-in dependencies have not been satisfied.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;eclipse.generateFeature&amp;#93;&lt;/span&gt; Bundle org.apache.commons.collections:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;eclipse.generateFeature&amp;#93;&lt;/span&gt; 	Host plug-in JavaSE_0.0.0 has not been found.&lt;/p&gt;

&lt;p&gt;but for commons-collections 3.2.1.every thing is fine. &lt;br/&gt;
and compared the 3.2.2 and 3.2.1 &lt;br/&gt;
Mainfest.mf file add this:&lt;br/&gt;
Require-Capability: osgi.ee;filter:=&quot;(&amp;amp;(osgi.ee=JavaSE)(version=1.3))&quot;&lt;br/&gt;
if remove it, i can build my application. &lt;br/&gt;
i use jdk1.7 in my local(i also tested jdk1.8, same problem)&lt;br/&gt;
so i don&apos;t understand why show this problem.&lt;br/&gt;
i am new guy for this, if misunderstand this, sorry&lt;/p&gt;</description>
                <environment>&lt;p&gt;jdk1.7 commons-collections 3.2.2&lt;/p&gt;</environment>
        <key id="12934997">COLLECTIONS-585</key>
            <summary>When use commons collection 3.2.2, show &quot;JavaSE not found&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="neal001">neal zhang11</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jan 2016 02:53:02 +0000</created>
                <updated>Wed, 24 May 2017 08:56:09 +0000</updated>
                                            <version>3.2.2</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="16022564" author="kinow" created="Wed, 24 May 2017 08:56:09 +0000"  >&lt;p&gt;Not sure how to replicate the problem. Could you test with the latest version of Commons Collections and let us know if that works, and maybe add a comment explaining how to replicate your issue? That way we might be able to help debugging the issue, though I suspect it could be an IDE or environment issue.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Bruno&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 May 2017 08:56:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2s4lr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COLLECTIONS-584] Deserializing an AbstractHashedMap expands the hash table exponentially</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-584</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When deserializing an &lt;tt&gt;AbstractHashedMap&lt;/tt&gt; the size of the hashtable will be doubled at each element inserted because &lt;tt&gt;threshold&lt;/tt&gt; = 0, so this&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void checkCapacity() {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.size &amp;gt;= &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.threshold) {
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; newCapacity = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.data.length * 2;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(newCapacity &amp;lt;= 1073741824) {
                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.ensureCapacity(newCapacity);
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will always expand the hashtable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12921732">COLLECTIONS-584</key>
            <summary>Deserializing an AbstractHashedMap expands the hash table exponentially</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="orium">Diogo Sousa</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2015 18:08:54 +0000</created>
                <updated>Mon, 14 Dec 2015 22:49:10 +0000</updated>
                            <resolved>Mon, 14 Dec 2015 18:51:16 +0000</resolved>
                                    <version>4.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="15056436" author="sebb@apache.org" created="Mon, 14 Dec 2015 18:30:51 +0000"  >&lt;p&gt;As far as I can tell, AbstractHashedMap does not support Serializable.&lt;/p&gt;

&lt;p&gt;Seems to me that any serialise/deserialise code should save the map size as part of the serialisation data, in which case the map can be created with the correct size initially.&lt;/p&gt;

&lt;p&gt;But perhaps I&apos;m missing something here.&lt;/p&gt;</comment>
                            <comment id="15056463" author="tn" created="Mon, 14 Dec 2015 18:51:16 +0000"  >&lt;p&gt;The threshold is a transient field that is either provided or calculated from the intialCapacity. Concrete implementations of AbstractHashedMap are required to create a proper instance during de-serialization.&lt;/p&gt;</comment>
                            <comment id="15056617" author="orium" created="Mon, 14 Dec 2015 19:59:42 +0000"  >&lt;p&gt;In my scenario the problem is in the &lt;tt&gt;AbstractHashedMap&lt;/tt&gt; itself: the &lt;tt&gt;calculateThreshold()&lt;/tt&gt; can return 0 (I&apos;m seeing a load factor of almost zero: 10&#8315;&#8308;&#185;).&lt;/p&gt;</comment>
                            <comment id="15056640" author="tn" created="Mon, 14 Dec 2015 20:15:34 +0000"  >&lt;p&gt;The AbstractHashedMap class is not serializable. Could you please provide a test case illustrating the problem you are facing?&lt;/p&gt;</comment>
                            <comment id="15056651" author="tn" created="Mon, 14 Dec 2015 20:20:09 +0000"  >&lt;p&gt;the load factor is a &lt;b&gt;parameter&lt;/b&gt; provided to the AbstractHashedMap. If you see a value like this, your de-serialization code in the derived class is broken.&lt;/p&gt;</comment>
                            <comment id="15056876" author="orium" created="Mon, 14 Dec 2015 22:48:50 +0000"  >&lt;p&gt;This was after all a bug in RuedigerMoeller/fast-serialization, where a float was incorrectly serialized, making the load factor ~= 0, leading to a threshould of zero.&lt;/p&gt;</comment>
                            <comment id="15056877" author="orium" created="Mon, 14 Dec 2015 22:49:10 +0000"  >&lt;p&gt;See comment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 14 Dec 2015 18:30:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pvan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-583] JAVA serialization vulnerability &quot;CVE-2015-4852&quot; in commons-collections*.jar</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-583</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The vulnerability we are talking about is known under number CVE-2015-4852. As far as we know this is only related to the &lt;/p&gt;

&lt;p&gt;file commons-collections*.jar. In this jar file is a class that takes care of the deserialization. &lt;/p&gt;

&lt;p&gt;Currently we are using commons-collections-3.2.1.jar.&lt;br/&gt;
Is there a version of this jar that does not have this vulnerability?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12921576">COLLECTIONS-583</key>
            <summary>JAVA serialization vulnerability &quot;CVE-2015-4852&quot; in commons-collections*.jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="arnoj2010">Arnoj Saha</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2015 07:02:15 +0000</created>
                <updated>Mon, 14 Dec 2015 07:47:22 +0000</updated>
                            <resolved>Mon, 14 Dec 2015 07:47:22 +0000</resolved>
                                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12911300">COLLECTIONS-580</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pucf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-582] Maven repository metadata of Commons Collections in bad condition</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-582</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The metadata located at&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repo1.maven.org/maven2/commons-collections/commons-collections/maven-metadata.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repo1.maven.org/maven2/commons-collections/commons-collections/maven-metadata.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;are in a bad condition.&lt;/p&gt;

&lt;p&gt;It states that latest version and release version is 20040616. Moreover, the list of versions does not reflect the actual release order.&lt;/p&gt;

&lt;p&gt;This makes it difficult to automatically check for new versions in our QA processes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12914030">COLLECTIONS-582</key>
            <summary>Maven repository metadata of Commons Collections in bad condition</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="veita">Alexander Veit</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Nov 2015 08:00:56 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:15 +0000</updated>
                            <resolved>Wed, 18 Nov 2015 08:05:53 +0000</resolved>
                                    <version>3.2.2</version>
                                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="15010437" author="tn" created="Wed, 18 Nov 2015 08:05:53 +0000"  >&lt;p&gt;This is unfortunate, but a mistake from the past which can not be corrected afaict.&lt;/p&gt;

&lt;p&gt;The collections4 release has different maven coordinates, so for the newer version this should have been fixed.&lt;/p&gt;</comment>
                            <comment id="15010565" author="ebourg" created="Wed, 18 Nov 2015 09:26:38 +0000"  >&lt;p&gt;Would it be possible to ask for a modification of the metadata file? The versions deployed would remain, but maven-metadata.xml could at least point to 3.2.2 as the latest release. This happens automatically with every new release, so it&apos;s legitimate to expect that for commons-collections 3.2.2.&lt;/p&gt;</comment>
                            <comment id="15010665" author="joehni" created="Wed, 18 Nov 2015 10:04:38 +0000"  >&lt;p&gt;Not possible, it&apos;s auto-generated at central.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Nov 2015 08:05:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2okcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-581] Deserialization and Apache Commons Collection</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-581</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi Team,&lt;/p&gt;

&lt;p&gt;This is regarding &#8220;commons-collections Java library&#8221;. In our applications we are widely using this library and hence looking to urgently patch the fix for vulnerability issue if it is available.&lt;br/&gt;
Searching on internet we found one patch released on Sunday 08th Nov &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1713307&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1713307&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Just wanted to check with you if there is any updated / complied version of commons-collections jar available or going to be released soon which we can directly replace with our existing jar file that provides the fix for the vulnerability issue.&lt;/p&gt;

&lt;p&gt;Thanks in advance!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911814">COLLECTIONS-581</key>
            <summary>Deserialization and Apache Commons Collection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="markt">Mark Thomas</assignee>
                                    <reporter username="deepeshkapoor">Deepesh</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Tue, 10 Nov 2015 09:55:35 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:20 +0000</updated>
                            <resolved>Tue, 10 Nov 2015 10:00:04 +0000</resolved>
                                    <version>3.0</version>
                    <version>3.1</version>
                    <version>3.2.1</version>
                                                    <component>Functor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14998334" author="markt" created="Tue, 10 Nov 2015 10:00:04 +0000"  >&lt;p&gt;Jira is not the place to ask support questions. Please use the mailing list.&lt;/p&gt;</comment>
                            <comment id="14998342" author="deepeshkapoor" created="Tue, 10 Nov 2015 10:06:38 +0000"  >&lt;p&gt;Thanks Mark, i have dropped an email to &apos;dev@commons.apache.org&apos; and  &apos;security@apache.org&apos;. Kindly let me know if this is fine.&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Nov 2015 10:00:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o6qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-580] Arbitrary remote code execution with InvokerTransformer</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-580</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;With &lt;tt&gt;InvokerTransformer&lt;/tt&gt; serializable collections can be build that execute arbitrary Java code. &lt;tt&gt;sun.reflect.annotation.AnnotationInvocationHandler#readObject&lt;/tt&gt; invokes &lt;tt&gt;#entrySet&lt;/tt&gt; and &lt;tt&gt;#get&lt;/tt&gt; on a deserialized collection. If you have an endpoint that accepts serialized Java objects (JMX, RMI, remote EJB, ...) you can combine the two to create arbitrary remote code execution vulnerability.&lt;/p&gt;

&lt;p&gt;I don&apos;t know of a good fix short of removing &lt;tt&gt;InvokerTransformer&lt;/tt&gt; or making it not Serializable. Both probably break existing applications.&lt;/p&gt;

&lt;p&gt;This is not my research, but has been discovered by other people.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/frohoff/ysoserial&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/frohoff/ysoserial&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://foxglovesecurity.com/2015/11/06/what-do-weblogic-websphere-jboss-jenkins-opennms-and-your-application-have-in-common-this-vulnerability/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://foxglovesecurity.com/2015/11/06/what-do-weblogic-websphere-jboss-jenkins-opennms-and-your-application-have-in-common-this-vulnerability/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911300">COLLECTIONS-580</key>
            <summary>Arbitrary remote code execution with InvokerTransformer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marschall">Philippe Marschall</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Nov 2015 13:28:01 +0000</created>
                <updated>Tue, 12 Jan 2016 08:07:15 +0000</updated>
                            <resolved>Sat, 21 Nov 2015 10:02:58 +0000</resolved>
                                    <version>3.0</version>
                    <version>4.0</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>66</votes>
                                    <watches>104</watches>
                                                                <comments>
                            <comment id="14995710" author="ddossot" created="Sun, 8 Nov 2015 16:55:57 +0000"  >&lt;p&gt;This vulnerability puts the whole library at risk of being vetoed in places where security is tight. If InvokerTransformer has to be kept, can it be moved to a different artifacts? Or could we have a build that doesn&apos;t contain it (like with a &quot;secure&quot; qualifier).&lt;/p&gt;</comment>
                            <comment id="14995713" author="tn" created="Sun, 8 Nov 2015 17:08:37 +0000"  >&lt;p&gt;We are currently working on a new release to address the issue.&lt;/p&gt;

&lt;p&gt;As a solution, we prefer to introduce a new system property that controls whether the InvokerTransformer can be serialized or not. The default would be false, thus using the new version of the library will mean that any attempt to de-serialize an InvokerTransformer will result in an exception.&lt;/p&gt;</comment>
                            <comment id="14995804" author="ddossot" created="Sun, 8 Nov 2015 21:00:49 +0000"  >&lt;p&gt;This sounds great &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tn&quot; class=&quot;user-hover&quot; rel=&quot;tn&quot;&gt;Thomas Neidhart&lt;/a&gt;, thank you!&lt;/p&gt;</comment>
                            <comment id="14995839" author="tn" created="Sun, 8 Nov 2015 22:20:48 +0000"  >&lt;p&gt;Proposed fix committed in r1713307 for the 3.2.X branch, see here: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1713307&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1713307&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14995901" author="paul" created="Mon, 9 Nov 2015 00:55:43 +0000"  >&lt;p&gt;Re &quot;r1713307 for the 3.2.X branch&quot; ... can the same change be cherry-picked back other major/minor branches and those re-released to &apos;central&apos; too please?&lt;/p&gt;</comment>
                            <comment id="14996208" author="joehni" created="Mon, 9 Nov 2015 08:44:00 +0000"  >&lt;p&gt;Hi Paul,&lt;/p&gt;

&lt;p&gt;we do not re-release, Thomas intends to release new version 3.2.2 only (with some additional cheep bug fixes). I don&apos;t know if we gain a lot if we also make releases for older code lines (e.g. release new 3.1.1, 3.0.1, 2.1.2 , 2.0.1 and/or 1.0.1) with this cherry-pick only. The line is supposed to be binary compatible anyway. If someone does not want to upgrade to 3.2.2, why should he consider to upgrade to one of the other &quot;new&quot; releases?&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
J&#246;rg&lt;/p&gt;</comment>
                            <comment id="14996216" author="tn" created="Mon, 9 Nov 2015 08:52:19 +0000"  >&lt;p&gt;We will at least make also a release for the 4.x branch.&lt;/p&gt;

&lt;p&gt;The problematic class was introduced in 3.0, so in theory we could also make a 3.0.1 and 3.1.1 bugfix release, but as Joerg pointed out users should be able to upgrade to 3.2.2.&lt;br/&gt;
Could you point out cases where this might not be possible?&lt;/p&gt;</comment>
                            <comment id="14996219" author="ebourg" created="Mon, 9 Nov 2015 09:01:57 +0000"  >&lt;p&gt;I think we should release the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-580&quot; title=&quot;Arbitrary remote code execution with InvokerTransformer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-580&quot;&gt;&lt;del&gt;COLLECTIONS-580&lt;/del&gt;&lt;/a&gt; alone with no other modification. Otherwise people may hesitate to upgrade in fear of a regression. The other changes can be released later.&lt;/p&gt;</comment>
                            <comment id="14996228" author="tn" created="Mon, 9 Nov 2015 09:08:28 +0000"  >&lt;p&gt;This should please be discussed on the mailinglist.&lt;br/&gt;
I hand-picked the bugfixes that have been backported from the 4.0 release and they only include things that are clearly wrong, and anybody using this functionality must have a broken application.&lt;/p&gt;</comment>
                            <comment id="14996248" author="ebourg" created="Mon, 9 Nov 2015 09:25:21 +0000"  >&lt;p&gt;I don&apos;t doubt you&apos;ve done the things properly Thomas and I&apos;m glad you&apos;re there to do that. My point is that from a user perspective, an update that just contains a security fix is likely to be a no-brainer, but a security update combined with other changes may trigger a full QA cycle in some development teams.&lt;/p&gt;</comment>
                            <comment id="14998295" author="jochen@apache.org" created="Tue, 10 Nov 2015 09:25:33 +0000"  >&lt;p&gt;Alothough deserialization is the actual problem, I do thing that we should handle serialization, and deserialization in the same manner. I am attaching a suggested patch.&lt;/p&gt;</comment>
                            <comment id="14998319" author="ebourg" created="Tue, 10 Nov 2015 09:48:31 +0000"  >&lt;p&gt;Serialization isn&apos;t an issue, I don&apos;t see the point of changing that.&lt;/p&gt;</comment>
                            <comment id="14998325" author="jochen@apache.org" created="Tue, 10 Nov 2015 09:52:36 +0000"  >&lt;p&gt;We are introducing an incompatible change. The more people know about it, the better.&lt;/p&gt;</comment>
                            <comment id="14998335" author="tn" created="Tue, 10 Nov 2015 10:00:18 +0000"  >&lt;p&gt;Indeed, I was thinking about that as well. The point is that within the same application it does not make sense to allow serialization when de-serialization will certainly fail.&lt;br/&gt;
This will allow people to spot regressions earlier when using the updated jar with serialization disabled.&lt;/p&gt;

&lt;p&gt;Furthermore, as mentioned by Chris Frohoff on the mailinglist, the following classes might be unsecure as well:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;InstantiateFactory&lt;/li&gt;
	&lt;li&gt;InstantiateTransformer&lt;/li&gt;
	&lt;li&gt;PrototypeFactory&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think PrototypeFactory is safe: it calls clone on an object that has been de-serialized already, but for the other 2 I am not sure. Basically they allow an attacker to call an arbitrary public constructor of any class in the application&apos;s classpath. There might be a possible attack vector for it, although none is known atm.&lt;/p&gt;

&lt;p&gt;If we add the same fix there as well, I would also suggest to change the property to enable the serialization to that: &quot;org.apache.commons.collections.enableUnsafeSerialization&quot;&lt;/p&gt;</comment>
                            <comment id="14998820" author="jglick@netbeans.org" created="Tue, 10 Nov 2015 16:08:13 +0000"  >&lt;p&gt;FWIW the Jenkins project has been assuming that the whole &lt;tt&gt;org.apache.commons.collections.functors&lt;/tt&gt; package is vulnerable and should be blocked from deserialization.&lt;/p&gt;</comment>
                            <comment id="14999172" author="drosenbauer" created="Tue, 10 Nov 2015 19:27:47 +0000"  >&lt;p&gt;I think that whatever is done with InvokerTransformer should also be done with InstantiationTransformer (and the various related Factories and Closures and such). There are classes that do unsafe things in their constructors. For that matter, there may be classes that do unsafe things in their toStrings.&lt;/p&gt;</comment>
                            <comment id="15000335" author="tn" created="Wed, 11 Nov 2015 13:07:07 +0000"  >&lt;p&gt;There are also other vulnerable classes that allow an attacker to create a quite simple DOS attack.&lt;br/&gt;
A gadget like that will result in an infinite loop:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Transformer[] transformers = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Transformer[] {
	&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConstantTransformer(&lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt;.class),
	&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ClosureTransformer(
	        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WhileClosure(TruePredicate.INSTANCE,
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TransformerClosure(CloneTransformer.INSTANCE), &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15003912" author="karsten.klein@gmail.com" created="Fri, 13 Nov 2015 12:13:36 +0000"  >&lt;p&gt;We (not having seen the attached patch before) have come up with the following solution:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Transforms the input to result by invoking a method on the input.
     * 
     * @param input  the input object to transform
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the transformed result, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; input
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; transform(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; input) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (input == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
        
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (deserialized) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Transformation on deserialized object not supported. &quot;&lt;/span&gt;
                    + &lt;span class=&quot;code-quote&quot;&gt;&quot;Using &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; function may indicate an attempted SECURITY BREACH.&quot;&lt;/span&gt;);
        }
        
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; cls = input.getClass();
            Method method = cls.getMethod(iMethodName, iParamTypes);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; method.invoke(input, iArgs);
                
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NoSuchMethodException ex) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FunctorException(&lt;span class=&quot;code-quote&quot;&gt;&quot;InvokerTransformer: The method &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + iMethodName + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; on &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + input.getClass() + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; does not exist&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalAccessException ex) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FunctorException(&lt;span class=&quot;code-quote&quot;&gt;&quot;InvokerTransformer: The method &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + iMethodName + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; on &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + input.getClass() + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; cannot be accessed&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InvocationTargetException ex) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FunctorException(&lt;span class=&quot;code-quote&quot;&gt;&quot;InvokerTransformer: The method &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + iMethodName + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; on &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + input.getClass() + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; threw an exception&quot;&lt;/span&gt;, ex);
        }
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;transient&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; deserialized = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void readObject(ObjectInputStream in) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, ClassNotFoundException {
        in.defaultReadObject();
        deserialized = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This approach is a little more &apos;compatible&apos; and less invasive. It will only fail if transform is invoked on a deserialized object. In particular it does not fail at deserialization time. Only when the transform method is invoked. This may reduce the effects of the change.&lt;/p&gt;</comment>
                            <comment id="15003922" author="tn" created="Fri, 13 Nov 2015 12:24:20 +0000"  >&lt;p&gt;I prefer a fail-fast approach.&lt;/p&gt;

&lt;p&gt;btw. a successful attack will call the transform as part of the call to readObject, thus it will fail during de-serialization.&lt;/p&gt;</comment>
                            <comment id="15003932" author="karsten.klein@gmail.com" created="Fri, 13 Nov 2015 12:35:50 +0000"  >&lt;p&gt;Not sure I fully understand. The critical piece of code is always executed on a fully deserialized object. So the approach should work (or I apologize for not having understood the subject matter).&lt;/p&gt;

&lt;p&gt;However, awareness is required on how people have to deal with this finding. The lib is very wide-spread. Thus a minimum behavior change in the software stack is preferred.&lt;/p&gt;

&lt;p&gt;For newer versions (major/minor) I would agree to your fail-fast approach. Here I would also suggest to remove the complete Serialization feature.&lt;/p&gt;</comment>
                            <comment id="15003970" author="tn" created="Fri, 13 Nov 2015 13:25:29 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Not sure I fully understand. The critical piece of code is always executed on a fully deserialized object. So the approach should work (or I apologize for not having understood the subject matter).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I did not question your approach, I wanted to point out that in the attack vector, i.e. InvokerTransformer#transform will already be called during de-serialization (of another object).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;However, awareness is required on how people have to deal with this finding. The lib is very wide-spread. Thus a minimum behavior change in the software stack is preferred.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We are trying to do this, but the rationale is as follows: if an application uses the unsafe classes in a legit way, i.e. will de-serialize them from a trusted source, the application will most likely also &lt;b&gt;use&lt;/b&gt; these objects in a way or another. It means that the application will fail in any way, but it will be easier to spot/fix if it happens already during the de-serialization, but please correct me if you have a use-case where your approach would be more suitable.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For newer versions (major/minor) I would agree to your fail-fast approach. Here I would also suggest to remove the complete Serialization feature.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is indeed the plan, for the 4.1 release we will hopefully remove the Serializable interface from the unsafe classes.&lt;/p&gt;</comment>
                            <comment id="15004640" author="tn" created="Fri, 13 Nov 2015 20:10:02 +0000"  >&lt;p&gt;Committed in r1714262 for collections4: unsafe classes do not implement the Serializable interface anymore.&lt;/p&gt;</comment>
                            <comment id="15004712" author="tn" created="Fri, 13 Nov 2015 21:03:31 +0000"  >&lt;p&gt;The new MultiValuedMap in collections4 uses internally an InstantiateFactory which is serialized. Need to find a better solution for this before we can resolve the issue.&lt;/p&gt;</comment>
                            <comment id="15005279" author="tn" created="Sat, 14 Nov 2015 09:56:05 +0000"  >&lt;p&gt;In collections4 there is also an inner factory class in MultiValueMap that is serializable. This can be solved with a readObject method that checks whether the de-serialized class extends Collection.&lt;/p&gt;</comment>
                            <comment id="15005597" author="tn" created="Sat, 14 Nov 2015 20:25:28 +0000"  >&lt;p&gt;Fixed MultiValueMap issue in r1714360.&lt;/p&gt;</comment>
                            <comment id="15006460" author="rchamarthy" created="Mon, 16 Nov 2015 10:22:34 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Would be interested to know an estimated data on the availability the commons collections with the fix.&lt;/p&gt;

&lt;p&gt;Advance Thanks,&lt;br/&gt;
Ravi Chamarthy&lt;/p&gt;</comment>
                            <comment id="15006492" author="tn" created="Mon, 16 Nov 2015 10:42:55 +0000"  >&lt;p&gt;collections 3.2.2 has been released yesterday.&lt;/p&gt;

&lt;p&gt;A new release for collections4 will be done this week hopefully.&lt;/p&gt;</comment>
                            <comment id="15006555" author="rchamarthy" created="Mon, 16 Nov 2015 11:38:35 +0000"  >&lt;p&gt;Thanks Thomas for the confirmation.&lt;/p&gt;</comment>
                            <comment id="15006612" author="schudel" created="Mon, 16 Nov 2015 12:39:35 +0000"  >&lt;p&gt;Thanks Thomas for the quick fix&lt;/p&gt;</comment>
                            <comment id="15007419" author="yoderme" created="Mon, 16 Nov 2015 21:56:45 +0000"  >&lt;p&gt;Let me also extend my thanks for the fix. Question: is there an assigned CVE number for this? I couldn&apos;t find one after a quick search.&lt;/p&gt;</comment>
                            <comment id="15008749" author="stevie beck" created="Tue, 17 Nov 2015 14:48:57 +0000"  >&lt;p&gt;+1 (thanks for the fix!)&lt;br/&gt;
Regarding CVE number: Mitre did not (yet?) assign one, and there has been a controversial discussion in the OSS Security list around it, see: &lt;a href=&quot;http://seclists.org/oss-sec/2015/q4/280&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://seclists.org/oss-sec/2015/q4/280&lt;/a&gt;&lt;br/&gt;
CVE-2015-4852 was assigned by Oracle and is started to be used by other vendors, whose products are impacted by the issue.&lt;/p&gt;</comment>
                            <comment id="15011116" author="tdaitx" created="Wed, 18 Nov 2015 14:50:43 +0000"  >&lt;p&gt;According to CVE assignment team &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; no CVE ID will be allocated for this issue and:&lt;/p&gt;

&lt;p&gt;&quot;The CVE-2015-4852 ID came from Oracle and must remain associated only with Oracle&apos;s own software (WebLogic Server is the product they&apos;ve named).&quot;&lt;/p&gt;

&lt;p&gt;but then Oracle&apos;s Thomas Keefe reply &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; to that thread stated:&lt;/p&gt;

&lt;p&gt;&quot;We do not have a problem with this use of the CVE# we registered (CVE-2015-4852).&quot;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.openwall.com/lists/oss-security/2015/11/17/19&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.openwall.com/lists/oss-security/2015/11/17/19&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.openwall.com/lists/oss-security/2015/11/18/1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.openwall.com/lists/oss-security/2015/11/18/1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15012958" author="taromaru" created="Thu, 19 Nov 2015 06:22:49 +0000"  >&lt;p&gt;I used commons-collections-3.2.2.&lt;/p&gt;

&lt;p&gt;ForClosure and WhileClosure can not deserialize.&lt;br/&gt;
But, ChainedTransformer can deserialize.&lt;br/&gt;
A DoS attack similar to an infinite loop becomes possible by the following way.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; map = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();
	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MIN_VALUE + 1; i &amp;lt;= &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MIN_VALUE + 10; i++) {
		map.put(i, i);
	}
	Transformer constantTransformer = ConstantTransformer.getInstance(map);
	Transformer stringValueTransformer = StringValueTransformer.getInstance();
	Transformer transformerChain = ChainedTransformer.getInstance(constantTransformer, stringValueTransformer);
	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 10; i++) {
		Transformer[] transformers = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Transformer[10];
		Arrays.fill(transformers, transformerChain);
		transformerChain = ChainedTransformer.getInstance(transformers);
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This serialized file size is less than 2KB.&lt;br/&gt;
But it takes 6~7 hours for deserialize. (Core i5 CPU)&lt;/p&gt;

&lt;p&gt;I think the similar way is also possible in ChainedClosure, AllPredicate, AnyPredicate.&lt;/p&gt;

&lt;p&gt;When other class of org.apache.commons.collections.functors package was used,&lt;br/&gt;
it was possible to make OutOfMemoryError occur.&lt;/p&gt;

&lt;p&gt;I think all classes of org.apache.commons.collections.functors package should call FunctorUtils#checkUnsafeSerialization.&lt;/p&gt;</comment>
                            <comment id="15013112" author="tn" created="Thu, 19 Nov 2015 08:03:31 +0000"  >&lt;p&gt;Hmm I feared that it would be too easy to create other, similar exploits with still serializable classes.&lt;/p&gt;

&lt;p&gt;btw. for the same DOS attack, the guava lib might be exploitable as well. The lib also provides predicates and functions that can be chained in a way or another and are serializable.&lt;/p&gt;</comment>
                            <comment id="15013329" author="stevie beck" created="Thu, 19 Nov 2015 10:58:39 +0000"  >&lt;p&gt;This reminds me of the the general &quot;SerialDoS&quot; code, published here: &lt;a href=&quot;https://gist.github.com/coekie/a27cc406fc9f3dc7a70d&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gist.github.com/coekie/a27cc406fc9f3dc7a70d&lt;/a&gt;&lt;br/&gt;
I am not THAT Java expert, so I just assume, that any application that allows deserialization from untrusted input, can be DoS&apos;ed - regardless what libraries are included in the classpath.&lt;br/&gt;
Just creation of code execution needs more investigation and creativity and the need to find suitable gadgets...&lt;/p&gt;</comment>
                            <comment id="15014694" author="tn" created="Thu, 19 Nov 2015 23:09:43 +0000"  >&lt;p&gt;In the collections4 branch, the MultiValuedMap implementations do not use the InstantiateFactory anymore.&lt;br/&gt;
Committed in r1715302. This required a huge refactoring effort, but should definitely be safer as no reflection is used anymore.&lt;/p&gt;</comment>
                            <comment id="15019162" author="yoderme" created="Sat, 21 Nov 2015 00:19:44 +0000"  >&lt;p&gt;&quot;No reflection is used anymore&quot; sounds like a really good thing. Might I ask when you expect a release of collecions4 to be out?  Thanks!&lt;/p&gt;</comment>
                            <comment id="15020267" author="tn" created="Sat, 21 Nov 2015 06:16:27 +0000"  >&lt;p&gt;in the next days hopefully.&lt;/p&gt;</comment>
                            <comment id="15020368" author="tn" created="Sat, 21 Nov 2015 10:02:58 +0000"  >&lt;p&gt;Closing this issue as it is fixed in both branches.&lt;/p&gt;</comment>
                            <comment id="15024543" author="schudel" created="Tue, 24 Nov 2015 13:49:16 +0000"  >&lt;p&gt;Any info on when commons-collections 4.1 will be released?&lt;/p&gt;</comment>
                            <comment id="15024734" author="tn" created="Tue, 24 Nov 2015 16:07:09 +0000"  >&lt;p&gt;the release has been prepared, currently the vote is ongoing.&lt;/p&gt;</comment>
                            <comment id="15035897" author="mceli" created="Wed, 2 Dec 2015 14:45:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tn&quot; class=&quot;user-hover&quot; rel=&quot;tn&quot;&gt;Thomas Neidhart&lt;/a&gt; Is this issue also present in Apache Commons Collection v3.1? I see that the affected versions listed on the details as 3.0, 4.0.&lt;/p&gt;</comment>
                            <comment id="15035999" author="tn" created="Wed, 2 Dec 2015 15:51:34 +0000"  >&lt;p&gt;All 3.X releases and the 4.0 release are affected.&lt;/p&gt;

&lt;p&gt;For the 3.X branch we have released 3.2.2 to which all users of the 3.X branch are encouraged to upgrade.&lt;br/&gt;
For the 4.X branch we have released 4.1 (same as above applies).&lt;/p&gt;</comment>
                            <comment id="15036016" author="mceli" created="Wed, 2 Dec 2015 15:58:49 +0000"  >&lt;p&gt;Thank you for your prompt response!&lt;/p&gt;</comment>
                            <comment id="15046431" author="sunnykumar" created="Tue, 8 Dec 2015 06:07:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tn&quot; class=&quot;user-hover&quot; rel=&quot;tn&quot;&gt;Thomas Neidhart&lt;/a&gt; Is commons-collections 2.x library affected by this vulnerability ?. I can see there is no functions package inside the 2.x jar.&lt;/p&gt;</comment>
                            <comment id="15046545" author="tn" created="Tue, 8 Dec 2015 07:58:35 +0000"  >&lt;p&gt;The collections 2.x branch is not affected.&lt;/p&gt;

&lt;p&gt;@all the issue tracker is no discussion forum, please use the user/dev mailinglist for questions. Furthermore this issue is closed, I will not answer anything here anymore.&lt;/p&gt;</comment>
                            <comment id="15046623" author="joehni" created="Tue, 8 Dec 2015 09:14:01 +0000"  >&lt;p&gt;THIS IS NOT A HELP FORUM! If you have questions, go ask on the user&apos;s list!&lt;/p&gt;

&lt;p&gt;(Note, this was a reply to a comment that has been deleted afterwards by its original author).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12921576">COLLECTIONS-583</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12912914">IO-487</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12914897">KARAF-4135</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12913898">HADOOP-12579</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12916111">MYFACES-4020</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12917000">VELTOOLS-169</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12771520" name="COLLECTIONS-580.patch" size="3177" author="jochen@apache.org" created="Tue, 10 Nov 2015 09:33:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 8 Nov 2015 16:55:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o3kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-579] PassiveExpiringMap doesn&apos;t work when the key is a byte array</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-579</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When you put a (key,value) pair in a PassiveExpiringMap and the key is byte[] you can&apos;t retrieve it.&lt;/p&gt;

&lt;p&gt;Code to reproduce the problem:&lt;/p&gt;

&lt;p&gt;byte[] key = &lt;/p&gt;
{0,0,0,1};&lt;br/&gt;
PassiveExpiringMap&amp;lt;byte[],byte[]&amp;gt; map = new PassiveExpiringMap&amp;lt;byte[],byte[]&amp;gt; ();&lt;br/&gt;
map.put(key,key);&lt;br/&gt;
&lt;br/&gt;
byte[] queryKey = {0,0,0,1}
&lt;p&gt;;&lt;br/&gt;
//this should be true&lt;br/&gt;
map.containsKey(queryKey) == false&lt;/p&gt;
</description>
                <environment>&lt;p&gt;GNU/Linux Ubuntu 15.10 64 bits, OpenJDK 1.8.0_65&lt;/p&gt;</environment>
        <key id="12910338">COLLECTIONS-579</key>
            <summary>PassiveExpiringMap doesn&apos;t work when the key is a byte array</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rabit">Roger R Andrews</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Nov 2015 12:48:41 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:17 +0000</updated>
                            <resolved>Wed, 4 Nov 2015 13:19:47 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14989515" author="tn" created="Wed, 4 Nov 2015 13:19:47 +0000"  >&lt;p&gt;A plain array can not be used as-is in collection-like classes.&lt;/p&gt;

&lt;p&gt;The reason for this is that an Array will use the default hashCode implementation from Object which means its hashcode depends on its reference. You can test the same example and replace the PassiveExpiringMap with a normal HashMap and you will get the same behavior just because the hashCode for key and queryKey will be different.&lt;/p&gt;

&lt;p&gt;In order to use arrays in a Map you will need a wrapper that properly implements hashCode and equals by using e.g. the functions available in the Arrays class.&lt;/p&gt;</comment>
                            <comment id="14991809" author="rabit" created="Thu, 5 Nov 2015 15:26:58 +0000"  >&lt;p&gt;Yes, thank you for pointing this out. I don&apos;t know how it&apos;s never bitten me before. Sorry for the trouble. Here is the code I should have used first:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;ByteArray.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ByteArray {
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hashCode = 0;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; lock = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;();

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ByteArray(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes) {
		 &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bytes = bytes;
 	}

        /**
       * Redefine the backing array
       * @param bytes original array
       */
       &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void set(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] bytes) {
	 &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (lock) {
  	 &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bytes = bytes;
	 hashCode = 0;
       }
	}
	
	/**
	 * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; original backing array
	 */
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] get(){
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; bytes;
	}

	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hashCode() {
   		&lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (lock) {
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hashCode == 0) {
				&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hash = 11;
				hashCode = 29 * hash + Arrays.hashCode(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bytes);
			}
		}
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; hashCode;
	}

	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; equals(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj) {
		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (obj == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
			&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
		}
		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getClass() != obj.getClass()) {
			&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
		}
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ByteArray other = (ByteArray) obj;
		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!Arrays.equals(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bytes, other.bytes)) {
			&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
		}
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 4 Nov 2015 13:19:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nxsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-577] PatriciaTrie bugs when only a few bits change</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-577</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I have a bug report for you, for the class AbstractPatriciaTrie.  &lt;br/&gt;
It has to do with how you handle bits when they are very close to each other.  &lt;br/&gt;
For example, some of your methods seem to think that if the only difference between a prefix and a longer string, is a single additional bit, then they are actually the same data.  Or if the only difference is some number of zero bits, then it also thinks they are the same data.  &lt;br/&gt;
There are also MANY situations where the prefixMap does not return all the strings that start with the prefix.&lt;/p&gt;

&lt;p&gt;Can you also make AbstractPatriciaTrie public, and your other package level methods into protected level, that way I don&apos;t have to copy the entire class and subclasse&apos;s code out into another class just to extend it?&lt;/p&gt;

&lt;p&gt;thank you,&lt;br/&gt;
Chris Duncan (github user: VEQRYN)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12896510">COLLECTIONS-577</key>
            <summary>PatriciaTrie bugs when only a few bits change</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="veqryn">Chris Duncan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Sep 2015 22:27:53 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:15 +0000</updated>
                            <resolved>Mon, 28 Sep 2015 09:45:19 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14908803" author="adrianc@hlmksw.com" created="Fri, 25 Sep 2015 22:47:30 +0000"  >&lt;p&gt;Please don&apos;t put pages of text in the issue description. It uses a lot of bandwith and makes reading email notifications difficult. The description should contain a brief description of the problem, and code examples should go in the comments.&lt;/p&gt;</comment>
                            <comment id="14908807" author="veqryn" created="Fri, 25 Sep 2015 22:51:48 +0000"  >&lt;p&gt;Sorry, didn&apos;t know that. Should I move the code to comments now, or would that be worse since it would just make a new email?&lt;/p&gt;</comment>
                            <comment id="14908813" author="adrianc@hlmksw.com" created="Fri, 25 Sep 2015 22:53:34 +0000"  >&lt;p&gt;That would be helpful, thanks. I tried doing that myself, but I don&apos;t have permission to edit the description.&lt;/p&gt;</comment>
                            <comment id="14908823" author="veqryn" created="Fri, 25 Sep 2015 22:56:46 +0000"  >&lt;p&gt;Take the following code for example, which shows the bugs happening in a very simple context.&lt;br/&gt;
I create two strings.  The first string is always a prefix of the second string.  Here are the characters I am using:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; u0000 = &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.toChars(0)[0]; &lt;span class=&quot;code-comment&quot;&gt;// U+0000 (0000000000000000)
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; u0001 = &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.toChars(1)[0]; &lt;span class=&quot;code-comment&quot;&gt;// U+0001 (0000000000000001)
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; u8000 = &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.toChars(32768)[0]; &lt;span class=&quot;code-comment&quot;&gt;// U+8000 (1000000000000000)
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; uffff = &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.toChars(65535)[0]; &lt;span class=&quot;code-comment&quot;&gt;// U+FFFF (1111111111111111)
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; char_b = &lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// 1100010
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; char_c = &lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// 1100011
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PatriciaTrie&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; trie = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PatriciaTrie&amp;lt;&amp;gt;();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And here is a quick example of the trie working correctly, showing how it should work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefixString = &quot;&quot; + char_b;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; longerString = prefixString + char_c;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie.prefixMap(prefixString)); &lt;span class=&quot;code-comment&quot;&gt;// {b=prefixString, bc=longerString} // correct!&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the first example, I show that a character who&apos;s bits are all zeros is always mishandled:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefixString = &quot;&quot; + char_b;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; longerString = prefixString + u0000;

    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(prefixString);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(prefixString.length()); &lt;span class=&quot;code-comment&quot;&gt;// 1
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(longerString);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(longerString.length()); &lt;span class=&quot;code-comment&quot;&gt;// 2
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(longerString.startsWith(prefixString)); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/span&gt;
    trie.put(prefixString, &lt;span class=&quot;code-quote&quot;&gt;&quot;prefixString&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie); &lt;span class=&quot;code-comment&quot;&gt;// prefixString is in
&lt;/span&gt;
    trie.put(longerString, &lt;span class=&quot;code-quote&quot;&gt;&quot;longerString&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie); &lt;span class=&quot;code-comment&quot;&gt;// only longerString shown... prefixString has disappeared
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie.prefixMap(prefixString).size()); &lt;span class=&quot;code-comment&quot;&gt;// prints 1, but should be 2
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie.prefixMap(prefixString)); &lt;span class=&quot;code-comment&quot;&gt;// {b =longerString} // prefixString should be here, but isn&apos;t
&lt;/span&gt;
    trie.put(prefixString, &lt;span class=&quot;code-quote&quot;&gt;&quot;prefixString&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie); &lt;span class=&quot;code-comment&quot;&gt;// prefixString is in again, but longerString has now disappeared
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie.prefixMap(prefixString).size()); &lt;span class=&quot;code-comment&quot;&gt;// prints 1, but should be 2
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie.prefixMap(prefixString)); &lt;span class=&quot;code-comment&quot;&gt;// {b=prefixString} // longerString should be here, but isn&apos;t&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Next, I show that if the longer string is only 1 bit longer (ignoring zeros) than the prefix string, then the PatriciaTree fails to include it in the prefix map.&lt;br/&gt;
Here the string would look like: 0000000001100011 1000000000000000&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefixString = &quot;&quot; + char_c;  &lt;span class=&quot;code-comment&quot;&gt;// you can use any character &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the prefix, same results
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; longerString = prefixString + u8000;

    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(prefixString);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(prefixString.length()); &lt;span class=&quot;code-comment&quot;&gt;// 1
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(longerString);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(longerString.length()); &lt;span class=&quot;code-comment&quot;&gt;// 2
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(longerString.startsWith(prefixString)); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/span&gt;
    trie.put(prefixString, &lt;span class=&quot;code-quote&quot;&gt;&quot;prefixString&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie); &lt;span class=&quot;code-comment&quot;&gt;// prefixString is in
&lt;/span&gt;
    trie.put(longerString, &lt;span class=&quot;code-quote&quot;&gt;&quot;longerString&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie); &lt;span class=&quot;code-comment&quot;&gt;// both are in
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie.prefixMap(prefixString).size()); &lt;span class=&quot;code-comment&quot;&gt;// prints 1, but should be 2
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie.prefixMap(prefixString)); &lt;span class=&quot;code-comment&quot;&gt;// {c=prefixString} // longerString should be here, but isn&apos;t&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And again, except flipping it so that the prefix ends with a 1, and the longer string starts with 1&apos;s:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefixString = &quot;&quot; + u0003;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; longerString = prefixString + u8000; &lt;span class=&quot;code-comment&quot;&gt;// can also use uffff here, same result
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(prefixString);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(prefixString.length()); &lt;span class=&quot;code-comment&quot;&gt;// 1
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(longerString);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(longerString.length()); &lt;span class=&quot;code-comment&quot;&gt;// 2
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(longerString.startsWith(prefixString)); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/span&gt;
    trie.put(prefixString, &lt;span class=&quot;code-quote&quot;&gt;&quot;prefixString&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie); &lt;span class=&quot;code-comment&quot;&gt;// prefixString is in
&lt;/span&gt;
    trie.put(longerString, &lt;span class=&quot;code-quote&quot;&gt;&quot;longerString&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie); &lt;span class=&quot;code-comment&quot;&gt;// both are in
&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie.prefixMap(prefixString).size()); &lt;span class=&quot;code-comment&quot;&gt;// prints 1, but should be 2
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(trie.prefixMap(prefixString)); &lt;span class=&quot;code-comment&quot;&gt;// {c=prefixString} // longerString should be here, but isn&apos;t&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The class is honestly pretty complex and I wasn&apos;t able to completely debug why this is behaving badly, but I believe it is because of how you are handling the &quot;bitIndex&quot; and &quot;bitLength&quot;.&lt;br/&gt;
For example, in the method AbstractPatriciaTrie .subtree(), my comments in bold (this definitely isn&apos;t the only place with weird handling of bitIndex and lengthInBits):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    TrieEntry&amp;lt;K, V&amp;gt; subtree(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; K prefix, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; offsetInBits, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; lengthInBits) {
        TrieEntry&amp;lt;K, V&amp;gt; current = root.left;
        TrieEntry&amp;lt;K, V&amp;gt; path = root;
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) {
&lt;span class=&quot;code-comment&quot;&gt;// If our bit index has only increased by 1, then our bitIndex will never get to be greater than lengthInBits, we could still start with the prefix, yet we have no way to &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt; out of here with current being set to the longer string.
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (current.bitIndex &amp;lt;= path.bitIndex || lengthInBits &amp;lt; current.bitIndex) {
                &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
            }
            path = current;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isBitSet(prefix, offsetInBits + current.bitIndex, offsetInBits + lengthInBits)) {
                current = current.left;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                current = current.right;
            }
        }
      ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14909196" author="tn" created="Sat, 26 Sep 2015 10:56:23 +0000"  >&lt;p&gt;I just quickly tested your code snippets, but this problem should already be fixed in trunk.&lt;/p&gt;

&lt;p&gt;The problems with truncated output is most likely related to adding u0000 to the string which is a native string terminator in c.&lt;/p&gt;</comment>
                            <comment id="14933091" author="tn" created="Mon, 28 Sep 2015 09:45:19 +0000"  >&lt;p&gt;In r1705637, I have added additional testcases for a Trie.&lt;/p&gt;

&lt;p&gt;The problem has already been fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-525&quot; title=&quot;PatriciaTrie&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-525&quot;&gt;&lt;del&gt;COLLECTIONS-525&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thanks for the report and tests!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Sep 2015 22:47:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ll0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-576] MultiKey subclassing has deserialization problem since COLLECTIONS-266: either declare protected readResolve() or MultiKey must be final</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-576</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;MultiKey from collections 4 provides a transient hashCode and a &lt;b&gt;private&lt;/b&gt; readResolve to resolve &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-266&quot; title=&quot;Issue with MultiKey when serialized/deserialized via RMI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-266&quot;&gt;&lt;del&gt;COLLECTIONS-266&lt;/del&gt;&lt;/a&gt;: Issue with MultiKey when serialized/deserialized via RMI.&lt;/p&gt;

&lt;p&gt;Unfortunately the solution does not work in case of &lt;b&gt;subclassing&lt;/b&gt;: readResolve in MultiKey should be declared &lt;b&gt;protected&lt;/b&gt; readResolve() to be called during deserialization of the subclass. Otherwise MultiKey must be final to avoid such subclassing.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Testcase&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;MultiKeySerializationTest.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; de.ivu.test.common.collections4;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.junit.Assert.assertEquals;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.ByteArrayInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.ByteArrayOutputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.ObjectInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.ObjectOutputStream;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.collections4.keyvalue.MultiKey;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MultiKeySerializationTest {

    @Test
    @SuppressWarnings(&lt;span class=&quot;code-quote&quot;&gt;&quot;unchecked&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testReadResolveEqualHashCode()
            &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, ClassNotFoundException {
        &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MultiKey2&amp;lt;A, B&amp;gt;
                &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; MultiKey {

            &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; serialVersionUID = 1928896152249821416L;

            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; MultiKey2(A key1, B key2) {
                &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(key1, key2);
            }

            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; A getFirst() {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (A) getKey(0);
            }

            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; B getSecond() {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (B) getKey(1);
            }
            
            &lt;span class=&quot;code-comment&quot;&gt;// FIXME: MultiKey should either declare &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; readResolve() or must be &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt;.
&lt;/span&gt;        }
        MultiKey2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; one = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MultiKey2&amp;lt;&amp;gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;bla&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;blub&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(one.hashCode());
        ByteArrayOutputStream byteOut = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
        ObjectOutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectOutputStream(byteOut);
        out.writeObject(one);
        out.close();
        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] serialized = byteOut.toByteArray();
        ByteArrayInputStream byteIn = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(serialized);
        ObjectInputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectInputStream(byteIn);
        MultiKey2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; two = (MultiKey2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;) in.readObject();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(two.hashCode());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;hashCode must be equal - please check &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; readResolve in MultiKey*&quot;&lt;/span&gt;, one.hashCode(),
            two.hashCode());
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Fix:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;MultiKey.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@@ -274,7 +274,7 @@
      * only stable &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the same process).
      * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the instance with recalculated hash code
      */
-    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; readResolve() {
+    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; readResolve() {
         calculateHashCode(keys);
         &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12861500">COLLECTIONS-576</key>
            <summary>MultiKey subclassing has deserialization problem since COLLECTIONS-266: either declare protected readResolve() or MultiKey must be final</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stephanroch">Stephan Roch</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Sep 2015 08:44:11 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:13 +0000</updated>
                            <resolved>Mon, 28 Sep 2015 08:54:20 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>KeyValue</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14910198" author="tn" created="Mon, 28 Sep 2015 08:54:20 +0000"  >&lt;p&gt;Fixed in r1705620.&lt;/p&gt;

&lt;p&gt;Thanks for the report and testcase.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12378004">COLLECTIONS-266</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 28 Sep 2015 08:54:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jqh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-570] All decorators shall throw a NullPointerException if the decorated argument is null</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-570</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;To be consistent, the constructor shall throw a NullPointerException instead of a IllegalArgumentException if the argument is null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12839496">COLLECTIONS-570</key>
            <summary>All decorators shall throw a NullPointerException if the decorated argument is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jun 2015 09:50:26 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:10 +0000</updated>
                            <resolved>Mon, 22 Jun 2015 13:02:48 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="14595883" author="tn" created="Mon, 22 Jun 2015 13:02:48 +0000"  >&lt;p&gt;Fixed in r1686855.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gbtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-566] IteratorUtils.collatedIterator do not use natural ordering if no comparator was provided</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-566</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In case a null comparator was provided natural ordering should be used, as stated in the javadoc.&lt;/p&gt;

&lt;p&gt;In fact an exception is thrown the first time the returned iterator is used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12835517">COLLECTIONS-566</key>
            <summary>IteratorUtils.collatedIterator do not use natural ordering if no comparator was provided</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jun 2015 20:19:09 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:18 +0000</updated>
                            <resolved>Thu, 4 Jun 2015 20:36:34 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="14573527" author="tn" created="Thu, 4 Jun 2015 20:36:34 +0000"  >&lt;p&gt;Fixed in r1683631.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fnj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-559] Objects which are not of type V can be placed in a MultiValueMap&lt;K,V&gt;.</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-559</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I declared a MultiValueMap as this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MultiValueMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, Path&amp;gt; duplicates = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MultiValueMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, Path&amp;gt;();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Elsewhere in code I doing (by accident) something in this direction&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;duplicates.put(number, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LinkedList&amp;lt;Path&amp;gt;());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exceptions were being thrown when values returned from the list could not be assigned to variables of type Path.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.commons.collections4.map.MultiValueMap.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; put(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; K key, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value) {
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I propose that Object in the above decleration is changed to T.&lt;/p&gt;</description>
                <environment>&lt;p&gt;java version &quot;1.8.0_25&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_25-b17)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)&lt;br/&gt;
OS X 10.10&lt;/p&gt;</environment>
        <key id="12787445">COLLECTIONS-559</key>
            <summary>Objects which are not of type V can be placed in a MultiValueMap&lt;K,V&gt;.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="peturingi">P&#233;tur Ingi Egilsson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Apr 2015 19:26:34 +0000</created>
                <updated>Wed, 1 Apr 2015 19:41:28 +0000</updated>
                            <resolved>Wed, 1 Apr 2015 19:41:28 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>KeyValue</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="600">10m</timeoriginalestimate>
                            <timeestimate seconds="600">10m</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27nsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-558] ListOrderedSet#remove(int) should return E instead of Object</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-558</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Since &lt;tt&gt;List#remove(int)&lt;/tt&gt; returns &lt;tt&gt;E&lt;/tt&gt; the implementation in &lt;tt&gt;ListOrderedSet&lt;/tt&gt; should also return &lt;tt&gt;E&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Minimal example that fails to compile:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ListOrderedSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; los = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;();
los.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;);
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s = los.remove(0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12785536">COLLECTIONS-558</key>
            <summary>ListOrderedSet#remove(int) should return E instead of Object</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="frabe">Felix Rabe</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Mar 2015 14:46:41 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:16 +0000</updated>
                            <resolved>Wed, 25 Mar 2015 16:03:04 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Set</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14380119" author="tn" created="Wed, 25 Mar 2015 16:03:04 +0000"  >&lt;p&gt;Fixed in r1669140.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                            <comment id="14380835" author="frabe" created="Wed, 25 Mar 2015 21:40:16 +0000"  >&lt;p&gt;Well, thank you for your work and thanks for the Apache Commons Collections &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Mar 2015 16:03:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27c8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-555] Undefined NullPointerException in TreeBag.java</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-555</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In add(final E object) method of TreeBag.java, the parameter object is not null-checked in throw IlligalArgumentException statement. Thus, it crashes with an inappropriate type of exceptions when the parameter, object is null. object can be null from the argument, transform(object) in TransformedCollection.add(final E object).&lt;br/&gt;
I think object ==null should be added in the predicate of the throw IlligalArgumentException statement like below.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; add(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; E object) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;((object==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) || (comparator() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !(object &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Comparable))) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Objects of type &quot;&lt;/span&gt; + object.getClass() + &lt;span class=&quot;code-quote&quot;&gt;&quot; cannot be added to &quot;&lt;/span&gt; +
                                               &lt;span class=&quot;code-quote&quot;&gt;&quot;a naturally ordered TreeBag as it does not implement Comparable&quot;&lt;/span&gt;);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.add(object);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12775413">COLLECTIONS-555</key>
            <summary>Undefined NullPointerException in TreeBag.java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mjkim0324">M Kim</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2015 17:03:59 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:17 +0000</updated>
                            <resolved>Tue, 17 Feb 2015 22:03:17 +0000</resolved>
                                    <version>4.1</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Bag</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14324977" author="tn" created="Tue, 17 Feb 2015 22:03:17 +0000"  >&lt;p&gt;Updated javadoc in r1660515.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Feb 2015 22:03:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25oqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-554] NullPointerException in CollectionUtils.partition</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-554</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;NullPointerException (NPE) is not suitably handled in CollectionUtils.partition. With a nullFactory, partitions.get(numberOfPredicates) can be null at line partitions.get(numberOfPredicates).add(element);.&lt;/p&gt;

&lt;p&gt;Stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;test(Test)java.lang.NullPointerException
        at org.apache.commons.collections4.CollectionUtils.partition(CollectionUtils.java:1187)
        at Test.test(Test.java:18)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test case:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test() {
  Collection input = CollectionUtils.permutations((java.util.Collection)&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CircularFifoQueue(10));
  Factory factory = FactoryUtils.nullFactory();
  NullIsFalsePredicate p = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NullIsFalsePredicate(NullPredicate.nullPredicate());
  Predicate[] predicates = p.getPredicates();
  CollectionUtils.&amp;lt;java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;,java.util.Collection&amp;gt;partition((java.lang.Iterable)input, factory, predicates);
}


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12775406">COLLECTIONS-554</key>
            <summary>NullPointerException in CollectionUtils.partition</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mjkim0324">M Kim</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2015 16:33:51 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:12 +0000</updated>
                            <resolved>Tue, 7 Apr 2015 12:41:10 +0000</resolved>
                                    <version>4.1</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14323142" author="tn" created="Mon, 16 Feb 2015 18:56:58 +0000"  >&lt;p&gt;It is mandatory that the provided factory create non-null collections, anything else is not meaningful.&lt;/p&gt;

&lt;p&gt;Would do you suggest shall happen in this case other than a NullPointerException?&lt;/p&gt;</comment>
                            <comment id="14324251" author="mjkim0324" created="Tue, 17 Feb 2015 14:42:05 +0000"  >&lt;p&gt;Yes, when I call &lt;br/&gt;
CollectionUtils.&amp;lt;java.util.Collection&amp;gt;partition((java.lang.Iterable)input, predicates); without a factory argument,&lt;br/&gt;
I get a ClassCastException: org.apache.commons.collections4.multimap.MultiValuedHashMap cannot be cast to java.util.Collection with the same arguments.&lt;/p&gt;</comment>
                            <comment id="14483107" author="tn" created="Tue, 7 Apr 2015 12:41:10 +0000"  >&lt;p&gt;Providing a factory that returns null objects does not make sense, and throwing a NPE in this case is reasonable imho.&lt;/p&gt;

&lt;p&gt;The second comment: a MultiValuedHashMap is &lt;b&gt;not&lt;/b&gt; a java.util.Collection, thus can not be used for the partition method.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Feb 2015 18:56:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25opb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-553] TransformedMultiValuedMap.equals() fails when comparing the value with itself</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-553</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;TransformedMultiValuedMap.equals() does not return true when comparing a value of a Collection key with itself. Is it allowed to put Collection as a key in TransformedMultiValuedMap at all? If not, I think it should be specified in the document. Or, equals() should be fixed accordingly. &lt;/p&gt;

&lt;p&gt;Reproduce step&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Test.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test()
{
  TransformedMultiValuedMap map = TransformedMultiValuedMap.transformingMap((MultiValuedMap)&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MultiValuedHashMap(),TransformerUtils.stringValueTransformer(),  TransformerUtils.stringValueTransformer());
  
  MultiValuedHashMap helperMap = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MultiValuedHashMap();
  helperMap.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;KEY&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Value&quot;&lt;/span&gt;);
  Collection key = helperMap.keySet();
  map.put(key, &lt;span class=&quot;code-quote&quot;&gt;&quot;Hi&quot;&lt;/span&gt;);
  Collection value = map.get(key);
  assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Contract failed: value.equals(value)&quot;&lt;/span&gt;, value.equals(value));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12775398">COLLECTIONS-553</key>
            <summary>TransformedMultiValuedMap.equals() fails when comparing the value with itself</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mjkim0324">M Kim</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2015 16:09:39 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:17 +0000</updated>
                            <resolved>Tue, 7 Apr 2015 11:41:46 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14483055" author="tn" created="Tue, 7 Apr 2015 11:41:46 +0000"  >&lt;p&gt;Problem solved after fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-543&quot; title=&quot;AbstractCollectionDecorator should not delegate equals and hashcode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-543&quot;&gt;&lt;del&gt;COLLECTIONS-543&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12765478">COLLECTIONS-543</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Apr 2015 11:41:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25onj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-548] Performance issue in CompositeCollection::retainAll</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-548</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;There seems to be a performance problem with the function retainAll of &lt;br/&gt;
CompositeCollection. This is analogous to &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-534&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COLLECTIONS-534&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;The following is the code of the function:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
    /**
     * Retains all the elements in the specified collection in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; composite collection,
     * removing all others.
     * &amp;lt;p&amp;gt;
     * This implementation calls &amp;lt;code&amp;gt;retainAll()&amp;lt;/code&amp;gt; on each collection.
     *
     * @param coll  the collection to remove
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the collection was modified
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; UnsupportedOperationException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; retainAll is unsupported
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; retainAll(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;?&amp;gt; coll) {
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; changed = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;E&amp;gt; item : all) {
            changed |= item.retainAll(coll);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; changed;
    }


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The performance problem occurs when the underlying collections in the current collection have a slow retainAll method. Whenever we&apos;re relying on Collection::retainAll, slow cases tend to occur when the parameter collection has a slow contains method.&lt;/p&gt;

&lt;p&gt;The following test harness shows the performance degradation between &lt;br/&gt;
using a list and using a set as a parameter, across different collection sizes.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void 	compositeCollectionRetainAllTest(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; original) {

	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; N=500000;

	ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; firstArrayList=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();
	ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; secondArrayList=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();

	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0;i&amp;lt;N;++i) {

	    firstArrayList.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(i));
	    secondArrayList.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(N-1-i));
	    
	}
	CompositeCollection col = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompositeCollection(firstArrayList);

	col.retainAll(original ? secondArrayList : (&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;(secondArrayList)));
	

    }


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the following table &quot;Original&quot; corresponds to the time taken by &lt;br/&gt;
the existing implementation of CompositeCollection::retainAll, &quot;Repaired&quot; to the time taken by the function invoked with the parameter converted into a set, and &quot;Speed-up&quot; to the speed-up obtained after the repair.&lt;/p&gt;

&lt;p&gt;N		Original(s)	Repaired(s)	Speed-up(X)&lt;/p&gt;

&lt;p&gt;10	         1.04		1.04		        1.00&lt;br/&gt;
100	         1.04		1.05		        0.99&lt;br/&gt;
1000	1.06		        1.06		        1.00&lt;br/&gt;
10000	1.12		        1.10		        1.01&lt;br/&gt;
100000	9.34		        1.15		        8.12&lt;br/&gt;
500000	&amp;gt; 300		1.29		        &amp;gt; 232.55&lt;/p&gt;


&lt;p&gt;If it&apos;s unacceptable to convert the parameter into a set before calling &lt;br/&gt;
retainsAll, a solution would be to include a warning to the user in the documentation that the parameter should have a fast contains method when possible.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 14.04&lt;/p&gt;</environment>
        <key id="12769127">COLLECTIONS-548</key>
            <summary>Performance issue in CompositeCollection::retainAll</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="oswaldo_o">Oswaldo Olivo</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Wed, 21 Jan 2015 21:50:04 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:13 +0000</updated>
                            <resolved>Sat, 24 Jan 2015 12:59:07 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14286597" author="oswaldo_o" created="Thu, 22 Jan 2015 00:04:30 +0000"  >&lt;p&gt;Here&apos;s another potential fix by using a more efficient retainAll method in the spirit of CollectionUtils::containsAll&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;------------------------------------------------------------

    &lt;span class=&quot;code-comment&quot;&gt;// Eliminates from coll1 all elements that are not in coll2.
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// It runs in O(m+n) size, requiring additional O(m) space.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; efficientRetainAll(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;?&amp;gt; coll1,&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;?&amp;gt; coll2) {

	&lt;span class=&quot;code-comment&quot;&gt;// If coll2 is empty there are no elements to retain.
&lt;/span&gt;	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(coll2.isEmpty()) {
	    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; coll1.removeAll(coll1);
	}

	&lt;span class=&quot;code-comment&quot;&gt;// Simple &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; when we&apos;re supposed to retain all elements
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// in the first collection.
&lt;/span&gt;	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(coll1==coll2)
	    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
	
	&lt;span class=&quot;code-comment&quot;&gt;// it1 iterates over coll1 and it2 iterares over coll2,
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// and seen contains all the elements before it2, allowing 
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// us to never revisit previous elements.
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// The algorithm iterates through it1, checks to see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we&apos;ve 
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// already seen the current element of it1 via a Hashset 
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// efficient check, or traverses elements of it2 until we find 
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// it or it2 ends. At each iteration over it2 we add the
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// elements to seen to avoid revisiting items.
&lt;/span&gt;	Iterator&amp;lt;?&amp;gt; it1 = coll1.iterator();
	Iterator&amp;lt;?&amp;gt; it2 = coll2.iterator();
	HashSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; seen = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;();
	&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; changed=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
	&lt;span class=&quot;code-comment&quot;&gt;// Traverse all the elements in coll1.
&lt;/span&gt;	&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(it1.hasNext()) {
	    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o=it1.next();
	    &lt;span class=&quot;code-comment&quot;&gt;// If we&apos;ve seen &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; element in coll2, keep it.
&lt;/span&gt;	    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(seen.contains(o))
		&lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
	    &lt;span class=&quot;code-comment&quot;&gt;// Otherwise, check &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; its containment in coll2, &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;
&lt;/span&gt;	    &lt;span class=&quot;code-comment&quot;&gt;// adding the elements to seen.
&lt;/span&gt;	    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; contained=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
	    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(it2.hasNext()) {
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o2=it2.next();
		seen.add(o2);
		&lt;span class=&quot;code-comment&quot;&gt;// Found the element in coll2.
&lt;/span&gt;		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(o2.equals(o)) {
		    contained=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
		    &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
		}
	    }
	    &lt;span class=&quot;code-comment&quot;&gt;// If the element was not found in coll2, remove it from it1.
&lt;/span&gt;	    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!contained) {
		changed=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
		it1.remove();
	    }

	}
	

	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; changed;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;----------------------&lt;/p&gt;


&lt;p&gt;And the harness:&lt;/p&gt;

&lt;p&gt;-----------------------&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void 	compositeCollectionRetainAllTest(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; original) {

	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; N=500000;

	ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; firstArrayList=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();
	ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; secondArrayList=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();

	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0;i&amp;lt;N;++i) {

	    firstArrayList.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(i));
	    secondArrayList.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(N-1-i));
	    
	}
	CompositeCollection col = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompositeCollection(firstArrayList);

	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(original)
	    col.retainAll(secondArrayList);
	&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; 
	    efficientRetainAll(col,secondArrayList);



    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;------------------------------&lt;/p&gt;

&lt;p&gt;The results are:&lt;/p&gt;

&lt;p&gt;N		Original(s)	Repaired(s)	Speed-up(X)&lt;/p&gt;

&lt;p&gt;10	         1.04		1.05		        0.99&lt;br/&gt;
100	         1.04		1.05		        0.99&lt;br/&gt;
1000		 1.06		1.06		        1.00&lt;br/&gt;
10000		 1.12		1.10		        1.01&lt;br/&gt;
100000		 9.34		1.15		        8.12&lt;br/&gt;
500000		 &amp;gt; 300		1.34		        &amp;gt; 223.88&lt;/p&gt;</comment>
                            <comment id="14290586" author="tn" created="Sat, 24 Jan 2015 12:59:07 +0000"  >&lt;p&gt;Close as won&apos;t fix, similar to other issues.&lt;/p&gt;

&lt;p&gt;The implementation of CompositeCollection delegates the call of retainAll to the composited collections. Thus its performance is dependent on the implementation of the relevant collections.&lt;/p&gt;

&lt;p&gt;Instead of pre-optimizing methods, users should use appropriate collection types for their need, but I am in favor of adding a dedicated CollectionUtils.retainAll method that provides a linear-time implementation.&lt;/p&gt;</comment>
                            <comment id="14290676" author="oswaldo_o" created="Sat, 24 Jan 2015 15:38:15 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;It&apos;s understandable that changing the code might be undesirable.&lt;/p&gt;

&lt;p&gt;But shouldn&apos;t there be a warning to the user in the documentation about the pathological cases in the invoked function (contains in other cases, retainAll in this one) ? &lt;/p&gt;

&lt;p&gt;In the case of AbstracLinkedList::retainAll, you would need to peek at the contains method implementation to see the performance impact, but in CompositeCollection::retainAll you would probably need to look at the implementation of retainAll of the underlying collections, and then the contains of these collections. &lt;br/&gt;
More layers of function invocations w.r.t. the problematic method are more likely to obscure the performance bottleneck, making a stronger case to document the  higher level functions.&lt;/p&gt;</comment>
                            <comment id="14290679" author="tn" created="Sat, 24 Jan 2015 15:48:02 +0000"  >&lt;p&gt;The documentation clearly states what the method is doing:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     * This implementation calls &amp;lt;code&amp;gt;retainAll()&amp;lt;/code&amp;gt; on each collection.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The retainAll() method of the Collection interface is also well-known and by default (see AbstractCollection) calls contains() on the provided collection. Thus users should be aware of this by now (2015). If a user is really calling retainAll() with a huge list, it&apos;s probably better to put the elements in a set and provide this as an argument to retainAll().&lt;/p&gt;

&lt;p&gt;My whole point is that there&apos;s no use in providing uber-collection types that have an optimal runtime-complexity in all cases but with the trade-off of additional memory requirements. Users have to chose and use proper collection types for their use case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 24 Jan 2015 12:59:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24n0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-547] Performance issue in SetUtils::isEqualSet</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-547</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;There seems to be a performance problem with the function isEqualSet of &lt;br/&gt;
SetUtils when the first parameter is of a collection type that has a slow containsAll/contains method.&lt;/p&gt;

&lt;p&gt;The following is the code of the function:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Tests two sets &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; equality as per the &amp;lt;code&amp;gt;equals()&amp;lt;/code&amp;gt; contract
     * in {@link java.util.Set#equals(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)}.
     * &amp;lt;p&amp;gt;
     * This method is useful &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; implementing &amp;lt;code&amp;gt;Set&amp;lt;/code&amp;gt; when you cannot
     * extend AbstractSet. The method takes Collection instances to enable other
     * collection types to use the Set implementation algorithm.
     * &amp;lt;p&amp;gt;
     * The relevant text (slightly paraphrased as &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is a &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; method) is:
     * &amp;lt;blockquote&amp;gt;
     * &amp;lt;p&amp;gt;Two sets are considered equal &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; they have
     * the same size, and every member of the first set is contained in
     * the second. This ensures that the &amp;lt;tt&amp;gt;equals&amp;lt;/tt&amp;gt; method works
     * properly across different implementations of the &amp;lt;tt&amp;gt;Set&amp;lt;/tt&amp;gt;
     * &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;.&amp;lt;/p&amp;gt;
     *
     * &amp;lt;p&amp;gt;
     * This implementation first checks &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the two sets are the same object:
     * &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; so it returns &amp;lt;tt&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/tt&amp;gt;.  Then, it checks &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the two sets are
     * identical in size; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not, it returns &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;. If so, it returns
     * &amp;lt;tt&amp;gt;a.containsAll((Collection) b)&amp;lt;/tt&amp;gt;.&amp;lt;/p&amp;gt;
     * &amp;lt;/blockquote&amp;gt;
     *
     * @see java.util.Set
     * @param set1  the first set, may be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
     * @param set2  the second set, may be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; whether the sets are equal by value comparison
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isEqualSet(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;?&amp;gt; set1, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;?&amp;gt; set2) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (set1 == set2) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (set1 == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || set2 == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || set1.size() != set2.size()) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; set1.containsAll(set2);
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is that in the last return statement, the function relies on the &lt;br/&gt;
containsAll method of the class of the set1, which can be any type of collection.&lt;/p&gt;

&lt;p&gt;The following test harness shows the performance degradation between &lt;br/&gt;
using a list and using a set as a first parameter, across different collection sizes.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void 	setUtilsisEqualSetTest(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; original) {

	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; N=500000;
	ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; firstArrayList=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();
	ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; secondArrayList=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();
	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0;i&amp;lt;N;++i) {

	    firstArrayList.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(i));
	    secondArrayList.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;((N-1)-i));
	    
	}

	SetUtils.isEqualSet(original?firstArrayList:(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;(firstArrayList)),secondArrayList);
	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the following table &quot;Original&quot; corresponds to the time taken by &lt;br/&gt;
the existing implementation of SetUtils::isEqualSet, &quot;Repaired&quot; to the time &lt;br/&gt;
taken by the function invoked with the first parameter converted into a &lt;br/&gt;
set, and &quot;Speed-up&quot; to the speed-up obtained after the repair.&lt;/p&gt;


&lt;p&gt;       N	Original(s)	Repaired(s)	Speed-up(X)&lt;/p&gt;

&lt;p&gt;      10	          1.01		    1.02		     0.99&lt;br/&gt;
     100	          1.02		    1.02		     1&lt;br/&gt;
    1000	          1.04		    1.04		     1&lt;br/&gt;
   10000	          1.15		    1.09		     1.05&lt;br/&gt;
  100000	          9.33		    1.11		     8.40&lt;br/&gt;
  500000	        &amp;gt; 300	            1.26		     &amp;gt; 238.09&lt;/p&gt;


&lt;p&gt;One way to deal with this would be to call the CollectionUtils::containsAll method instead of Collection::containsAll, since it has a linear time implementation instead of quadratic, and can handle the types of isEqualSet.&lt;/p&gt;

&lt;p&gt;Another solution would be to include a warning to the user in the documentation that the first parameter should have a fast containment method when possible.&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Ubuntu 14.04&lt;/p&gt;</environment>
        <key id="12769111">COLLECTIONS-547</key>
            <summary>Performance issue in SetUtils::isEqualSet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="oswaldo_o">Oswaldo Olivo</reporter>
                        <labels>
                            <label>perfomance</label>
                    </labels>
                <created>Wed, 21 Jan 2015 21:10:24 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:18 +0000</updated>
                            <resolved>Thu, 22 Jan 2015 09:18:20 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>Set</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14287151" author="tn" created="Thu, 22 Jan 2015 09:18:20 +0000"  >&lt;p&gt;The javadoc of the method clearly states the purpose and function of this method.&lt;/p&gt;

&lt;p&gt;It should only be used when the first parameter is a Set or set-like data structure with a fast contains implementation. In other cases this method should not be used.&lt;/p&gt;

&lt;p&gt;Delegating this method to CollectionUtils.containsAll() is no good as it has an additional memory overhead which is not needed when used properly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Jan 2015 09:18:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24mx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-545] Undocumented performance issue in the removeAll method in CollectionUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-545</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;This bug is analogous to &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-544&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COLLECTIONS-544&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The method removeAll in CollectionUtils is inefficient when the second parameter collection has a slow containment method.&lt;/p&gt;

&lt;p&gt;The following is the current implementation with its documentation:&lt;br/&gt;
============================&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removes the elements in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; from &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;. That is, this&lt;/li&gt;
	&lt;li&gt;method returns a collection containing all the elements in &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;that are not in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;. The cardinality of an element &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in the returned collection is the same as the cardinality of &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; unless &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; contains &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;, in which&lt;/li&gt;
	&lt;li&gt;case the cardinality is zero. This method is useful if you do not wish to modify&lt;/li&gt;
	&lt;li&gt;the collection &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt; and thus cannot call &amp;lt;code&amp;gt;collection.removeAll(remove);&amp;lt;/code&amp;gt;.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@param &amp;lt;E&amp;gt;  the type of object the 
{@link Collection}
&lt;p&gt; contains&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@param collection  the collection from which items are removed (in the returned collection)&lt;/li&gt;
	&lt;li&gt;@param remove  the items to be removed from the returned &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;@return a &amp;lt;code&amp;gt;Collection&amp;lt;/code&amp;gt; containing all the elements of &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; except&lt;/li&gt;
	&lt;li&gt;any elements that also occur in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if either parameter is null&lt;/li&gt;
	&lt;li&gt;@since 4.0 (method existed in 3.2 but was completely broken)&lt;br/&gt;
     */&lt;br/&gt;
    public static &amp;lt;E&amp;gt; Collection&amp;lt;E&amp;gt; removeAll(final Collection&amp;lt;E&amp;gt; collection, final Collection&amp;lt;?&amp;gt; remove) 
{
        return ListUtils.removeAll(collection, remove);
    }&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;=======================================&lt;/p&gt;

&lt;p&gt;We can notice the inefficiency by looking at the removeAll method in ListUtils.&lt;br/&gt;
The removeAll method from ListUtils is implemented and documented as follows:&lt;/p&gt;

&lt;p&gt;=======================================&lt;/p&gt;

&lt;p&gt;     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removes the elements in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; from &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;. That is, this&lt;/li&gt;
	&lt;li&gt;method returns a list containing all the elements in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;that are not in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;. The cardinality of an element &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in the returned collection is the same as the cardinality of &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; unless &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; contains &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;, in which&lt;/li&gt;
	&lt;li&gt;case the cardinality is zero. This method is useful if you do not wish to modify&lt;/li&gt;
	&lt;li&gt;&amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; and thus cannot call &amp;lt;code&amp;gt;collection.removeAll(remove);&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;&lt;/li&gt;
	&lt;li&gt;This implementation iterates over &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;, checking each element in&lt;/li&gt;
	&lt;li&gt;turn to see if it&apos;s contained in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;. If it&apos;s not contained, it&apos;s added&lt;/li&gt;
	&lt;li&gt;to the returned list. As a consequence, it is advised to use a collection type for&lt;/li&gt;
	&lt;li&gt;&amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; that provides a fast (e.g. O(1)) implementation of&lt;/li&gt;
	&lt;li&gt;{@link Collection#contains(Object)}
&lt;p&gt;.&lt;br/&gt;
     *&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@param &amp;lt;E&amp;gt;  the element type&lt;/li&gt;
	&lt;li&gt;@param collection  the collection from which items are removed (in the returned collection)&lt;/li&gt;
	&lt;li&gt;@param remove  the items to be removed from the returned &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;@return a &amp;lt;code&amp;gt;List&amp;lt;/code&amp;gt; containing all the elements of &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt; except&lt;/li&gt;
	&lt;li&gt;any elements that also occur in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if either parameter is null&lt;/li&gt;
	&lt;li&gt;@since 3.2&lt;br/&gt;
     */&lt;br/&gt;
    public static &amp;lt;E&amp;gt; List&amp;lt;E&amp;gt; removeAll(final Collection&amp;lt;E&amp;gt; collection, final Collection&amp;lt;?&amp;gt; remove) {&lt;br/&gt;
        final List&amp;lt;E&amp;gt; list = new ArrayList&amp;lt;E&amp;gt;();&lt;br/&gt;
        for (final E obj : collection) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {            if (!remove.contains(obj)) {
                list.add(obj);
            }        }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;        return list;&lt;br/&gt;
    }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;=======================================&lt;/p&gt;

&lt;p&gt;In the case of ListUtils:removeAll, the inefficiency is properly documented.&lt;/p&gt;

&lt;p&gt;Perhaps the disclaimer about potential inefficiencies depending on the type &lt;br/&gt;
of the parameter collection in ListUtils:removeAll should also be included in CollectionUtils:removeAll.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 14.04&lt;/p&gt;</environment>
        <key id="12766770">COLLECTIONS-545</key>
            <summary>Undocumented performance issue in the removeAll method in CollectionUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="oswaldo_o">Oswaldo Olivo</reporter>
                        <labels>
                            <label>Collections</label>
                            <label>documentaion</label>
                            <label>performance</label>
                    </labels>
                <created>Mon, 12 Jan 2015 06:04:16 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:13 +0000</updated>
                            <resolved>Fri, 23 Jan 2015 09:34:34 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14289018" author="tn" created="Fri, 23 Jan 2015 09:34:34 +0000"  >&lt;p&gt;Fixed in r1654156.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Jan 2015 09:34:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i248xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-544] Undocumented performance issue in the retainAll method in CollectionUtils </title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-544</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The method &lt;tt&gt;retainAll&lt;/tt&gt; in &lt;tt&gt;CollectionUtils&lt;/tt&gt; is inefficient when the parameter collection has a slow containment method.&lt;/p&gt;

&lt;p&gt;The following is the current implementation with its documentation:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; /**
     * Returns a collection containing all the elements in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;
     * that are also in &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt;. The cardinality of an element &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;
     * in the returned collection is the same as the cardinality of &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;
     * in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; unless &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt; does not contain &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;, in which
     * case the cardinality is zero. This method is useful if you do not wish to modify
     * the collection &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt; and thus cannot call &amp;lt;code&amp;gt;c.retainAll(retain);&amp;lt;/code&amp;gt;.
     *
     * @param &amp;lt;C&amp;gt;  the type of object the {@link Collection} contains
     * @param collection  the collection whose contents are the target of the #retailAll operation
     * @param retain  the collection containing the elements to be retained in the returned collection
     * @return a &amp;lt;code&amp;gt;Collection&amp;lt;/code&amp;gt; containing all the elements of &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;
     * that occur at least once in &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt;.
     * @throws NullPointerException if either parameter is null
     * @since 3.2
     */
    public static &amp;lt;C&amp;gt; Collection&amp;lt;C&amp;gt; retainAll(final Collection&amp;lt;C&amp;gt; collection, final Collection&amp;lt;?&amp;gt; retain) {
        return ListUtils.retainAll(collection, retain);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We can notice the inefficiency by looking at the &lt;tt&gt;retainAll&lt;/tt&gt; method in &lt;tt&gt;ListUtils&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;retainAll&lt;/tt&gt; method from &lt;tt&gt;ListUtils&lt;/tt&gt; is implemented and documented as follows:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  /**
     * Returns a List containing all the elements in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;
     * that are also in &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt;. The cardinality of an element &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;
     * in the returned list is the same as the cardinality of &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;
     * in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; unless &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt; does not contain &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;, in which
     * case the cardinality is zero. This method is useful if you do not wish to modify
     * the collection &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt; and thus cannot call &amp;lt;code&amp;gt;collection.retainAll(retain);&amp;lt;/code&amp;gt;.
     * &amp;lt;p&amp;gt;
     * This implementation iterates over &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;, checking each element in
     * turn to see if it&apos;s contained in &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt;. If it&apos;s contained, it&apos;s added
     * to the returned list. As a consequence, it is advised to use a collection type for
     * &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt; that provides a fast (e.g. O(1)) implementation of
     * {@link Collection#contains(Object)}.
     *
     * @param &amp;lt;E&amp;gt;  the element type
     * @param collection  the collection whose contents are the target of the #retailAll operation
     * @param retain  the collection containing the elements to be retained in the returned collection
     * @return a &amp;lt;code&amp;gt;List&amp;lt;/code&amp;gt; containing all the elements of &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt;
     * that occur at least once in &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt;.
     * @throws NullPointerException if either parameter is null
     * @since 3.2
     */
    public static &amp;lt;E&amp;gt; List&amp;lt;E&amp;gt; retainAll(final Collection&amp;lt;E&amp;gt; collection, final Collection&amp;lt;?&amp;gt; retain) {
        final List&amp;lt;E&amp;gt; list = new ArrayList&amp;lt;E&amp;gt;(Math.min(collection.size(), retain.size()));

        for (final E obj : collection) {
            if (retain.contains(obj)) {
                list.add(obj);
            }
        }
        return list;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the case of &lt;tt&gt;ListUtils#retainAll&lt;/tt&gt;, the inefficiency is properly documented.&lt;/p&gt;

&lt;p&gt;Perhaps the disclaimer about potential inefficiencies depending on the type &lt;br/&gt;
of the parameter collection in ListUtils:retainAll should also be included in &lt;tt&gt;CollectionUtils#retainAll&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 14.04&lt;/p&gt;</environment>
        <key id="12766767">COLLECTIONS-544</key>
            <summary>Undocumented performance issue in the retainAll method in CollectionUtils </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="oswaldo_o">Oswaldo Olivo</reporter>
                        <labels>
                            <label>Collections</label>
                            <label>documentaion</label>
                            <label>performance</label>
                    </labels>
                <created>Mon, 12 Jan 2015 05:55:51 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:16 +0000</updated>
                            <resolved>Mon, 12 Jan 2015 14:06:25 +0000</resolved>
                                    <version>4.1</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14273523" author="kinow" created="Mon, 12 Jan 2015 12:02:05 +0000"  >&lt;p&gt;Updated the issue formatting code.&lt;/p&gt;</comment>
                            <comment id="14273615" author="tn" created="Mon, 12 Jan 2015 14:06:25 +0000"  >&lt;p&gt;Documented in r1651098.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Jan 2015 12:02:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i248x3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-543] AbstractCollectionDecorator should not delegate equals and hashcode</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-543</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In order to preserve the symmetry of equals the AbstractCollectionDecorator shall not forward calls to equals and hashcode to the decorated collection.&lt;/p&gt;

&lt;p&gt;The test for equality usually also includes a test for the specific interface, e.g. List, which the collection decorator does not implement.&lt;/p&gt;

&lt;p&gt;The relevant sub-classes like AbstractListDecorator can delegate the calls to safely fulfill the Collections contract.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12765478">COLLECTIONS-543</key>
            <summary>AbstractCollectionDecorator should not delegate equals and hashcode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Jan 2015 22:05:41 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:19 +0000</updated>
                            <resolved>Mon, 12 Jan 2015 15:21:31 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="14273687" author="tn" created="Mon, 12 Jan 2015 15:21:31 +0000"  >&lt;p&gt;Fixed in r1651115.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12775398">COLLECTIONS-553</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12707621">COLLECTIONS-512</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i241uf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-538] ExtendedProperties causes AccessControlException when framework is called from a script</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-538</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;We&apos;re using Velocity 1.7, which depends upon Commons Collections 3.x series&apos; ExtendedProperties class.&lt;/p&gt;

&lt;p&gt;ExtendedProperties has these constructors where it looks up the file separator using the least convenient means possible:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ExtendedProperties() {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fileSeparator = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;file.separator&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;// ...
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For us, this is all being called from untrusted code, so this fails with AccessControlException.&lt;/p&gt;

&lt;p&gt;I think that instead of using the system property here, it is customary to use the File.separator constant.&lt;/p&gt;

&lt;p&gt;If you absolutely &lt;em&gt;must&lt;/em&gt; use System.getProperty() to fetch this value, it should at least be done from a doPrivileged() block.&lt;/p&gt;

&lt;p&gt;Also I had a quick check of Commons Collections 4 to see if this issue had been fixed, but couldn&apos;t immediately see what happened to this class. If it did turn out to have been fixed in v4, maybe Velocity could be encouraged to update to v4, but I haven&apos;t seen any updates from them in 4 years, so it&apos;s probably not a good sign.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Java security manager enabled&lt;/p&gt;</environment>
        <key id="12759317">COLLECTIONS-538</key>
            <summary>ExtendedProperties causes AccessControlException when framework is called from a script</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="trejkaz">Trejkaz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Dec 2014 23:58:01 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:12 +0000</updated>
                            <resolved>Sun, 8 Nov 2015 15:08:07 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.2.2</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14234061" author="tn" created="Thu, 4 Dec 2014 09:33:41 +0000"  >&lt;p&gt;Is it possible for you to do the relevant call to velocity within a privileged block?&lt;/p&gt;

&lt;p&gt;Currently, it is very unlikely that the 3.x branch will see a new release. The respective class (ExtendedProperties) has been removed from collections 4.0 (see the release notes for alternatives).&lt;/p&gt;</comment>
                            <comment id="14246334" author="trejkaz" created="Mon, 15 Dec 2014 05:31:25 +0000"  >&lt;p&gt;We use templates as something the user can customise. Users can therefore pass templates around to other users, and a particularly malicious user might find a way to have the template write to arbitrary files or something.&lt;/p&gt;

&lt;p&gt;Velocity may not be lowering privileges when calling methods on template objects either. I don&apos;t know either way, but I figure it&apos;s better not to trust it unless someone shows that it&apos;s doing things safely.&lt;/p&gt;

&lt;p&gt;If we called Velocity in a privileged block, we might be opening up the final link in that attack vector, so I&apos;m not exactly keen, no.&lt;/p&gt;
</comment>
                            <comment id="14249885" author="tn" created="Wed, 17 Dec 2014 14:22:16 +0000"  >&lt;p&gt;And giving the permission to read system properties to the commons-collections lib is not an option in your case?&lt;/p&gt;

&lt;p&gt;I understand it is annoying, but as I said, it is very unlikely that we will release a new 3.x lib, at least in the near future.&lt;/p&gt;</comment>
                            <comment id="14250738" author="trejkaz" created="Wed, 17 Dec 2014 22:53:10 +0000"  >&lt;p&gt;I think the situation is that the application has permission to read system properties anyway, but it&apos;s evaluating some JavaScript at some point.&lt;/p&gt;

&lt;p&gt;The script being down somewhere in the stack means that the entire stack is treated as unprivileged. I don&apos;t know if there is a way around that... I couldn&apos;t immediately see any APIs around ScriptEngine or ScriptContext which allowed me to set the privileges for the script. The script itself is running is from the same directory as the rest of our code, so it should presumably have had the same privileges as everything else, but for whatever reason, I guess script engines don&apos;t work like that.&lt;/p&gt;

&lt;p&gt;What I might do is fork the project into our local repo and make the change just for our copy.&lt;/p&gt;</comment>
                            <comment id="14259076" author="tn" created="Fri, 26 Dec 2014 13:30:31 +0000"  >&lt;p&gt;Ok, I will then mark it as to be fixed for 3.2.2 in case somebody is really willing to make a new point release for the 3.x branch.&lt;/p&gt;</comment>
                            <comment id="14995661" author="tn" created="Sun, 8 Nov 2015 15:08:07 +0000"  >&lt;p&gt;Fixed in commit r1713233.&lt;/p&gt;

&lt;p&gt;The system property is now accessed via a call to doPrivileged. If the call fails with a SecurityException, File#separator is used instead.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 4 Dec 2014 09:33:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i231d3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-537] PredicateUtils (all|any)Predicate type misbehaviour Array vs. Collection</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-537</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Migrating from collections-generic to collections4 we encountered a type problem with PredicateUtils. When you look at the method anyPredicate(), the signature with array is typed with &quot;Predicate&amp;lt;? super T&amp;gt;&quot; whereas the signature with Collection is typed &quot;? extends Predicate&amp;lt;T&amp;gt;&quot;, so the both methods are not equivalent.&lt;br/&gt;
We think both methods should have the same types, so it would not break compatibility with a lot of legacy code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12755049">COLLECTIONS-537</key>
            <summary>PredicateUtils (all|any)Predicate type misbehaviour Array vs. Collection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fj">Frank Jakop</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Nov 2014 12:47:20 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:17 +0000</updated>
                            <resolved>Tue, 30 Dec 2014 18:25:09 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Functor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14259075" author="tn" created="Fri, 26 Dec 2014 13:29:22 +0000"  >&lt;p&gt;Yes indeed, the correct signature should be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    Predicate&amp;lt;T&amp;gt; anyPredicate(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Predicate&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt; T&amp;gt;&amp;gt; predicates)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This change will require some more changes in other places too for sake of consistency.&lt;br/&gt;
The test case to demonstrate the change:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.ArrayList;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.collections4.Predicate;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.collections4.PredicateUtils;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyTest {


    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;A {
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; val;
        
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; A(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; val) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.val = val;
        }
        
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;;
        }
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;B &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; A {
        
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; B(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; val) {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(val);
        }
        
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;B&quot;&lt;/span&gt;;
        }
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyPredicate &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Predicate&amp;lt;A&amp;gt; {

        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; eval;
        
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; MyPredicate(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; eval) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.eval = eval;
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; evaluate(A object) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; object.val &amp;lt; eval;
        }
        
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        MyPredicate p1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyPredicate(10);
        MyPredicate p2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyPredicate(20);

        Predicate&amp;lt;B&amp;gt; anyPredicate = PredicateUtils.anyPredicate(p1, p2);
        
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(anyPredicate.evaluate(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; B(10)));
        
        List&amp;lt;Predicate&amp;lt;A&amp;gt;&amp;gt; list = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;Predicate&amp;lt;A&amp;gt;&amp;gt;();
        list.add(p1);
        list.add(p2);
        
        Predicate&amp;lt;B&amp;gt; anyPredicate2 = PredicateUtils.anyPredicate(list);
        
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(anyPredicate2.evaluate(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; B(10)));
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14261323" author="tn" created="Tue, 30 Dec 2014 18:25:09 +0000"  >&lt;p&gt;Fixed in r1648561 for the following classes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;AllPredicate&lt;/li&gt;
	&lt;li&gt;AnyPredicate&lt;/li&gt;
	&lt;li&gt;NonePredicate&lt;/li&gt;
	&lt;li&gt;OnePredicate&lt;/li&gt;
	&lt;li&gt;ChainedTransformer&lt;/li&gt;
	&lt;li&gt;ChainedClosure&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 26 Dec 2014 13:29:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22bvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-536] (Code style) map.size() call in MapUtils.putAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-536</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In class org.apache.commons.collections(4).MapUtils there&apos;s a method putAll(final Map&amp;lt;K, V&amp;gt; map, final Object[] array) which starts with &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;map.size();  // force NPE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Actually map.size() is not that harmless call for any map. For example, consider java.util.concurrent.ConcurrentHashMap size() implementation: depending on the circumstances it may take even more time than the rest of the putAll method (at least prior to JDK 8). Things are even worse for ConcurrentSkipListMap: its size() method iterates over all the map elements. Thus I&apos;d suggest to replace this call with more conventional check like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;if(map == null) {
    throw new NullPointerException();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you still want to save bytes, you may use &lt;tt&gt;map.getClass()&lt;/tt&gt;. It&apos;s final, so it will never be overridden to do something strange and it&apos;s even used by JavaC for the same purpose (to trigger NPE). For example, if you compile and disassemble this code:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public class Outer {
    public class Inner {}
    public void test(Outer n) { n.new Inner(); }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You will see a getClass() call which is used to trigger NPE.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Any&lt;/p&gt;</environment>
        <key id="12751294">COLLECTIONS-536</key>
            <summary>(Code style) map.size() call in MapUtils.putAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lany">Tagir Valeev</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Wed, 29 Oct 2014 02:58:01 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:12 +0000</updated>
                            <resolved>Wed, 29 Oct 2014 21:05:23 +0000</resolved>
                                    <version>3.2.1</version>
                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14188992" author="tn" created="Wed, 29 Oct 2014 21:05:23 +0000"  >&lt;p&gt;Fixed in r1635303.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Oct 2014 21:05:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21pc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-534] Performance bug in CollectionBag::retainAll</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-534</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;br/&gt;
There seems to be a performance bug in the method retainAll in the CollectionBag class.&lt;br/&gt;
The problem is that the code is checking containment over the parameter collection, which could be expensive for some types of collections like ArrayLists.&lt;br/&gt;
One solution could be to convert the Collection into a HashSet and check containment in the HashSet.&lt;br/&gt;
 If this is done, then running retainAll on a 1,000,000 collection would take less than 2 seconds instead of 27 mins, according to my experiments.&lt;/p&gt;

&lt;p&gt;____________________________________________&lt;br/&gt;
Here&apos;s a function to expose the bug:&lt;/p&gt;

&lt;p&gt; public static void collectionBagRetainAllTest() &lt;/p&gt;
{

	ArrayList&amp;lt;Integer&amp;gt; coll=new ArrayList&amp;lt;Integer&amp;gt;();
	for(int i=0;i&amp;lt;=1000000;++i)
	    coll.add(new Integer(i));

	TreeBag&amp;lt;Integer&amp;gt; treeBag=new TreeBag&amp;lt;Integer&amp;gt;(coll);

	CollectionBag&amp;lt;Integer&amp;gt; bag = new CollectionBag&amp;lt;Integer&amp;gt;(treeBag);

	bag.retainAll(coll);
     }
&lt;p&gt;_____________________________________&lt;/p&gt;

&lt;p&gt;Here&apos;s a proposed patch:&lt;/p&gt;

&lt;p&gt;  public boolean retainAll(final Collection&amp;lt;?&amp;gt; coll) {&lt;br/&gt;
        if (coll != null) {&lt;br/&gt;
            boolean modified = false;&lt;br/&gt;
            final Iterator&amp;lt;E&amp;gt; e = iterator();&lt;br/&gt;
	    HashSet&amp;lt;Object&amp;gt; set=new HashSet&amp;lt;Object&amp;gt;(coll);&lt;br/&gt;
            while (e.hasNext()) {&lt;br/&gt;
                if (!set.contains(e.next())) &lt;/p&gt;
{
                    e.remove();
                    modified = true;
                }
&lt;p&gt;            }&lt;br/&gt;
            return modified;&lt;br/&gt;
        } else &lt;/p&gt;
{
            // let the decorated bag handle the case of null argument
            return decorated().retainAll(null);
        }
&lt;p&gt;    }&lt;br/&gt;
_____________________________________&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 12.04&lt;/p&gt;</environment>
        <key id="12748417">COLLECTIONS-534</key>
            <summary>Performance bug in CollectionBag::retainAll</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="oswaldo_o">Oswaldo Olivo</reporter>
                        <labels>
                            <label>perfomance</label>
                    </labels>
                <created>Wed, 15 Oct 2014 21:01:11 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:12 +0000</updated>
                            <resolved>Sun, 19 Oct 2014 12:44:59 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Bag</component>
                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14172953" author="sebb@apache.org" created="Wed, 15 Oct 2014 21:12:21 +0000"  >&lt;p&gt;However for smaller data sets, adding the extra conversion would probably reduce performance.&lt;br/&gt;
Have you tested that?&lt;/p&gt;</comment>
                            <comment id="14173001" author="oswaldo_o" created="Wed, 15 Oct 2014 21:40:10 +0000"  >&lt;p&gt;Hi Sebb,&lt;br/&gt;
Here are some results I&apos;ve gathered for different sizes:&lt;/p&gt;

&lt;p&gt;     Size         Fixed           Original&lt;/p&gt;

&lt;p&gt;     1000000  0m1.696s    27m35.343s&lt;br/&gt;
      500000   0m1.392s    11m22.767s&lt;br/&gt;
      100000   0m1.172s      0m1.136s&lt;br/&gt;
       10000    0m1.068s      0m1.132s&lt;br/&gt;
        1000     0m0.972s      0m0.988s&lt;br/&gt;
         100      0m0.968s      0m0.936s&lt;br/&gt;
          10       0m0.948s      0m0.908s&lt;/p&gt;</comment>
                            <comment id="14174142" author="tn" created="Thu, 16 Oct 2014 19:39:50 +0000"  >&lt;p&gt;If we can update the algorithm to get a better performance I am very much in favor of it, but just copying the input arguments to a different collection to improve the runtime performance is not what we should do imho.&lt;/p&gt;

&lt;p&gt;In similar cases we added something like that to the javadoc:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;         * This implementation iterates over the elements of this collection, checking each element in
         * turn to see if it&apos;s contained in &amp;lt;code&amp;gt;coll&amp;lt;/code&amp;gt;. If it&apos;s not contained, it&apos;s removed
         * from this collection. As a consequence, it is advised to use a collection type for
         * &amp;lt;code&amp;gt;coll&amp;lt;/code&amp;gt; that provides a fast (e.g. O(1)) implementation of
         * {@link Collection#contains(Object)}.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The rationale behind it is that we can not be sure about the runtime complexity of the provided collection and just copying it to another collection seems to be a waste if the user already uses something like a set or another collection that supports O(1) for contains.&lt;/p&gt;</comment>
                            <comment id="14174144" author="tn" created="Thu, 16 Oct 2014 19:42:33 +0000"  >&lt;p&gt;btw. our implementation is more or less equivalent to the one of the default collections in the jdk.&lt;/p&gt;</comment>
                            <comment id="14176305" author="tn" created="Sun, 19 Oct 2014 12:44:59 +0000"  >&lt;p&gt;Added comment in r1632904.&lt;/p&gt;

&lt;p&gt;Thanks for the report.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Oct 2014 21:12:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i217vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-531] Generic Wildcards specified in CollectionUtils#isEqualCollection(Collection, Collection, Equator) may throw ClassCastException in certain cases</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-531</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;CollectionUtils#isEqualCollection(Collection, Collection, Equator) is defined as&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isEqualCollection(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;?&amp;gt; a, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;?&amp;gt; b, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Equator&amp;lt;?&amp;gt; equator) {
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This makes it possible to invoke it with a code like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;IntegerEquator &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Equator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; equate(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; o1, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; o2) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; o1.intValue() == o2.intValue();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hash(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; o) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; o.intValue();
        }
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test() {
        List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; longList = Arrays.asList(1L, 2L);
        List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; intList = Arrays.asList(1, 2);
        assertTrue(CollectionUtils.isEqualCollection(longList, intList, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IntegerEquator()));

    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which compiles perfectly but throws a ClassCastException as Long cannot be cast to an Integer. However, the generics should be defined such that this is stopped at compile time itself.&lt;/p&gt;

&lt;p&gt;If we modify the method to something like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;E&amp;gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isEqualCollection(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; E&amp;gt; a, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; E&amp;gt; b, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Equator&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt; E&amp;gt; equator) {
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the above example would give a compile time error. imho we should modify this method with bounded wildcards. I don&apos;t think this change would break any existing binaries if the method is being used correctly, otherwise it is probably throwing ClassCastExceptions anyway.&lt;/p&gt;

&lt;p&gt;Test case attached&lt;/p&gt;</description>
                <environment></environment>
        <key id="12716766">COLLECTIONS-531</key>
            <summary>Generic Wildcards specified in CollectionUtils#isEqualCollection(Collection, Collection, Equator) may throw ClassCastException in certain cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dipanjan21">Dipanjan Laha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 May 2014 10:13:18 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:11 +0000</updated>
                            <resolved>Thu, 29 May 2014 18:34:40 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14012671" author="tn" created="Thu, 29 May 2014 18:34:28 +0000"  >&lt;p&gt;Committed in r1598357.&lt;/p&gt;

&lt;p&gt;I have verified that the change does not break b/c and it should be fine.&lt;/p&gt;

&lt;p&gt;Additionally added a note to the javadoc that providing incompatible types, e.g. by casting, will result in a ClassCastException at runtime. This is probably a worthwhile distinction to the isEqualCollection(C, C) method which does support incompatible types (although will always return false for non-empty collections in such a case).&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12646885" name="IsEqualCollectionTest.java" size="801" author="dipanjan21" created="Tue, 27 May 2014 10:13:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 May 2014 18:34:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394974</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w06v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-527] Please create a version commons-collections 3.x for jdk 8 compatibility</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-527</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Could you make a 3.x or 3.2.x release compatible with JDK8 ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.commons.collections.MultiMap {
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; remove(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; key, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; item);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is not compatible with JDK&apos;s 8 Map&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.util.Map {
   &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; remove(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; key, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This causes bugs in projects, who run jdk8 and even compilation failures - for these, who implement common&apos;s MultiMap.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Compilation Error&lt;/b&gt;&lt;br/&gt;
If anyone implement MultiMap in their code, compilation fails with the error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MyMultiHashMap.java:[11,7] error: remove(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) in MultiHashMap cannot implement remove(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) in Map
[ERROR] &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; type &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; is not compatible with &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Reasoning&lt;/b&gt;&lt;br/&gt;
JDK 8 is here and being adopted. collection-commons are not yet compatible with Java 8. For many big project switch to commons-collections 4.x is not an option - some transitional release version needs to be required.&lt;/p&gt;

&lt;p&gt;Alternative would be for companies to fork commons-collections and create their internal artifact. Why do it if the official compatibility version can be created?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12714435">COLLECTIONS-527</key>
            <summary>Please create a version commons-collections 3.x for jdk 8 compatibility</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ignatalexeyenko">Ignat Alexeyenko</reporter>
                        <labels>
                            <label>java8</label>
                            <label>jdk8</label>
                    </labels>
                <created>Thu, 15 May 2014 10:12:45 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:18 +0000</updated>
                            <resolved>Fri, 16 May 2014 23:00:08 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13998727" author="ignatalexeyenko" created="Thu, 15 May 2014 12:39:58 +0000"  >&lt;p&gt;Attached patch, method remove in MultiMap was renamed to removeCompat, all implementations and tests were updated. &lt;br/&gt;
Patch was created based on sources of SVN repository, branch COLLECTIONS_3_2_BRANCH.&lt;/p&gt;

&lt;p&gt;mvn package is green with JDK 8 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13998733" author="ignatalexeyenko" created="Thu, 15 May 2014 12:49:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tn&quot; class=&quot;user-hover&quot; rel=&quot;tn&quot;&gt;Thomas Neidhart&lt;/a&gt;, could you have a look on this one please?&lt;/p&gt;</comment>
                            <comment id="13999876" author="joehni" created="Fri, 16 May 2014 15:15:12 +0000"  >&lt;p&gt;Ignat, I understand the problem, but it does not make sense. If we modify this method in the interface, commons-collections 3.x is no longer compatible with any previous 3.x release and can break &lt;b&gt;any&lt;/b&gt; jar that depends on cc-3.x (at least on MultiMap) unles it is &lt;b&gt;modified&lt;/b&gt; itself and rebuilt. Sorry, this situation would be even worse.&lt;/p&gt;</comment>
                            <comment id="13999906" author="ignatalexeyenko" created="Fri, 16 May 2014 15:50:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joehni&quot; class=&quot;user-hover&quot; rel=&quot;joehni&quot;&gt;Joerg Schaible&lt;/a&gt;, thanks for your reply.&lt;/p&gt;

&lt;p&gt;It&apos;s a breaking change indeed, but workaround is to publish a new major version (e.g. 3.3.0).&lt;/p&gt;

&lt;p&gt;Regarding making the situation even worse - why? &lt;br/&gt;
For people who need to migrate to JDK 8 and use collections 3.x, they need to:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Fork the library&lt;/li&gt;
	&lt;li&gt;Update their codebase (e.g. places, where MultiMap is implemented or remove(Object, Object) is used).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Instead, if they do have a version which is Java 8 compatible - they need to go with &lt;b&gt;2&lt;/b&gt; and only update their codebase.&lt;/p&gt;


&lt;p&gt;There might be other libraries that depends on commons-collections, but they will not target compatibility with some fork. It&apos;s more realistic other libraries will publish their compat-changes with respect to commons-collections &lt;em&gt;only&lt;/em&gt; when original commons-collections publish a Java 8 compat changes.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13999968" author="joehni" created="Fri, 16 May 2014 16:48:00 +0000"  >&lt;p&gt;No, you don&apos;t understand the problem. If you depend directly on cc-3, you may adjust your source code, but if you&apos;re depending on another 3rd party dependency that also uses cc-3, you will break that one! This is exactly why &lt;b&gt;any&lt;/b&gt; 3.x version is binary compatible. To support both versions at once, you have to change package names ... and that&apos;s why cc-4 exists.&lt;/p&gt;</comment>
                            <comment id="14000368" author="ignatalexeyenko" created="Fri, 16 May 2014 21:45:19 +0000"  >&lt;p&gt;In Maven world one probably gets something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Project
   `-- dependency A
      `-- commons-collection-3.2.1
   `--dependency B
      `--commons-collections-3.3.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Where Maven resolves version of 3.3.0 and if &lt;b&gt;dependency A&lt;/b&gt; uses some of commons-collection&apos;s remove(Object, Object) values they must receive runtime exceptions. This situation can be solved either by:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;using patched version of dependency A, that is compatible with commons-collections 3.3.0&lt;/li&gt;
	&lt;li&gt;loading dependencies in different class loaders&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Consider the other case, there&apos;s only commons-collection 3.2.1 in project:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Project
   `-- dependency A
      `-- commons-collection-3.2.1
   `--dependency B
      `--commons-collections-3.2.1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The same &lt;b&gt;dependency A&lt;/b&gt; still uses some of commons-collection&apos;s remove(Object, Object) and we run Java 8. Again, they must receive same runtime exceptions - even without single change in commons-collection 3.2.1.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Adopting Java 8&lt;/b&gt;&lt;br/&gt;
So projects are already doomed if they need to run Java 8 with commons-collections 3.2.1. Transition to commons-collections4 might not be an option, as there are too much code changes required in projects. Even more code changes in other libraries (like &lt;b&gt;dependency A&lt;/b&gt;)!&lt;/p&gt;

&lt;p&gt;&lt;b&gt;More options&lt;/b&gt;&lt;br/&gt;
Finally, developers aren&apos;t forced to upgrade to commons-collections 3.3. Developers may be happy with older Java or they&apos;re fortunate to avoid exceptions in remove(Object, Object) invocations on MultiMaps.&lt;/p&gt;

&lt;p&gt;In any case, having a new compatibility release leaves more options for other projects and developers to react, then having no compatibility release at all. As mentioned earlier, this must have a coherent impact on other libraries (like &lt;b&gt;dependency A&lt;/b&gt;) - much better then just a custom project fork.&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joehni&quot; class=&quot;user-hover&quot; rel=&quot;joehni&quot;&gt;Joerg Schaible&lt;/a&gt; for your time.&lt;/p&gt;</comment>
                            <comment id="14000452" author="sebb@apache.org" created="Fri, 16 May 2014 22:59:12 +0000"  >&lt;p&gt;If any dependency actually uses the current remove() method, removing it will break the application.&lt;br/&gt;
As this is a public method we cannot be sure that it is not being used anywhere, so dropping the method is not an option if we are to retain binary compatibility.&lt;br/&gt;
It&apos;s not possible to have two different versions of the same class in the same class-loader, which is why API breaks need a new package name (and new Maven coordinates).&lt;/p&gt;</comment>
                            <comment id="14000454" author="sebb@apache.org" created="Fri, 16 May 2014 23:00:08 +0000"  >&lt;p&gt;It&apos;s not possible to fix this&lt;/p&gt;</comment>
                            <comment id="14000469" author="tn" created="Fri, 16 May 2014 23:08:34 +0000"  >&lt;p&gt;We could release a commons-collections 3.x version with different maven coordinates and package name for java 8 compatibility.&lt;br/&gt;
But in any case, projects would have to adopt and I doubt that there are so many changes required to upgrade to collections 4 as claimed.&lt;/p&gt;

&lt;p&gt;Edit: a drop-in replacement as requested by the OP is simply impossible as sebb and Joerg have pointed out.&lt;/p&gt;</comment>
                            <comment id="14000526" author="joehni" created="Fri, 16 May 2014 23:57:49 +0000"  >&lt;p&gt;And let&apos;s come back to the facts. cc-3 &lt;b&gt;runs&lt;/b&gt; on Java 8, you simply cannot compile with it (or against its runtime). And since anything that uses MultiMap.remove must have been compiled with an earlier runtime too, binary runtime compatibility stays fine.&lt;/p&gt;

&lt;p&gt;Only people are affected that try to compile with Java 8 against cc-3. However, since they will have to adjust their source code, they can do directly the proper way. Most of the stuff will simply compile by replacing the import statements with the new package of cc-4 (actually for minimal changes it is enough to upgrade the code using MultiMap and depend on both cc versions). And if the source has been upgraded, the dependencies that still use cc-3 are completely happy and the new code running with cc-4 is also. And we, too, since we did not introduce an incompatible version into the cc-3.x namespace.&lt;/p&gt;

&lt;p&gt;I know very well that that some Linux distros try to use that patch (actually I am using Gentoo for more than a decade), because they tend to build anything on their own, but if they insist on creating a version hell with their distro, they may do so - unless they do not blame us later on for incompatibilities.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12645006" name="COLLECTIONS_3_2_BRANCH_COLLECTIONS_527.patch" size="7878" author="ignatalexeyenko" created="Thu, 15 May 2014 12:39:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 May 2014 15:15:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392748</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vmtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392924</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-526] PatriciaTrie</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-526</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;the result of trie tree prefixMap function is inconsistent. it would contain a key but the size is 0;&lt;br/&gt;
some unittest codes as below: &lt;/p&gt;

&lt;p&gt;  PatriciaTrie&amp;lt;String&amp;gt; aTree =&lt;br/&gt;
        new PatriciaTrie&amp;lt;String&amp;gt; ();&lt;br/&gt;
    aTree.put(&quot;&#28857;&#35780;&quot;, &quot;&#27979;&#35797;&quot;);&lt;br/&gt;
    aTree.put(&quot;&#20070;&#35780;&quot;, &quot;&#27979;&#35797;&quot;);&lt;br/&gt;
    assertTrue(aTree.prefixMap(&quot;&#28857;&quot;).containsKey(&quot;&#28857;&#35780;&quot;)); //pass&lt;br/&gt;
    assertEquals(&quot;&#27979;&#35797;&quot;, aTree.prefixMap(&quot;&#28857;&quot;).get(&quot;&#28857;&#35780;&quot;)); //pass&lt;br/&gt;
    assertFalse(aTree.prefixMap(&quot;&#28857;&quot;).isEmpty());                 //fail&lt;br/&gt;
    assertEquals(1, aTree.prefixMap(&quot;&#28857;&quot;).size());                 //fail&lt;br/&gt;
    assertEquals(1, aTree.prefixMap(&quot;&#28857;&quot;).keySet().size());   //fail&lt;br/&gt;
    assertEquals(1, aTree.prefixMap(&quot;&#28857;&quot;).entrySet().size()); //fail&lt;br/&gt;
    assertEquals(1, aTree.prefixMap(&quot;&#28857;&#35780;&quot;).values().size()); //fail&lt;/p&gt;</description>
                <environment>&lt;p&gt;android&lt;/p&gt;</environment>
        <key id="12713014">COLLECTIONS-526</key>
            <summary>PatriciaTrie</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zigler">zigler zhang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 May 2014 04:38:52 +0000</created>
                <updated>Thu, 8 May 2014 06:04:30 +0000</updated>
                            <resolved>Thu, 8 May 2014 06:04:30 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12713013">COLLECTIONS-525</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391330</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vedz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391550</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-525] PatriciaTrie</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-525</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt; the result of trie tree prefixMap function is inconsistent. it would contain a key but the size is 0;&lt;br/&gt;
some unittest codes as below: &lt;/p&gt;

&lt;p&gt;  PatriciaTrie&amp;lt;String&amp;gt; aTree =&lt;br/&gt;
        new PatriciaTrie&amp;lt;String&amp;gt; ();&lt;br/&gt;
    aTree.put(&quot;&#28857;&#35780;&quot;, &quot;&#27979;&#35797;&quot;);&lt;br/&gt;
    aTree.put(&quot;&#20070;&#35780;&quot;, &quot;&#27979;&#35797;&quot;);&lt;br/&gt;
    assertTrue(aTree.prefixMap(&quot;&#28857;&quot;).containsKey(&quot;&#28857;&#35780;&quot;)); //pass&lt;br/&gt;
    assertEquals(&quot;&#27979;&#35797;&quot;, aTree.prefixMap(&quot;&#28857;&quot;).get(&quot;&#28857;&#35780;&quot;)); //pass&lt;br/&gt;
    assertFalse(aTree.prefixMap(&quot;&#28857;&quot;).isEmpty());                 //fail&lt;br/&gt;
    assertEquals(1, aTree.prefixMap(&quot;&#28857;&quot;).size());                 //fail actural 0&lt;br/&gt;
    assertEquals(1, aTree.prefixMap(&quot;&#28857;&quot;).keySet().size());   //fail actural 0&lt;br/&gt;
    assertEquals(1, aTree.prefixMap(&quot;&#28857;&quot;).entrySet().size()); //fail actural 0&lt;br/&gt;
    assertEquals(1, aTree.prefixMap(&quot;&#28857;&#35780;&quot;).values().size()); //fail actural 0&lt;/p&gt;</description>
                <environment>&lt;p&gt;android&lt;/p&gt;</environment>
        <key id="12713013">COLLECTIONS-525</key>
            <summary>PatriciaTrie</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zigler">zigler zhang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 May 2014 04:38:28 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:14 +0000</updated>
                            <resolved>Thu, 1 Jan 2015 21:11:08 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13993456" author="zigler" created="Fri, 9 May 2014 07:53:43 +0000"  >&lt;p&gt;take some time to investigate, I found this line:&lt;/p&gt;

&lt;p&gt;       if (isBitSet(prefix, endIndexInBits, endIndexInBits)&lt;br/&gt;
                != isBitSet(entry.key, lengthInBits, lengthInBits(entry.key))) &lt;/p&gt;
{
            return null;
        }

&lt;p&gt;in subtree functions.&lt;/p&gt;

&lt;p&gt;It simply check the last bits of the prefix and the entry.key, however, as we use string as key, the endIndexInBits would be set the character length, &lt;br/&gt;
and it would make the codes check the next character of the prefix and the entry.key instead as expected.  Then for the character of the low region(which the highest bit is always 0) this judgment is always return true. But for other characters this would not return as expected.&lt;/p&gt;

&lt;p&gt;In other worlds, it use a open boundary as an close one.&lt;/p&gt;

&lt;p&gt; if (isBitSet(prefix, endIndexInBits-1, endIndexInBits)&lt;br/&gt;
                != isBitSet(entry.key, lengthInBits-1, lengthInBits(entry.key)))&lt;br/&gt;
would fix it. &lt;/p&gt;</comment>
                            <comment id="13993528" author="zigler" created="Fri, 9 May 2014 11:17:12 +0000"  >&lt;p&gt;I&apos;m afraid there are two other places make the same mistake:&lt;br/&gt;
the test code as below:&lt;br/&gt;
		PatriciaTrie&amp;lt;String&amp;gt; aTree2 = new PatriciaTrie&amp;lt;String&amp;gt; ();&lt;br/&gt;
		aTree2.put(&quot;&#28857;&#35780;&quot;, &quot;&#32852;&#30431;&quot;);&lt;br/&gt;
		aTree2.put(&quot;&#28857;&#29256;&quot;, &quot;&#23450;&#21521;&quot;);&lt;br/&gt;
		System.out.println(aTree2.prefixMap(&quot;&#28857;&quot;).values());&lt;/p&gt;</comment>
                            <comment id="13993699" author="zigler" created="Fri, 9 May 2014 16:55:17 +0000"  >&lt;p&gt;I hope the patch could make some sense&lt;/p&gt;</comment>
                            <comment id="13997538" author="tn" created="Wed, 14 May 2014 13:30:58 +0000"  >&lt;p&gt;Thanks for the report and patch.&lt;br/&gt;
It seems to fix the problem, but needs more investigation to make sure the problem is fully resolved by this change.&lt;/p&gt;</comment>
                            <comment id="14262662" author="tn" created="Thu, 1 Jan 2015 21:11:08 +0000"  >&lt;p&gt;Fixed in r1648941.&lt;/p&gt;

&lt;p&gt;Thanks for the report and patch!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12713014">COLLECTIONS-526</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12644130" name="525.patch" size="1478" author="zigler" created="Fri, 9 May 2014 16:55:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 May 2014 13:30:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vedr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-524] ListOrderedSet can have duplicates</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-524</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The static method, org.apache.commons.collections.set.ListOrderedSet.decorate(List list), has a comment &quot;If the list contains duplicates, the duplicates are removed&quot;.  It does not remove duplicates and will leave you in an inconsistent state if your list has duplicates.  (i.e. the .size() result is smaller than the number of iterations from the iterator)&lt;/p&gt;</description>
                <environment>&lt;p&gt;tomcat 7, linux&lt;/p&gt;</environment>
        <key id="12712470">COLLECTIONS-524</key>
            <summary>ListOrderedSet can have duplicates</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jggoodfe">J Goodfellow</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 May 2014 00:58:27 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:09 +0000</updated>
                            <resolved>Tue, 6 May 2014 22:14:01 +0000</resolved>
                                    <version>3.2.1</version>
                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13991229" author="tn" created="Tue, 6 May 2014 22:13:14 +0000"  >&lt;p&gt;Fixed in r1592910.&lt;/p&gt;

&lt;p&gt;The method will now correctly remove duplicates.&lt;br/&gt;
Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 May 2014 22:13:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vb5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391026</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-521] Typo in MultiMapKey&apos;s isEqualKey(entry, key1, key2)</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-521</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I believe there is a typo line 252 in MultiKeyMap.&lt;br/&gt;
        return&lt;br/&gt;
            multi.size() == 2 &amp;amp;&amp;amp;&lt;br/&gt;
            (key1 == multi.getKey(0) || key1 != null &amp;amp;&amp;amp; key1.equals(multi.getKey(0))) &amp;amp;&amp;amp;&lt;br/&gt;
            (key2 == multi.getKey(1) || key1 != null &amp;amp;&amp;amp; key2.equals(multi.getKey(1)));&lt;/p&gt;

&lt;p&gt;should be:&lt;br/&gt;
        return&lt;br/&gt;
            multi.size() == 2 &amp;amp;&amp;amp;&lt;br/&gt;
            (key1 == multi.getKey(0) || key1 != null &amp;amp;&amp;amp; key1.equals(multi.getKey(0))) &amp;amp;&amp;amp;&lt;br/&gt;
            (key2 == multi.getKey(1) || key2 != null &amp;amp;&amp;amp; key2.equals(multi.getKey(1)));&lt;/p&gt;</description>
                <environment></environment>
        <key id="12711792">COLLECTIONS-521</key>
            <summary>Typo in MultiMapKey&apos;s isEqualKey(entry, key1, key2)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Maxime Nay">Maxime Nay</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2014 20:51:18 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:18 +0000</updated>
                            <resolved>Tue, 6 May 2014 21:38:26 +0000</resolved>
                                                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13986987" author="githubbot" created="Thu, 1 May 2014 21:01:04 +0000"  >&lt;p&gt;GitHub user maximenay opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-521&quot; title=&quot;Typo in MultiMapKey&amp;#39;s isEqualKey(entry, key1, key2)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-521&quot;&gt;&lt;del&gt;COLLECTIONS-521&lt;/del&gt;&lt;/a&gt; Typo in MultiMapKey&apos;s isEqualKey(entry, key1, key2)&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-521&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COLLECTIONS-521&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/maximenay/commons-collections&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/maximenay/commons-collections&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2992bbb3d7e772a43ab5e819bd73dd211fcf7681&lt;br/&gt;
Author: maxime nay &amp;lt;maxime.nay@gmail.com&amp;gt;&lt;br/&gt;
Date:   2014-05-01T20:59:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-521&quot; title=&quot;Typo in MultiMapKey&amp;#39;s isEqualKey(entry, key1, key2)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-521&quot;&gt;&lt;del&gt;COLLECTIONS-521&lt;/del&gt;&lt;/a&gt; Typo in MultiMapKey&apos;s isEqualKey(entry, key1, key2)&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="13988630" author="sebb@apache.org" created="Sat, 3 May 2014 09:23:59 +0000"  >&lt;p&gt;Thanks for the patch. Looks good to me, but ideally there should first be a test case that exposes the bug.&lt;br/&gt;
If key2 == null then presumably the current code will throw NPE.&lt;/p&gt;</comment>
                            <comment id="13989780" author="maxime nay" created="Mon, 5 May 2014 18:03:00 +0000"  >&lt;p&gt;MultiKeyMap&amp;lt;String, Long&amp;gt; map = new MultiKeyMap&amp;lt;String, Long&amp;gt;();&lt;br/&gt;
map.put(&quot;test&quot;, null, 2L) is indeed throwing NPE:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.commons.collections4.map.MultiKeyMap.isEqualKey(MultiKeyMap.java:249)&lt;br/&gt;
	at org.apache.commons.collections4.map.MultiKeyMap.put(MultiKeyMap.java:180)&lt;/p&gt;</comment>
                            <comment id="13991171" author="tn" created="Tue, 6 May 2014 21:38:26 +0000"  >&lt;p&gt;Fixed in r1592893.&lt;/p&gt;

&lt;p&gt;Thanks for the report and patch!&lt;/p&gt;</comment>
                            <comment id="14001242" author="githubbot" created="Sun, 18 May 2014 22:40:32 +0000"  >&lt;p&gt;Github user maximenay closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-collections/pull/1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-collections/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 May 2014 21:01:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390113</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v71r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-519] private constructors in utility classes break existing code</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-519</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;In collections version 4.x all utility classes (example ListUtils, MapUtils, PredicateUtils....) have private constructors. I consider this to be a serious bug, as it breaks any possibility the classes to be extended by the users.  The javadoc says that constructors are private in order to prevent class instantiation but this object instantiation is not really problem and i think it is more important to allow classes to be extended. The possibility to extend utility classes was one of the major selling points of commons.lang and commons.collections projects. In the latest commons.lang project the utility classes still have public constructors.&lt;/p&gt;


&lt;p&gt;Best Regards&lt;/p&gt;</description>
                <environment></environment>
        <key id="12709731">COLLECTIONS-519</key>
            <summary>private constructors in utility classes break existing code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="radopas">Radoslav Paskalev</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Apr 2014 10:05:14 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:21 +0000</updated>
                            <resolved>Fri, 2 May 2014 09:00:12 +0000</resolved>
                                    <version>4.x</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13976888" author="sebb@apache.org" created="Tue, 22 Apr 2014 15:03:03 +0000"  >&lt;p&gt;Not sure I follow the use case for this.&lt;/p&gt;

&lt;p&gt;The utility classes only have static methods which cannot be overridden.&lt;br/&gt;
How would it help if the ctors were not private?&lt;/p&gt;</comment>
                            <comment id="13977914" author="radopas" created="Wed, 23 Apr 2014 07:03:53 +0000"  >&lt;p&gt;Hello,&lt;br/&gt;
A class with static methods can be extended to hide the underlying library implementation, to add more functions and to decorate existing functions. Unfortunately, with the private constructor, the only way to do any of this is by embedding the utility class and writing wrapper methods for every utility method that needs to be exported. This is possible to do, but for simple use cases, where we need to add just one or two custom functions, this approach creates a lot of additional error prone work.&lt;/p&gt;

&lt;p&gt;Best Regards&lt;/p&gt;</comment>
                            <comment id="13978052" author="sebb@apache.org" created="Wed, 23 Apr 2014 10:31:03 +0000"  >&lt;p&gt;Sorry, but I still don&apos;t follow - AFAICT it&apos;s not possible to hide base class static methods.&lt;/p&gt;

&lt;p&gt;Can you provide a simple example?&lt;/p&gt;</comment>
                            <comment id="13985400" author="dipanjan21" created="Wed, 30 Apr 2014 11:57:54 +0000"  >&lt;p&gt;It is possible to hide (not override) base class static methods. The following code snippet&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;StaticInheritence {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        Child.someMethod();
        Base.someMethod();
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Base {

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void someMethod() {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Base&quot;&lt;/span&gt;);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Base {

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void someMethod() {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Child&quot;&lt;/span&gt;);
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;would output&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Child
Base
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, I am not sure if this is a valid use case. imho having a custom util class with the required functions and calling collection&apos;s utils methods wherever necessary is a much better solution. Static inheritance never overrides a method but only hides it, so technically you cannot decorate a static functions.&lt;/p&gt;</comment>
                            <comment id="13985479" author="radopas" created="Wed, 30 Apr 2014 13:20:54 +0000"  >&lt;p&gt;Exactly, thanks&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;Here is what i mean by decorate or extend the utility functions:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ListUtils &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; org.apache.commons.collections.ListUtils{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isEqualList(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection list1, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection list2){
    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; something 
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; res = org.apache.commons.collections.ListUtils.isEqualList(list1, list2);
    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; something 
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; res;
  }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When i can extend the base class, i can quickly add more functions to ListUtils:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ListUtils &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; org.apache.commons.collections.ListUtils{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List asList(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s1){
      List list = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList();
      list.add(s1);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; list;
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And by hide the library implementation i mean that i can hide the fact that we are using an external library because we import and work only with the ListUtils from my package. Then when we have to update the external library or to replace it - i only need to change my custom ListUtils class.&lt;/p&gt;</comment>
                            <comment id="13986484" author="dfeist" created="Thu, 1 May 2014 10:28:29 +0000"  >&lt;p&gt;This is a major issue for us with Mule use of commons-collections too as we plan to upgrade from to version 4 with generics &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;We extend commons collections utility clases and add a few extras with the goal that everywhere in our code base we just use a single utility class that provides all commons-collections methods plus our own.  See: &lt;a href=&quot;https://raw.githubusercontent.com/mulesoft/mule/477feb5e0c5df246865501eb995cf0b2e7e07bc2/core/src/main/java/org/mule/util/MapUtils.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://raw.githubusercontent.com/mulesoft/mule/477feb5e0c5df246865501eb995cf0b2e7e07bc2/core/src/main/java/org/mule/util/MapUtils.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;While i agree the &lt;b&gt;constructor shouldn&apos;t be public&lt;/b&gt;, it &lt;b&gt;should at least be protected though to allow extension&lt;/b&gt;, else you may as well make the class final because the effect is the same.  To goal of this change was (based on the javadoc) to prevent instantiation, not to prevent extension.&lt;/p&gt;</comment>
                            <comment id="13986502" author="tn" created="Thu, 1 May 2014 11:08:45 +0000"  >&lt;p&gt;In r1591602, I have changed all constructors of *Utils classes from private to protected to allow sub-classing.&lt;/p&gt;

&lt;p&gt;Commons is a community project, thus we need feedback from our users to further improve the components.&lt;/p&gt;

&lt;p&gt;Thanks for the use-cases that you presented here, probably not something that lots of people do, but certainly valid and useful.&lt;/p&gt;</comment>
                            <comment id="13986509" author="dfeist" created="Thu, 1 May 2014 11:21:16 +0000"  >&lt;p&gt;Thanks for the speedy response and code change! (BTW, I&apos;d have sent a PR if commons was using github)&lt;/p&gt;

&lt;p&gt;Out of interest do you have any rough plans regarding when 4.1 might be released?&lt;/p&gt;</comment>
                            <comment id="13986516" author="tn" created="Thu, 1 May 2014 11:33:41 +0000"  >&lt;p&gt;The plan is to release 4.1 once &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-464&quot; title=&quot;Add FluentIterator / FluentIterable implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-464&quot;&gt;&lt;del&gt;COLLECTIONS-464&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-508&quot; title=&quot;MultiMap&amp;#39;s methods are not strongly typed even though the interface supports generics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-508&quot;&gt;&lt;del&gt;COLLECTIONS-508&lt;/del&gt;&lt;/a&gt; are resolved which should not take too long anymore.&lt;/p&gt;</comment>
                            <comment id="13986539" author="radopas" created="Thu, 1 May 2014 12:23:11 +0000"  >&lt;p&gt;Hello Thomas,&lt;/p&gt;

&lt;p&gt;Thank you for the quick reaction. This solution looks perfect to me.&lt;/p&gt;</comment>
                            <comment id="13986550" author="sebb@apache.org" created="Thu, 1 May 2014 13:00:22 +0000"  >&lt;p&gt;I still think it would have been better to extend the existing utility class by composition rather than sub-classing.&lt;/p&gt;

&lt;p&gt;1) the sub-class does not prevent access to the underlying static methods. It would be easy to accidentally invoke the wrong method.&lt;/p&gt;

&lt;p&gt;2) If a new method is added to the Collections class, it will be automatically made available to the derived class. This can cause problems if the derived class happens to have chosen the same method signature for different functionality.&lt;br/&gt;
It can also cause issues if the new method is a sibling to an existing method that is deliberately hidden in the derived class; the user would then be able to bypass the local class.&lt;/p&gt;

&lt;p&gt;Allowing subclassing of utuility classes does make life simpler for the developer, but only initially.&lt;br/&gt;
However, it does not provide safety for the user of the subclass, and I suspect it will cause additional headaches for the developer in the long term.&lt;/p&gt;

&lt;p&gt;I agree with @Dipanjan Laha that this is not a valid use case for extension; so yes the utilty class should be regarded as final&lt;/p&gt;</comment>
                            <comment id="13986581" author="dfeist" created="Thu, 1 May 2014 13:45:54 +0000"  >&lt;p&gt;Sebb,  You comments are valid, and in fact java takes this exact same approach with Collections, Arrays to ensure they cannot be instantiated or extended.  I also agree that composition/delegation is an valid alternative (albeit more verbose) way of extending these Util classes to achieve the use case described above.&lt;/p&gt;

&lt;p&gt;What I don&apos;t like about using this In this particular case, is that it&apos;s completely inconsistent with rest of commons i.e. IOUtils, BooleanUtils etc.&lt;/p&gt;</comment>
                            <comment id="13986599" author="sebb@apache.org" created="Thu, 1 May 2014 14:00:19 +0000"  >&lt;p&gt;In which case, we should look at fixing the rest of Commons rather than re-instating the bad practise in Collections 4.&lt;/p&gt;

&lt;p&gt;Commons components have been around a long time, and Java best practise has evolved.&lt;/p&gt;

&lt;p&gt;AFAICT the only downside of not allowing subclassing is that the replacement class is a bit more tedious to create and maintain - though maybe there are IDE helpers that can automate most of the work. However the upside is more flexibility.&lt;/p&gt;</comment>
                            <comment id="13986615" author="dfeist" created="Thu, 1 May 2014 14:10:00 +0000"  >&lt;p&gt;&amp;gt; we should look at fixing the rest of Commons rather than re-instating the bad practise in Collections 3.&lt;br/&gt;
Can&apos;t disagree with that.&lt;/p&gt;

&lt;p&gt;Agree on downside, not sure how it provides more flexibly though?  It does eliminate risks due to accidental hiding etc. in subclass as you described though.&lt;/p&gt;</comment>
                            <comment id="13986630" author="sebb@apache.org" created="Thu, 1 May 2014 14:23:39 +0000"  >&lt;p&gt;As to flexibility: the new class can be rewritten to use a different external utility class - or use its own implementation - without affecting end-users.&lt;/p&gt;</comment>
                            <comment id="13986938" author="radopas" created="Thu, 1 May 2014 20:11:34 +0000"  >&lt;p&gt;Hello,&lt;br/&gt;
I&apos;m sorry but i don&apos;t agree with you. You already said that composition/delegating are tedious and hard to maintain - this means useless work initially AND afterwards. If someone is afraid that extending the Utiliy classes could create the problems you are listing - he is free to use composition the way he likes. As for me - i don&apos;t need this added complexity in 90% of my work.&lt;/p&gt;</comment>
                            <comment id="13987484" author="britter" created="Fri, 2 May 2014 08:07:22 +0000"  >&lt;p&gt;Guys I really don&apos;t understand what you&apos;re talking about here. Subclassing a static util class makes no sense at all. Let&apos;s revisit the example given above (I&apos;ve added a package declaration) :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.myapp.utils

 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ListUtils &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; org.apache.commons.collections.ListUtils{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isEqualList(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection list1, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection list2){
    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; something 
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; res = org.apache.commons.collections.ListUtils.isEqualList(list1, list2);
    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; something 
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; res;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What is the difference compared to the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.myapp.utils

 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ListUtils {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isEqualList(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection list1, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection list2){
    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; something 
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; res = org.apache.commons.collections.ListUtils.isEqualList(list1, list2);
    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; something 
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; res;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There is no difference at all! Subclassing simply makes no sense, since you can&apos;t use polymorphism with static methods. So calling &lt;tt&gt;org.apache.commons.collections.ListUtils.isEqualList(list1, list2)&lt;/tt&gt; will still use the commons implementation and not you&apos;re custom implementation. To use you&apos;re custom implementation you have to use the fully qualified class name of your custom class: &lt;tt&gt;com.myapp.utils.ListUtils.isEqualList(list1, list2)&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13987511" author="tn" created="Fri, 2 May 2014 09:00:12 +0000"  >&lt;p&gt;Reverted commit after veto in r1591832.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12382296">COLLECTIONS-276</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 Apr 2014 15:03:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388053</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 44 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uui7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388311</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-518] AbstractIterableGetMapDecorator should be abstract</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-518</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;AbstractIterableGetMapDecorator should be abstract, but is not&lt;/p&gt;</description>
                <environment></environment>
        <key id="12708186">COLLECTIONS-518</key>
            <summary>AbstractIterableGetMapDecorator should be abstract</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dipanjan21">Dipanjan Laha</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Apr 2014 05:36:33 +0000</created>
                <updated>Sun, 31 May 2015 18:52:17 +0000</updated>
                                            <version>4.0</version>
                                    <fixVersion>5.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13968092" author="dipanjan21" created="Mon, 14 Apr 2014 05:37:34 +0000"  >&lt;p&gt;Patch to make it abstract&lt;/p&gt;</comment>
                            <comment id="13991129" author="tn" created="Tue, 6 May 2014 21:01:43 +0000"  >&lt;p&gt;This change will break binary compatibility.&lt;/p&gt;

&lt;p&gt;Would be acceptable in this case imho, but needs to be clearly documented in the release notes.&lt;/p&gt;</comment>
                            <comment id="13991760" author="dipanjan21" created="Wed, 7 May 2014 11:37:02 +0000"  >&lt;p&gt;@Binary Compatibility: True it would break it, but as you said, this should be acceptable &lt;/p&gt;

&lt;p&gt;So maybe you can commit it and keep the issue open till we document it in the release notes.&lt;/p&gt;</comment>
                            <comment id="14189010" author="tn" created="Wed, 29 Oct 2014 21:19:15 +0000"  >&lt;p&gt;Fixed in r1635305.&lt;/p&gt;

&lt;p&gt;Added a todo entry to mention it in the release notes.&lt;/p&gt;</comment>
                            <comment id="14566675" author="tn" created="Sun, 31 May 2015 18:52:05 +0000"  >&lt;p&gt;Reverted the change in r1682770.&lt;/p&gt;

&lt;p&gt;It is not really important and can be postponed to 5.0, as I want to avoid introducing a potential problem wrt binary compatibility.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12640027" name="AbstractIterableGetMapDecorator.patch" size="693" author="dipanjan21" created="Mon, 14 Apr 2014 05:37:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 May 2014 21:01:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386509</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ul0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386773</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        </customfields>
    </item>


<item>
            <title>[COLLECTIONS-516] NullPointerException in MapUtils.toProperties</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-516</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;calling MapUtils.toProperties with a map having null entries results in a NullPointerException. In this case the Map has only entry &amp;lt;null, null&amp;gt;.&lt;/p&gt;

&lt;p&gt;However, javadoc states &quot;A null input will return an empty&lt;br/&gt;
properties object.&quot; so (1) this should be clarified as it would&lt;br/&gt;
only apply to the map reference itself, not its contents, or (2)&lt;br/&gt;
an empty property object should be generated for null entries in&lt;br/&gt;
the map as well.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.9, Java 6&lt;/p&gt;</environment>
        <key id="12707638">COLLECTIONS-516</key>
            <summary>NullPointerException in MapUtils.toProperties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Apr 2014 04:39:37 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:18 +0000</updated>
                            <resolved>Mon, 19 May 2014 20:38:20 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13964990" author="telcontar" created="Thu, 10 Apr 2014 04:39:59 +0000"  >&lt;p&gt;A JUnit test to reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="13965813" author="tn" created="Thu, 10 Apr 2014 20:38:41 +0000"  >&lt;p&gt;The javadoc comment refers to the case when the provided map is null, not individual entries within the map.&lt;/p&gt;

&lt;p&gt;We could add a check to prevent adding null keys to the Properties object, but I think this would just hide wrong usage, so I would prefer to add additional clarification to the javadoc that null keys / values will result in a NullPointerException.&lt;/p&gt;</comment>
                            <comment id="13965976" author="telcontar" created="Thu, 10 Apr 2014 23:08:32 +0000"  >&lt;p&gt;Thank you for commenting on this. Based on your opinion, I agree that a minor change in the javadoc comment is probably best. Maybe:&lt;br/&gt;
&quot;Entries in the map must be non-null. If a null reference is given for the map, this method will return an empty properties object.&quot;&lt;/p&gt;</comment>
                            <comment id="14002351" author="tn" created="Mon, 19 May 2014 20:38:20 +0000"  >&lt;p&gt;Added javadoc clarification in r1596050.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639533" name="Report4.java" size="704" author="Telcontar" created="Thu, 10 Apr 2014 04:39:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Apr 2014 20:38:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uhnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386225</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-515] ClassCastException in LazySortedMap when used with equals/transformers</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-515</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When LazySortedMap is used by equals, the result is&lt;br/&gt;
java.lang.ClassCastException: org.apache.commons.collections4.map.LazySortedMap cannot be cast to java.lang.String&lt;/p&gt;

&lt;p&gt;This seems to be odd, as the use of the different transformations should not result in internal casting to String. See the attached unit test to reproduce.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.9, Java 6&lt;/p&gt;</environment>
        <key id="12707637">COLLECTIONS-515</key>
            <summary>ClassCastException in LazySortedMap when used with equals/transformers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Apr 2014 04:36:20 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:16 +0000</updated>
                            <resolved>Thu, 10 Apr 2014 20:46:41 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>Collection</component>
                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13964985" author="telcontar" created="Thu, 10 Apr 2014 04:36:54 +0000"  >&lt;p&gt;A JUnit test that results in a ClassCastException even though no explicit cast to String is made.&lt;/p&gt;</comment>
                            <comment id="13965826" author="tn" created="Thu, 10 Apr 2014 20:46:41 +0000"  >&lt;p&gt;There is no surprise here to get a ClassCastException as you provide a wrong key to the tailMap() method.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;      org.apache.commons.collections4.trie.PatriciaTrie var0 = new org.apache.commons.collections4.trie.PatriciaTrie();
      org.apache.commons.collections4.Transformer var1 = org.apache.commons.collections4.functors.ExceptionTransformer.exceptionTransformer();
      java.util.SortedMap var2 = org.apache.commons.collections4.MapUtils.lazySortedMap((java.util.SortedMap)var0, (org.apache.commons.collections4.Transformer)var1);
      java.util.SortedMap var3 = var2.tailMap((java.lang.Object)var2);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So var2 is a PatriciaTrie, and you try to construct a tailMap with the trie itself as key. Of course this will result in a ClassCastException, the only surprise here is that it is not thrown immediately.&lt;/p&gt;

&lt;p&gt;Trying the same with a java.util.TreeMap will throw the ClassCastException immediately during the call to tailMap.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639532" name="Report3.java" size="898" author="Telcontar" created="Thu, 10 Apr 2014 04:36:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Apr 2014 20:46:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385960</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uhn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386224</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-514] NullPointerException in MapBackedSet.mapBackedSet</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-514</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;It seems that addAll has issues with adding a set that is backed by a singleton map with entry null -&amp;gt; null. However, the javadoc of the involved classes does not state that null entries are disallowed.&lt;br/&gt;
Either the code should allow adding a null entry to a bag, or the documentation should state that null entries are not allowed.&lt;/p&gt;

&lt;p&gt;See the attached unit test in JUnit format to reproduce the problem.&lt;/p&gt;</description>
                <environment>&lt;p&gt;MacOS 10.9, Java 6&lt;/p&gt;</environment>
        <key id="12707636">COLLECTIONS-514</key>
            <summary>NullPointerException in MapBackedSet.mapBackedSet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Apr 2014 04:31:59 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:17 +0000</updated>
                            <resolved>Thu, 10 Apr 2014 20:59:08 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>Bag</component>
                    <component>Collection</component>
                    <component>Set</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13964981" author="telcontar" created="Thu, 10 Apr 2014 04:33:15 +0000"  >&lt;p&gt;JUnit test that produces a NullPointerException.&lt;/p&gt;</comment>
                            <comment id="13965843" author="tn" created="Thu, 10 Apr 2014 20:59:08 +0000"  >&lt;p&gt;The use TreeBag states that it uses a TreeMap as underlying data structure, this the same limitations apply as for a TreeMap.&lt;/p&gt;

&lt;p&gt;In fact I consider this even a bug in the jdk, as the TreeMap states that adding a mapping with a null key and natural ordering will result in a NullPointerException, although it does not immediately, only when you try to get the entry with a null key:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        SortedMap&amp;lt;String, String&amp;gt; map = new TreeMap&amp;lt;String, String&amp;gt;();
        map.put(null, null);
        System.out.println(map.get(null));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The NullPointerException is only thrown in the call to get().&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639530" name="Report2.java" size="889" author="Telcontar" created="Thu, 10 Apr 2014 04:33:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Apr 2014 20:59:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385959</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uhmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-513] NullPointerException in SwitchTransformer.transform</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-513</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;A relatively complex test case generated by Randoop results in a NullPointerException in SwitchTransformer.transform.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if this is an incorrect usage of the method, or if it is a real bug.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.9, Java 6 and Java 7&lt;/p&gt;</environment>
        <key id="12707623">COLLECTIONS-513</key>
            <summary>NullPointerException in SwitchTransformer.transform</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Apr 2014 02:00:21 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:17 +0000</updated>
                            <resolved>Thu, 10 Apr 2014 20:28:21 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>Functor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13964900" author="telcontar" created="Thu, 10 Apr 2014 02:00:54 +0000"  >&lt;p&gt;A unit test in JUnit format to reproduce the problem. The last line results in a NullPointerException.&lt;/p&gt;</comment>
                            <comment id="13964995" author="telcontar" created="Thu, 10 Apr 2014 04:44:48 +0000"  >&lt;p&gt;According to the documentation in Transformer.transform (the interface that is implemented), the exception should probably be IllegalArgumentException, if any.&lt;br/&gt;
The javadoc of related classes suggests this as well.&lt;/p&gt;</comment>
                            <comment id="13965805" author="tn" created="Thu, 10 Apr 2014 20:28:21 +0000"  >&lt;p&gt;This is not a bug.&lt;/p&gt;

&lt;p&gt;The constructor of SwitchTransformer states that the array of predicates must not contain null values:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     * @param predicates  array of predicates, cloned, no nulls
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but the provided array of predicates is an array with one null value.&lt;/p&gt;

&lt;p&gt;I think the way these tests are created are flawed:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        org.apache.commons.collections4.set.CompositeSet var1 = new org.apache.commons.collections4.set.CompositeSet(
                var0);
        org.apache.commons.collections4.functors.UniquePredicate var2 = new org.apache.commons.collections4.functors.UniquePredicate();
        org.apache.commons.collections4.Predicate[] var3 = new org.apache.commons.collections4.Predicate[] { var2 };
        java.lang.Object[] var4 = var1.toArray((java.lang.Object[]) var3);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here var1 is an empty set, whose contents are copied into an object array var4. But the toArray() method is called with an non-empty array, which will be modified by the toArray() call and result in this 1-element array with a null value.&lt;/p&gt;

&lt;p&gt;I fail to see what this tries to test, as the result of this operation will be in any case wrong&lt;/p&gt;</comment>
                            <comment id="13965982" author="telcontar" created="Thu, 10 Apr 2014 23:18:06 +0000"  >&lt;p&gt;Thank you for confirming this as a false positive.&lt;br/&gt;
Basically the tool we use generates random sequences of method calls. Parameters have valid types but may not always fulfill other requirements (entries being non-null, for example). We have filtered out other (simpler) cases ourselves from the bug reports, but we were not sure about this one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639514" name="BugReport2.java" size="1422" author="Telcontar" created="Thu, 10 Apr 2014 02:00:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Apr 2014 20:28:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uhjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386210</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-512] equals/hashCode mismatch</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-512</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;We used Randoop on the collection classes, which found several test cases where two objects are equal but their hash code differs.&lt;/p&gt;

&lt;p&gt;I will attach a file containing two test cases that are different; the other tests seem to be longer versions showing the same issue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS 10.9, Java 6 and Java 7&lt;/p&gt;</environment>
        <key id="12707621">COLLECTIONS-512</key>
            <summary>equals/hashCode mismatch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Telcontar">Cyrille Artho</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Apr 2014 01:56:30 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:14 +0000</updated>
                            <resolved>Fri, 2 Jan 2015 13:03:08 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Collection</component>
                    <component>Comparator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13964896" author="telcontar" created="Thu, 10 Apr 2014 01:57:34 +0000"  >&lt;p&gt;This file contains two unit tests (for JUnit) to reproduce the problems.&lt;/p&gt;</comment>
                            <comment id="13964975" author="telcontar" created="Thu, 10 Apr 2014 04:26:34 +0000"  >&lt;p&gt;We found another test case that does not seem to overlap with the existing tests. It shows the same issue but uses a different sequence with (mostly) different classes.&lt;/p&gt;</comment>
                            <comment id="13965911" author="tn" created="Thu, 10 Apr 2014 21:55:57 +0000"  >&lt;p&gt;Fixed the issue with the TransformingComparator in r1586477.&lt;/p&gt;</comment>
                            <comment id="13965925" author="tn" created="Thu, 10 Apr 2014 22:12:09 +0000"  >&lt;p&gt;The same wrong statement is also used in FixedOrderComparator, so this might be affected too.&lt;/p&gt;</comment>
                            <comment id="13991104" author="tn" created="Tue, 6 May 2014 20:42:36 +0000"  >&lt;p&gt;Fixed FixedOrderComparator in r1592874.&lt;/p&gt;</comment>
                            <comment id="14044595" author="brentworden" created="Thu, 26 Jun 2014 12:03:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tn&quot; class=&quot;user-hover&quot; rel=&quot;tn&quot;&gt;Thomas Neidhart&lt;/a&gt; Can this be marked as resolved?&lt;/p&gt;</comment>
                            <comment id="14044606" author="tn" created="Thu, 26 Jun 2014 12:26:36 +0000"  >&lt;p&gt;Not yet, as discussed here: &lt;a href=&quot;http://markmail.org/message/n5hmqap7z3ftv7jw&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://markmail.org/message/n5hmqap7z3ftv7jw&lt;/a&gt; we should document the behavior of equals for the decorators in collections.&lt;/p&gt;</comment>
                            <comment id="14262874" author="tn" created="Fri, 2 Jan 2015 13:03:08 +0000"  >&lt;p&gt;Added note to AbstractCollectionDecorator#equals in r1649014.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12765478">COLLECTIONS-543</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12639513" name="BugReport1.java" size="1869" author="Telcontar" created="Thu, 10 Apr 2014 01:57:34 +0000"/>
                            <attachment id="12639528" name="BugReport1_1.java" size="767" author="Telcontar" created="Thu, 10 Apr 2014 04:26:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Apr 2014 21:55:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385944</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uhjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386208</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-509] Clarify javadoc of CollectionBag</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-509</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The javadoc of CollectionBag should clarify which methods have changed wrt the original Bag interface.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12699628">COLLECTIONS-509</key>
            <summary>Clarify javadoc of CollectionBag</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Mar 2014 18:45:54 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:15 +0000</updated>
                            <resolved>Sat, 8 Mar 2014 18:47:22 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13924971" author="tn" created="Sat, 8 Mar 2014 18:47:22 +0000"  >&lt;p&gt;Done in r1575586.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377975</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1t4of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>378267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-507] ComparatorUtils.chainedComparator(..) should not force the objects to implement Comparable</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-507</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description></description>
                <environment></environment>
        <key id="12694830">COLLECTIONS-507</key>
            <summary>ComparatorUtils.chainedComparator(..) should not force the objects to implement Comparable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gersonk">Gerson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Feb 2014 20:29:10 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:17 +0000</updated>
                            <resolved>Wed, 12 Feb 2014 21:18:17 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>Comparator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13899587" author="tn" created="Wed, 12 Feb 2014 21:18:17 +0000"  >&lt;p&gt;That is quite a stupid mistake, fixed in r1567759.&lt;br/&gt;
Thanks for spotting and reporting this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Feb 2014 21:18:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373338</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sc6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373639</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-506] Result of CollectionUtils are different between version 3.2.1 and version 4.0</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-506</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;CollectionUtils V3 uses equals to compute results but not CollectionUtils v4 (it seems to use ==)&lt;/p&gt;

&lt;p&gt;The following exemple with subtract method :&lt;/p&gt;

&lt;p&gt; List&amp;lt;ObjectTest&amp;gt; listA = new ArrayList&amp;lt;ObjectTest&amp;gt;();&lt;br/&gt;
        List&amp;lt;ObjectTest&amp;gt; listB = new ArrayList&amp;lt;ObjectTest&amp;gt;();&lt;/p&gt;

&lt;p&gt;        listA.add(new ObjectTest(&quot;Test1&quot;));&lt;br/&gt;
        listA.add(new ObjectTest(&quot;Test2&quot;));&lt;br/&gt;
        listA.add(new ObjectTest(&quot;Test3&quot;));&lt;/p&gt;

&lt;p&gt;        listB.add(new ObjectTest(&quot;Test1&quot;));&lt;br/&gt;
        listB.add(new ObjectTest(&quot;Test2&quot;));&lt;/p&gt;


&lt;p&gt;        Collection&amp;lt;?&amp;gt; res1 = org.apache.commons.collections.CollectionUtils.subtract(listA, listB);&lt;br/&gt;
        System.out.println(&quot;Res1 size = &quot; +res1.size());&lt;br/&gt;
        Collection&amp;lt;?&amp;gt; res2 =  org.apache.commons.collections4.CollectionUtils.subtract(listA, listB);&lt;br/&gt;
        System.out.println(&quot;Res2 size = &quot; +res2.size());&lt;/p&gt;


&lt;p&gt;Produces this : &lt;br/&gt;
Res1 size = 1&lt;br/&gt;
Res2 size = 3&lt;/p&gt;

&lt;p&gt;The new behaviour is not useful. It would be better to have the V3 behaviour&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12686070">COLLECTIONS-506</key>
            <summary>Result of CollectionUtils are different between version 3.2.1 and version 4.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="anthonyC">Anthony Communier</reporter>
                        <labels>
                    </labels>
                <created>Sun, 22 Dec 2013 19:13:10 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:18 +0000</updated>
                            <resolved>Tue, 31 Dec 2013 16:25:11 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13855241" author="anthonyc" created="Sun, 22 Dec 2013 19:14:35 +0000"  >&lt;p&gt;This is the example&lt;/p&gt;</comment>
                            <comment id="13855249" author="tn" created="Sun, 22 Dec 2013 20:04:50 +0000"  >&lt;p&gt;I could not yet test your example but looking at the source of ObjectTest it looks like you did not implement hashCode properly.&lt;/p&gt;

&lt;p&gt;As the subtract method puts the items in a HashBag it is absolutely necessary that you follow the contract for Object#equals (see &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29&lt;/a&gt;) for more details.&lt;/p&gt;</comment>
                            <comment id="13855268" author="anthonyc" created="Sun, 22 Dec 2013 20:47:39 +0000"  >&lt;p&gt;You&apos;re right, it works well when hashCode is implemented properly.  Thank you.&lt;/p&gt;

&lt;p&gt;It would be nice to have a remark in javadoc to know the requirement in order to make CollectionUtils methods working. It could be a class or method comment or something like a migration guide or a warning.&lt;/p&gt;

&lt;p&gt;Thank you for those useful methods.&lt;/p&gt;

&lt;p&gt;Best regards&lt;/p&gt;</comment>
                            <comment id="13859551" author="tn" created="Tue, 31 Dec 2013 16:25:11 +0000"  >&lt;p&gt;Added clarification to the class javadoc of CollectionUtils in r1554554.&lt;/p&gt;</comment>
                            <comment id="13860143" author="anthonyc" created="Thu, 2 Jan 2014 11:34:45 +0000"  >&lt;p&gt;Thank you !&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12620095" name="test-common-collection.zip" size="2615" author="anthonyC" created="Sun, 22 Dec 2013 19:14:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 22 Dec 2013 20:04:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365027</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qx3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365335</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-504] CompositeMap should support compositing of maps of derived types</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-504</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I&apos;m attempting to composite two maps, one of which is a &lt;tt&gt;Map&amp;lt;String, String&amp;gt;&lt;/tt&gt; and the other of which is a &lt;tt&gt;Map&amp;lt;String, Object&amp;gt;&lt;/tt&gt;. I would have expected that I could composite them into a &lt;tt&gt;CompositeMap&amp;lt;String, Object&amp;gt;&lt;/tt&gt;, but the constructors of CompositeMap expect all of the maps being composited to have exactly the same type arguments.&lt;/p&gt;

&lt;p&gt;That is, I think the constructors should take arguments of &lt;tt&gt;Map&amp;lt;? extends K, ? extends V&amp;gt;&lt;/tt&gt; instead of what they currently have of &lt;tt&gt;Map&amp;lt;K, V&amp;gt;&lt;/tt&gt;, much like most collection methods, since there shouldn&apos;t be a problem accepting type arguments that are subtypes of the composite map types.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682510">COLLECTIONS-504</key>
            <summary>CompositeMap should support compositing of maps of derived types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="petercooperjr-efi">Peter Cooper Jr.</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Dec 2013 20:33:22 +0000</created>
                <updated>Wed, 4 Dec 2013 15:32:10 +0000</updated>
                            <resolved>Wed, 4 Dec 2013 12:56:10 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13838246" author="tn" created="Tue, 3 Dec 2013 22:07:56 +0000"  >&lt;p&gt;Unfortunately this would only be possible for an immutable CompositeMap. If there is a mutator defined, it would be possible that an unexpected type may appear in a composited map, e.g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        Map&amp;lt;String, String&amp;gt; map1 = new HashMap&amp;lt;String, String&amp;gt;();
        Map&amp;lt;String, Object&amp;gt; map2 = new HashMap&amp;lt;String, Object&amp;gt;();
        
        map1.put(&quot;key1&quot;, &quot;value1&quot;);
        map2.put(&quot;key2&quot;, Integer.valueOf(1));
        
        CompositeMap&amp;lt;String, Object&amp;gt; composite =
                new CompositeMap&amp;lt;String, Object&amp;gt;(map1, map2, new CompositeMap.MapMutator&amp;lt;String, Object&amp;gt;() {

                    public Object put(CompositeMap&amp;lt;String, Object&amp;gt; map, Map&amp;lt;String, Object&amp;gt;[] composited, String key,
                            Object value) {
                        return composited[1].put(key, value);
                    }
        });

        composite.put(&quot;key3&quot;, Integer.valueOf(2));
        
        for (Map.Entry&amp;lt;String, String&amp;gt; entry : map1.entrySet()) {
            System.out.println(entry.getValue());
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will result in&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.ClassCastException: java.lang.Integer
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So I do not think that this is a good idea unless we add Immutable versions of various collection types similar to what guava does.&lt;/p&gt;</comment>
                            <comment id="13838857" author="petercooperjr-efi" created="Wed, 4 Dec 2013 12:54:58 +0000"  >&lt;p&gt;Oh, of course. The maps I was trying to use were in fact immutable, which is why I didn&apos;t think of that, though it&apos;s obvious in retrospect. Thank you for your time.&lt;/p&gt;</comment>
                            <comment id="13838982" author="tn" created="Wed, 4 Dec 2013 15:32:10 +0000"  >&lt;p&gt;What you proposed makes sense, but is not possible atm.&lt;/p&gt;

&lt;p&gt;In case you would like to see Immutable collections also in Apache Commons Collections you could already create a feature request.&lt;br/&gt;
I think there are surely use-cases for them and the memory savings can be crucial in various applications.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Dec 2013 22:07:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361767</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qczz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362064</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-501] Rename MultiKeyMap.remove(K key1, K key2) to avoid clashes with newly introduced default methods in Java 8</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-501</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Java 8 will introduce new default methods for the Map interface which clash with the existing method &quot;V remove(K key1, K key2)&quot; in our MultiKeyMap interface.&lt;/p&gt;

&lt;p&gt;To avoid future problems rename the method (and other similar methods with more multi key arguments) to a more specific version:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;V removeMultiKey(K key1, K key2, ...)&lt;/li&gt;
	&lt;li&gt;V removeKey(K key1, K key2, ...)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12679637">COLLECTIONS-501</key>
            <summary>Rename MultiKeyMap.remove(K key1, K key2) to avoid clashes with newly introduced default methods in Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Nov 2013 16:04:55 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:39 +0000</updated>
                            <resolved>Sun, 17 Nov 2013 18:31:09 +0000</resolved>
                                    <version>4.0-alpha1</version>
                                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13824925" author="tn" created="Sun, 17 Nov 2013 18:31:09 +0000"  >&lt;p&gt;Renamed method to removeMultiKey in r1542782.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358997</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pvwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359287</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-500] Rename MultiMap.remove(K, V) to avoid clashes with newly introduced default methods in Java 8</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-500</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Java 8 will introduce new default methods for the Map interface which clash with the existing method &quot;V remove(K key, V value)&quot; in our MultiMap interface.&lt;/p&gt;

&lt;p&gt;To avoid future problems rename the method to a more specific version and change the return type to be more logical. Brief discussion on the ml favored either:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;boolean removeMapping(K key, V value)&lt;/li&gt;
	&lt;li&gt;boolean removeValue(K key, V value)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12679636">COLLECTIONS-500</key>
            <summary>Rename MultiMap.remove(K, V) to avoid clashes with newly introduced default methods in Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Nov 2013 16:02:44 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:29 +0000</updated>
                            <resolved>Sun, 17 Nov 2013 17:10:53 +0000</resolved>
                                    <version>4.0-alpha1</version>
                                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13824902" author="tn" created="Sun, 17 Nov 2013 17:10:53 +0000"  >&lt;p&gt;Changed to boolean removeMapping(K, V) in r1542763.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358996</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pvw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-498] CollectionBag should respect removeAll / retainAll contract of decorated bags</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-498</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In case the decorated collection does not support removal, i.e. throws an UnsupportedOperationException, CollectionBag does not respect this in case a null argument was specified.&lt;/p&gt;

&lt;p&gt;To be consistent with the testing framework, CollectionBag shall delegate the call to the decorated collection in such cases.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12678650">COLLECTIONS-498</key>
            <summary>CollectionBag should respect removeAll / retainAll contract of decorated bags</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Nov 2013 19:46:20 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:26 +0000</updated>
                            <resolved>Mon, 11 Nov 2013 20:29:27 +0000</resolved>
                                    <version>4.0-alpha1</version>
                                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13819337" author="tn" created="Mon, 11 Nov 2013 20:29:27 +0000"  >&lt;p&gt;Fixed in r1540833.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358017</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ppuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358307</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-496] UnmodifiableBoundedCollection does not implement Unmodifiable marker interface</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-496</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The UnmodifiableBoundedCollection does not implement the Unmodifiable interface.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12678602">COLLECTIONS-496</key>
            <summary>UnmodifiableBoundedCollection does not implement Unmodifiable marker interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Nov 2013 16:42:34 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:40 +0000</updated>
                            <resolved>Mon, 11 Nov 2013 16:47:32 +0000</resolved>
                                    <version>4.0-alpha1</version>
                                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13819108" author="tn" created="Mon, 11 Nov 2013 16:47:32 +0000"  >&lt;p&gt;Done in r1540766.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>357969</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ppk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358259</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-495] UnmodifiableTrie should not decorate an already unmodifiable Trie</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-495</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;An already unmodifiable trie was decorated again.&lt;br/&gt;
To be consistent with the other Unmodifiable wrappers, in this case the object itself shall be returned.&lt;/p&gt;

&lt;p&gt;Also the return type shall be changed to Trie.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12678600">COLLECTIONS-495</key>
            <summary>UnmodifiableTrie should not decorate an already unmodifiable Trie</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Nov 2013 16:25:17 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:54 +0000</updated>
                            <resolved>Mon, 11 Nov 2013 16:30:27 +0000</resolved>
                                    <version>4.0-alpha1</version>
                                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13819092" author="tn" created="Mon, 11 Nov 2013 16:30:27 +0000"  >&lt;p&gt;Fixed in r1540763.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>357967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ppjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358257</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-487] CollectionUtils.removeAll is not work as expected</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-487</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/collections/tags/COLLECTIONS_3_2_1/src/java/org/apache/commons/collections/CollectionUtils.java?revision=1211567&amp;amp;view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/commons/proper/collections/tags/COLLECTIONS_3_2_1/src/java/org/apache/commons/collections/CollectionUtils.java?revision=1211567&amp;amp;view=markup&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Line: 1122&lt;br/&gt;
Problem:&lt;br/&gt;
The method called &quot;removeAll&quot;, but call &quot;retainAll&quot; internally.&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 1.6&lt;/p&gt;</environment>
        <key id="12674741">COLLECTIONS-487</key>
            <summary>CollectionUtils.removeAll is not work as expected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="xcooper">Cooper</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Oct 2013 07:48:55 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:52 +0000</updated>
                            <resolved>Mon, 21 Oct 2013 07:56:23 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="360">0.1h</timeoriginalestimate>
                            <timeestimate seconds="360">0.1h</timeestimate>
                                        <comments>
                            <comment id="13800444" author="tn" created="Mon, 21 Oct 2013 07:55:51 +0000"  >&lt;p&gt;You have found the most prominent bug in collections-3.2.1, which has been fixed for the upcoming 4.0 release.&lt;/p&gt;

&lt;p&gt;Although this bug alone would be enough to justify a 3.2.2 release &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12347178">COLLECTIONS-219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Oct 2013 07:55:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354363</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1p3cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-482] Transformed* classes require double the number of generic qualifiers</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-482</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Transformed* classes currently have the same number of generic qualifiers as their parent interfaces (e.g. one for TransformedList and two for TransformedMap). In order to handle transformations between different types, transforming collections should specify both input and output classes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12667863">COLLECTIONS-482</key>
            <summary>Transformed* classes require double the number of generic qualifiers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hwaite">Hollis Waite</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Sep 2013 18:16:52 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:20 +0000</updated>
                            <resolved>Tue, 10 Sep 2013 19:55:16 +0000</resolved>
                                    <version>4.0-alpha1</version>
                                                    <component>Bag</component>
                    <component>Collection</component>
                    <component>List</component>
                    <component>Map</component>
                    <component>Set</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13763421" author="tn" created="Tue, 10 Sep 2013 19:55:16 +0000"  >&lt;p&gt;This would be a great thing to have, but unfortunately it would break the Collection contract, see also the referenced issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12435448">COLLECTIONS-333</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Sep 2013 19:55:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nz13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>348098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-475] Wrong timeout handling in expiration policies of PassiveExpiringMap</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-475</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The timeunit parameter in the ctor of ConstantTimeToLiveExpirationPolicy is not used.&lt;/p&gt;

&lt;p&gt;Additionally, the validateAndConvertToMillis method is wrong, it should be changed like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    private static long validateAndConvertToMillis(final long timeToLive,
                                                   final TimeUnit timeUnit) {
  if (timeUnit == null) {
    throw new IllegalArgumentException(&quot;Time unit must not be null&quot;);
  }
  return TimeUnit.MILLISECONDS.convert(timeToLive, timeUnit);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12655845">COLLECTIONS-475</key>
            <summary>Wrong timeout handling in expiration policies of PassiveExpiringMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jul 2013 21:04:34 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:32 +0000</updated>
                            <resolved>Sun, 14 Jul 2013 19:09:39 +0000</resolved>
                                    <version>4.0-alpha1</version>
                                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13708103" author="tn" created="Sun, 14 Jul 2013 19:09:39 +0000"  >&lt;p&gt;Fixed in r1503029.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336120</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lz7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336444</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-474] Exception in ListOrderedMap#putAll if map contains null values</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-474</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Dear apache developers, thanks for the great project. Recently, I encountered an IndexOutOfBoundsException in ListOrderedMap in the latest revision (r1495998) with the crash stack trace: &lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index: 2, Size: 1&lt;br/&gt;
	at java.util.ArrayList.add(ArrayList.java:367)&lt;br/&gt;
	at org.apache.commons.collections4.map.ListOrderedMap.put(ListOrderedMap.java:448)&lt;br/&gt;
	at org.apache.commons.collections4.map.ListOrderedMap.putAll(ListOrderedMap.java:246)&lt;br/&gt;
	at Test.main(Test.java:15)&lt;/p&gt;

&lt;p&gt;I&apos;ve also attached a test case that can reproduce this crash.&lt;/p&gt;

&lt;p&gt;I think this test case actually reveals the bug reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-411&quot; title=&quot;Exception in ListOrderedMap.putAll()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-411&quot;&gt;&lt;del&gt;COLLECTIONS-411&lt;/del&gt;&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-411&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/COLLECTIONS-411&lt;/a&gt;). However, it seems that the original patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-411&quot; title=&quot;Exception in ListOrderedMap.putAll()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-411&quot;&gt;&lt;del&gt;COLLECTIONS-411&lt;/del&gt;&lt;/a&gt; missed a corner case.&lt;/p&gt;

&lt;p&gt;Could you please check if this is indeed a bug? Thanks!&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.7.0_09&lt;/p&gt;</environment>
        <key id="12654559">COLLECTIONS-474</key>
            <summary>Exception in ListOrderedMap#putAll if map contains null values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cning">Ning Chen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Jun 2013 18:22:54 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:25 +0000</updated>
                            <resolved>Sun, 30 Jun 2013 20:10:32 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13692251" author="tn" created="Mon, 24 Jun 2013 18:55:12 +0000"  >&lt;p&gt;Thanks for the report.&lt;/p&gt;

&lt;p&gt;The putAll javadoc does not mention it explicitly, but the provided index has to be in range (see javadoc for put(int, Object, Object)) otherwise an IndexOutOfBoundsException will be thrown. So the behavior is actually correct, but the javadoc should be updated.&lt;/p&gt;</comment>
                            <comment id="13692257" author="sebb@apache.org" created="Mon, 24 Jun 2013 18:59:13 +0000"  >&lt;p&gt;Looks like a bug to me, because the size() is 2 just before the putAll().&lt;/p&gt;

&lt;p&gt;The problem is that the code assumes that the put method will only return null if the key was not replaced; however that is only true if the original value was not null. For maps that allow null, the return value of put cannot be used to determine if the key was replaced.&lt;/p&gt;</comment>
                            <comment id="13692264" author="tn" created="Mon, 24 Jun 2013 19:06:06 +0000"  >&lt;p&gt;Inserting with an index &amp;gt;= size() usually does not work in list-based collections, so I think the behavior is correct.&lt;br/&gt;
What worries me more is that the exception in put is thrown &lt;b&gt;after&lt;/b&gt; the collection has been modified, leaving it in an inconsistent state.&lt;/p&gt;

&lt;p&gt;We should check the index first and throw the exception if it is out-of-range.&lt;/p&gt;</comment>
                            <comment id="13692281" author="sebb@apache.org" created="Mon, 24 Jun 2013 19:20:56 +0000"  >&lt;p&gt;I&apos;ve just added two tests - one uses null values (as per the issue description) and the other uses non-null values.&lt;/p&gt;

&lt;p&gt;Only the null value test fails, so I think there is a bug; easy to fix.&lt;br/&gt;
Just replace&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; V old = put(index, entry.getKey(), entry.getValue());
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (old == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; contains = containsKey(entry.getKey());
put(index, entry.getKey(), entry.getValue());
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!contains) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13692291" author="tn" created="Mon, 24 Jun 2013 19:32:19 +0000"  >&lt;p&gt;Ok agree, we can fix this in the next RC if one is needed, or for alpha2.&lt;/p&gt;</comment>
                            <comment id="13692299" author="cning" created="Mon, 24 Jun 2013 19:39:39 +0000"  >&lt;p&gt;Wow! Thanks for the quick responses! &lt;/p&gt;

&lt;p&gt;Just to make sure, after applying the patch, is the &quot;index == size&quot; case considered in-range (no exception raised)? &lt;/p&gt;

&lt;p&gt;FYI, it is also possible to reproduce the exception even when &quot;index &amp;lt; size&quot;: &lt;br/&gt;
    Object key1 = new Object();&lt;br/&gt;
    Object key2 = new Object();&lt;br/&gt;
    Object key3 = new Object();&lt;br/&gt;
    HashMap&amp;lt;Object, Object&amp;gt; map = new HashMap&amp;lt;Object, Object&amp;gt;();&lt;br/&gt;
    map.put(key1, null);&lt;br/&gt;
    map.put(key2, null);&lt;br/&gt;
    map.put(key3, null);&lt;/p&gt;

&lt;p&gt;    ListOrderedMap&amp;lt;Object, Object&amp;gt; listMap = new ListOrderedMap&amp;lt;Object, Object&amp;gt;();&lt;br/&gt;
    listMap.put(key1, null);&lt;br/&gt;
    listMap.put(key2, null);&lt;br/&gt;
    listMap.put(key3, null);&lt;br/&gt;
    listMap.putAll(2, map);&lt;/p&gt;</comment>
                            <comment id="13692300" author="tn" created="Mon, 24 Jun 2013 19:42:13 +0000"  >&lt;p&gt;Looking at List.add(int, Object), the supported range is index &amp;gt;= 0 &amp;amp;&amp;amp; index &amp;lt;= size(), so I guess we should do the same here.&lt;/p&gt;</comment>
                            <comment id="13692308" author="sebb@apache.org" created="Mon, 24 Jun 2013 19:53:01 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1496182&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/r1496182&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-474&quot; title=&quot;Exception in ListOrderedMap#putAll if map contains null values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-474&quot;&gt;&lt;del&gt;COLLECTIONS-474&lt;/del&gt;&lt;/a&gt; Exception in ListOrderedMap#putAll if map contains null values&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/collections/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/collections/trunk/src/main/java/org/apache/commons/collections4/map/ListOrderedMap.java&lt;/p&gt;</comment>
                            <comment id="13692315" author="sebb@apache.org" created="Mon, 24 Jun 2013 19:58:39 +0000"  >&lt;p&gt;putAll calls put before it changes anything, so I think we can leave the index check to the put method.&lt;/p&gt;</comment>
                            <comment id="13696405" author="tn" created="Sun, 30 Jun 2013 20:10:32 +0000"  >&lt;p&gt;Will be part of 4.0-alpha1 RC2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12589457" name="Test.java" size="536" author="cning" created="Mon, 24 Jun 2013 18:23:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Jun 2013 18:55:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lrbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335160</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-473] AbstractCollectionDecorator.decorated() should not be used internally</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-473</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;AbstractCollectionDecorator.decorated() is used internally to access the collection.&lt;br/&gt;
However, the method is not final, so subclasses could override it.&lt;/p&gt;

&lt;p&gt;Yet the field is also exposed (protected).&lt;/p&gt;

&lt;p&gt;This is inconsistent.&lt;/p&gt;

&lt;p&gt;Is there any use-case for overriding the collection to use a different one?&lt;br/&gt;
If so, having direct access as well is likely to cause problems.&lt;/p&gt;

&lt;p&gt;I think it would be better to use the field directly internally.&lt;br/&gt;
The class Javadoc says the calls are forwarded to the underlying collection, but that is not strictly true if decorated() is overridden.&lt;/p&gt;

&lt;p&gt;If it is intended to allow this to be overridden, then the field needs to be protected against arbitrary read/write access.&lt;/p&gt;

&lt;p&gt;The field should probably be made private with a setter for use by deserialization only.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653286">COLLECTIONS-473</key>
            <summary>AbstractCollectionDecorator.decorated() should not be used internally</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jun 2013 22:17:22 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:25 +0000</updated>
                            <resolved>Tue, 18 Jun 2013 20:29:17 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13686497" author="tn" created="Tue, 18 Jun 2013 08:28:30 +0000"  >&lt;p&gt;Subclasses do override it to return the actual collection type they are decorating, look at AbstractBagDecorator for example, it returns a Bag instead of a Collection. Otherwise you would have to cast every result of decorated().&lt;/p&gt;

&lt;p&gt;Also I do not think this classifies as a bug, the purpose of the abstract classes is to simplify the implementation of various decorators and not to safe-guard for anything another developer could do with them. In fact somebody could also alter the fields via reflection.&lt;/p&gt;</comment>
                            <comment id="13686544" author="sebb@apache.org" created="Tue, 18 Jun 2013 10:04:40 +0000"  >&lt;p&gt;Replacing &quot;collection&quot; with &quot;decorated()&quot; in sub-classes does not affect the casting issue as they are both of type Collection&amp;lt;E&amp;gt;.&lt;/p&gt;

&lt;p&gt;The problem with allowing direct access is that a grand-child sub-class can accidentally subvert a child sub-class.&lt;/p&gt;

&lt;p&gt;For example, if one wanted to create a logging layer, it could not guarantee that all sub-class accesses were logged.&lt;/p&gt;

&lt;p&gt;It would also potentially allow the field to be made final later, by suitable changes to the deserialisation.&lt;/p&gt;

&lt;p&gt;Exposing the field now means it &lt;b&gt;cannot later be hidden&lt;/b&gt; whilst maintaining compatibility.&lt;/p&gt;

&lt;p&gt;Hiding the field provides several benefits; any down-sides seem to me to be very minor in comparison.&lt;/p&gt;

&lt;p&gt;It will still be possible to deliberately subvert the class via reflection, but at least casual misuse is avoided.&lt;/p&gt;</comment>
                            <comment id="13687042" author="tn" created="Tue, 18 Jun 2013 18:30:17 +0000"  >&lt;p&gt;As decorated() is not final, sub-classes can alter the return type as in AbstractBagDecorator, thus avoiding the necessity to cast. Changing this does not make sense imho.&lt;/p&gt;

&lt;p&gt;Hiding the collection field and creating a protected setter for de-serialization support would be ok, but would require the effort to change of course.&lt;/p&gt;</comment>
                            <comment id="13687124" author="sebb@apache.org" created="Tue, 18 Jun 2013 20:05:13 +0000"  >&lt;p&gt;Yes, classes could override decorated() to change the return type; that&apos;s exactly what the AbstractBagDecorator and AbstractSortedBagDecorator sub-classes do; they don&apos;t access collection directly at all. I&apos;m just suggesting that the rest of the classes behave the same way, at least as far as not accessing collections directly.&lt;/p&gt;

&lt;p&gt;Since the overload decorated() method should make it easier for subclasses, that seems like a good idea.&lt;/p&gt;

&lt;p&gt;I&apos;m happy to make the changes, but I don&apos;t want to do it if they will then need to be reverted.&lt;/p&gt;

&lt;p&gt;==&lt;/p&gt;

&lt;p&gt;What about the main point of this JIRA, i.e. using collection internally rather than decorated()?&lt;br/&gt;
Is that OK to change?&lt;/p&gt;</comment>
                            <comment id="13687135" author="tn" created="Tue, 18 Jun 2013 20:11:57 +0000"  >&lt;p&gt;I have already done the changes in r1494280:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;made the collection field private&lt;/li&gt;
	&lt;li&gt;added a protected setter with javadoc stating that it should only be used for de-serialization&lt;/li&gt;
	&lt;li&gt;updated all other decorators to the the getters/setters instead of the plain field.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Is it ok like that?&lt;/p&gt;</comment>
                            <comment id="13687141" author="sebb@apache.org" created="Tue, 18 Jun 2013 20:22:36 +0000"  >&lt;p&gt;Yes, thanks; that makes it more future proof.&lt;/p&gt;

&lt;p&gt;I think it&apos;s odd that the class uses decorated() internally, but the Javadoc does say so, so I guess it needs to remain the way it is.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jun 2013 08:28:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333609</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ljsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333937</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-472] wasted work in AbstractMapBag.containsAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-472</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The problem appears in version 3.2.1 and in revision 1489197.  I&lt;br/&gt;
attached a one-line patch that fixes it.&lt;/p&gt;

&lt;p&gt;In method &quot;AbstractMapBag.containsAll&quot;, the loop over&lt;br/&gt;
&quot;other.uniqueSet()&quot; should return immediately after &quot;result&quot; becomes&lt;br/&gt;
&quot;false&quot;, because &quot;result = result &amp;amp;&amp;amp; contains;&quot; can never become&lt;br/&gt;
&quot;true&quot; again.  All the iterations after &quot;result&quot; becomes &quot;false&quot; do&lt;br/&gt;
not perform any useful work, at best they just set &quot;result&quot; again to&lt;br/&gt;
&quot;false&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;any&lt;/p&gt;</environment>
        <key id="12650761">COLLECTIONS-472</key>
            <summary>wasted work in AbstractMapBag.containsAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                            <label>patch,</label>
                            <label>performance</label>
                    </labels>
                <created>Mon, 3 Jun 2013 22:59:35 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:47 +0000</updated>
                            <resolved>Sun, 9 Jun 2013 18:35:43 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Bag</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13679129" author="tn" created="Sun, 9 Jun 2013 18:35:43 +0000"  >&lt;p&gt;Applied in r1491258. Thanks for the patch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12585980" name="patch.diff" size="602" author="adriannistor" created="Mon, 3 Jun 2013 22:59:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 9 Jun 2013 18:35:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l4an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-470] TransformedMap class exists in two packages</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-470</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;It&apos;s very confusing to have two different TransformedMap classes in different packages: map, splitmap.&lt;br/&gt;
Indeed the Test class has to take special care with the serialised file name to avoid a clash.&lt;/p&gt;

&lt;p&gt;Since we can break binary compat in v4, now is the time to rename one of the classes.&lt;/p&gt;

&lt;p&gt;Perhaps rename as follows:&lt;br/&gt;
splitmap/TransformedMap =&amp;gt; splitmap/TransformedGetPutMap&lt;/p&gt;</description>
                <environment></environment>
        <key id="12647520">COLLECTIONS-470</key>
            <summary>TransformedMap class exists in two packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 May 2013 15:15:22 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:31 +0000</updated>
                            <resolved>Tue, 11 Jun 2013 20:29:41 +0000</resolved>
                                    <version>4.x</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13657344" author="tn" created="Tue, 14 May 2013 18:38:40 +0000"  >&lt;p&gt;Its in the splitmap package, so why not calling it TransformedSplitMap ?&lt;/p&gt;</comment>
                            <comment id="13680635" author="tn" created="Tue, 11 Jun 2013 20:29:41 +0000"  >&lt;p&gt;In r1491944, renamed to TransformedSplitMap.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 May 2013 18:38:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kkkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>328220</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-468] Change Bag interface and implementations to conform to Collection interface</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-468</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Several methods of the Bag interface do not conform to the Collection interface (e.g. add, remove, containsAll, removeAll, retainAll).&lt;br/&gt;
This should be fixed for 4.0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12647374">COLLECTIONS-468</key>
            <summary>Change Bag interface and implementations to conform to Collection interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 May 2013 20:57:15 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:47 +0000</updated>
                            <resolved>Mon, 17 Jun 2013 21:06:37 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13656448" author="tn" created="Mon, 13 May 2013 22:16:09 +0000"  >&lt;p&gt;Attached patch with the proposed changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;update Bag interface to conform to Collection contract&lt;/li&gt;
	&lt;li&gt;update AbstractMapBag&lt;/li&gt;
	&lt;li&gt;update unit tests to inherit from AbstractCollectionTest&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13656474" author="ebourg" created="Mon, 13 May 2013 22:39:31 +0000"  >&lt;p&gt;The change of return value on the add method bothers me. I have code that relies on this behavior and I think that&apos;s an important feature of the Bag interface.&lt;/p&gt;</comment>
                            <comment id="13656489" author="tn" created="Mon, 13 May 2013 22:53:27 +0000"  >&lt;p&gt;We obviously do not want to copy guava, but their MultiSet does conform to the Collection contract.&lt;/p&gt;</comment>
                            <comment id="13656832" author="tn" created="Tue, 14 May 2013 05:31:50 +0000"  >&lt;p&gt;Another thing: we could also add a decorator which mimics the old behavior?&lt;/p&gt;</comment>
                            <comment id="13656849" author="ebourg" created="Tue, 14 May 2013 06:20:37 +0000"  >&lt;p&gt;Or a decorator that mimics a real collection?&lt;/p&gt;</comment>
                            <comment id="13679125" author="tn" created="Sun, 9 Jun 2013 18:18:27 +0000"  >&lt;p&gt;Attached a working example of a BagAdapter which provides an adapter of the Bag interface to the newly proposed Multiset interface.&lt;/p&gt;

&lt;p&gt;The Multiset interface is identical to the Bag interface with the difference that it conforms to the Collection super-interface.&lt;/p&gt;</comment>
                            <comment id="13685986" author="tn" created="Mon, 17 Jun 2013 21:06:37 +0000"  >&lt;p&gt;In r1493938 I have added a CompliantBag decorator which makes the decorated bag to comply with the Collection contract.&lt;/p&gt;</comment>
                            <comment id="13701103" author="tn" created="Fri, 5 Jul 2013 20:22:30 +0000"  >&lt;p&gt;Renamed to CollectionBag after discussion on ml (done in r1500007).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12586961" name="BagAdapter.java" size="5997" author="tn" created="Sun, 9 Jun 2013 18:18:27 +0000"/>
                            <attachment id="12583016" name="COLLECTIONS-468.patch" size="21802" author="tn" created="Mon, 13 May 2013 22:16:09 +0000"/>
                            <attachment id="12586962" name="Multiset.java" size="7248" author="tn" created="Sun, 9 Jun 2013 18:25:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 May 2013 22:39:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327730</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kjnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>328074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-461] splitmap.TransformedMap is not really a Map</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-461</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;splitmap.TransformedMap is part of the Get/Put hierarchy, but it does not behave like a proper Java Map. &lt;/p&gt;

&lt;p&gt;In particular, java.util.Map.put(K, V) returns V.&lt;br/&gt;
However the collections Put interface returns Object.&lt;br/&gt;
As far as I can tell, this was done in order to be able to include TransformedMap in the hiearchy. But the side effect is to break the generics for all the non-transformer maps in the hierarchy.&lt;/p&gt;

&lt;p&gt;Maybe there should be a separate PutTransformed interface which has the appropriate generic types, i.e.&lt;/p&gt;

&lt;p&gt;public T put(K key, V value)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12646188">COLLECTIONS-461</key>
            <summary>splitmap.TransformedMap is not really a Map</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 May 2013 10:16:29 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:42 +0000</updated>
                            <resolved>Tue, 14 May 2013 20:02:40 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13656472" author="mbenson" created="Mon, 13 May 2013 22:39:01 +0000"  >&lt;p&gt;What value would one return?&lt;/p&gt;</comment>
                            <comment id="13656484" author="tn" created="Mon, 13 May 2013 22:45:09 +0000"  >&lt;p&gt;I just tried it out myself, and it seems to work as expected:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        Map&amp;lt;Integer, String&amp;gt; map = new HashMap&amp;lt;Integer, String&amp;gt;();
        TransformedMap&amp;lt;Integer, Integer, String, String&amp;gt; mp = TransformedMap.transformingMap(map,
                new Transformer&amp;lt;Integer, Integer&amp;gt;() {

                    public Integer transform(Integer input) {
                        return input + 1;
                    }
            
                }, new Transformer&amp;lt;String, String&amp;gt;() {
                    
                    public String transform(String input) {
                        return &quot;value:&quot; + input;
                    }
                    
                });

        String old = mp.put(1, &quot;1&quot;);
        System.out.println(old);
        Put&amp;lt;Integer, String&amp;gt; put = mp;
        System.out.println(put);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13656488" author="mbenson" created="Mon, 13 May 2013 22:52:45 +0000"  >&lt;p&gt;Yes, but you didn&apos;t transform the keys and/or values to different &lt;b&gt;types&lt;/b&gt;.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13656497" author="tn" created="Mon, 13 May 2013 22:59:03 +0000"  >&lt;p&gt;well right, but this does not change anything:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        Map&amp;lt;String, String&amp;gt; map = new HashMap&amp;lt;String, String&amp;gt;();
        TransformedMap&amp;lt;Integer, String, Integer, String&amp;gt; mp = TransformedMap.transformingMap(map,
                new Transformer&amp;lt;Integer, String&amp;gt;() {

                    public String transform(Integer input) {
                        return String.valueOf(input + 1);
                    }
            
                }, new Transformer&amp;lt;Integer, String&amp;gt;() {
                    
                    public String transform(Integer input) {
                        return &quot;value:&quot; + input;
                    }
                    
                });

        String old = mp.put(1, 1);
        System.out.println(old);
        Put&amp;lt;Integer, Integer&amp;gt; put = mp;
        System.out.println(put);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What I wanted to test is whether the put returns Object or the given type V, which it does &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13656508" author="mbenson" created="Mon, 13 May 2013 23:17:45 +0000"  >&lt;p&gt;Riight... I hadn&apos;t looked at this stuff in years.  &lt;tt&gt;TransformedMap&lt;/tt&gt; narrows the RT from &lt;tt&gt;Object&lt;/tt&gt; to return &lt;tt&gt;V&lt;/tt&gt; from &lt;tt&gt;#put(J, U)&lt;/tt&gt; and in that sense will never behave like a regular &lt;tt&gt;Map&lt;/tt&gt;--my point being that we don&apos;t know how to &quot;untransform&quot; the value back to the &lt;tt&gt;U&lt;/tt&gt; type.  Returning the value actually contained in the target map is the best we can do.  The proposed &lt;tt&gt;#putTransformed()&lt;/tt&gt; method would still suffer the same problem:  no way to get back to a &lt;tt&gt;U&lt;/tt&gt; type from the &lt;tt&gt;V&lt;/tt&gt; contained in the decorated &lt;tt&gt;Map&lt;/tt&gt;.  Is the issue that &lt;tt&gt;TransformedMap&lt;/tt&gt; is still named &amp;#42;Map?  It was my intent that placing it in the &lt;tt&gt;splitmap&lt;/tt&gt; subpackage would, along with &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections4/splitmap/package-info.java?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections4/splitmap/package-info.java?view=markup&lt;/a&gt;, make the intent clear: namely, that a &quot;split map&quot; is like a &quot;map&quot; but is really a combination of &lt;tt&gt;Get&lt;/tt&gt;/&lt;tt&gt;Put&lt;/tt&gt; with no guarantees as to the type assignability between the two.  This was the only approach I found at the time to allow the preservation of the functionality of &lt;tt&gt;TransformedMap&lt;/tt&gt; while also permitting it to be fully genericized.&lt;/p&gt;</comment>
                            <comment id="13656536" author="sebb@apache.org" created="Mon, 13 May 2013 23:42:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is the issue that TransformedMap is still named *Map?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, the problem here is that the &quot;real&quot; Map classes are compromised because Put#put(K, V) returns Object rather than V.&lt;br/&gt;
The Put interface is not exactly the same as the &quot;write&quot; subset of java.util.Map.&lt;/p&gt;</comment>
                            <comment id="13656547" author="mbenson" created="Mon, 13 May 2013 23:51:57 +0000"  >&lt;p&gt;I&apos;m still not connecting the dots as to how the &quot;real&quot; Maps are compromised.  &lt;tt&gt;TransformedMap&lt;/tt&gt; isn&apos;t a &lt;tt&gt;Map&lt;/tt&gt;.  It&apos;s not intended to be plugged in as one.  Rather, if you need to be agnostic to whether you have a &lt;tt&gt;Map&lt;/tt&gt; or a &lt;tt&gt;Put&lt;/tt&gt; and a &lt;tt&gt;Get&lt;/tt&gt;, you can program to the &lt;tt&gt;Put&lt;/tt&gt;/&lt;tt&gt;Get&lt;/tt&gt; APIs and use any of the &lt;tt&gt;IterableMap&lt;/tt&gt; impls provided by &lt;tt&gt;[collections]&lt;/tt&gt; to implement these as well.  By extending &lt;tt&gt;Map&lt;/tt&gt; and &lt;tt&gt;Put&lt;/tt&gt;, &lt;tt&gt;IterableMap&lt;/tt&gt; forces the RT of &lt;tt&gt;#put()&lt;/tt&gt; to be narrowed to &lt;tt&gt;V&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13657116" author="sebb@apache.org" created="Tue, 14 May 2013 15:08:34 +0000"  >&lt;p&gt;Sorry, I cannot seem to find the problem myself either now. Not sure what triggered the original issue anymore.&lt;br/&gt;
As you write above, the fact that IterableMap extends Map as well as Put solves the problem of the return type (RT) from put().&lt;/p&gt;

&lt;p&gt;However, it is still the case that Put is not exactly a subset of Map. &lt;br/&gt;
Using Put rather than Map means that the RT of put() is Object and may have to be cast. &lt;br/&gt;
It would be better if this could be avoided.&lt;/p&gt;

&lt;p&gt;If Put cannot be fixed, then I think the Put#put() Javadoc needs to make this difference clear.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Maybe the best would be to fix the Javadoc now, and adjust as necessary later.&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13657369" author="tn" created="Tue, 14 May 2013 18:49:23 +0000"  >&lt;p&gt;Ok to add the following note to the javadoc of Put:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; * NOTE: the &quot;write&quot; interface of a {@link Map} may have different types
 * compared to the &quot;read&quot; part, thus {@link #put(Object, Object)} must return
 * {@link Object} as the actual value type can not be determined.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13657403" author="mbenson" created="Tue, 14 May 2013 19:20:12 +0000"  >&lt;p&gt;Hrm... close, what about:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; * NOTE: in the original {@link Map} interface, {@link Map#put(Object, Object)} is known to have the same
 * return type as {@link Map#get(Object)}, namely {@code V}.  {@link Put} makes no assumptions in this
 * regard (there is no association with, nor even knowledge of, a &quot;reading&quot; interface) and thus defines
 * {@link #put(Object, Object)} as returning {@link Object}.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13657415" author="tn" created="Tue, 14 May 2013 19:38:43 +0000"  >&lt;p&gt;yes, much better, thanks!&lt;/p&gt;</comment>
                            <comment id="13657425" author="tn" created="Tue, 14 May 2013 20:02:40 +0000"  >&lt;p&gt;Applied in r1482544.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 May 2013 22:39:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kc3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326891</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-459] ArrayIterator &amp; ObjectArrayIterator - do they need setters?`</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-459</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;ArrayIterator &amp;amp; ObjectArrayIterator both have methods to set the array separately from the ctor.&lt;/p&gt;

&lt;p&gt;However the method does not allow the same flexibility as the ctor, as it does not allow the start or end indexes to be set.&lt;/p&gt;

&lt;p&gt;Is there really a use-case for these setters? If not, all the fields apart from index could be made final, which would make thread safety (and testing) easier.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645419">COLLECTIONS-459</key>
            <summary>ArrayIterator &amp; ObjectArrayIterator - do they need setters?`</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Apr 2013 12:15:51 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:53 +0000</updated>
                            <resolved>Tue, 18 Jun 2013 19:35:51 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13645576" author="tn" created="Tue, 30 Apr 2013 13:43:29 +0000"  >&lt;p&gt;I would be +1 to remove the setArray method in these two classes.&lt;/p&gt;</comment>
                            <comment id="13657462" author="tn" created="Tue, 14 May 2013 20:25:46 +0000"  >&lt;p&gt;The respective *ListIterator classes seem to have been copied as they contain default constructors with the same javadoc, i.e. refer to a setArray method, although there is no such method.&lt;/p&gt;

&lt;p&gt;I am going to remove the default constructors as they render these classes useless (they act as an empty iterator that can not be changed).&lt;/p&gt;</comment>
                            <comment id="13657475" author="tn" created="Tue, 14 May 2013 20:32:03 +0000"  >&lt;p&gt;Ah stupid me, the *ListIterator classes inherit from *Iterator ...&lt;/p&gt;</comment>
                            <comment id="13657483" author="tn" created="Tue, 14 May 2013 20:35:50 +0000"  >&lt;p&gt;I still think the setArray method should go away. Maybe they have been introduced to be able to reset the iterator, but this is now already supported via the ResettableIterator interface.&lt;/p&gt;</comment>
                            <comment id="13685935" author="tn" created="Mon, 17 Jun 2013 20:26:34 +0000"  >&lt;p&gt;In r1493922, I have removed the setArray methods and the default constructors.&lt;br/&gt;
The fields have been made final if possible (apart from the actual index used for the iteration). I have kept them protected to make the access in the derived classes (ArrayListIterator, ObjectArrayListIterator) easier.&lt;/p&gt;</comment>
                            <comment id="13686064" author="sebb@apache.org" created="Mon, 17 Jun 2013 21:55:17 +0000"  >&lt;p&gt;As for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-455&quot; title=&quot;AbstractDualBidiMap&amp;lt;K, V&amp;gt; has several mutable protected fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-455&quot;&gt;&lt;del&gt;COLLECTIONS-455&lt;/del&gt;&lt;/a&gt;, we should use package access where possible.&lt;/p&gt;

&lt;p&gt;If not, use getter/setter which is documented for internal use only.&lt;/p&gt;</comment>
                            <comment id="13686499" author="tn" created="Tue, 18 Jun 2013 08:32:23 +0000"  >&lt;p&gt;I started doing this, but after I had the code the retrieve the array to alter or access an element I was unhappy with the result.&lt;br/&gt;
The fields are already final, thus unmodifiable by sub-classes.&lt;/p&gt;

&lt;p&gt;Also keep in mind that iterators in general are not supposed to be thread-safe, so I do not see the point in trying to achieve something that is not necessary.&lt;/p&gt;</comment>
                            <comment id="13686559" author="sebb@apache.org" created="Tue, 18 Jun 2013 10:33:33 +0000"  >&lt;p&gt;Thread-safety is only one of the issues here - it&apos;s possible for subclasses to destroy the invariant, i.e. startIndex &amp;lt;= index &amp;lt;= endIndex.&lt;/p&gt;

&lt;p&gt;How about making the index package protected?&lt;/p&gt;

&lt;p&gt;That would at least prevent 3rd party classes from corrupting the index, and would allow it to be made private later if necessary.&lt;/p&gt;

&lt;p&gt;As for the array Object, that is less of an issue, though it would be trivial to add a get/set method to the parent class.&lt;/p&gt;</comment>
                            <comment id="13687103" author="tn" created="Tue, 18 Jun 2013 19:35:51 +0000"  >&lt;p&gt;Made the fields package private in r1494267.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Apr 2013 13:43:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325781</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k7dj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326126</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-458] AbstractUntypedCollectionDecorator&lt;E, D&gt;  is not used</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-458</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The public ctor for AbstractUntypedCollectionDecorator&amp;lt;E, D&amp;gt; takes no argument and so collection = null; however the protected ctor checks for collection parameter != null.&lt;/p&gt;

&lt;p&gt;The decorated() method says that all access to collection goes through it, and there is no setter.&lt;/p&gt;

&lt;p&gt;At present the only way to recover from calling the public ctor is for the sub-class to set collection directly.&lt;/p&gt;

&lt;p&gt;This is inconsistent.&lt;/p&gt;

&lt;p&gt;The class is abstract and there appear to be no concrete subclasses. Looks like the class might be superfluous, but if it is required, it should ideally have a private final collection field.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645322">COLLECTIONS-458</key>
            <summary>AbstractUntypedCollectionDecorator&lt;E, D&gt;  is not used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Apr 2013 22:20:58 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:13 +0000</updated>
                            <resolved>Tue, 30 Apr 2013 12:00:27 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13645270" author="tn" created="Tue, 30 Apr 2013 05:24:04 +0000"  >&lt;p&gt;I added the ctor with argument, but in fact we should delete the class as it is not used at all.&lt;/p&gt;</comment>
                            <comment id="13645513" author="sebb@apache.org" created="Tue, 30 Apr 2013 12:00:27 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1477514&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/r1477514&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-458&quot; title=&quot;AbstractUntypedCollectionDecorator&amp;lt;E, D&amp;gt;  is not used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-458&quot;&gt;&lt;del&gt;COLLECTIONS-458&lt;/del&gt;&lt;/a&gt; AbstractUntypedCollectionDecorator&amp;lt;E, D&amp;gt;  is not used&lt;/p&gt;

&lt;p&gt;Removed:&lt;br/&gt;
    commons/proper/collections/trunk/src/main/java/org/apache/commons/collections4/collection/AbstractUntypedCollectionDecorator.java&lt;br/&gt;
Modified:&lt;br/&gt;
    commons/proper/collections/trunk/src/changes/changes.xml&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Apr 2013 05:24:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325684</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k6rz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-455] AbstractDualBidiMap&lt;K, V&gt; has several mutable protected fields</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-455</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Any non-private mutable fields make it much harder to ensure thread-safety as well as making it very difficult to test thoroughly.&lt;/p&gt;

&lt;p&gt;The fields should be made private.&lt;br/&gt;
If protected write access really is needed, setter methods should be used.&lt;br/&gt;
These methods can take any necessary precautions to ensure thread-safety.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645118">COLLECTIONS-455</key>
            <summary>AbstractDualBidiMap&lt;K, V&gt; has several mutable protected fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Apr 2013 00:05:40 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:45 +0000</updated>
                            <resolved>Tue, 18 Jun 2013 20:55:14 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13644180" author="sebb@apache.org" created="Mon, 29 Apr 2013 00:23:24 +0000"  >&lt;p&gt;Likewise for:&lt;/p&gt;

&lt;p&gt;AbstractCollectionDecorator&lt;br/&gt;
AbstractUntypedCollectionDecorator&lt;br/&gt;
CompositeCollection&lt;br/&gt;
PredicatedCollection&lt;br/&gt;
SynchronizedCollection&lt;br/&gt;
TransformedCollection&lt;br/&gt;
EditCommand&lt;br/&gt;
ComparatorChain&lt;br/&gt;
AbstractQuantifierPredicate&lt;br/&gt;
ArrayIterator&lt;br/&gt;
ArrayListIterator&lt;br/&gt;
IteratorChain&lt;br/&gt;
NodeListIterator&lt;br/&gt;
ObjectArrayIterator&lt;br/&gt;
ObjectArrayListIterator&lt;br/&gt;
ObjectGraphIterator&lt;br/&gt;
AbstractKeyValue&lt;br/&gt;
AbstractMapEntryDecorator (the field is final but the object is not immutable)&lt;br/&gt;
AbstractLinkedList&lt;br/&gt;
CursorableLinkedList&lt;br/&gt;
NodeCachingLinkedList&lt;br/&gt;
SetUniqueList&lt;br/&gt;
AbstractHashedMap&lt;br/&gt;
AbstractLinkedMap&lt;br/&gt;
AbstractMapDecorator&lt;br/&gt;
AbstractReferenceMap&lt;/p&gt;

&lt;p&gt;etc.&lt;/p&gt;</comment>
                            <comment id="13649367" author="tn" created="Sun, 5 May 2013 16:21:45 +0000"  >&lt;p&gt;Are you done with the changes or is something still missing?&lt;/p&gt;</comment>
                            <comment id="13685892" author="tn" created="Mon, 17 Jun 2013 19:37:19 +0000"  >&lt;p&gt;For all the abstract decorator classes I am in favor to keep the things as they are for the following reasons:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the use and purpose of such abstract classes is clear&lt;/li&gt;
	&lt;li&gt;refactoring the serialization code is just additional work and does not bring any benefits&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13685993" author="tn" created="Mon, 17 Jun 2013 21:11:37 +0000"  >&lt;p&gt;In r1493940 I have removed the remaining todos as I want to keep them as is for now to make a 4.0 release.&lt;/p&gt;

&lt;p&gt;Thanks for the effort on the other classes!&lt;/p&gt;</comment>
                            <comment id="13686059" author="sebb@apache.org" created="Mon, 17 Jun 2013 21:53:00 +0000"  >&lt;p&gt;I think the fields should at least be made package protected where possible.&lt;/p&gt;

&lt;p&gt;It&apos;s misleading to expose the fields as protected if they are not intended to be mutable by sub-classes (and may make subsequent changes more difficult)&lt;/p&gt;

&lt;p&gt;Where the fields cannot be made package protected, I suggest adding a getter/setter which is documented as being for internal use only.&lt;/p&gt;</comment>
                            <comment id="13687178" author="tn" created="Tue, 18 Jun 2013 20:55:14 +0000"  >&lt;p&gt;Changed remaining fields to scope package private.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 May 2013 16:21:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325480</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k5in:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325825</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-454] findBugs Warning: Flat3Map - 3 iterators which are &quot;both an Iterator and a Map.Entry&quot;</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-454</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The iterators should be rewritten as suggested by findbugs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12645021">COLLECTIONS-454</key>
            <summary>findBugs Warning: Flat3Map - 3 iterators which are &quot;both an Iterator and a Map.Entry&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Apr 2013 12:26:13 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:44 +0000</updated>
                            <resolved>Sun, 28 Apr 2013 18:53:13 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13643941" author="tn" created="Sun, 28 Apr 2013 08:42:58 +0000"  >&lt;p&gt;The attached patch adds a FlatMapEntry object that is returned by the EntryIterator.&lt;/p&gt;

&lt;p&gt;The javadoc for the entrySet() method is updated to use mapIterator() if this additional object creation is not wanted.&lt;/p&gt;

&lt;p&gt;We have two options:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;apply this patch with the cost of some additional overhead when iterating over keys, values, entries (which I guess was the original idea to merge the iterator and entry)&lt;/li&gt;
	&lt;li&gt;add ignore filter to findbugs as in this specific case it is intended behavior (for performance reasons).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Any comments?&lt;/p&gt;</comment>
                            <comment id="13644033" author="sebb@apache.org" created="Sun, 28 Apr 2013 14:54:33 +0000"  >&lt;p&gt;The Findbugs explanation is:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The entrySet() method is allowed to return a view of the underlying Map in which an Iterator and Map.Entry. This clever idea was used in several Map implementations, but introduces the possibility of nasty coding mistakes. If a map m returns such an iterator for an entrySet, then c.addAll(m.entrySet()) will go badly wrong. All of the Map implementations in OpenJDK 1.7 have been rewritten to avoid this, you should to.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We should follow the Findbugs advice here.&lt;/p&gt;

&lt;p&gt;The additional overhead is likely to be quite small.&lt;br/&gt;
Any errors caused by not fixing the bug may be extremely tricky to find.&lt;/p&gt;</comment>
                            <comment id="13644087" author="tn" created="Sun, 28 Apr 2013 18:53:13 +0000"  >&lt;p&gt;Applied in r1476813 after some more javadoc improvements.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12580875" name="COLLECTIONS-454.patch" size="6727" author="tn" created="Sun, 28 Apr 2013 08:42:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 28 Apr 2013 14:54:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k4x3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325728</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-453] findBugs Warnings: several classes in package functors may expose their internal representation</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-453</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Several classes (e.g. SwitchTransformer) take in their constructor an array as input which is not copied/cloned.&lt;br/&gt;
Thus its internal representation may be changed externally.&lt;/p&gt;

&lt;p&gt;The corresponding factory methods &lt;b&gt;do&lt;/b&gt; copy the input arguments thus we have two choices:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;move the copy from the factory methods to the ctors&lt;/li&gt;
	&lt;li&gt;make the ctors private to prevent their use&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12645020">COLLECTIONS-453</key>
            <summary>findBugs Warnings: several classes in package functors may expose their internal representation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Apr 2013 12:23:51 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:31 +0000</updated>
                            <resolved>Sun, 5 May 2013 16:16:46 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13643644" author="tn" created="Sat, 27 Apr 2013 12:28:35 +0000"  >&lt;p&gt;The warning for ObjectArrayIterator should be filtered as there it is ok to use the array directly imho.&lt;/p&gt;</comment>
                            <comment id="13645574" author="tn" created="Tue, 30 Apr 2013 13:37:19 +0000"  >&lt;p&gt;Any objection to make the respective constructors in the functors package private?&lt;/p&gt;

&lt;p&gt;All of them have corresponding factory methods.&lt;/p&gt;</comment>
                            <comment id="13645997" author="tn" created="Tue, 30 Apr 2013 21:17:41 +0000"  >&lt;p&gt;Added exclude filter for MultiKey in r1477834.&lt;/p&gt;</comment>
                            <comment id="13649348" author="tn" created="Sun, 5 May 2013 14:54:06 +0000"  >&lt;p&gt;Fixed InstantiateTransformer and InvokerTransformer. The constructor now clones the input arrays.&lt;/p&gt;</comment>
                            <comment id="13649351" author="tn" created="Sun, 5 May 2013 15:07:11 +0000"  >&lt;p&gt;Fixed ChainedClosure and ChainedTransformer in r1479336.&lt;/p&gt;</comment>
                            <comment id="13649354" author="tn" created="Sun, 5 May 2013 15:21:20 +0000"  >&lt;p&gt;Fixed SwitchClosure and SwitchTransformer in r1479337.&lt;/p&gt;</comment>
                            <comment id="13649363" author="tn" created="Sun, 5 May 2013 16:16:46 +0000"  >&lt;p&gt;Finished in r1479348.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325382</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k4wv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325727</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-449] Latest Version is set to 20040616</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-449</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The current maven metadata file for commons-collections shows that the &quot;latest version&quot; is 20040616. This is currently affecting spring-webmvc (3.1.3-RELEASE) - causing it to use the outdated version of the collections  package.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://repo1.maven.org/maven2/commons-collections/commons-collections/maven-metadata.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo1.maven.org/maven2/commons-collections/commons-collections/maven-metadata.xml&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12636948">COLLECTIONS-449</key>
            <summary>Latest Version is set to 20040616</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="joehni">Joerg Schaible</assignee>
                                    <reporter username="kaicabuslay">Kai Cabuslay</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Mar 2013 02:50:07 +0000</created>
                <updated>Thu, 14 Mar 2013 07:28:23 +0000</updated>
                            <resolved>Thu, 14 Mar 2013 07:28:23 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13602108" author="joehni" created="Thu, 14 Mar 2013 07:28:23 +0000"  >&lt;p&gt;Sorry, but we have no control over the central Maven repository.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Mar 2013 07:28:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317440</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1irwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317781</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-447] TreeListIterator can return incorrect results after remove() is called</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-447</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;&lt;tt&gt;TreeList.TreeListIterator&lt;/tt&gt; can get in a bad state when &lt;tt&gt;remove()&lt;/tt&gt; is called, causing it to subsequently return incorrect results. This is because &lt;tt&gt;TreeListIterator&lt;/tt&gt; caches an &lt;tt&gt;AVLNode&lt;/tt&gt; reference in its field &lt;tt&gt;next&lt;/tt&gt;, and this node reference may become stale when &lt;tt&gt;remove()&lt;/tt&gt; is called (it may contain a reference to a node that no longer exists in the tree).&lt;/p&gt;

&lt;p&gt;I will attach two patches: &lt;tt&gt;testcase.patch&lt;/tt&gt; will contain a test case illustrating the bug, and &lt;tt&gt;fix.patch&lt;/tt&gt; will contain a fix. (To fix the bug, I simply clear the cached &lt;tt&gt;next&lt;/tt&gt; value in &lt;tt&gt;TreeListIterator.remove&lt;/tt&gt;.)&lt;/p&gt;

&lt;p&gt;This was originally reported in a comment to &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-433&quot; title=&quot;TreeList.addAll() complexity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-433&quot;&gt;&lt;del&gt;COLLECTIONS-433&lt;/del&gt;&lt;/a&gt;; I am creating a separate issue for this at Thomas Neidhart&apos;s suggestion.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7, jdk1.5.0_22&lt;/p&gt;</environment>
        <key id="12635005">COLLECTIONS-447</key>
            <summary>TreeListIterator can return incorrect results after remove() is called</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jbarnes">Jeffrey Barnes</reporter>
                        <labels>
                            <label>patch</label>
                            <label>test</label>
                    </labels>
                <created>Sun, 3 Mar 2013 03:24:24 +0000</created>
                <updated>Mon, 9 Nov 2015 20:53:26 +0000</updated>
                            <resolved>Mon, 4 Mar 2013 20:20:55 +0000</resolved>
                                    <version>Nightly Builds</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13592594" author="tn" created="Mon, 4 Mar 2013 20:20:55 +0000"  >&lt;p&gt;Applied the patch together with some additional comment in r1452481.&lt;/p&gt;

&lt;p&gt;Thanks for the analysis and patch, this was really a tricky one!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12606417">COLLECTIONS-433</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12571781" name="fix.patch" size="1045" author="jbarnes" created="Sun, 3 Mar 2013 03:26:50 +0000"/>
                            <attachment id="12571780" name="testcase.patch" size="1081" author="jbarnes" created="Sun, 3 Mar 2013 03:26:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Mar 2013 20:20:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315498</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ifxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-445] Several unit test failures with IBM JDK 6</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-445</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Failed tests: &lt;br/&gt;
  AbstractSortedMapTest$TestTailMap&amp;gt;AbstractMapTest.testMapPut:808-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2010 values should be same size as HashMap&apos;s&lt;br/&gt;
Test: []&lt;br/&gt;
Real: &lt;span class=&quot;error&quot;&gt;&amp;#91;value&amp;#93;&lt;/span&gt; expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractSortedMapTest$TestTailMap&amp;gt;AbstractMapTest.testMapPutAll:952-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2010 values should be same size as HashMap&apos;s&lt;br/&gt;
Test: []&lt;br/&gt;
Real: &lt;span class=&quot;error&quot;&gt;&amp;#91;value, value, seev, tmpv, we&amp;#39;llv, youv&amp;#93;&lt;/span&gt; expected:&amp;lt;6&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionClear:638-&amp;gt;verify:1888-&amp;gt;AbstractCollectionTest.verify:294 Collection should not contain a value that the confirmed collection does not have: againv&lt;br/&gt;
Test: []&lt;br/&gt;
Real: []&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionRemoveAll:930-&amp;gt;verify:1888-&amp;gt;AbstractCollectionTest.verify:294 Collection should not contain a value that the confirmed collection does not have: againv&lt;br/&gt;
Test: []&lt;br/&gt;
Real: []&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionRetainAll:973-&amp;gt;verify:1888-&amp;gt;AbstractCollectionTest.verify:294 Collection should not contain a value that the confirmed collection does not have: againv&lt;br/&gt;
Test: []&lt;br/&gt;
Real: []&lt;br/&gt;
  AbstractMapTest$TestMapEntrySet&amp;gt;AbstractCollectionTest.testCollectionIteratorRemove:838 Collection should shrink by one after iterator.remove expected:&amp;lt;-1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractMapTest$TestMapKeySet&amp;gt;AbstractCollectionTest.testCollectionRemove:881 Collection should remove extant element: key&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionIteratorRemove:838 Collection should shrink by one after iterator.remove expected:&amp;lt;-1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractIterableMapTest$InnerTestMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;againv&amp;gt;&lt;br/&gt;
  AbstractIterableMapTest$InnerTestMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;again&amp;gt;&lt;br/&gt;
  AbstractBidiMapTest$TestBidiMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;again&amp;gt;&lt;br/&gt;
  AbstractBidiMapTest$TestInverseBidiMap&amp;gt;AbstractBidiMapTest.testBidiMapIteratorSet:560 expected same:&amp;lt;For&amp;gt; was not:&amp;lt;again&amp;gt;&lt;br/&gt;
  AbstractBidiMapTest$TestBidiMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;againv&amp;gt;&lt;br/&gt;
  DualTreeBidiMapTest&amp;gt;AbstractBidiMapTest.testBidiMapIteratorSet:560 expected same:&amp;lt;For&amp;gt; was not:&amp;lt;againv&amp;gt;&lt;br/&gt;
  AbstractOrderedBidiMapTest$TestBidiOrderedMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;againv&amp;gt;&lt;br/&gt;
  AbstractSortedMapTest$TestTailMap&amp;gt;AbstractMapTest.testMapPut:808-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2010 values should be same size as HashMap&apos;s&lt;br/&gt;
Test: []&lt;br/&gt;
Real: &lt;span class=&quot;error&quot;&gt;&amp;#91;value&amp;#93;&lt;/span&gt; expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractSortedMapTest$TestTailMap&amp;gt;AbstractMapTest.testMapPutAll:952-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2010 values should be same size as HashMap&apos;s&lt;br/&gt;
Test: []&lt;br/&gt;
Real: &lt;span class=&quot;error&quot;&gt;&amp;#91;value, value2, seev, tmpv, we&amp;#39;llv, youv&amp;#93;&lt;/span&gt; expected:&amp;lt;6&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionClear:638-&amp;gt;verify:1888-&amp;gt;AbstractCollectionTest.verify:294 Collection should not contain a value that the confirmed collection does not have: againv&lt;br/&gt;
Test: []&lt;br/&gt;
Real: []&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionRemoveAll:930-&amp;gt;verify:1888-&amp;gt;AbstractCollectionTest.verify:294 Collection should not contain a value that the confirmed collection does not have: againv&lt;br/&gt;
Test: []&lt;br/&gt;
Real: []&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionRetainAll:973-&amp;gt;verify:1888-&amp;gt;AbstractCollectionTest.verify:294 Collection should not contain a value that the confirmed collection does not have: againv&lt;br/&gt;
Test: []&lt;br/&gt;
Real: []&lt;br/&gt;
  AbstractMapTest$TestMapEntrySet&amp;gt;AbstractCollectionTest.testCollectionIteratorRemove:838 Collection should shrink by one after iterator.remove expected:&amp;lt;-1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionIteratorRemove:838 Collection should shrink by one after iterator.remove expected:&amp;lt;-1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractIterableMapTest$InnerTestMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;youv&amp;gt;&lt;br/&gt;
  AbstractIterableMapTest$InnerTestMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;you&amp;gt;&lt;br/&gt;
  AbstractBidiMapTest$TestBidiMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;you&amp;gt;&lt;br/&gt;
  AbstractBidiMapTest$TestInverseBidiMap&amp;gt;AbstractBidiMapTest.testBidiMapIteratorSet:560 expected same:&amp;lt;For&amp;gt; was not:&amp;lt;you&amp;gt;&lt;br/&gt;
  AbstractBidiMapTest$TestBidiMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;youv&amp;gt;&lt;br/&gt;
  DualTreeBidiMap2Test&amp;gt;AbstractBidiMapTest.testBidiMapIteratorSet:560 expected same:&amp;lt;For&amp;gt; was not:&amp;lt;youv&amp;gt;&lt;br/&gt;
  AbstractOrderedBidiMapTest$TestBidiOrderedMapIterator&amp;gt;AbstractMapIteratorTest.testMapIteratorSet:214 Value must be changed after setValue expected same:&amp;lt;newnonnullvalue&amp;gt; was not:&amp;lt;youv&amp;gt;&lt;br/&gt;
  AbstractSortedMapTest$TestTailMap&amp;gt;AbstractMapTest.testMapPut:808-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2010 values should be same size as HashMap&apos;s&lt;br/&gt;
Test: []&lt;br/&gt;
Real: &lt;span class=&quot;error&quot;&gt;&amp;#91;foov&amp;#93;&lt;/span&gt; expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractSortedMapTest$TestTailMap&amp;gt;AbstractMapTest.testMapPutAll:952-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2010 values should be same size as HashMap&apos;s&lt;br/&gt;
Test: []&lt;br/&gt;
Real: &lt;span class=&quot;error&quot;&gt;&amp;#91;againv, allv, barv, bazv, blahv, foov&amp;#93;&lt;/span&gt; expected:&amp;lt;6&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionClear:638-&amp;gt;verify:1888-&amp;gt;AbstractCollectionTest.verify:294 Collection should not contain a value that the confirmed collection does not have: youv&lt;br/&gt;
Test: []&lt;br/&gt;
Real: []&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionRemoveAll:930-&amp;gt;verify:1888-&amp;gt;AbstractCollectionTest.verify:294 Collection should not contain a value that the confirmed collection does not have: youv&lt;br/&gt;
Test: []&lt;br/&gt;
Real: []&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionRetainAll:973-&amp;gt;verify:1888-&amp;gt;AbstractCollectionTest.verify:294 Collection should not contain a value that the confirmed collection does not have: youv&lt;br/&gt;
Test: []&lt;br/&gt;
Real: []&lt;br/&gt;
  AbstractMapTest$TestMapEntrySet&amp;gt;AbstractCollectionTest.testCollectionIteratorRemove:838 Collection should shrink by one after iterator.remove expected:&amp;lt;-1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
  AbstractMapTest$TestMapValues&amp;gt;AbstractCollectionTest.testCollectionIteratorRemove:838 Collection should shrink by one after iterator.remove expected:&amp;lt;-1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;/p&gt;

&lt;p&gt;Tests in error: &lt;br/&gt;
  AbstractSortedMapTest$TestHeadMap&amp;gt;AbstractMapTest.testMapPut:808-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2006 &#187; NullPointer&lt;br/&gt;
  AbstractSortedMapTest$TestHeadMap&amp;gt;AbstractMapTest.testMapPutAll:952-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2006 &#187; NullPointer&lt;br/&gt;
  AbstractSortedMapTest$TestHeadMap&amp;gt;AbstractMapTest.testMapPut:808-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2006 &#187; NullPointer&lt;br/&gt;
  AbstractSortedMapTest$TestHeadMap&amp;gt;AbstractMapTest.testMapPutAll:952-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2006 &#187; NullPointer&lt;br/&gt;
  AbstractSortedMapTest$TestHeadMap&amp;gt;AbstractMapTest.testMapPut:808-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2006 &#187; NullPointer&lt;br/&gt;
  AbstractSortedMapTest$TestHeadMap&amp;gt;AbstractMapTest.testMapPutAll:952-&amp;gt;AbstractSortedMapTest$TestViewMap.verify:141-&amp;gt;AbstractMapTest.verify:1946-&amp;gt;AbstractMapTest.verifyValues:2006 &#187; NullPointer&lt;/p&gt;</description>
                <environment></environment>
        <key id="12634291">COLLECTIONS-445</key>
            <summary>Several unit test failures with IBM JDK 6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Feb 2013 21:21:47 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:38 +0000</updated>
                            <resolved>Sun, 21 Apr 2013 17:48:51 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13589998" author="tn" created="Thu, 28 Feb 2013 22:20:14 +0000"  >&lt;p&gt;Java(TM) SE Runtime Environment (build pxi3260sr12-20121025_01(SR12))&lt;br/&gt;
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260sr12-20121024_126067 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20121024_126067&lt;br/&gt;
JIT  - r9_20120914_26057&lt;br/&gt;
GC   - 20120928_AA)&lt;br/&gt;
JCL  - 20121014_01&lt;/p&gt;</comment>
                            <comment id="13595159" author="tn" created="Wed, 6 Mar 2013 21:55:04 +0000"  >&lt;p&gt;Test status:&lt;/p&gt;

&lt;p&gt;Tests run: 12172, Failures: 36, Errors: 6, Skipped: 0&lt;/p&gt;</comment>
                            <comment id="13595163" author="tn" created="Wed, 6 Mar 2013 21:58:20 +0000"  >&lt;p&gt;After first changes:&lt;/p&gt;

&lt;p&gt;Tests run: 12172, Failures: 16, Errors: 0, Skipped: 0&lt;/p&gt;</comment>
                            <comment id="13597957" author="tn" created="Sat, 9 Mar 2013 14:27:43 +0000"  >&lt;p&gt;Attached a set of TreeMap tests that fail with IBM JDK 6.&lt;/p&gt;</comment>
                            <comment id="13637605" author="tn" created="Sun, 21 Apr 2013 17:48:51 +0000"  >&lt;p&gt;Ignored remaining test failures which were all related to a faulty TreeMap implementation (subMap, tailMap bulkTests).&lt;/p&gt;

&lt;p&gt;Committed in r1470322.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12572914" name="TreeMapTest.java" size="1799" author="tn" created="Sat, 9 Mar 2013 14:27:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314784</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ibjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315128</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-444] SetUniqueList may become inconsistent</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-444</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I found this bug during my work on issue &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-310&quot; title=&quot;Modifications of a SetUniqueList.subList() invalidate the parent list&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-310&quot;&gt;&lt;del&gt;COLLECTIONS-310&lt;/del&gt;&lt;/a&gt; : &lt;/p&gt;

&lt;p&gt;When you &apos;set&apos; an element to a position that contains this element, it is removed from the internal set. This leads to the situation that &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;invocing get() returns the element&lt;/li&gt;
	&lt;li&gt;invocing contains() returns false.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Extending the existing test method for set:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSet() {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SetUniqueList&amp;lt;E&amp;gt; lset = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SetUniqueList&amp;lt;E&amp;gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;E&amp;gt;(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;E&amp;gt;());

        &lt;span class=&quot;code-comment&quot;&gt;// Duplicate element
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; E obj1 = (E) &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(1);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; E obj2 = (E) &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(2);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; E obj3 = (E) &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(3);

        lset.add(obj1);
        lset.add(obj2);
        lset.set(0, obj1);
        assertEquals(2, lset.size());
        assertSame(obj1, lset.get(0));
        assertSame(obj2, lset.get(1));

        assertTrue(lset.contains(obj1));  &lt;span class=&quot;code-comment&quot;&gt;// fails !
&lt;/span&gt;        assertTrue(lset.contains(obj2));

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12633927">COLLECTIONS-444</key>
            <summary>SetUniqueList may become inconsistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="t.vahrst">Thomas Vahrst</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Feb 2013 16:08:12 +0000</created>
                <updated>Sun, 8 Nov 2015 21:36:02 +0000</updated>
                            <resolved>Wed, 17 Apr 2013 18:13:13 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13586329" author="tn" created="Mon, 25 Feb 2013 21:48:18 +0000"  >&lt;p&gt;Fixed in r1449914.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                            <comment id="13634032" author="jvasileff" created="Wed, 17 Apr 2013 13:46:28 +0000"  >&lt;p&gt;SetUniqueList.set(int index, object), as currently in trunk, never calls &quot;set.remove(removed)&quot; when the new Object equals() the pre-existing Object at the index. However, the Object is removed and re-added to the underlying List by &quot;removed = super.set(index, object)&quot;.&lt;/p&gt;

&lt;p&gt;As a result, the Set and List may wind up containing different elements per &quot;==&quot;. For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; a1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(1);
    &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; b1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(1);
    ...
    lset.clear();
    lset.add(a1); &lt;span class=&quot;code-comment&quot;&gt;// both Set and List will have a1
&lt;/span&gt;    lset.set(0, b1); &lt;span class=&quot;code-comment&quot;&gt;// List will have b1, Set will have a1&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While normally this won&apos;t cause problems, it does seem wrong, and prevents garbage collection of a1 in the example above.&lt;/p&gt;

&lt;p&gt;Reverting the patch, and then simply swapping the order of &quot;set.add()&quot; and &quot;set.remove()&quot; may be a better fix for the original problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; E set(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; E object) {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; pos = indexOf(object);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; E removed = &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.set(index, object);

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pos != -1 &amp;amp;&amp;amp; pos != index) {
            &lt;span class=&quot;code-comment&quot;&gt;// the object is already in the uniq list
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// (and it hasn&apos;t been swapped with itself)
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.remove(pos); &lt;span class=&quot;code-comment&quot;&gt;// remove the duplicate by index
&lt;/span&gt;        }

        set.remove(removed); &lt;span class=&quot;code-comment&quot;&gt;// remove the item deleted by the set
&lt;/span&gt;        set.add(object); &lt;span class=&quot;code-comment&quot;&gt;// add the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; item to the unique set
&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; removed; &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the item deleted by the set
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13634080" author="tn" created="Wed, 17 Apr 2013 14:26:02 +0000"  >&lt;p&gt;Hi John,&lt;/p&gt;

&lt;p&gt;good catch, the object is only kept internally, but as you say, this would prevent it from being garbage-collected, thus we should change as you propose.&lt;/p&gt;</comment>
                            <comment id="13634273" author="tn" created="Wed, 17 Apr 2013 18:13:13 +0000"  >&lt;p&gt;Fixed in r1469016.&lt;/p&gt;

&lt;p&gt;Thanks again for looking into this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12412112">COLLECTIONS-310</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Feb 2013 21:48:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i9av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314766</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-438] ExtendedProperties : String only composed of spaces character</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-438</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;We have discovered a bug in ExtendedProperties class used in our internal language manager framework. The cause are strings which contains only spaces character. We provide a patch to complete the JUnit class ExtendedPropertiesTest.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12625407">COLLECTIONS-438</key>
            <summary>ExtendedProperties : String only composed of spaces character</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gchauvet">Guillaume Chauvet</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Dec 2012 09:00:29 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:17 +0000</updated>
                            <resolved>Tue, 22 Jan 2013 13:56:20 +0000</resolved>
                                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13540401" author="gchauvet" created="Fri, 28 Dec 2012 09:03:20 +0000"  >&lt;p&gt;Patch to include new entry in ExtendedProperties JUnit test case&lt;/p&gt;</comment>
                            <comment id="13558233" author="tn" created="Sun, 20 Jan 2013 11:57:59 +0000"  >&lt;p&gt;The ExtendedProperties behaves in the same way as the java.util.Properties class. Values are trimmed on both sides, thus in your test case the two keys are both associated with an empty String as expected.&lt;/p&gt;

&lt;p&gt;I do not see a problem with this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12562572" name="COLLECTIONS-438.patch" size="1291" author="gchauvet" created="Fri, 28 Dec 2012 09:03:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 20 Jan 2013 11:57:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>301949</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16xlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-437] CollectionUtils.removeAll invoke ListUtils.retainAll !!!</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-437</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;    public static Collection removeAll(Collection collection, Collection remove) &lt;/p&gt;
{
        return ListUtils.retainAll(collection, remove);
    }</description>
                <environment></environment>
        <key id="12625235">COLLECTIONS-437</key>
            <summary>CollectionUtils.removeAll invoke ListUtils.retainAll !!!</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qxo">qxo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Dec 2012 07:04:54 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:42 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 18:38:56 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13540921" author="garydgregory" created="Sat, 29 Dec 2012 15:08:09 +0000"  >&lt;p&gt;Already reported and already fixed in trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12347178">COLLECTIONS-219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Dec 2012 15:08:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>301779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16wgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248392</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-435] CollectionUtils.removeAll() calls ListUtils.retainAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-435</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;A snippet from CollectionUtils.java:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;CollectionUtils.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Collection removeAll(Collection collection, Collection remove) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ListUtils.retainAll(collection, remove);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It should call ListUtils.removeAll() instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12616040">COLLECTIONS-435</key>
            <summary>CollectionUtils.removeAll() calls ListUtils.retainAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mikolajr">Mikolaj Rydzewski</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Nov 2012 10:13:40 +0000</created>
                <updated>Wed, 14 Nov 2012 10:26:34 +0000</updated>
                            <resolved>Wed, 14 Nov 2012 10:26:34 +0000</resolved>
                                    <version>3.2.1</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12347178">COLLECTIONS-219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257655</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k3u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>115439</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-427] performance problem in SetUniqueList.retainAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-427</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I am encountering a performance problem in SetUniqueList.retainAll().&lt;br/&gt;
It appears in version 3.2.1 and also in revision 1365132.  I attached&lt;br/&gt;
a test that exposes this problem and a patch that fixes it.  On my&lt;br/&gt;
machine, for this test, the patch provides a 621X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 6215&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 10&lt;/p&gt;

&lt;p&gt;There are two problems here.  First, &quot;SetUniqueList.retainAll()&quot;&lt;br/&gt;
should have similar implementation with the current implementation of&lt;br/&gt;
&quot;ListOrderedSet.retainAll()&quot;, which is more optimized.  Second, even&lt;br/&gt;
&quot;ListOrderedSet.retainAll()&quot; has a performance problem, which was&lt;br/&gt;
reported and explained in detail in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-426&quot; title=&quot;performance problem in ListOrderedSet.retainAll()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-426&quot;&gt;&lt;del&gt;COLLECTIONS-426&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The attached patch has two parts.  The first part (the first loop) is&lt;br/&gt;
inspired from &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-426&quot; title=&quot;performance problem in ListOrderedSet.retainAll()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-426&quot;&gt;&lt;del&gt;COLLECTIONS-426&lt;/del&gt;&lt;/a&gt;.  The second part (everything after the&lt;br/&gt;
first loop) is in fact the current implementation of&lt;br/&gt;
&quot;ListOrderedSet.retainAll()&quot;, with some minor changes to adapt it for&lt;br/&gt;
the current code.  Overall, the attached patch is very similar to the&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-426&quot; title=&quot;performance problem in ListOrderedSet.retainAll()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-426&quot;&gt;&lt;del&gt;COLLECTIONS-426&lt;/del&gt;&lt;/a&gt; patch.&lt;/p&gt;

&lt;p&gt;I will rehash some of the information from &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-426&quot; title=&quot;performance problem in ListOrderedSet.retainAll()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-426&quot;&gt;&lt;del&gt;COLLECTIONS-426&lt;/del&gt;&lt;/a&gt; (which&lt;br/&gt;
describes &quot;ListOrderedSet.retainAll()&quot;) for the current&lt;br/&gt;
&quot;SetUniqueList.retainAll()&quot;.&lt;/p&gt;

&lt;p&gt;The current code for &quot;SetUniqueList.retainAll()&quot; is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; retainAll(Collection&amp;lt;?&amp;gt; coll) {
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; result = &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.retainAll(coll);
    set.retainAll(coll);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;where both &quot;super.retainAll(coll)&quot; and &quot;set.retainAll(coll)&quot; can have&lt;br/&gt;
quadratic complexity, e.g., if &quot;coll&quot; is a List.  Both these calls to&lt;br/&gt;
&quot;retainAll&quot; are in fact calls to&lt;br/&gt;
&quot;java.util.AbstractCollection.retainAll()&quot;, which has the code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; retainAll(Collection&amp;lt;?&amp;gt; c) {
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; modified = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    Iterator&amp;lt;E&amp;gt; e = iterator();
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (e.hasNext()) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!c.contains(e.next())) {
            e.remove();
            modified = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; modified;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;which iterates over &quot;this&quot; and calls &quot;contains()&quot; on &quot;c&quot;.  Mapping&lt;br/&gt;
this code back to &quot;SetUniqueList.retainAll()&quot; means that the code&lt;br/&gt;
iterates over &quot;this&quot; and &quot;set&quot; and calls &quot;contains()&quot; on &quot;coll&quot;.  If&lt;br/&gt;
&quot;coll&quot; has slow &quot;contains()&quot; (e.g., if &quot;coll&quot; is a list), then&lt;br/&gt;
&quot;SetUniqueList.retainAll()&quot; has quadratic complexity.&lt;/p&gt;

&lt;p&gt;The patch iterates over &quot;coll&quot; and calls &quot;contains()&quot; on &quot;set&quot;, which&lt;br/&gt;
we know is fast, because &quot;set&quot; is a Set.  For a more detailed&lt;br/&gt;
discussion of the patch and the problem, see the current&lt;br/&gt;
implementation of &quot;ListOrderedSet.retainAll()&quot;, the discussion for&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-426&quot; title=&quot;performance problem in ListOrderedSet.retainAll()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-426&quot;&gt;&lt;del&gt;COLLECTIONS-426&lt;/del&gt;&lt;/a&gt;, and the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-426&quot; title=&quot;performance problem in ListOrderedSet.retainAll()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-426&quot;&gt;&lt;del&gt;COLLECTIONS-426&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Is this a bug, or am I misunderstanding the intended behavior?  If so,&lt;br/&gt;
can you please confirm if the patch is correct?&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12600099">COLLECTIONS-427</key>
            <summary>performance problem in SetUniqueList.retainAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mertguldur">Mert Guldur</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jul 2012 23:50:21 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:16 +0000</updated>
                            <resolved>Tue, 27 Jan 2015 15:09:58 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14290741" author="tn" created="Sat, 24 Jan 2015 18:07:13 +0000"  >&lt;p&gt;This fix is wrong imho and should be reverted in 4.1&lt;/p&gt;</comment>
                            <comment id="14290913" author="adriannistor" created="Sun, 25 Jan 2015 00:40:48 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;Oh, ok.  Why is the fix wrong?  What is the bug in this fix?&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</comment>
                            <comment id="14291035" author="tn" created="Sun, 25 Jan 2015 10:40:13 +0000"  >&lt;p&gt;The fix is technically correct but conceptually wrong.&lt;/p&gt;

&lt;p&gt;It tries to improve the worst-case scenario for a well-known method at the expense of additional space complexity.&lt;br/&gt;
It many cases the additional temporary set is unneeded, especially when the provided collection has a fast contains method or the collection is small.&lt;/p&gt;

&lt;p&gt;A user can always solve the performance problem him/herself by putting the elements in a set and provide this as parameter to retainAll.&lt;/p&gt;

&lt;p&gt;The described problem also applies to almost &lt;b&gt;all&lt;/b&gt; collection types as the default implementation of retainAll is provided in AbstractCollection and is unchanged for all the collections I know of. If you want to press forward your fix, I suggest to move it to the openjdk project and discuss it there, actually I would be interested on their opinions on this issue.&lt;/p&gt;</comment>
                            <comment id="14291071" author="adriannistor" created="Sun, 25 Jan 2015 12:15:58 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;&amp;gt; A user can always solve the performance problem him/herself by&lt;br/&gt;
&amp;gt; putting the elements in a set and provide this as parameter to&lt;br/&gt;
&amp;gt; retainAll.&lt;/p&gt;

&lt;p&gt;Yes, but:&lt;/p&gt;

&lt;p&gt;(1) typically users spend (a lot) of time making the code work&lt;br/&gt;
correctly.  Users don&apos;t want to spend time with optimizations if they&lt;br/&gt;
can avoid it.&lt;/p&gt;

&lt;p&gt;(2) users needs to identify this call as a potential optimization&lt;br/&gt;
point, which is not easy if the buggy case is not triggered during&lt;br/&gt;
testing.  Furthermore, if the program-wide slowdown is small but&lt;br/&gt;
non-negligible (e.g., 10%), users may view it as unfortunate but&lt;br/&gt;
legitimate, i.e., users may not realize it can be improved.&lt;/p&gt;

&lt;p&gt;(3) the user needs figure out there is a easy and fast way to optimize&lt;br/&gt;
this code.  This requires the user to look inside the method&lt;br/&gt;
implementation.&lt;/p&gt;

&lt;p&gt;No user will do the above, so it is better to do it automatically if&lt;br/&gt;
we can.  And in this case we can do it easily and transparently in the&lt;br/&gt;
library.  If we can optimize something, we should do it.&lt;/p&gt;

&lt;p&gt;&amp;gt; at the expense of additional space complexity.&lt;/p&gt;

&lt;p&gt;Yes.  But typically we have memory available, speed is more difficult&lt;br/&gt;
to get.  And the additional space is linear in the size of c, whereas&lt;br/&gt;
the time improvement is huge.  And the added memory is less than half&lt;br/&gt;
the memory used by the SetUniqueList and is very short lived.  So the&lt;br/&gt;
added memory is not a problem.&lt;/p&gt;

&lt;p&gt;&amp;gt; The described problem also applies to almost all collection types &lt;/p&gt;

&lt;p&gt;Yes, but &quot;others do it too&quot; is not a reason for us to not improve if&lt;br/&gt;
we can.&lt;/p&gt;

&lt;p&gt;Overall, it is your decision.  I just feel that if we can help the&lt;br/&gt;
developers, we should do it.  And if others don&apos;t do it, that&apos;s their&lt;br/&gt;
problem, not ours.&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</comment>
                            <comment id="14291083" author="sebb@apache.org" created="Sun, 25 Jan 2015 12:43:59 +0000"  >&lt;p&gt;The problem with unconditionally using extra memory in the hope that it will improve performance is that users who don&apos;t want or need it have no choice.&lt;br/&gt;
Commons code may be used in devices with limited memory; we should not assume that memory is not an issue.&lt;/p&gt;

&lt;p&gt;Whereas if such copying is not done automatically, at least users who want to trade memory for speed can do so.&lt;/p&gt;</comment>
                            <comment id="14291085" author="adriannistor" created="Sun, 25 Jan 2015 12:52:03 +0000"  >&lt;p&gt;Hi Sebb,&lt;/p&gt;

&lt;p&gt;&amp;gt; at least users who want to trade memory for speed can do so.&lt;/p&gt;

&lt;p&gt;Ok.  Let&apos;s at least write this down in the method Javadoc, like in&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-415&quot; title=&quot;AbstractLinkedList.removeAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-415&quot;&gt;&lt;del&gt;COLLECTIONS-415&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-417&quot; title=&quot;AbstractLinkedList.retainAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-417&quot;&gt;&lt;del&gt;COLLECTIONS-417&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</comment>
                            <comment id="14291086" author="tn" created="Sun, 25 Jan 2015 12:58:47 +0000"  >&lt;p&gt;Again, users need to know what they are doing and be aware of the performance constraints of the collection types they are using.&lt;br/&gt;
I agree that the implemented algorithm of retainAll is not explained in detail (the original Collection#retainAll method has just a reference to contains(), but does not describe the performance implications), and we will add a note as in other cases, but this is not a problem limited to commons-collections but to the collection framework of java in general.&lt;/p&gt;

&lt;p&gt;That&apos;s why I suggested to move the discussion to openjdk. In fact, if your proposed fix would be implemented in AbstractCollection the problem would go away for almost all collection types and users would be safe (or is that so?).&lt;/p&gt;

&lt;p&gt;On a personal note: I strongly doubt that the described problem is a &quot;real&quot; one. A quick search on stackoverflow with &quot;retainAll slow&quot; lists two posts with both suggesting to call it with a set.&lt;/p&gt;</comment>
                            <comment id="14291153" author="adriannistor" created="Sun, 25 Jan 2015 15:54:17 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;&amp;gt; users need to know what they are doing and be aware of the&lt;br/&gt;
&amp;gt; performance constraints&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; true, and how often does that happen?&lt;/p&gt;

&lt;p&gt;&amp;gt; this is not a problem limited to commons-collections&lt;/p&gt;

&lt;p&gt;Ok, I will try this &quot;others do it too&quot; argument next time when I get a&lt;br/&gt;
speeding ticket.  I will let you know how that works out &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&amp;gt; devices with limited memory&lt;/p&gt;

&lt;p&gt;Is Apache Collections optimized for such devices?  How many&lt;br/&gt;
optimizations for such devices do we have?  1, 2, 5?  It seems quite a&lt;br/&gt;
unique instance here that we are all of the sudden worrying about some&lt;br/&gt;
memory (less than half of this collection, and short lived).&lt;/p&gt;

&lt;p&gt;Overall, I still think that if we can optimize something without&lt;br/&gt;
disadvantages (I would not count this memory thing, except the case we&lt;br/&gt;
are optimizing memory--&lt;del&gt;small quantities of memory&lt;/del&gt;--in more than 5&lt;br/&gt;
places in the entire Apache Collections), there is no reason to not do&lt;br/&gt;
it.  But all the pros and cons are in this thread, so in the end do&lt;br/&gt;
what you think best for this library.&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</comment>
                            <comment id="14291187" author="tn" created="Sun, 25 Jan 2015 17:29:11 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; users need to know what they are doing and be aware of the&lt;br/&gt;
&amp;gt; performance constraints&lt;/p&gt;

&lt;p&gt;true, and how often does that happen?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I do not think it should be the goal of a general-purpose library to pre-optimize every possible use-case.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; this is not a problem limited to commons-collections&lt;/p&gt;

&lt;p&gt;Ok, I will try this &quot;others do it too&quot; argument next time when I get a&lt;br/&gt;
speeding ticket. I will let you know how that works out &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I did not say that. I said that the retainAll() method suffers from the &quot;problem&quot; in general.&lt;br/&gt;
Changing it in collections, especially for some rarely used classes does not safe users from the performance problems you are talking about. I am pretty sure that ArrayList.retainAll is much, much more often used than SetUniqueList.retainAll. So why changing it here and not for ArrayList?&lt;/p&gt;

&lt;p&gt;You are looking at the problem from a purely theoretical POV. From an engineering POV it is much more important that users get what they expect. And the retainAll method as implemented is well-known in the java community.&lt;/p&gt;

&lt;p&gt;And again, a user can get the expected performance by putting the argument in a set himself. So where is the problem (apart from documenting it properly)?&lt;/p&gt;</comment>
                            <comment id="14291608" author="tn" created="Mon, 26 Jan 2015 09:21:43 +0000"  >&lt;p&gt;There is a similar ticket for openjdk from 2004, with a comment from Josh Bloch: &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-5028425?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-5028425?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14293660" author="tn" created="Tue, 27 Jan 2015 15:09:58 +0000"  >&lt;p&gt;Reverted performance improvement, added clarifying javadoc wrt runtime complexity and did a slight improvement over the original code in r1655062.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12537770" name="Test.java" size="746" author="mertguldur" created="Tue, 24 Jul 2012 23:50:37 +0000"/>
                            <attachment id="12537769" name="patch.diff" size="1189" author="mertguldur" created="Tue, 24 Jul 2012 23:50:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 24 Jan 2015 18:07:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255281</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0eqnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-426] performance problem in ListOrderedSet.retainAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-426</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in ListOrderedSet.retainAll().&lt;br/&gt;
It appears in version 3.2.1 and also in revision 1365132.  I attached&lt;br/&gt;
a test that exposes this problem and a patch that fixes it.  On my&lt;br/&gt;
machine, for this test, the patch provides a 263X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 3682&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 14&lt;/p&gt;

&lt;p&gt;The problem is that the code for method&lt;br/&gt;
&quot;ListOrderedSet.retainAll(Collection&amp;lt;?&amp;gt; coll)&quot; is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; retainAll(Collection&amp;lt;?&amp;gt; coll) {
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; result = collection.retainAll(coll);
....
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;because &quot;collection.retainAll(coll)&quot; has quadratic complexity if&lt;br/&gt;
parameter &quot;coll&quot; is a List.  Conceptually, the solution is to call&lt;br/&gt;
&quot;coll.retainAll(collection)&quot; which has linear complexity (not&lt;br/&gt;
quadratic), because &quot;collection&quot; is always a HashSet (we know this,&lt;br/&gt;
because &quot;collection&quot; is an inherited field of ListOrderedSet, and thus&lt;br/&gt;
cannot have another type).  See the&lt;br/&gt;
&quot;java.util.AbstractCollection.retainAll()&quot; code inlined below for why&lt;br/&gt;
one call has quadratic complexity, and the other has linear&lt;br/&gt;
complexity.&lt;/p&gt;

&lt;p&gt;Directly calling &quot;coll.retainAll(collection)&quot; would change the&lt;br/&gt;
behavior of ListOrderedSet.retainAll(), which is why the patch seems a&lt;br/&gt;
bit involved.  In reality, the patch simulates the behavior of&lt;br/&gt;
&quot;coll.retainAll(collection)&quot; (which is just the intersection of two&lt;br/&gt;
collections).  You can easily see this by looking at the patch and at&lt;br/&gt;
the &quot;java.util.AbstractCollection.retainAll()&quot; code inlined below.&lt;/p&gt;

&lt;p&gt;&quot;collection.retainAll(coll)&quot; is &quot;java.util.HashSet.retainAll()&quot;, which&lt;br/&gt;
is &quot;java.util.AbstractCollection.retainAll()&quot;, which has the code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; retainAll(Collection&amp;lt;?&amp;gt; c) {
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; modified = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    Iterator&amp;lt;E&amp;gt; e = iterator();
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (e.hasNext()) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!c.contains(e.next())) {
            e.remove();
            modified = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; modified;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 


&lt;p&gt;Is this a bug, or am I misunderstanding the intended behavior?  If so,&lt;br/&gt;
can you please confirm if the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12600077">COLLECTIONS-426</key>
            <summary>performance problem in ListOrderedSet.retainAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jul 2012 22:04:01 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:16 +0000</updated>
                            <resolved>Tue, 27 Jan 2015 15:06:21 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                    <fixVersion>4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14290740" author="tn" created="Sat, 24 Jan 2015 18:06:54 +0000"  >&lt;p&gt;This fix is wrong imho and should be reverted for 4.1&lt;/p&gt;</comment>
                            <comment id="14290912" author="adriannistor" created="Sun, 25 Jan 2015 00:40:29 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;Oh, ok.  Why is the fix wrong?  What is the bug in this fix?&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</comment>
                            <comment id="14293655" author="tn" created="Tue, 27 Jan 2015 15:06:21 +0000"  >&lt;p&gt;Reverted the performance improvement and added clarifying javadoc wrt runtime complexity in r1655060.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12537758" name="Test.java" size="665" author="adriannistor" created="Tue, 24 Jul 2012 22:04:36 +0000"/>
                            <attachment id="12537757" name="patch.diff" size="1445" author="adriannistor" created="Tue, 24 Jul 2012 22:04:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 24 Jan 2015 18:06:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255280</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0eqnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84081</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-425] performance problem in ListOrderedMap.remove()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-425</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in ListOrderedMap.remove().&lt;br/&gt;
It appears in version 3.2.1 and also in revision 1365132.  I attached&lt;br/&gt;
a test that exposes this problem and a simple patch that fixes it.  On&lt;br/&gt;
my machine, for this test, the patch provides a 213X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 1497&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 7&lt;/p&gt;

&lt;p&gt;The patch changes the &quot;ListOrderedMap.remove(Object key)&quot; code from:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = getMap().remove(key);
insertOrder.remove(key);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (decorated().containsKey(key)) {
    result = decorated().remove(key);
    insertOrder.remove(key);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If &quot;decorated()&quot; does not contain the key, there is no need to remove&lt;br/&gt;
it.  This change significantly speeds up the code by avoiding the call&lt;br/&gt;
to &quot;insertOrder.remove(key)&quot;, which is very expensive because&lt;br/&gt;
&quot;insertOrder&quot; is an ArrayList, and removing from an ArrayList is a&lt;br/&gt;
linear time operation.&lt;/p&gt;

&lt;p&gt;It may appear that the check &quot;if (decorated().containsKey(key))&quot; may&lt;br/&gt;
slow down the code when &quot;decorated()&quot; contains the key, because it&lt;br/&gt;
adds a new operation &quot;decorated().containsKey(key)&quot;, without avoiding&lt;br/&gt;
the calls to &quot;getMap().remove(key)&quot; and &quot;insertOrder.remove(key)&quot;.&lt;/p&gt;

&lt;p&gt;I attached a test, TestWorstCase.java, that show that, even when&lt;br/&gt;
removing only existing keys (i.e., &quot;decorated().containsKey(key)&quot;&lt;br/&gt;
always returns &quot;true&quot;), the patched version takes almost the same time&lt;br/&gt;
as the un-patched version.&lt;/p&gt;

&lt;p&gt;To run TestWorstCase, just do:&lt;/p&gt;

&lt;p&gt;$ java TestWorstCase&lt;/p&gt;

&lt;p&gt;The output for the un-patched version for TestWorstCase is:&lt;br/&gt;
Time is 96&lt;/p&gt;

&lt;p&gt;The output for the patched version for TestWorstCase is:&lt;br/&gt;
Time is 97&lt;/p&gt;

&lt;p&gt;The reason why the patch does not slow down the code, even for this&lt;br/&gt;
worst case, is because &quot;decorated().containsKey(key)&quot; is a&lt;br/&gt;
&quot;containsKey()&quot; on a HashMap (very fast, constant time operation),&lt;br/&gt;
whereas &quot;insertOrder.remove(key);&quot; is a &quot;remove()&quot; on an ArrayList&lt;br/&gt;
(very slow, linear time operation).  So the time taken by&lt;br/&gt;
&quot;decorated().containsKey(key)&quot; is negligible compared to the time&lt;br/&gt;
taken by &quot;insertOrder.remove(key);&quot;.  In other words, most of the time&lt;br/&gt;
is spent inside &quot;insertOrder.remove(key)&quot;, and performing one&lt;br/&gt;
additional fast operation cannot be noticed.&lt;/p&gt;

&lt;p&gt;Is this truly a bug? If so, can you please confirm if the patch is&lt;br/&gt;
correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12600047">COLLECTIONS-425</key>
            <summary>performance problem in ListOrderedMap.remove()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jul 2012 18:15:42 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:43 +0000</updated>
                            <resolved>Wed, 25 Jul 2012 21:15:28 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13422620" author="tn" created="Wed, 25 Jul 2012 21:15:28 +0000"  >&lt;p&gt;Fixed in r1365749. Thanks for the report and patch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12537722" name="Test.java" size="732" author="adriannistor" created="Tue, 24 Jul 2012 18:15:59 +0000"/>
                            <attachment id="12537723" name="TestWorstCase.java" size="736" author="adriannistor" created="Tue, 24 Jul 2012 18:15:59 +0000"/>
                            <attachment id="12537721" name="patch.diff" size="664" author="adriannistor" created="Tue, 24 Jul 2012 18:15:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jul 2012 21:15:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164343</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-424] Surprising exception by CompositeSet in a situation where CompositeCollection works fine</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-424</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;We have a method that uses a CompositeCollection. Here&apos;s a simplified version of it:&lt;/p&gt;

&lt;p&gt;  void m(CompositeCollection coll) &lt;/p&gt;
{
    coll.addComposited(new TreeBag());
  }

&lt;p&gt;It works fine when the argument is a CompositeCollection, but it throws an exception when the argument is a CompositeSet. E.g.:&lt;/p&gt;

&lt;p&gt;  m(new CompositeCollection());  // OK&lt;br/&gt;
  m(new CompositeSet());         // IllegalArgumentException&lt;/p&gt;

&lt;p&gt;Although the exception is documented in CompositeSet, this behavior is very surprising. Is there a way to have m() accept CompositeCollections without running into this exception? The only solution that comes to my mind is to dynamically check the type of &apos;coll&apos; in m(), but this is a rather nasty work-around.&lt;/p&gt;


&lt;p&gt;A better solution may be to make the genericity of CompositeCollection explicit by adding a type parameter:&lt;/p&gt;

&lt;p&gt;  class CompositeCollection&amp;lt;T extends Collection&amp;gt; {&lt;br/&gt;
    void addComposited(T c) &lt;/p&gt;
{ /* .. */ }&lt;br/&gt;
  }&lt;br/&gt;
	&lt;br/&gt;
  class CompositeSet extends CompositeCollection&amp;lt;Set&amp;gt; {&lt;br/&gt;
    @Override void addComposited(Set c) { /* .. */ }
&lt;p&gt;  }&lt;/p&gt;

&lt;p&gt;This way, users of CompositeCollection must choose the kind of collections that can be composed and will not encounter surprises, such as the above.&lt;/p&gt;</description>
                <environment>&lt;p&gt;All environments&lt;/p&gt;</environment>
        <key id="12599826">COLLECTIONS-424</key>
            <summary>Surprising exception by CompositeSet in a situation where CompositeCollection works fine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michaelpradel">Michael Pradel</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jul 2012 09:07:51 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:39 +0000</updated>
                            <resolved>Sun, 17 Mar 2013 10:03:19 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Set</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13421525" author="srirangadeepthi" created="Tue, 24 Jul 2012 16:43:14 +0000"  >&lt;p&gt;I started working on this issue..but wondering how to assign this issue to myself..Can anybody help me on this..&lt;/p&gt;</comment>
                            <comment id="13421744" author="tn" created="Tue, 24 Jul 2012 20:55:31 +0000"  >&lt;p&gt;Hi srirangadeepthi,&lt;/p&gt;

&lt;p&gt;you can attach patches for this specific problem directly to the issue, there is no need to assign the issue itself to you.&lt;/p&gt;

&lt;p&gt;Thomas&lt;/p&gt;</comment>
                            <comment id="13446373" author="srirangadeepthi" created="Fri, 31 Aug 2012 21:03:44 +0000"  >&lt;p&gt;I have uploaded the patch. Here is the brief explanation of the changes i made in the current files.&lt;/p&gt;

&lt;p&gt;1. Composite Collection holds the collections added to it in List&amp;lt;E&amp;gt; instead of List&amp;lt;Collection&amp;lt;E&amp;gt;&amp;gt;.This solves the issue of type checking in the code as mentioned in the bug.&lt;/p&gt;

&lt;p&gt;2. I see add() and addComposited() performing the same functionality according to the current version.Whereas according to the apache commons collections doc,the functionalities are supposed to be different as shown below.&lt;/p&gt;

&lt;p&gt;add(java.lang.Object obj)&lt;br/&gt;
          Adds an object to the collection, throwing UnsupportedOperationException unless a CollectionMutator strategy is specified.&lt;/p&gt;

&lt;p&gt;addAll(java.util.Collection coll)&lt;br/&gt;
          Adds a collection of elements to this collection, throwing UnsupportedOperationException unless a CollectionMutator strategy is specified.&lt;/p&gt;

&lt;p&gt;addComposited(java.util.Collection c)&lt;br/&gt;
          Add an additional collection to this composite.&lt;/p&gt;

&lt;p&gt;But according to the current version,both does the same thing.In that case i don&apos;t see the need of having two methods for the same functionality.So i changed the functionality of the methods according to the document.&lt;/p&gt;

&lt;p&gt;3. I changed the junit test cases accordingly and uploaded in the patch.&lt;/p&gt;</comment>
                            <comment id="13451609" author="srirangadeepthi" created="Sun, 9 Sep 2012 14:52:44 +0000"  >&lt;p&gt;Hi..just wanted to remind about the patch uploaded.&lt;/p&gt;</comment>
                            <comment id="13459830" author="tn" created="Thu, 20 Sep 2012 18:25:14 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;thanks for providing the patch, but unfortunately I am not sure if it goes into the right direction. Constraining a CompositeCollection to just one specific collection type is against the idea of the class (to provide a composite interface for a set of collections). Also the type safety for the element type is lost due to the fact that CompositeCollections extends Collection&amp;lt;Object&amp;gt;.&lt;/p&gt;

&lt;p&gt;Tbh, I am more in favor of rejecting this issue or removing the inheritance to CompositeCollection in CompositeSet as there is no real need for it apart from code re-use.&lt;/p&gt;</comment>
                            <comment id="13596343" author="tn" created="Thu, 7 Mar 2013 20:45:39 +0000"  >&lt;p&gt;I would be in favor of removing the inheritance of CompositeCollection, as it violates the &lt;a href=&quot;http://en.wikipedia.org/wiki/Liskov_substitution_principle&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Liskov substitution principle&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt; a CompositeSet is &lt;b&gt;not&lt;/b&gt; a CompositeCollection, and can not replace one&lt;/p&gt;

&lt;p&gt;Any objections?&lt;/p&gt;</comment>
                            <comment id="13598378" author="tn" created="Sun, 10 Mar 2013 20:40:34 +0000"  >&lt;p&gt;The patch removes the inheritance to CompositeCollection and cleans up the code with everything that does not make sense for a CompositeSet.&lt;/p&gt;

&lt;p&gt;We also can not extend a composite set / collection with collections containing subtypes (e.g. Set&amp;lt;? extends E&amp;gt;) as this may lead to undefined behavior.&lt;/p&gt;

&lt;p&gt;Consider the following case:&lt;/p&gt;

&lt;p&gt;class A&lt;br/&gt;
class B extends A&lt;/p&gt;

&lt;p&gt;a CompositeSet set which is composed of a Set&amp;lt;A&amp;gt; and a Set&amp;lt;B&amp;gt;&lt;/p&gt;

&lt;p&gt;if set.add(A) would be called, the mutator could decide to add A to the Set&amp;lt;B&amp;gt; which in turn will lead to runtime errors.&lt;/p&gt;</comment>
                            <comment id="13604562" author="tn" created="Sun, 17 Mar 2013 10:03:19 +0000"  >&lt;p&gt;Applied patch in r1457410.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12572989" name="COLLECTIONS-424.patch" size="31116" author="tn" created="Sun, 10 Mar 2013 20:40:34 +0000"/>
                            <attachment id="12543337" name="collections424.patch" size="50947" author="srirangadeepthi" created="Fri, 31 Aug 2012 20:54:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jul 2012 16:43:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244856</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05uav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32006</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-423] FastArrayList.toString() fails to check for reference to itself</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-423</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;FastArrayList.toString() throws a StackOverflowError when the list contains itself, because toString() is called recursively. In contrast, ArrayList checks for this case and deals with it appropriately. E.g.:&lt;/p&gt;

&lt;p&gt;  ArrayList l = new FastArrayList();&lt;br/&gt;
  l.add(l);&lt;br/&gt;
  l.toString(); // StackOverflowError&lt;/p&gt;

&lt;p&gt;But:&lt;/p&gt;

&lt;p&gt;  ArrayList l = new ArrayList();&lt;br/&gt;
  l.add(l);&lt;br/&gt;
  l.toString(); // OK&lt;/p&gt;

&lt;p&gt;To be compatible with its superclass, FastArrayList should also consider this special case.&lt;/p&gt;</description>
                <environment>&lt;p&gt;All environments&lt;/p&gt;</environment>
        <key id="12599824">COLLECTIONS-423</key>
            <summary>FastArrayList.toString() fails to check for reference to itself</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michaelpradel">Michael Pradel</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jul 2012 09:05:27 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:13 +0000</updated>
                            <resolved>Sun, 26 Aug 2012 21:06:25 +0000</resolved>
                                    <version>3.2.1</version>
                                                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13422509" author="tn" created="Wed, 25 Jul 2012 18:59:37 +0000"  >&lt;p&gt;Hi Michael,&lt;/p&gt;

&lt;p&gt;thanks for your bug report. It is unlikely that there will be a 3.2.2 release and the FastArrayList has been dropped for future major releases (currently preparing release 4.0) in favor of CopyOnWriteArrayList which is available from the standard JDK.&lt;/p&gt;

&lt;p&gt;Thomas&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jul 2012 18:59:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255282</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0eqo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84083</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-421] Update JavaDoc in ListUtils to discribe generified methods</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-421</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The JavaDoc of &lt;tt&gt;ListUtils.lazyList()&lt;/tt&gt; and &lt;tt&gt;ListUtils.fixedSizeList&lt;/tt&gt; still refer to the old methods prior to generics. This should be updated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12597903">COLLECTIONS-421</key>
            <summary>Update JavaDoc in ListUtils to discribe generified methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="britter">Benedikt Ritter</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Jul 2012 14:47:40 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:48 +0000</updated>
                            <resolved>Sat, 14 Jul 2012 21:36:54 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13408686" author="britter" created="Sat, 7 Jul 2012 14:52:24 +0000"  >&lt;p&gt;Sorry, I&apos;ve created this issue with the wrong type. Should be Improvement.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch. It just contains JavaDoc changes.&lt;/p&gt;</comment>
                            <comment id="13414515" author="tn" created="Sat, 14 Jul 2012 21:36:54 +0000"  >&lt;p&gt;Thanks for the patch! Applied together with other small fixes in r1361590.&lt;/p&gt;</comment>
                            <comment id="13414606" author="britter" created="Sun, 15 Jul 2012 11:35:29 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;thanks for taking care of this. Is there a reason why you didn&apos;t change &lt;br/&gt;
&lt;tt&gt;After the above code is executed, &amp;lt;code&amp;gt;date&amp;lt;/code&amp;gt; will contain a new &amp;lt;code&amp;gt;Date&amp;lt;/code&amp;gt; instance.&lt;/tt&gt;&lt;br/&gt;
to &lt;br/&gt;
&lt;tt&gt;After the above code is executed, &amp;lt;code&amp;gt;date&amp;lt;/code&amp;gt; will refer to a new &amp;lt;code&amp;gt;Date&amp;lt;/code&amp;gt; instance.&lt;/tt&gt;&lt;br/&gt;
as I suggested? IMHO the date variable is a reference to an instance of type &lt;tt&gt;Date&lt;/tt&gt;. So &quot;refer to&quot; is a bit more precise than &quot;contain a&quot;.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Benedikt&lt;/p&gt;</comment>
                            <comment id="13414611" author="tn" created="Sun, 15 Jul 2012 11:48:26 +0000"  >&lt;p&gt;You are right, I just missed it, done in r1361690.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12535530" name="COLLECTIONS-421.patch" size="1647" author="britter" created="Sat, 7 Jul 2012 14:52:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 14 Jul 2012 21:36:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292942</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-420] CompositeCollection.containsAll() is very slow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-420</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in&lt;br/&gt;
CompositeCollection.containsAll().  It appears in version 3.2.1 and&lt;br/&gt;
also in revision 1355448.  I attached a test that exposes this problem&lt;br/&gt;
and a patch that fixes it.  On my machine, for this test, the patch&lt;br/&gt;
provides a 167X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 9192&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 54&lt;/p&gt;

&lt;p&gt;The problem is that &lt;br/&gt;
&quot;CompositeCollection.containsAll(Collection&amp;lt;?&amp;gt; coll)&quot; performs &lt;br/&gt;
&quot;contains(item)&quot; for each item in &quot;coll&quot;, and &quot;contains(item)&quot;&lt;br/&gt;
searches &quot;item&quot; in all collections in CompositeCollection.  This can&lt;br/&gt;
be very slow if the collections in CompositeCollection have slow&lt;br/&gt;
&quot;contains()&quot;, e.g., when these collections are lists.&lt;/p&gt;

&lt;p&gt;The patch I attached puts the elements in each collection of&lt;br/&gt;
CompositeCollection in a HashSet (which has very fast &quot;contains()&quot;) if&lt;br/&gt;
that collection is not already a set.  For efficiency, putting&lt;br/&gt;
elements in several HashSet objects is performed lazily in the patch.&lt;/p&gt;

&lt;p&gt;Is this a bug, or am I misunderstanding the intended behavior?  If so,&lt;br/&gt;
can you please confirm that the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12596483">COLLECTIONS-420</key>
            <summary>CompositeCollection.containsAll() is very slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Sat, 30 Jun 2012 01:05:38 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:15 +0000</updated>
                            <resolved>Sun, 26 Aug 2012 21:25:18 +0000</resolved>
                                    <version>3.2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13442197" author="tn" created="Sun, 26 Aug 2012 21:25:18 +0000"  >&lt;p&gt;CompositeCollection is a decorator for existing collections. Operations shall not alter the backing collections. To support a unified view on collections with a fast contains, users should better use a CompositeSet and convert the collections to a set themselves.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12534082" name="Test.java" size="937" author="adriannistor" created="Sat, 30 Jun 2012 01:05:50 +0000"/>
                            <attachment id="12534081" name="patch.diff" size="1892" author="adriannistor" created="Sat, 30 Jun 2012 01:05:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Aug 2012 21:25:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255283</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0eqof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84084</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-418] ListUtils.retainAll() is very slow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-418</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in ListUtils.retainAll().  It&lt;br/&gt;
appears in version 3.2.1 and also in revision 1355448.  I attached a&lt;br/&gt;
test that exposes this problem and a one-line patch that fixes it.  On&lt;br/&gt;
my machine, for this test, the patch provides a 238X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 5485&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 23&lt;/p&gt;

&lt;p&gt;As the patch shows, the problem is that&lt;br/&gt;
&quot;ListUtils.retainAll(Collection&amp;lt;E&amp;gt; collection, Collection&amp;lt;?&amp;gt; retain)&quot;&lt;br/&gt;
performs &quot;retain.contains(obj)&quot; for each element in &quot;collection&quot;,&lt;br/&gt;
which can be very expensive if &quot;retain.contains(obj)&quot; is expensive,&lt;br/&gt;
e.g., when &quot;retain&quot; is a list.&lt;/p&gt;

&lt;p&gt;The one-line patch I attached puts the elements of &quot;retain&quot; in a&lt;br/&gt;
HashSet (which has very fast &quot;contains()&quot;), if &quot;retain&quot; is not already&lt;br/&gt;
a set:&lt;/p&gt;

&lt;p&gt;&quot;if (!(retain instanceof java.util.Set&amp;lt;?&amp;gt;)) retain = new HashSet&amp;lt;Object&amp;gt;(retain);&quot;&lt;/p&gt;

&lt;p&gt;Is this a bug, or am I misunderstanding the intended behavior? If so,&lt;br/&gt;
can you please confirm that the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12596465">COLLECTIONS-418</key>
            <summary>ListUtils.retainAll() is very slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2012 22:16:34 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:17 +0000</updated>
                            <resolved>Sun, 26 Aug 2012 21:32:45 +0000</resolved>
                                    <version>3.2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13442201" author="tn" created="Sun, 26 Aug 2012 21:32:46 +0000"  >&lt;p&gt;Added to the javadoc a clarification on the runtime complexity of the method. Users shall use a data structure for the elements to be retained which supports a fast implementation of contains.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12534059" name="Test.java" size="668" author="adriannistor" created="Fri, 29 Jun 2012 22:16:46 +0000"/>
                            <attachment id="12534058" name="patch.diff" size="672" author="adriannistor" created="Fri, 29 Jun 2012 22:16:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Aug 2012 21:32:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255284</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0eqon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84085</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-417] AbstractLinkedList.retainAll() is very slow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-417</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in&lt;br/&gt;
AbstractLinkedList.retainAll().  It appears in version 3.2.1 and also&lt;br/&gt;
in revision 1355448.  I attached a test that exposes this problem and&lt;br/&gt;
a one-line patch that fixes it.  On my machine, for this test, the&lt;br/&gt;
patch provides a 158X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 5531&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 35&lt;/p&gt;

&lt;p&gt;As the patch shows, the problem is that&lt;br/&gt;
&quot;AbstractLinkedList.retainAll(Collection&amp;lt;?&amp;gt; coll)&quot; performs&lt;br/&gt;
&quot;coll.contains(it.next())&quot; for each element in the AbstractLinkedList,&lt;br/&gt;
which can be very expensive if &quot;coll.contains()&quot; is expensive, e.g.,&lt;br/&gt;
when &quot;coll&quot; is a list.&lt;/p&gt;

&lt;p&gt;The one-line patch I attached puts the elements of &quot;coll&quot; in a HashSet&lt;br/&gt;
(which has very fast &quot;contains()&quot;), if &quot;coll&quot; is not already a set:&lt;/p&gt;

&lt;p&gt;&quot;if (!(coll instanceof java.util.Set&amp;lt;?&amp;gt;)) coll = new java.util.HashSet&amp;lt;Object&amp;gt;(coll);&quot;&lt;/p&gt;

&lt;p&gt;Is this a bug, or am I misunderstanding the intended behavior? If so,&lt;br/&gt;
can you please confirm that the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12596461">COLLECTIONS-417</key>
            <summary>AbstractLinkedList.retainAll() is very slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2012 22:01:30 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:39 +0000</updated>
                            <resolved>Thu, 20 Sep 2012 18:07:52 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13445397" author="adriannistor" created="Thu, 30 Aug 2012 23:05:08 +0000"  >&lt;p&gt;I am attaching a patch with the javadoc clarification on the runtime&lt;br/&gt;
complexity of the method.  This javadoc patch is almost identical to&lt;br/&gt;
the javadoc added for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-416&quot; title=&quot;ListUtils.removeAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-416&quot;&gt;&lt;del&gt;COLLECTIONS-416&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-418&quot; title=&quot;ListUtils.retainAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-418&quot;&gt;&lt;del&gt;COLLECTIONS-418&lt;/del&gt;&lt;/a&gt;.  As&lt;br/&gt;
discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-416&quot; title=&quot;ListUtils.removeAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-416&quot;&gt;&lt;del&gt;COLLECTIONS-416&lt;/del&gt;&lt;/a&gt;, users should use a data structure for&lt;br/&gt;
the elements to be retained which supports a fast implementation of&lt;br/&gt;
contains.&lt;/p&gt;</comment>
                            <comment id="13459811" author="tn" created="Thu, 20 Sep 2012 18:07:52 +0000"  >&lt;p&gt;Applied patch in r1388146. Thanks for the patch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12534056" name="Test.java" size="699" author="adriannistor" created="Fri, 29 Jun 2012 22:01:43 +0000"/>
                            <attachment id="12543186" name="docPatch.diff" size="1022" author="adriannistor" created="Thu, 30 Aug 2012 23:05:44 +0000"/>
                            <attachment id="12534055" name="patch.diff" size="691" author="adriannistor" created="Fri, 29 Jun 2012 22:01:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Sep 2012 18:07:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244858</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05ubb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32008</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-416] ListUtils.removeAll() is very slow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-416</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in ListUtils.removeAll().  It&lt;br/&gt;
appears in version 3.2.1 and also in revision 1355448.  I attached a&lt;br/&gt;
test that exposes this problem and a one-line patch that fixes it.  On&lt;br/&gt;
my machine, for this test, the patch provides a 217X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 5430&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 25&lt;/p&gt;

&lt;p&gt;As the patch shows, the problem is that&lt;br/&gt;
&quot;ListUtils.removeAll(Collection&amp;lt;E&amp;gt; collection, Collection&amp;lt;?&amp;gt; remove)&quot;&lt;br/&gt;
performs &quot;remove.contains(obj)&quot; for each element in &quot;collection&quot;,&lt;br/&gt;
which can be very expensive if &quot;remove.contains(obj)&quot; is expensive,&lt;br/&gt;
e.g., when &quot;remove&quot; is a list.&lt;/p&gt;

&lt;p&gt;The one-line patch I attached puts the elements of &quot;remove&quot; in a&lt;br/&gt;
HashSet (which has very fast &quot;contains()&quot;), if &quot;remove&quot; is not already&lt;br/&gt;
a set:&lt;/p&gt;

&lt;p&gt;&quot;if (!(remove instanceof java.util.Set&amp;lt;?&amp;gt;)) remove = new HashSet&amp;lt;Object&amp;gt;(remove);&quot;&lt;/p&gt;

&lt;p&gt;Is this a bug, or am I misunderstanding the intended behavior? If so,&lt;br/&gt;
can you please confirm that the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12596453">COLLECTIONS-416</key>
            <summary>ListUtils.removeAll() is very slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2012 21:09:44 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:16 +0000</updated>
                            <resolved>Wed, 25 Jul 2012 21:40:45 +0000</resolved>
                                    <version>3.2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13406087" author="tn" created="Tue, 3 Jul 2012 21:50:35 +0000"  >&lt;p&gt;Hi Adrian,&lt;/p&gt;

&lt;p&gt;in this case (similar to the other issues like &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-415&quot; title=&quot;AbstractLinkedList.removeAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-415&quot;&gt;&lt;del&gt;COLLECTIONS-415&lt;/del&gt;&lt;/a&gt;, 417, 418) I am not sure if the proposed patch is the right way to go. I would actually prefer to document the behavior of the method and to make it clear that removeAll will call contains() on the collection to be removed, so that users have to use a collection that supports this operation fast, e.g. by wrapping it themselves in the same way as outlined in the patch.&lt;/p&gt;</comment>
                            <comment id="13406156" author="adriannistor" created="Tue, 3 Jul 2012 23:11:03 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;Yes, you are absolutely right, my patch:&lt;/p&gt;

&lt;p&gt;&quot;if (!(remove instanceof java.util.Set&amp;lt;?&amp;gt;)) remove = new HashSet&amp;lt;Object&amp;gt;(remove);&quot;&lt;/p&gt;

&lt;p&gt;assumes that anything else except Set has slow contains(), which is&lt;br/&gt;
false.&lt;/p&gt;

&lt;p&gt;Maybe the best tradeoff is to document this problem, just like you&lt;br/&gt;
said, and handle the most common case of slow contains(), i.e., when&lt;br/&gt;
the collection is a list:&lt;/p&gt;

&lt;p&gt;&quot;if (remove instanceof java.util.List) remove = new HashSet&amp;lt;Object&amp;gt;(remove);&quot;&lt;/p&gt;

&lt;p&gt;The scalable solution would be to have a helper method, presumably in&lt;br/&gt;
CollectionUtils:&lt;/p&gt;

&lt;p&gt;public static &amp;lt;E&amp;gt; Collection&amp;lt;E&amp;gt; createFastContainsCollection(Collection&amp;lt;E&amp;gt; c) {&lt;br/&gt;
   return (c instanceof List&amp;lt;E&amp;gt;) ? new HashSet&amp;lt;E&amp;gt;(c) : c;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;and use it when the complexity of contains() affects the complexity of&lt;br/&gt;
the algorithm.  This is similar with choosing your algorithm based on&lt;br/&gt;
if a collection implements java.util.RandomAccess or not.&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;
</comment>
                            <comment id="13414674" author="tn" created="Sun, 15 Jul 2012 15:41:55 +0000"  >&lt;p&gt;Hi Adrian,&lt;/p&gt;

&lt;p&gt;maybe this case is not as clear as for example &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-420&quot; title=&quot;CompositeCollection.containsAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-420&quot;&gt;&lt;del&gt;COLLECTIONS-420&lt;/del&gt;&lt;/a&gt;. I think that users should use the proper data structures for their use-cases and we should be careful to not just mimick HashSet behavior regardless of what comes along. If somebody provides a List to removeAll, he/she needs to be aware that this will slow things down, and that a different data structure would be more appropriate (IF it contains lots of data of course, when there are just 1 or 2 elements it makes not much of a difference).&lt;/p&gt;

&lt;p&gt;Other people may have different opinions on this?&lt;/p&gt;

&lt;p&gt;Thomas&lt;/p&gt;</comment>
                            <comment id="13415173" author="adriannistor" created="Mon, 16 Jul 2012 14:31:08 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;Sure, I agree, documenting this behavior is equally good.&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;
</comment>
                            <comment id="13422638" author="tn" created="Wed, 25 Jul 2012 21:40:15 +0000"  >&lt;p&gt;Added clarifying javadoc to the method in r1365784.&lt;/p&gt;</comment>
                            <comment id="13422644" author="tn" created="Wed, 25 Jul 2012 21:42:45 +0000"  >&lt;p&gt;Resolved as &quot;Won&apos;t Fix&quot;. The user is responsible for using proper data structures as argument to this method. This is also inline with the jdk whenever there are are methods that take a Collection as input.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12534042" name="Test.java" size="668" author="adriannistor" created="Fri, 29 Jun 2012 21:09:57 +0000"/>
                            <attachment id="12534041" name="patch.diff" size="668" author="adriannistor" created="Fri, 29 Jun 2012 21:09:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Jul 2012 21:50:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292943</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-415] AbstractLinkedList.removeAll() is very slow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-415</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in&lt;br/&gt;
AbstractLinkedList.removeAll().  It appears in version 3.2.1 and also&lt;br/&gt;
in revision 1355448.  I attached a test that exposes this problem and&lt;br/&gt;
a one-line patch that fixes it.  On my machine, for this test, the&lt;br/&gt;
patch provides a 226X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 5655&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 25&lt;/p&gt;

&lt;p&gt;As the patch shows, the problem is that&lt;br/&gt;
&quot;AbstractLinkedList.removeAll(Collection&amp;lt;?&amp;gt; coll)&quot; performs&lt;br/&gt;
&quot;coll.contains(it.next())&quot; for each element in the AbstractLinkedList,&lt;br/&gt;
which can be very expensive if &quot;coll.contains()&quot; is expensive, e.g.,&lt;br/&gt;
when &quot;coll&quot; is a list.&lt;/p&gt;

&lt;p&gt;The one-line patch I attached puts the elements of &quot;coll&quot; in a HashSet&lt;br/&gt;
(which has very fast &quot;contains()&quot;), if &quot;coll&quot; is not already a set:&lt;/p&gt;

&lt;p&gt;&quot;if (!(coll instanceof java.util.Set&amp;lt;?&amp;gt;)) coll = new java.util.HashSet&amp;lt;Object&amp;gt;(coll);&quot;&lt;/p&gt;

&lt;p&gt;Is this a bug, or am I misunderstanding the intended behavior? If so,&lt;br/&gt;
can you please confirm that the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12596451">COLLECTIONS-415</key>
            <summary>AbstractLinkedList.removeAll() is very slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2012 21:02:29 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:49 +0000</updated>
                            <resolved>Thu, 20 Sep 2012 18:08:08 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13445392" author="adriannistor" created="Thu, 30 Aug 2012 22:58:34 +0000"  >&lt;p&gt;I am attaching a patch with the javadoc clarification on the runtime&lt;br/&gt;
complexity of the method.  This javadoc patch is almost identical to&lt;br/&gt;
the javadoc added for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-416&quot; title=&quot;ListUtils.removeAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-416&quot;&gt;&lt;del&gt;COLLECTIONS-416&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-418&quot; title=&quot;ListUtils.retainAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-418&quot;&gt;&lt;del&gt;COLLECTIONS-418&lt;/del&gt;&lt;/a&gt;.  As&lt;br/&gt;
discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-416&quot; title=&quot;ListUtils.removeAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-416&quot;&gt;&lt;del&gt;COLLECTIONS-416&lt;/del&gt;&lt;/a&gt;, users should use a data structure for&lt;br/&gt;
the elements to be removed which supports a fast implementation of&lt;br/&gt;
contains.&lt;/p&gt;</comment>
                            <comment id="13459812" author="tn" created="Thu, 20 Sep 2012 18:08:08 +0000"  >&lt;p&gt;Applied patch in r1388146. Thanks for the patch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12534040" name="Test.java" size="699" author="adriannistor" created="Fri, 29 Jun 2012 21:02:48 +0000"/>
                            <attachment id="12543183" name="docPatch.diff" size="963" author="adriannistor" created="Thu, 30 Aug 2012 22:58:51 +0000"/>
                            <attachment id="12534039" name="patch.diff" size="657" author="adriannistor" created="Fri, 29 Jun 2012 21:02:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Sep 2012 18:08:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244857</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05ub3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32007</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-414] Collections does not compile with openjdk 1.6.0_24</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-414</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;There are several classes for which generic type inference does not work when using the openjdk 1.6.0_24 compiler:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] /home/tn/workspace/apache/commons-collections/src/main/java/org/apache/commons/collections/functors/OnePredicate.java:[66,38] invalid inferred types for T; actual arguments do not conforms to inferred formal arguments
[ERROR] required: org.apache.commons.collections.Predicate&amp;lt;? super java.lang.Object&amp;gt;[]
[ERROR] found: org.apache.commons.collections.Predicate&amp;lt;? super T&amp;gt;[]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is mainly due to re-using a method argument that is restricted by Predicate&amp;lt;? super T&amp;gt; to assign methods results of type Predicate&amp;lt;T&amp;gt;.&lt;/p&gt;

&lt;p&gt;The eclipse compiler does not report an error in these cases.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12595681">COLLECTIONS-414</key>
            <summary>Collections does not compile with openjdk 1.6.0_24</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tn">Thomas Neidhart</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 Jun 2012 12:31:59 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:53 +0000</updated>
                            <resolved>Sun, 15 Jul 2012 11:19:15 +0000</resolved>
                                    <version>Nightly Builds</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13399945" author="hudson" created="Sat, 23 Jun 2012 13:06:28 +0000"  >&lt;p&gt;Integrated in commons-collections #31 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/31/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/31/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-414&quot; title=&quot;Collections does not compile with openjdk 1.6.0_24&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-414&quot;&gt;&lt;del&gt;COLLECTIONS-414&lt;/del&gt;&lt;/a&gt; Fix type inference problems. (Revision 1353123)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353123&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353123&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/ChainedClosure.java&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/ChainedTransformer.java&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/NonePredicate.java&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/OnePredicate.java&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/SwitchClosure.java&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/SwitchTransformer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399956" author="tn" created="Sat, 23 Jun 2012 13:32:28 +0000"  >&lt;p&gt;This is related to the following bugs:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6302954&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6302954&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=98379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=98379&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13399965" author="hudson" created="Sat, 23 Jun 2012 14:35:41 +0000"  >&lt;p&gt;Integrated in commons-collections #32 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/32/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/32/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-414&quot; title=&quot;Collections does not compile with openjdk 1.6.0_24&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-414&quot;&gt;&lt;del&gt;COLLECTIONS-414&lt;/del&gt;&lt;/a&gt; work-around for test-case when providing null argument to static method that infers return type based on input argument. (Revision 1353130)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353130&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353130&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/test/java/org/apache/commons/collections/TestCollectionUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 23 Jun 2012 13:06:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292944</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164346</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-413] Performance problem in DualHashBidiMap</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-413</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in DualHashBidiMap.  It&lt;br/&gt;
appears in version 3.2.1 and also in revision 1352574 (21 June 2012).&lt;br/&gt;
I attached a test that exposes this problem and a patch that fixes it.&lt;br/&gt;
On my machine, for this test, the patch provides a 173X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 5029&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 29&lt;/p&gt;

&lt;p&gt;The attached test shows that, for a &quot;DualHashBidiMap bidi&quot; object, the&lt;br/&gt;
following operation is very slow:&lt;/p&gt;

&lt;p&gt;bidi.entrySet().removeAll(toRemove);&lt;/p&gt;

&lt;p&gt;DualHashBidiMap.entrySet() returns a&lt;br/&gt;
&quot;DualHashBidiMap.EntrySet&quot; object, which inherits &lt;br/&gt;
removeAll(Collection&amp;lt;?&amp;gt; coll) from &quot;DualHashBidiMap.View&quot;.  &lt;/p&gt;

&lt;p&gt;As the patch shows, the problem is that&lt;br/&gt;
&quot;DualHashBidiMap.View.removeAll(Collection&amp;lt;?&amp;gt; coll)&quot; performs&lt;br/&gt;
&quot;coll.contains(it.next())&quot; for each element in the View.&lt;br/&gt;
&quot;coll.contains(it.next())&quot; can be very slow, e.g., if &quot;coll&quot; is a&lt;br/&gt;
list.&lt;/p&gt;

&lt;p&gt;The patch avoids this cost by using remove(Object obj) (defined in&lt;br/&gt;
&quot;EntrySet&amp;lt;K, V&amp;gt;&quot;, &quot;KeySet&amp;lt;K&amp;gt;&quot;, and &quot;Values&amp;lt;V&amp;gt;&quot;), which is fast because&lt;br/&gt;
it uses only operations on sets.&lt;/p&gt;

&lt;p&gt;Is this a bug, or am I misunderstanding something? If so, can you&lt;br/&gt;
please confirm that the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;

</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12595468">COLLECTIONS-413</key>
            <summary>Performance problem in DualHashBidiMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jun 2012 18:38:48 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:26 +0000</updated>
                            <resolved>Sat, 23 Jun 2012 12:06:24 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13399926" author="tn" created="Sat, 23 Jun 2012 12:06:24 +0000"  >&lt;p&gt;Applied patch in r1353115.&lt;/p&gt;

&lt;p&gt;Thanks for reporting and providing a patch!&lt;/p&gt;</comment>
                            <comment id="13399932" author="hudson" created="Sat, 23 Jun 2012 12:35:26 +0000"  >&lt;p&gt;Integrated in commons-collections #30 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/30/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/30/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-413&quot; title=&quot;Performance problem in DualHashBidiMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-413&quot;&gt;&lt;del&gt;COLLECTIONS-413&lt;/del&gt;&lt;/a&gt; Improve performance of DualBidiMap#removeAll. Thanks to Adrian Nistor for report and patch. (Revision 1353115)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353115&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353115&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/bidimap/AbstractDualBidiMap.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12532923" name="Test.java" size="911" author="adriannistor" created="Thu, 21 Jun 2012 18:39:08 +0000"/>
                            <attachment id="12533130" name="removeAll.diff" size="826" author="adriannistor" created="Fri, 22 Jun 2012 23:32:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 23 Jun 2012 12:06:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292945</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164347</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-412] CollectionUtils.subtract() is very slow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-412</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in CollectionUtils.subtract().&lt;br/&gt;
It appears in version 3.2.1 and also in revision 1352300 (20 June&lt;br/&gt;
2012).  I attached a test that exposes this problem and a patch that&lt;br/&gt;
fixes it.  On my machine, for this test, the patch provides a 204X&lt;br/&gt;
speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 11036&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 54&lt;/p&gt;

&lt;p&gt;The root cause of this problem is similar to the root cause of the&lt;br/&gt;
previously fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-406&quot; title=&quot;ListUtils.subtract is very slow &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-406&quot;&gt;&lt;del&gt;COLLECTIONS-406&lt;/del&gt;&lt;/a&gt; in ListUtils.subtract(), i.e.,&lt;br/&gt;
quadratic complexity instead of linear complexity.  This problem&lt;br/&gt;
affects two methods:&lt;/p&gt;

&lt;p&gt;CollectionUtils.subtract(final Iterable&amp;lt;? extends O&amp;gt; a, final Iterable&amp;lt;? extends O&amp;gt; b)&lt;br/&gt;
and&lt;br/&gt;
CollectionUtils.subtract(final Iterable&amp;lt;? extends O&amp;gt; a, final Iterable&amp;lt;? extends O&amp;gt; b, final Predicate&amp;lt;O&amp;gt; p)&lt;/p&gt;

&lt;p&gt;because the former just calls the latter.&lt;/p&gt;

&lt;p&gt;Currently, the code for&lt;br/&gt;
&quot;CollectionUtils.subtract(final Iterable&amp;lt;? extends O&amp;gt; a, final Iterable&amp;lt;? extends O&amp;gt; b, final Predicate&amp;lt;O&amp;gt; p)&quot;&lt;br/&gt;
is:&lt;/p&gt;

&lt;p&gt;ArrayList&amp;lt;O&amp;gt; list = new ArrayList&amp;lt;O&amp;gt;();&lt;br/&gt;
addAll(list, a);&lt;br/&gt;
for (O element : b) {&lt;br/&gt;
    if (p.evaluate(element)) &lt;/p&gt;
{
        list.remove(element);
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;which is quadratic, because &quot;list.remove(element)&quot; has linear&lt;br/&gt;
complexity for &quot;ArrayList&amp;lt;O&amp;gt; list = new ArrayList&amp;lt;O&amp;gt;()&quot;.&lt;/p&gt;

&lt;p&gt;The attached patch makes the remove() be constant complexity by&lt;br/&gt;
removing from an org.apache.commons.collections.bag.HashBag.  The&lt;br/&gt;
attached patch is very similar to the patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-406&quot; title=&quot;ListUtils.subtract is very slow &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-406&quot;&gt;&lt;del&gt;COLLECTIONS-406&lt;/del&gt;&lt;/a&gt;, so I&lt;br/&gt;
assume the risk of applying this patch is minimal.  Just like in the&lt;br/&gt;
patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-406&quot; title=&quot;ListUtils.subtract is very slow &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-406&quot;&gt;&lt;del&gt;COLLECTIONS-406&lt;/del&gt;&lt;/a&gt;, this patch uses a HashBag (and not a&lt;br/&gt;
HashSet) to respect cardinality when there are repeated objects.&lt;/p&gt;

&lt;p&gt;Can you please confirm if the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;
</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12595338">COLLECTIONS-412</key>
            <summary>CollectionUtils.subtract() is very slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jun 2012 20:44:19 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:22 +0000</updated>
                            <resolved>Sat, 23 Jun 2012 11:34:06 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13399915" author="tn" created="Sat, 23 Jun 2012 11:34:06 +0000"  >&lt;p&gt;Fixed in r1353111.&lt;/p&gt;

&lt;p&gt;I did not apply the patch, but rather changed the method in a similar way as outlined in the patch. Instead of evaluating the predicate on all elements of A, only elements of B that satisfy the predicate are added to a bag. The rest is similar to the patch.&lt;/p&gt;

&lt;p&gt;Also added more information in the javadoc how the resulting collection will look like depending on the predicate evaluation.&lt;/p&gt;

&lt;p&gt;Thanks for reporting and the patch!&lt;/p&gt;</comment>
                            <comment id="13399923" author="hudson" created="Sat, 23 Jun 2012 12:01:09 +0000"  >&lt;p&gt;Integrated in commons-collections #29 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/29/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/29/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-412&quot; title=&quot;CollectionUtils.subtract() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-412&quot;&gt;&lt;del&gt;COLLECTIONS-412&lt;/del&gt;&lt;/a&gt; Improved performance of CollectionUtils#subtract. Thanks to Adrian Nistor for report and patch. (Revision 1353111)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353111&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353111&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/CollectionUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12532761" name="Test.java" size="835" author="adriannistor" created="Wed, 20 Jun 2012 20:44:30 +0000"/>
                            <attachment id="12532760" name="patch.diff" size="1407" author="adriannistor" created="Wed, 20 Jun 2012 20:44:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 23 Jun 2012 11:34:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164348</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-411] Exception in ListOrderedMap.putAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-411</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering an IndexOutOfBoundsException in&lt;br/&gt;
ListOrderedMap.putAll(int index, Map&amp;lt;? extends K, ? extends V&amp;gt; map).&lt;br/&gt;
It appears in revision 1351903 (20 June 2012).  I have attached a test&lt;br/&gt;
that exposes this problem.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output is:&lt;/p&gt;

&lt;p&gt;......................................................................&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: Index: 5, Size: 4&lt;br/&gt;
        at java.util.ArrayList.add(ArrayList.java:367)&lt;br/&gt;
        at org.apache.commons.collections.map.ListOrderedMap.put(ListOrderedMap.java:437)&lt;br/&gt;
        at org.apache.commons.collections.map.ListOrderedMap.putAll(ListOrderedMap.java:245)&lt;br/&gt;
        at Test.main(Test.java:19)&lt;br/&gt;
......................................................................&lt;/p&gt;

&lt;p&gt;The documentation does not specify anything like this.  Is this a bug,&lt;br/&gt;
or should the documentation just be updated?  If the former, is there&lt;br/&gt;
a patch for it?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;

</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12595281">COLLECTIONS-411</key>
            <summary>Exception in ListOrderedMap.putAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jun 2012 15:45:07 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:31 +0000</updated>
                            <resolved>Wed, 20 Jun 2012 17:54:27 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13397687" author="tn" created="Wed, 20 Jun 2012 17:54:27 +0000"  >&lt;p&gt;Fixed in r1352235.&lt;/p&gt;

&lt;p&gt;The problem was that when a key was replaced, the insert index was not adjusted accordingly.&lt;/p&gt;

&lt;p&gt;Thanks for reporting!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12532714" name="Test.java" size="549" author="adriannistor" created="Wed, 20 Jun 2012 15:45:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jun 2012 17:54:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292947</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164349</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-410] SetUniqueList.addAll() is very slow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-410</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in SetUniqueList.addAll().  It&lt;br/&gt;
appears in revision 1351837 (19 June 2012).  I attached a test that&lt;br/&gt;
exposes this problem and a patch that fixes it.  On my machine, for&lt;br/&gt;
this test, the patch provides a 540X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 2706&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 5&lt;/p&gt;

&lt;p&gt;As the patch shows, the problem is that&lt;br/&gt;
SetUniqueList.addAll(int index, Collection&amp;lt;? extends E&amp;gt; coll)&lt;br/&gt;
performs:&lt;br/&gt;
&quot;add(index, e)&quot; for each element in &quot;coll&quot;. This is very expensive, &lt;br/&gt;
because each &quot;add(index, e)&quot; performs a &lt;br/&gt;
LinkedList.add(int index, E element), which requires traversing the &lt;br/&gt;
LinkedList to find the index.&lt;/p&gt;

&lt;p&gt;The patched version avoids this cost by inserting all the elements at&lt;br/&gt;
once, thus performing only one insert.&lt;/p&gt;

&lt;p&gt;Is this a bug? If so, can you please confirm that the patch is&lt;br/&gt;
correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12595162">COLLECTIONS-410</key>
            <summary>SetUniqueList.addAll() is very slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jun 2012 20:37:38 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:56 +0000</updated>
                            <resolved>Wed, 20 Jun 2012 18:04:42 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13397702" author="tn" created="Wed, 20 Jun 2012 18:04:42 +0000"  >&lt;p&gt;Applied patch in r1352243.&lt;/p&gt;

&lt;p&gt;Thanks for reporting!&lt;/p&gt;</comment>
                            <comment id="13397744" author="hudson" created="Wed, 20 Jun 2012 18:32:39 +0000"  >&lt;p&gt;Integrated in commons-collections #27 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/27/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/27/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-410&quot; title=&quot;SetUniqueList.addAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-410&quot;&gt;&lt;del&gt;COLLECTIONS-410&lt;/del&gt;&lt;/a&gt; Improved performance of SetUniqueList.addAll(index, coll). Thanks to Adrian Nistor for reporting and providing a patch. (Revision 1352243)&lt;/p&gt;

&lt;p&gt;     Result = UNSTABLE&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1352243&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1352243&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/list/SetUniqueList.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13397860" author="tn" created="Wed, 20 Jun 2012 20:58:53 +0000"  >&lt;p&gt;The failing unit test on hudson/jenkins has been fixed in r1352264.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12532604" name="Test.java" size="786" author="adriannistor" created="Tue, 19 Jun 2012 20:37:56 +0000"/>
                            <attachment id="12532603" name="patch.diff" size="1006" author="adriannistor" created="Tue, 19 Jun 2012 20:37:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jun 2012 18:04:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292948</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-409] ListOrderedSet.addAll() is very slow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-409</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in ListOrderedSet.addAll().&lt;br/&gt;
It appears in version 3.2.1 and also in revision 1351465 (18 Jun&lt;br/&gt;
2012). I have attached a test that exposes this problem and a&lt;br/&gt;
three-line patch that fixes it. On my machine, for this test, the&lt;br/&gt;
patch provides a 79X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 1837&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 23&lt;/p&gt;

&lt;p&gt;As the patch shows, the problem is that &lt;br/&gt;
ListOrderedSet.addAll(int index, Collection&amp;lt;? extends E&amp;gt; coll) &lt;br/&gt;
performs:&lt;br/&gt;
&quot;setOrder.add(index++, e)&quot; for each element in &quot;coll&quot;.  This is very &lt;br/&gt;
expensive, because &quot;setOrder&quot; is an ArrayList, and inserting an&lt;br/&gt;
element in the middle of an ArrayList shifts all the elements to the&lt;br/&gt;
right.&lt;/p&gt;

&lt;p&gt;The patched version avoids this cost by inserting all the elements at&lt;br/&gt;
once, thus performing only one insert.&lt;/p&gt;

&lt;p&gt;Is this a bug?  If so, can you please confirm that the patch is&lt;br/&gt;
correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12595135">COLLECTIONS-409</key>
            <summary>ListOrderedSet.addAll() is very slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jun 2012 16:00:19 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:29 +0000</updated>
                            <resolved>Tue, 19 Jun 2012 19:52:30 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13397021" author="tn" created="Tue, 19 Jun 2012 19:52:30 +0000"  >&lt;p&gt;Applied the patch in r1351821.&lt;/p&gt;

&lt;p&gt;Thanks for reporting!&lt;/p&gt;</comment>
                            <comment id="13397032" author="hudson" created="Tue, 19 Jun 2012 20:06:31 +0000"  >&lt;p&gt;Integrated in commons-collections #23 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/23/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/23/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-409&quot; title=&quot;ListOrderedSet.addAll() is very slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-409&quot;&gt;&lt;del&gt;COLLECTIONS-409&lt;/del&gt;&lt;/a&gt; Improve performance of ListOrderedSet#addAll, add missing javadoc. Thanks to Adrian Nistor for reporting and providing a patch. (Revision 1351821)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1351821&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1351821&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/set/ListOrderedSet.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12558984">COLLECTIONS-407</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12532570" name="Test.java" size="704" author="adriannistor" created="Tue, 19 Jun 2012 16:00:55 +0000"/>
                            <attachment id="12532569" name="patch.diff" size="816" author="adriannistor" created="Tue, 19 Jun 2012 16:00:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Jun 2012 19:52:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292949</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164351</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-408] performance problem in SetUniqueList.removeAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-408</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in SetUniqueList.removeAll().&lt;br/&gt;
It appears in version 3.2.1 and also in revision 1344775 (31 May&lt;br/&gt;
2012).  I have attached a test that exposes this problem and a&lt;br/&gt;
one-line patch that fixes it.  The patch makes the code two times&lt;br/&gt;
faster for this test.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is: 5027&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is: 2554&lt;/p&gt;

&lt;p&gt;The one-line patch I attached changes the &lt;br/&gt;
SetUniqueList.removeAll(Collection&amp;lt;?&amp;gt; coll) code from:&lt;/p&gt;

&lt;p&gt;boolean result = super.removeAll(coll);&lt;br/&gt;
set.removeAll(coll);&lt;br/&gt;
return result;&lt;/p&gt;

&lt;p&gt;to:&lt;/p&gt;

&lt;p&gt;boolean result = super.removeAll(coll);&lt;br/&gt;
if (result) set.removeAll(coll);&lt;br/&gt;
return result;&lt;/p&gt;

&lt;p&gt;If &quot;super.removeAll(coll)&quot; did not change the collection, there is no&lt;br/&gt;
need to call &quot;set.removeAll(coll)&quot;, because we already know there is&lt;br/&gt;
nothing to remove.&lt;/p&gt;

&lt;p&gt;As one may expect &quot;set.removeAll(coll)&quot; (on a set) to be faster than&lt;br/&gt;
&quot;super.removeAll(coll)&quot; (on a list), one may have expected the speedup&lt;br/&gt;
gained by avoiding &quot;set.removeAll(coll)&quot; to be smaller than 2X&lt;br/&gt;
achieved for the attached test.  However, the speedup is 2X because&lt;br/&gt;
&quot;java.util.HashSet.removeAll(Collection&amp;lt;?&amp;gt; collection)&quot; has quadratic&lt;br/&gt;
(not linear) complexity if &quot;this.size() &amp;lt;= collection.size()&quot; and the&lt;br/&gt;
&quot;collection&quot; is a list.  Thus, &quot;set.removeAll(coll)&quot; is about as slow&lt;br/&gt;
as &quot;super.removeAll(coll)&quot; in this case, and not executing&lt;br/&gt;
&quot;set.removeAll(coll)&quot; reduces the work done by half.  The quadratic&lt;br/&gt;
behavior of &quot;java.util.HashSet.removeAll(Collection&amp;lt;?&amp;gt; collection)&quot;&lt;br/&gt;
comes from &quot;java.util.AbstractSet.removeAll(Collection&amp;lt;?&amp;gt; c)&quot; and is&lt;br/&gt;
discussed for example here:&lt;br/&gt;
&lt;a href=&quot;http://mail.openjdk.java.net/pipermail/core-libs-dev/2011-July/007148.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail.openjdk.java.net/pipermail/core-libs-dev/2011-July/007148.html&lt;/a&gt;&lt;br/&gt;
(The link is for OpenJDK, but Oracle JDK has the same problem.)&lt;/p&gt;

&lt;p&gt;In many other cases &quot;set.removeAll(coll)&quot; is actually faster than&lt;br/&gt;
&quot;super.removeAll(coll)&quot;, so one can get even more speedup by&lt;br/&gt;
reordering those two checks:&lt;/p&gt;

&lt;p&gt;boolean result = set.removeAll(coll);&lt;br/&gt;
if (result) super.removeAll(coll);&lt;br/&gt;
return result;&lt;/p&gt;

&lt;p&gt;Is this a bug, or am I misunderstanding the intended behavior?  If so,&lt;br/&gt;
can you please confirm that the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;
</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12559038">COLLECTIONS-408</key>
            <summary>performance problem in SetUniqueList.removeAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Jun 2012 06:56:47 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:45 +0000</updated>
                            <resolved>Tue, 19 Jun 2012 19:22:58 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13396999" author="tn" created="Tue, 19 Jun 2012 19:22:58 +0000"  >&lt;p&gt;Fixed in r1351804.&lt;/p&gt;

&lt;p&gt;I have not applied the patch, but rather used a similar approach as for ListOrderedSet: instead of using the removeAll method of the underlying collection, iterate over the elements of the collection to be removed and call the remove method on each element. The remove method does now the same check as in ListOrderedSet, just the other way round: first remove in the set, and then in the list if something was removed.&lt;/p&gt;</comment>
                            <comment id="13397003" author="hudson" created="Tue, 19 Jun 2012 19:33:14 +0000"  >&lt;p&gt;Integrated in commons-collections #22 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/22/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/22/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-408&quot; title=&quot;performance problem in SetUniqueList.removeAll()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-408&quot;&gt;&lt;del&gt;COLLECTIONS-408&lt;/del&gt;&lt;/a&gt; improve performance of remove and removeAll methods, add missing javadoc. Thanks to Adrian Nistor for reporting. (Revision 1351804)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1351804&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1351804&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/list/SetUniqueList.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12558984">COLLECTIONS-407</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12530638" name="Test.java" size="814" author="adriannistor" created="Sat, 2 Jun 2012 06:57:03 +0000"/>
                            <attachment id="12530637" name="patch.diff" size="565" author="adriannistor" created="Sat, 2 Jun 2012 06:57:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Jun 2012 19:22:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292950</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164352</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-407] ListOrderedSet.removeAll() is slow</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-407</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am encountering a performance problem in ListOrderedSet.removeAll().&lt;br/&gt;
It appears in version 3.2.1 and also in revision 1344775 (31 May&lt;br/&gt;
2012).  I have attached a test that exposes this problem and a&lt;br/&gt;
one-line patch that fixes it.  On my machine, for this test, the patch&lt;br/&gt;
provides a 317X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;The output for the un-patched version is:&lt;br/&gt;
Time is 3812&lt;/p&gt;

&lt;p&gt;The output for the patched version is:&lt;br/&gt;
Time is 12&lt;/p&gt;

&lt;p&gt;As the patch shows, the problem is in &lt;br/&gt;
ListOrderedSet.remove(Object object).  The code for this method is:&lt;/p&gt;

&lt;p&gt;boolean result = collection.remove(object);&lt;br/&gt;
setOrder.remove(object);&lt;br/&gt;
return result;&lt;/p&gt;

&lt;p&gt;The patch changes it to :&lt;/p&gt;

&lt;p&gt;boolean result = collection.remove(object);&lt;br/&gt;
if (result) setOrder.remove(object);&lt;br/&gt;
return result;&lt;/p&gt;

&lt;p&gt;The &quot;setOrder.remove(object)&quot; is not necessary if &lt;br/&gt;
&quot;collection.remove(object)&quot; did not find the object.&lt;/p&gt;

&lt;p&gt;This small change speeds up&lt;br/&gt;
ListOrderedSet.ListOrderedSet.removeAll(Collection&amp;lt;?&amp;gt; coll) because&lt;br/&gt;
ListOrderedSet.ListOrderedSet.removeAll(Collection&amp;lt;?&amp;gt; coll) iterates&lt;br/&gt;
over all the elements in &quot;coll&quot; and calls &lt;br/&gt;
ListOrderedSet.remove(Object object).  So the un-patched code has&lt;br/&gt;
quadratic complexity, while the patched code has linear complexity.&lt;/p&gt;

&lt;p&gt;Is this truly a bug, or am I missing something here?  If so, can you&lt;br/&gt;
please confirm if the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12558984">COLLECTIONS-407</key>
            <summary>ListOrderedSet.removeAll() is slow</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Jun 2012 17:55:32 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:35 +0000</updated>
                            <resolved>Tue, 19 Jun 2012 19:00:13 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13396574" author="tn" created="Tue, 19 Jun 2012 07:16:38 +0000"  >&lt;p&gt;The patch looks correct. The only thing that comes to my mind is that there may be collections which wrongly implement the methods in question and do not correctly return the change status.&lt;/p&gt;

&lt;p&gt;So the way it is implemented right now is a bit slower but will work in all cases.&lt;/p&gt;</comment>
                            <comment id="13396860" author="adriannistor" created="Tue, 19 Jun 2012 15:36:04 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;Thanks, it&apos;s great that the patch works.&lt;/p&gt;

&lt;p&gt;java.util, Apache Commons Collections, Guava Libraries, all use on a&lt;br/&gt;
regular basis methods from the collections passed as parameters (over&lt;br/&gt;
which these three libraries have no control), just like in this case.&lt;br/&gt;
It&apos;s the normal thing to do, there must be hundreds of such examples,&lt;br/&gt;
and nobody tries to avoid them.&lt;/p&gt;

&lt;p&gt;In fact, how can one use the collections passes as parameters&lt;br/&gt;
otherwise?  For example, the implementation of ListOrderedSet alone&lt;br/&gt;
(not to mention the other classes in Commons Collections, java.util,&lt;br/&gt;
and Guava Libraries) uses methods from &quot;collection&quot; 9 different times,&lt;br/&gt;
including the return value of &quot;collection.retainAll&quot; in the&lt;br/&gt;
implementation of &quot;ListOrderedSet.retainAll(Collection&amp;lt;?&amp;gt; coll)&quot;.  It&lt;br/&gt;
would not be possible to implement Commons Collections otherwise.&lt;/p&gt;

&lt;p&gt;&amp;gt; a bit slower&lt;/p&gt;

&lt;p&gt;Quadratic vs linear complexity is a big difference.  This can get&lt;br/&gt;
really slow (e.g., two orders of magnitude) even for medium size data&lt;br/&gt;
sets.&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;
</comment>
                            <comment id="13396899" author="tn" created="Tue, 19 Jun 2012 16:21:28 +0000"  >&lt;p&gt;You are right, in fact other methods (in ListOrderedSet, e.g. retainAll) already use similar logic as proposed in your patch, so I guess it is safe to do it also for the remove method.&lt;/p&gt;</comment>
                            <comment id="13396985" author="tn" created="Tue, 19 Jun 2012 19:00:13 +0000"  >&lt;p&gt;Applied patch in r1351800.&lt;/p&gt;

&lt;p&gt;Thanks for reporting!&lt;/p&gt;</comment>
                            <comment id="13396990" author="hudson" created="Tue, 19 Jun 2012 19:06:13 +0000"  >&lt;p&gt;Integrated in commons-collections #21 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/21/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/21/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-407&quot; title=&quot;ListOrderedSet.removeAll() is slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-407&quot;&gt;&lt;del&gt;COLLECTIONS-407&lt;/del&gt;&lt;/a&gt; improve performance of remove method by taking method result from underlying collection into account. Thanks to Adrian Nistor for reporting and providing a patch. (Revision 1351800)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1351800&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1351800&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/set/ListOrderedSet.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12595135">COLLECTIONS-409</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12559038">COLLECTIONS-408</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12530579" name="Test.java" size="744" author="adriannistor" created="Fri, 1 Jun 2012 17:55:58 +0000"/>
                            <attachment id="12530578" name="patch.diff" size="569" author="adriannistor" created="Fri, 1 Jun 2012 17:55:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Jun 2012 07:16:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292951</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164353</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-406] ListUtils.subtract is very slow </title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-406</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;ListUtils.subtract is very slow when subtracting two large lists.  The&lt;br/&gt;
root cause of this problem is similar to the root cause of the&lt;br/&gt;
previously fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-328&quot; title=&quot;ListUtils.intersect is slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-328&quot;&gt;&lt;del&gt;COLLECTIONS-328&lt;/del&gt;&lt;/a&gt; in ListUtils, i.e., quadratic&lt;br/&gt;
complexity instead of linear complexity.&lt;/p&gt;

&lt;p&gt;I am encountering this problem in version 3.2.1 and also in revision&lt;br/&gt;
1342815 (May 25th 2012).  I have attached a test that exposes this&lt;br/&gt;
problem and a simple patch.  On my machine, for the attached test,&lt;br/&gt;
this patch provides a 95X speedup.&lt;/p&gt;

&lt;p&gt;To run the test, just do:&lt;/p&gt;

&lt;p&gt;$ java Test&lt;/p&gt;

&lt;p&gt;Currently, the code for ListUtils.subtract is:&lt;/p&gt;

&lt;p&gt;final ArrayList&amp;lt;E&amp;gt; result = new ArrayList&amp;lt;E&amp;gt;(list1);&lt;br/&gt;
for (E e : list2) {&lt;br/&gt;
    result.remove(e);&lt;br/&gt;
}&lt;br/&gt;
return result;&lt;/p&gt;

&lt;p&gt;which is quadratic, because result.remove(e) has linear complexity.&lt;/p&gt;

&lt;p&gt;The attached patch makes the remove() be constant complexity by&lt;br/&gt;
removing from an org.apache.commons.collections.bag.HashBag.  I use&lt;br/&gt;
HashBag and not HashSet because ListUtils.subtract needs to respect&lt;br/&gt;
the cardinality when there are repeated objects in the list.&lt;/p&gt;

&lt;p&gt;As mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-328&quot; title=&quot;ListUtils.intersect is slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-328&quot;&gt;&lt;del&gt;COLLECTIONS-328&lt;/del&gt;&lt;/a&gt; discussion, for small lists, there is&lt;br/&gt;
some overhead for creating the HashBag.  This can be fixed with a&lt;br/&gt;
threshold, but I did not implement it in my patch because the&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-328&quot; title=&quot;ListUtils.intersect is slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-328&quot;&gt;&lt;del&gt;COLLECTIONS-328&lt;/del&gt;&lt;/a&gt; patch does not implement it.&lt;/p&gt;

&lt;p&gt;Unlike the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-328&quot; title=&quot;ListUtils.intersect is slow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-328&quot;&gt;&lt;del&gt;COLLECTIONS-328&lt;/del&gt;&lt;/a&gt;, my patch does not choose the&lt;br/&gt;
list to iterate over based on size, because of the cardinality&lt;br/&gt;
requirement in subtract.  This means the code could be made even&lt;br/&gt;
faster if we could use something like a LinkedHashBag but neither&lt;br/&gt;
Apache Collections nor standard Java libraries have such a class.&lt;br/&gt;
Even so, this patch is still a lot faster than the original version.&lt;/p&gt;

&lt;p&gt;Is this truly a bug, or am I missing something here?  If so, can you&lt;br/&gt;
please confirm if the patch is correct?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Adrian&lt;/p&gt;

</description>
                <environment>&lt;p&gt;java 1.6.0_24&lt;br/&gt;
Ubuntu 11.10&lt;/p&gt;</environment>
        <key id="12558285">COLLECTIONS-406</key>
            <summary>ListUtils.subtract is very slow </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adriannistor">Adrian Nistor</reporter>
                        <labels>
                    </labels>
                <created>Sun, 27 May 2012 19:52:30 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:41 +0000</updated>
                            <resolved>Sun, 3 Jun 2012 10:25:40 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13288136" author="tn" created="Sun, 3 Jun 2012 10:25:40 +0000"  >&lt;p&gt;Thanks for reporting this issue and providing a patch.&lt;/p&gt;

&lt;p&gt;The patch has been applied in r1345644 together with unit tests for the subtract method (was missing before).&lt;/p&gt;</comment>
                            <comment id="13288138" author="hudson" created="Sun, 3 Jun 2012 10:35:11 +0000"  >&lt;p&gt;Integrated in commons-collections #20 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/20/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/20/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-406&quot; title=&quot;ListUtils.subtract is very slow &quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-406&quot;&gt;&lt;del&gt;COLLECTIONS-406&lt;/del&gt;&lt;/a&gt; Improved ListUtils.subtract to O&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; performance. Thanks to Adrian Nistor for reporting and providing a patch. (Revision 1345644)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1345644&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1345644&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/ListUtils.java&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/test/java/org/apache/commons/collections/TestListUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12529905" name="Test.java" size="716" author="adriannistor" created="Sun, 27 May 2012 19:53:31 +0000"/>
                            <attachment id="12529904" name="patch.diff" size="1162" author="adriannistor" created="Sun, 27 May 2012 19:53:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 3 Jun 2012 10:25:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292952</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-402] Inconsistent Javadoc comment and code in intersection(List list1,List list2)in org.apache.commons.collections.ListUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-402</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The Javadoc comment below states that the method &quot;throws NullPointerException if either list is null&quot;. &lt;br/&gt;
    	     /*......&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if either list is null&lt;br/&gt;
	     */&lt;br/&gt;
	    public static List intersection(final List list1, final List list2)&lt;br/&gt;
	        ..&lt;br/&gt;
	    }&lt;br/&gt;
However, when called with a null list1 and an empty list2(i.e., &quot;intersection((List)null, new ArrayList())&quot;), the method executes normally without throwing any exception.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Suggested Fixes:&lt;br/&gt;
1. Add code &quot;if (list1 == null) throw NullPointerException();&quot; at the beginning of the method body.&lt;br/&gt;
or&lt;br/&gt;
2. Remove &quot;@throws NullPointerException if either list is null&quot; from the Javadoc.&lt;br/&gt;
or&lt;br/&gt;
3. Change &quot;@throws NullPointerException if either list is null&quot; to &quot;@throws NullPointerException if list2 is null or (the list2 is non-empty and the list1 is null)&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Platform Independent &lt;/p&gt;</environment>
        <key id="12548780">COLLECTIONS-402</key>
            <summary>Inconsistent Javadoc comment and code in intersection(List list1,List list2)in org.apache.commons.collections.ListUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Mar 2012 03:42:17 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:21 +0000</updated>
                            <resolved>Thu, 26 Jul 2012 20:59:40 +0000</resolved>
                                    <version>3.2.1</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="180">0.05h</timeoriginalestimate>
                            <timeestimate seconds="180">0.05h</timeestimate>
                                        <comments>
                            <comment id="13250006" author="tn" created="Mon, 9 Apr 2012 17:56:08 +0000"  >&lt;p&gt;Already fixed for 4.0, although we should consider throwing an IllegalArgumentException in such a case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Apr 2012 17:56:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164357</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-401] Inconsistent Javadoc comment and code in removeAll(Collection&lt;E&gt;, Collection&lt;?&gt;) in org.apache.commons.collections.ListUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-401</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The Javadoc comment below states that the method &quot;throws NullPointerException if either parameter is null&quot;. &lt;br/&gt;
    	     /*......&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if either parameter is null&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;E&amp;gt; List&amp;lt;E&amp;gt; removeAll(Collection&amp;lt;E&amp;gt; collection, Collection&amp;lt;?&amp;gt; remove) 
{
	        ..
	    }
&lt;p&gt;However, when called with two null collections (i.e., &quot;removeAll((Collection)null, (Collection)null)&quot;), the method executes normally without throwing any exception.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Suggested Fixes:&lt;br/&gt;
1. Add code &quot;if (collection == null) throw NullPointerException();&quot; at the beginning of the method body.&lt;br/&gt;
or&lt;br/&gt;
2. Remove &quot;@throws NullPointerException if either parameter is null&quot; from the Javadoc.&lt;br/&gt;
or&lt;br/&gt;
3. Change &quot;@throws NullPointerException if either parameter is null&quot; to &quot;@throws NullPointerException if the first collection is null or (the first collection is non-empty and the second collection is null)&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12548778">COLLECTIONS-401</key>
            <summary>Inconsistent Javadoc comment and code in removeAll(Collection&lt;E&gt;, Collection&lt;?&gt;) in org.apache.commons.collections.ListUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                            <label>javadoc</label>
                    </labels>
                <created>Fri, 30 Mar 2012 03:02:21 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:12 +0000</updated>
                            <resolved>Thu, 26 Jul 2012 21:02:52 +0000</resolved>
                                    <version>3.2.1</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="180">0.05h</timeoriginalestimate>
                            <timeestimate seconds="180">0.05h</timeestimate>
                                        <comments>
                            <comment id="13250005" author="tn" created="Mon, 9 Apr 2012 17:54:28 +0000"  >&lt;p&gt;Already fixed for 4.0, although we should consider throwing IllegalArgumentException in such cases.&lt;/p&gt;</comment>
                            <comment id="13397322" author="thomasle75@live.com" created="Wed, 20 Jun 2012 07:20:17 +0000"  >&lt;p&gt;the removeAll is calling ListUtils.retainAll instead of ListUtils.removeAll&lt;/p&gt;</comment>
                            <comment id="13397653" author="tn" created="Wed, 20 Jun 2012 17:23:51 +0000"  >&lt;p&gt;Can you be a bit more precise?&lt;/p&gt;

&lt;p&gt;Looking at the code of ListUtils, I do not see that retainAll is called. In fact doing a reference check of ListUtils.retainAll shows that it is only called by CollectionUtils.retainAll (and some test class).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Apr 2012 17:54:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233875</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164358</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-400] Inconsistent Javadoc comment and code in addIgnoreNull(Collection&lt;T&gt;, T) in org.apache.commons.collections.CollectionUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-400</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The Javadoc comment below states that the method &quot;throws NullPointerException if the collection is null&quot;. &lt;br/&gt;
    	    /**&lt;br/&gt;
	       .....&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param collection  the collection to add to, must not be null&lt;/li&gt;
	&lt;li&gt;@param object  the object to add, if null it will not be added&lt;/li&gt;
	&lt;li&gt;@return true if the collection changed&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if the collection is null&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;T&amp;gt; boolean addIgnoreNull(Collection&amp;lt;T&amp;gt; collection, T object) 
{
	        return (object != null &amp;amp;&amp;amp; collection.add(object));
	    }
&lt;p&gt;However, when called with an null collection and a null object (i.e., &quot;addIgnoreNull((Collection)null, null)&quot;), the method executes normally without throwing any exception.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Suggested Fixes:&lt;br/&gt;
1. Add code &quot;if (collection == null) throw NullPointerException();&quot; at the beginning of the method body.&lt;br/&gt;
or&lt;br/&gt;
2. Remove &quot;@throws NullPointerException if the collection is null&quot; from the Javadoc.&lt;br/&gt;
or&lt;br/&gt;
3. Change &quot;@throws NullPointerException if the collection is null&quot; to &quot;@throws NullPointerException if the collection is null and the object is non-null)&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Platform independent&lt;/p&gt;</environment>
        <key id="12548777">COLLECTIONS-400</key>
            <summary>Inconsistent Javadoc comment and code in addIgnoreNull(Collection&lt;T&gt;, T) in org.apache.commons.collections.CollectionUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                            <label>javadoc</label>
                    </labels>
                <created>Fri, 30 Mar 2012 02:59:47 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:27 +0000</updated>
                            <resolved>Mon, 9 Apr 2012 17:27:40 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="180">0.05h</timeoriginalestimate>
                            <timeestimate seconds="180">0.05h</timeestimate>
                                        <comments>
                            <comment id="13249983" author="tn" created="Mon, 9 Apr 2012 17:27:40 +0000"  >&lt;p&gt;Thanks for the report. I have added the missing null check in r1311344.&lt;/p&gt;</comment>
                            <comment id="13249987" author="hudson" created="Mon, 9 Apr 2012 17:33:23 +0000"  >&lt;p&gt;Integrated in commons-collections #16 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/16/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/16/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-400&quot; title=&quot;Inconsistent Javadoc comment and code in addIgnoreNull(Collection&amp;lt;T&amp;gt;, T) in org.apache.commons.collections.CollectionUtils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-400&quot;&gt;&lt;del&gt;COLLECTIONS-400&lt;/del&gt;&lt;/a&gt; Added missing null check, thanks to Shin Hwei Tan. (Revision 1311344)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311344&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311344&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/CollectionUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Apr 2012 17:27:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233874</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164359</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-394] FastTreeMap is not compatible with TreeMap</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-394</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;FastTreeMap extends TreeMap in a way that doesn&apos;t preserve the superclass behavior. For example, the following code prints &apos;null&apos;, but I would expect it to print &apos;1=1&apos;, which is what TreeMap does:&lt;/p&gt;

&lt;p&gt;TreeMap map = new FastTreeMap();&lt;br/&gt;
//TreeMap map = new TreeMap();&lt;/p&gt;

&lt;p&gt;map.put(1, &quot;1&quot;);&lt;br/&gt;
map.put(3, &quot;3&quot;);&lt;/p&gt;

&lt;p&gt;Entry e = map.floorEntry(2);&lt;br/&gt;
System.out.println(e);&lt;/p&gt;

&lt;p&gt;This behavior is surprising and can hit you every time a reference of type TreeMap refers to an instance of FastTreeMap. A subclass instance used through a superclass interface shouldn&apos;t change the visible behavior of its superclass.&lt;/p&gt;

&lt;p&gt;The reason for this problem seems to be that FastTreeMap both extends TreeMap and delegates to a TreeMap via the &apos;map&apos; field. I.e., there are  two map instances for a single FastTreeMap instance.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12544629">COLLECTIONS-394</key>
            <summary>FastTreeMap is not compatible with TreeMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michaelpradel">Michael Pradel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Feb 2012 14:49:23 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:14 +0000</updated>
                            <resolved>Sat, 23 Jun 2012 17:14:22 +0000</resolved>
                                    <version>3.2.1</version>
                                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13219256" author="garydgregory" created="Wed, 29 Feb 2012 14:51:42 +0000"  >&lt;p&gt;Would you be willing to provide a patch for unit test and code?&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="13220946" author="michaelpradel" created="Fri, 2 Mar 2012 14:19:33 +0000"  >&lt;p&gt;It seems the problem affects several other methods in FastTreeMap, specifically methods that have been added to TreeMap in Java 1.6. E.g. TreeMap.headMap(K) existed before Java 1.6 and is overridden by FastTreeMap, while TreeMap.headMap(K, boolean) got added in Java 1.6. and is not overridden by FastTreeMap. All inherited methods do not refer to the &apos;map&apos; field, and therefore use the wrong map.&lt;/p&gt;

&lt;p&gt;One way to fix these problems is to override all public methods from TreeMap in FastTreeMap. Since I&apos;m not familiar with FastTreeMap&apos;s implementation, I&apos;ll leave this task to someone more experienced with the Commons Collections.&lt;/p&gt;</comment>
                            <comment id="13399998" author="tn" created="Sat, 23 Jun 2012 17:14:22 +0000"  >&lt;p&gt;The FastTreeMap class has been removed from trunk.&lt;/p&gt;

&lt;p&gt;There is no drop-in replacement, but one can use a ConcurrentHashMap from the java.util.concurrent package or a synchronized TreeMap.&lt;/p&gt;

&lt;p&gt;Please open new issue if you would like to have an equivalent class in collections 4.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Feb 2012 14:51:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164361</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-391] Inconsistent Javadoc comment and code for toProperties(final Map&lt;K, V&gt;) in org.apache.commons.collections.MapUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-391</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The Javadoc comment below states that the parameter map &quot;..., may not be null&quot;:&lt;br/&gt;
   	   /**&lt;br/&gt;
	    ..&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param map  the map to convert to a Properties object, may not be null&lt;/li&gt;
	&lt;li&gt;@return the properties object&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;K, V&amp;gt; Properties toProperties(final Map&amp;lt;K, V&amp;gt; map) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {	        Properties answer = new Properties();	        if (map != null) {
	            ...
	        }	        return answer;	    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;However, the method return normally without throwing any exception when called with null.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Suggested Fixes:&lt;br/&gt;
1. Change &quot;@param map  the map to convert to a Properties object, may not be null&quot; to &quot;@param map  the map to convert to a Properties object, may be null&quot;&lt;br/&gt;
or&lt;br/&gt;
2. Remove &quot;may not be null&quot; from @param.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Platform Indepedent&lt;/p&gt;</environment>
        <key id="12537668">COLLECTIONS-391</key>
            <summary>Inconsistent Javadoc comment and code for toProperties(final Map&lt;K, V&gt;) in org.apache.commons.collections.MapUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                            <label>javadoc</label>
                            <label>null</label>
                    </labels>
                <created>Sun, 8 Jan 2012 08:38:34 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:37 +0000</updated>
                            <resolved>Mon, 9 Apr 2012 18:03:18 +0000</resolved>
                                    <version>4.0</version>
                    <version>4.x</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="120">2m</timeoriginalestimate>
                            <timeestimate seconds="120">2m</timeestimate>
                                        <comments>
                            <comment id="13250009" author="tn" created="Mon, 9 Apr 2012 18:03:18 +0000"  >&lt;p&gt;Thanks for the report. Fixed in r1311359.&lt;/p&gt;

&lt;p&gt;The additional constraint about the map parameter has been removed, as the javadoc already states that a null input will result in an empty properties object.&lt;/p&gt;</comment>
                            <comment id="13250052" author="hudson" created="Mon, 9 Apr 2012 18:45:04 +0000"  >&lt;p&gt;Integrated in commons-collections #17 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/17/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/17/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-391&quot; title=&quot;Inconsistent Javadoc comment and code for toProperties(final Map&amp;lt;K, V&amp;gt;) in org.apache.commons.collections.MapUtils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-391&quot;&gt;&lt;del&gt;COLLECTIONS-391&lt;/del&gt;&lt;/a&gt; Fixed javadoc, thanks to Shin Hwei Tan. (Revision 1311359)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311359&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311359&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/MapUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Apr 2012 18:03:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223174</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-390] Inconsistent Javadoc comment and code for mapTransformer(Map&lt;? super I, ? extends O&gt;) in org.apache.commons.collections.TransformerUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-390</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The Javadoc comment below states that the method &quot;throws IllegalArgumentException if the map is null&quot;:&lt;br/&gt;
   	    /** &lt;br/&gt;
	     ....&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param map  the map to use to transform the objects&lt;/li&gt;
	&lt;li&gt;@return the transformer&lt;/li&gt;
	&lt;li&gt;@throws IllegalArgumentException if the map is null&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;I, O&amp;gt; Transformer&amp;lt;I, O&amp;gt; mapTransformer(Map&amp;lt;? super I, ? extends O&amp;gt; map) 
{
	        return MapTransformer.mapTransformer(map);
	    }
&lt;p&gt;However, the method returns a NULL_INSTANCE object instead of throwing IllegalArgumentException when called with null.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Suggested Fixes:&lt;br/&gt;
1. Change &quot;@throws IllegalArgumentException if the map is null&quot; and &quot;@return&quot; to &quot;@return NULL_INSTANCE if the map is null&quot;.&lt;br/&gt;
or&lt;br/&gt;
2. Remove the entire &quot;throws IllegalArgumentException if the map is null&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Platform Independent&lt;/p&gt;</environment>
        <key id="12537667">COLLECTIONS-390</key>
            <summary>Inconsistent Javadoc comment and code for mapTransformer(Map&lt;? super I, ? extends O&gt;) in org.apache.commons.collections.TransformerUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                    </labels>
                <created>Sun, 8 Jan 2012 08:31:53 +0000</created>
                <updated>Mon, 24 Jun 2013 19:34:25 +0000</updated>
                            <resolved>Sun, 8 Jan 2012 08:32:43 +0000</resolved>
                                    <version>4.0</version>
                                                    <component>Buffer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="120">2m</timeoriginalestimate>
                            <timeestimate seconds="120">2m</timeestimate>
                                                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223173</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164365</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-389] Inconsistent Javadoc comment and code for mapTransformer(Map&lt;? super I, ? extends O&gt;) in org.apache.commons.collections.TransformerUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-389</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The Javadoc comment below states that the method &quot;throws IllegalArgumentException if the map is null&quot;:&lt;br/&gt;
   	    /** &lt;br/&gt;
	     ....&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param map  the map to use to transform the objects&lt;/li&gt;
	&lt;li&gt;@return the transformer&lt;/li&gt;
	&lt;li&gt;@throws IllegalArgumentException if the map is null&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;I, O&amp;gt; Transformer&amp;lt;I, O&amp;gt; mapTransformer(Map&amp;lt;? super I, ? extends O&amp;gt; map) 
{
	        return MapTransformer.mapTransformer(map);
	    }
&lt;p&gt;However, the method returns a NULL_INSTANCE object instead of throwing IllegalArgumentException when called with null.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Suggested Fixes:&lt;br/&gt;
1. Change &quot;@throws IllegalArgumentException if the map is null&quot; and &quot;@return&quot; to &quot;@return NULL_INSTANCE if the map is null&quot;.&lt;br/&gt;
or&lt;br/&gt;
2. Remove the entire &quot;throws IllegalArgumentException if the map is null&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Platform Independent&lt;/p&gt;</environment>
        <key id="12537666">COLLECTIONS-389</key>
            <summary>Inconsistent Javadoc comment and code for mapTransformer(Map&lt;? super I, ? extends O&gt;) in org.apache.commons.collections.TransformerUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                            <label>javadoc</label>
                            <label>null</label>
                    </labels>
                <created>Sun, 8 Jan 2012 08:31:44 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:55 +0000</updated>
                            <resolved>Mon, 9 Apr 2012 17:21:07 +0000</resolved>
                                    <version>4.0</version>
                    <version>4.x</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="120">2m</timeoriginalestimate>
                            <timeestimate seconds="120">2m</timeestimate>
                                        <comments>
                            <comment id="13249978" author="tn" created="Mon, 9 Apr 2012 17:21:08 +0000"  >&lt;p&gt;Thanks for the report. It has been fixed in r1311337.&lt;/p&gt;

&lt;p&gt;I have picked option 1.&lt;/p&gt;</comment>
                            <comment id="13249986" author="hudson" created="Mon, 9 Apr 2012 17:33:23 +0000"  >&lt;p&gt;Integrated in commons-collections #16 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/16/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/16/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-389&quot; title=&quot;Inconsistent Javadoc comment and code for mapTransformer(Map&amp;lt;? super I, ? extends O&amp;gt;) in org.apache.commons.collections.TransformerUtils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-389&quot;&gt;&lt;del&gt;COLLECTIONS-389&lt;/del&gt;&lt;/a&gt; Fixed javadoc, thanks to Shin Hwei Tan. (Revision 1311337)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311337&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311337&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/TransformerUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Apr 2012 17:21:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-388] Inconsistent Javadoc comment and code for prototypeFactory(T) in org.apache.commons.collections.FactoryUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-388</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The Javadoc comment below states that the method &quot;throws IllegalArgumentException if the prototype is null&quot;:&lt;br/&gt;
   	    /**	     &lt;br/&gt;
	     ..&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param prototype  the object to clone each time in the factory&lt;/li&gt;
	&lt;li&gt;@return the &amp;lt;code&amp;gt;prototype&amp;lt;/code&amp;gt; factory&lt;/li&gt;
	&lt;li&gt;@throws IllegalArgumentException if the prototype is null&lt;/li&gt;
	&lt;li&gt;@throws IllegalArgumentException if the prototype cannot be cloned&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;T&amp;gt; Factory&amp;lt;T&amp;gt; prototypeFactory(T  prototype) 
{
	        return PrototypeFactory.&amp;lt;T&amp;gt;prototypeFactory(prototype);
	    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, the method returns a NULL_INSTANCE object instead of throwing IllegalArgumentException when called with null.&lt;/p&gt;

&lt;p&gt;Suggested Fixes:&lt;br/&gt;
1. Change &quot;@throws IllegalArgumentException if the prototype is null&quot; and &quot;@return&quot; to &quot;@return NULL_INSTANCE if the prototype is null&quot;.&lt;br/&gt;
or&lt;br/&gt;
2. Remove the entire &quot;throws IllegalArgumentException if the prototype is null&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Platform independent&lt;/p&gt;</environment>
        <key id="12537665">COLLECTIONS-388</key>
            <summary>Inconsistent Javadoc comment and code for prototypeFactory(T) in org.apache.commons.collections.FactoryUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                            <label>javadoc</label>
                            <label>null</label>
                    </labels>
                <created>Sun, 8 Jan 2012 08:29:22 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:24 +0000</updated>
                            <resolved>Mon, 9 Apr 2012 17:16:33 +0000</resolved>
                                    <version>4.0</version>
                    <version>4.x</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="120">2m</timeoriginalestimate>
                            <timeestimate seconds="120">2m</timeestimate>
                                        <comments>
                            <comment id="13249973" author="tn" created="Mon, 9 Apr 2012 17:14:34 +0000"  >&lt;p&gt;Thanks for the hint, it has been fixed in r1311334.&lt;/p&gt;</comment>
                            <comment id="13249988" author="hudson" created="Mon, 9 Apr 2012 17:33:23 +0000"  >&lt;p&gt;Integrated in commons-collections #16 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/16/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/16/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-388&quot; title=&quot;Inconsistent Javadoc comment and code for prototypeFactory(T) in org.apache.commons.collections.FactoryUtils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-388&quot;&gt;&lt;del&gt;COLLECTIONS-388&lt;/del&gt;&lt;/a&gt; Fixed javadoc, thanks to Shin Hwei Tan. (Revision 1311334)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311334&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311334&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/FactoryUtils.java&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/PrototypeFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Apr 2012 17:14:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223171</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164367</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-387] CollectionUtils.removeAll does retain instead of remove</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-387</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;org.apache.commons.collections.CollectionUtils.removeAll(Collection, Collection) method calls org.apache.commons.collections.ListUtils.retainAll(Collection, Collection) instead of org.apache.commons.collections.ListUtils.removeAll(Collection, Collection).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12536417">COLLECTIONS-387</key>
            <summary>CollectionUtils.removeAll does retain instead of remove</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="smoker">Taras Pushyk</reporter>
                        <labels>
                            <label>bug</label>
                            <label>removeAll</label>
                    </labels>
                <created>Tue, 27 Dec 2011 12:34:41 +0000</created>
                <updated>Thu, 28 Feb 2013 20:02:07 +0000</updated>
                            <resolved>Tue, 27 Dec 2011 12:35:36 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222100</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-386] CollectionUtils.removeAll(Collection, Collection) has an CopyPaste-Failure</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-386</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;public static Collection removeAll(Collection collection, Collection remove) &lt;/p&gt;
{
        return ListUtils.retainAll(collection, remove);
    }</description>
                <environment>&lt;p&gt;commons-collections-3.2.1.jar&lt;/p&gt;</environment>
        <key id="12530050">COLLECTIONS-386</key>
            <summary>CollectionUtils.removeAll(Collection, Collection) has an CopyPaste-Failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="joehni">Joerg Schaible</assignee>
                                    <reporter username="thomas.steininger">Steininger Thomas</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Nov 2011 14:07:04 +0000</created>
                <updated>Thu, 3 Nov 2011 16:19:31 +0000</updated>
                            <resolved>Thu, 3 Nov 2011 16:19:31 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>4.0</fixVersion>
                    <fixVersion>Nightly Builds</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13143186" author="garydgregory" created="Thu, 3 Nov 2011 14:09:02 +0000"  >&lt;p&gt;This is already fixed in trunk.&lt;/p&gt;</comment>
                            <comment id="13143193" author="garydgregory" created="Thu, 3 Nov 2011 14:15:59 +0000"  >&lt;p&gt;Already in SVN trunk.&lt;/p&gt;</comment>
                            <comment id="13143276" author="joehni" created="Thu, 3 Nov 2011 16:19:31 +0000"  >&lt;p&gt;Closed as Nth duplicate, otherwise we might have it multiple times in the change log.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12467833">COLLECTIONS-357</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Nov 2011 14:09:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215909</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-385] Inconsistent Javadoc comment and code in addAll(Collection, Object[]) in org.apache.commons.collections.CollectionUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-385</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The Javadoc comment below states that the method &quot;throws NullPointerException if the collection or array is null&quot;. &lt;br/&gt;
    /** &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Adds all elements in the array to the given collection.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param collection  the collection to add to, must not be null&lt;/li&gt;
	&lt;li&gt;@param elements  the array of elements to add, must not be null&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if the collection or array is null&lt;br/&gt;
     */&lt;br/&gt;
    public static void addAll(Collection collection, Object[] elements) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {        for (int i = 0, size = elements.length; i &amp;lt; size; i++) {
            collection.add(elements[i]);
        }    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    &lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, when called with an empty array and a null collection (i.e., &quot;addAll((Collection)null, new Object[])&quot;), the method executes normally without throwing any exception.&lt;/p&gt;

&lt;p&gt;Suggested Fixes:&lt;br/&gt;
1. Add code &quot;if (collection == null) throw NullPointerException();&quot; at the beginning of the method body.&lt;br/&gt;
or&lt;br/&gt;
2. Remove &quot;@throws NullPointerException if the collection or array is null&quot; from the Javadoc.&lt;br/&gt;
or&lt;br/&gt;
3. Change &quot;@throws NullPointerException if the collection or array is null&quot; to &quot;@throws NullPointerException if the array is null or (the array is non-empty and the collection is null)&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Platform Independent&lt;/p&gt;</environment>
        <key id="12528956">COLLECTIONS-385</key>
            <summary>Inconsistent Javadoc comment and code in addAll(Collection, Object[]) in org.apache.commons.collections.CollectionUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                            <label>javadoc</label>
                            <label>nullpointerexception</label>
                    </labels>
                <created>Wed, 26 Oct 2011 20:27:14 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:19 +0000</updated>
                            <resolved>Thu, 26 Jul 2012 21:06:38 +0000</resolved>
                                    <version>2.1</version>
                    <version>2.1.1</version>
                    <version>3.0</version>
                    <version>3.1</version>
                    <version>3.2</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="13139432" author="shinhwei" created="Sat, 29 Oct 2011 20:41:51 +0000"  >&lt;p&gt;I found the same problem for overloaded method CollectionUtils#public static void addAll(Collection collection,Iterator iterator) and CollectionUtils#public static void addAll(Collection collection,Enumeration enumeration)&lt;/p&gt;</comment>
                            <comment id="13139441" author="garydgregory" created="Sat, 29 Oct 2011 21:11:47 +0000"  >&lt;p&gt;I do not think this applies to trunk.&lt;/p&gt;</comment>
                            <comment id="13139506" author="shinhwei" created="Sun, 30 Oct 2011 00:51:03 +0000"  >&lt;p&gt;Yes, the trunk currently have:&lt;/p&gt;

&lt;p&gt;           /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Adds all elements in the iteration to the given collection.&lt;br/&gt;
	     *&lt;/li&gt;
	&lt;li&gt;@param collection&lt;/li&gt;
	&lt;li&gt;the collection to add to, must not be null&lt;/li&gt;
	&lt;li&gt;@param iterator&lt;/li&gt;
	&lt;li&gt;the iterator of elements to add, must not be null&lt;/li&gt;
	&lt;li&gt;@return a boolean indicating whether the collection has changed or not.&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException&lt;/li&gt;
	&lt;li&gt;if the collection or iterator is null&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;C&amp;gt; boolean addAll(Collection&amp;lt;C&amp;gt; collection, Iterator&amp;lt;? extends C&amp;gt; iterator) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {	        boolean changed = false;	        while (iterator.hasNext()) {
	            changed |= collection.add(iterator.next());
	        }	        return changed;	    }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;           /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Adds all elements in the array to the given collection.&lt;br/&gt;
	     *&lt;/li&gt;
	&lt;li&gt;@param collection&lt;/li&gt;
	&lt;li&gt;the collection to add to, must not be null&lt;/li&gt;
	&lt;li&gt;@param elements&lt;/li&gt;
	&lt;li&gt;the array of elements to add, must not be null&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException&lt;/li&gt;
	&lt;li&gt;if the collection or array is null&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;C&amp;gt; boolean addAll(Collection&amp;lt;C&amp;gt; collection, C[] elements) 
{
                 ............
            }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;           /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Adds all elements in the iteration to the given collection.&lt;br/&gt;
	     *&lt;/li&gt;
	&lt;li&gt;@param collection&lt;/li&gt;
	&lt;li&gt;the collection to add to, must not be null&lt;/li&gt;
	&lt;li&gt;@param iterator&lt;/li&gt;
	&lt;li&gt;the iterator of elements to add, must not be null&lt;/li&gt;
	&lt;li&gt;@return a boolean indicating whether the collection has changed or not.&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException&lt;/li&gt;
	&lt;li&gt;if the collection or iterator is null&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;C&amp;gt; boolean addAll(Collection&amp;lt;C&amp;gt; collection, Iterator&amp;lt;? extends C&amp;gt; iterator) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;           /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Adds all elements in the iteration to the given collection.&lt;br/&gt;
	     *&lt;/li&gt;
	&lt;li&gt;@param collection&lt;/li&gt;
	&lt;li&gt;the collection to add to, must not be null&lt;/li&gt;
	&lt;li&gt;@param iterator&lt;/li&gt;
	&lt;li&gt;the iterator of elements to add, must not be null&lt;/li&gt;
	&lt;li&gt;@return a boolean indicating whether the collection has changed or not.&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException&lt;/li&gt;
	&lt;li&gt;if the collection or iterator is null&lt;br/&gt;
	     */&lt;br/&gt;
	    public static &amp;lt;C&amp;gt; boolean addAll(Collection&amp;lt;C&amp;gt; collection, Iterator&amp;lt;? extends C&amp;gt; iterator) 
{
                    .....
            }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When called with an empty iterator/elements and a null collection (i.e., ArrayList al=new ArrayList(); addAll((Collection)null, new al.iterator())&quot;), the method still executes normally without throwing any exception.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Oct 2011 21:11:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164370</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-384] Inconsistent Javadoc comment and code for synchronizedMap(Map) in org.apache.commons.collections.MapUtils</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-384</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The Javadoc comment below states that the method &quot;throws IllegalArgumentException if the map is null&quot;:&lt;br/&gt;
    /**&lt;br/&gt;
     ...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param map  the map to synchronize, must not be null&lt;/li&gt;
	&lt;li&gt;@return a synchronized map backed by the given map&lt;/li&gt;
	&lt;li&gt;@throws IllegalArgumentException  if the map is null&lt;br/&gt;
     */&lt;br/&gt;
    public static Map synchronizedMap(Map map) 
{
        return Collections.synchronizedMap(map);
    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, the method throws NullPointerException instead of IllegalArgumentException when called with null.&lt;/p&gt;

&lt;p&gt;Suggested Fixes:&lt;br/&gt;
1. Add code &quot;if (map == null) throw IllegalArgumentException();&quot; at the beginning of the method body.&lt;br/&gt;
or&lt;br/&gt;
2. Change &quot;@throws IllegalArgumentException  if the map is null&quot; to &quot;@throws NullPointerException  if the map is null&quot;.&lt;br/&gt;
or&lt;br/&gt;
3. Remove the entire &quot;@throws IllegalArgumentException  if the map is null&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Platform independent&lt;/p&gt;</environment>
        <key id="12528955">COLLECTIONS-384</key>
            <summary>Inconsistent Javadoc comment and code for synchronizedMap(Map) in org.apache.commons.collections.MapUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                            <label>code</label>
                            <label>javadoc</label>
                            <label>synchronizedMap</label>
                    </labels>
                <created>Wed, 26 Oct 2011 20:21:48 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:33 +0000</updated>
                            <resolved>Sat, 29 Oct 2011 20:54:33 +0000</resolved>
                                    <version>3.0</version>
                    <version>3.1</version>
                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="13139436" author="garydgregory" created="Sat, 29 Oct 2011 20:52:18 +0000"  >&lt;p&gt;I picked option (3) because &lt;tt&gt;Collections.synchronizedMap(map);&lt;/tt&gt; says nothing on the topic so I do not think it should be part of our contract. &lt;/p&gt;

&lt;p&gt;In fact our method seems superfluus. Why use it instead of Collections.synchronizedMap(map)?&lt;/p&gt;</comment>
                            <comment id="13139437" author="garydgregory" created="Sat, 29 Oct 2011 20:54:33 +0000"  >&lt;p&gt;Committed revision 1195031.&lt;/p&gt;</comment>
                            <comment id="13139439" author="hudson" created="Sat, 29 Oct 2011 21:07:45 +0000"  >&lt;p&gt;Integrated in commons-collections #2 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/2/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/2/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-384&quot; title=&quot;Inconsistent Javadoc comment and code for synchronizedMap(Map) in org.apache.commons.collections.MapUtils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-384&quot;&gt;&lt;del&gt;COLLECTIONS-384&lt;/del&gt;&lt;/a&gt; Inconsistent Javadoc comment and code for synchronizedMap(Map) in org.apache.commons.collections.MapUtils.&lt;/p&gt;

&lt;p&gt;ggregory : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1195031&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1195031&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/java/org/apache/commons/collections/MapUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Oct 2011 20:52:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164371</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-380] UnmodifiableBoundedCollection.unmodifiableBoundedCollection is an infinite loop</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-380</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;This method, just calls itself. As BoundedCollection extends Collection, it would seem to me that this method should be removed:&lt;/p&gt;


&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Factory method to create an unmodifiable bounded collection.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@param coll  the &amp;lt;code&amp;gt;BoundedCollection&amp;lt;/code&amp;gt; to decorate, must not be null&lt;/li&gt;
	&lt;li&gt;@return a new unmodifiable bounded collection&lt;/li&gt;
	&lt;li&gt;@throws IllegalArgumentException if bag is null&lt;br/&gt;
     */&lt;br/&gt;
    public static &amp;lt;E&amp;gt; BoundedCollection&amp;lt;E&amp;gt; unmodifiableBoundedCollection(BoundedCollection&amp;lt;E&amp;gt; coll) 
{
        return unmodifiableBoundedCollection(coll);
    }&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12525229">COLLECTIONS-380</key>
            <summary>UnmodifiableBoundedCollection.unmodifiableBoundedCollection is an infinite loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dbrosius@apache.org">Dave Brosius</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Sep 2011 18:45:44 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:38 +0000</updated>
                            <resolved>Mon, 9 Apr 2012 18:41:29 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13178490" author="mattbishop" created="Mon, 2 Jan 2012 18:07:09 +0000"  >&lt;p&gt;This should be a higher severity. APIs shouldn&apos;t lock up like this.&lt;/p&gt;</comment>
                            <comment id="13250048" author="tn" created="Mon, 9 Apr 2012 18:41:29 +0000"  >&lt;p&gt;Fixed in r1311366.&lt;/p&gt;

&lt;p&gt;Additionally I have added a first unit test and fixed more javadoc issues in the class.&lt;/p&gt;</comment>
                            <comment id="13250051" author="hudson" created="Mon, 9 Apr 2012 18:45:04 +0000"  >&lt;p&gt;Integrated in commons-collections #17 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/17/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/17/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-380&quot; title=&quot;UnmodifiableBoundedCollection.unmodifiableBoundedCollection is an infinite loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-380&quot;&gt;&lt;del&gt;COLLECTIONS-380&lt;/del&gt;&lt;/a&gt; Fixed infinte recursion when creating an unmodifiable bounded collection, added unit test, fixed additional javadoc, thanks to Dave Brosius for reporting. (Revision 1311366)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311366&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311366&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/collection/UnmodifiableBoundedCollection.java&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/test/java/org/apache/commons/collections/collection/TestUnmodifiableBoundedCollection.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Jan 2012 18:07:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40352</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164374</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-379] Bugs In Javadoc Comment in the CollectionUtils class</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-379</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I came across the following bugs in the Javadoc comments in the method below in the CollectionUtils class:&lt;/p&gt;

&lt;p&gt;1.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;   /** &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Selects all elements from input collection which match the given predicate&lt;/li&gt;
	&lt;li&gt;and adds them to outputCollection.&lt;/li&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;&lt;/li&gt;
	&lt;li&gt;If the input collection or predicate is null, there is no change to the&lt;/li&gt;
	&lt;li&gt;output collection.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param inputCollection  the collection to get the input from, may be null&lt;/li&gt;
	&lt;li&gt;@param predicate  the predicate to use, may be null&lt;/li&gt;
	&lt;li&gt;@&lt;b&gt;param outputCollection  the collection to output into, may not be null&lt;/b&gt;&lt;br/&gt;
     */&lt;br/&gt;
    public static void select(Collection inputCollection, Predicate predicate, Collection outputCollection) {&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;This method will execute normally when calling select((Collection)null, (Predicate)null, (Collection)null) but the comment clearly states that outputCollection may not be null&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;2.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  /** &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Selects all elements from inputCollection which don&apos;t match the given predicate&lt;/li&gt;
	&lt;li&gt;and adds them to outputCollection.&lt;/li&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;&lt;/li&gt;
	&lt;li&gt;If the input predicate is &amp;lt;code&amp;gt;null&amp;lt;/code&amp;gt;, no elements are added to &amp;lt;code&amp;gt;outputCollection&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param inputCollection  the collection to get the input from, may be null&lt;/li&gt;
	&lt;li&gt;@param predicate  the predicate to use, may be null&lt;/li&gt;
	&lt;li&gt;@&lt;b&gt;param outputCollection  the collection to output into, may not be null&lt;/b&gt;&lt;br/&gt;
     */&lt;br/&gt;
    public static void selectRejected(Collection inputCollection, Predicate predicate, Collection outputCollection) {&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;This method will execute normally when calling selectRejected((Collection)null, (Predicate)null, (Collection)null) but the comment also clearly states that outputCollection may not be null&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;3.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  /** &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Transforms all elements from the inputIterator with the given transformer&lt;/li&gt;
	&lt;li&gt;and adds them to the outputCollection.&lt;/li&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;&lt;/li&gt;
	&lt;li&gt;If the input iterator or transformer is null, there is no change to the&lt;/li&gt;
	&lt;li&gt;output collection.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@param inputIterator  the iterator to get the input from, may be null&lt;/li&gt;
	&lt;li&gt;@param transformer  the transformer to use, may be null&lt;/li&gt;
	&lt;li&gt;@&lt;b&gt;param outputCollection  the collection to output into, may not be null&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;@return the outputCollection with the transformed input added&lt;/li&gt;
	&lt;li&gt;@&lt;b&gt;throws NullPointerException if the output collection is null&lt;/b&gt;&lt;br/&gt;
     */&lt;br/&gt;
    public static Collection collect(Iterator inputIterator, final Transformer transformer, final Collection outputCollection) {&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;This method will execute normally when calling collect((Iterator)null, (Transformer)null, (Collection)null) but the comment clearly states that NullPointerException will be thrown when the outputCollection is null&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;4.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; /** &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Transforms all elements from inputCollection with the given transformer&lt;/li&gt;
	&lt;li&gt;and adds them to the outputCollection.&lt;/li&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;&lt;/li&gt;
	&lt;li&gt;If the input collection or transformer is null, there is no change to the&lt;/li&gt;
	&lt;li&gt;output collection.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@param inputCollection  the collection to get the input from, may be null&lt;/li&gt;
	&lt;li&gt;@param transformer  the transformer to use, may be null&lt;/li&gt;
	&lt;li&gt;@&lt;b&gt;param outputCollection  the collection to output into, may not be null&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;@return the outputCollection with the transformed input added&lt;/li&gt;
	&lt;li&gt;@&lt;b&gt;throws NullPointerException if the output collection is null&lt;/b&gt;&lt;br/&gt;
     */&lt;br/&gt;
    public static Collection collect(Collection inputCollection, final Transformer transformer, final Collection outputCollection) {&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;This method will execute normally when calling collect((Collection)null, (Transformer)null, (Collection)null) but the comment clearly states that NullPointerException will be thrown when the outputCollection is null&lt;/em&gt;&lt;/p&gt;


&lt;p&gt;The bugs in the Javadoc comments above could be confusing to the users of the Common Collection library and they could be fixed easily by the developers..&lt;/p&gt;


&lt;p&gt;There are a few ways to fix the:&lt;br/&gt;
1. Throwing the NullPointerException explicitly when the outputCollection is null.&lt;br/&gt;
2. Changing the Javadoc comments to include the case where all of the parameters are null.&lt;/p&gt;</description>
                <environment>&lt;p&gt;System independent&lt;/p&gt;</environment>
        <key id="12524228">COLLECTIONS-379</key>
            <summary>Bugs In Javadoc Comment in the CollectionUtils class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shinhwei">SHIN HWEI TAN</reporter>
                        <labels>
                            <label>test</label>
                    </labels>
                <created>Thu, 22 Sep 2011 02:45:04 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:43 +0000</updated>
                            <resolved>Thu, 26 Jul 2012 21:19:02 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="1200">20m</timeoriginalestimate>
                            <timeestimate seconds="1200">20m</timeestimate>
                                        <comments>
                            <comment id="13423478" author="tn" created="Thu, 26 Jul 2012 21:19:02 +0000"  >&lt;p&gt;Fixed in r1366204.&lt;/p&gt;</comment>
                            <comment id="13423540" author="hudson" created="Thu, 26 Jul 2012 23:07:49 +0000"  >&lt;p&gt;Integrated in commons-collections #69 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/69/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/69/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-379&quot; title=&quot;Bugs In Javadoc Comment in the CollectionUtils class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-379&quot;&gt;&lt;del&gt;COLLECTIONS-379&lt;/del&gt;&lt;/a&gt; Fixed javadoc in CollectionUtils. (Revision 1366204)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366204&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366204&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/changes/changes.xml&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/CollectionUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Jul 2012 21:19:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3625</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-378] Incorrect links in JavaDoc</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-378</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The links for several JavaDocs were not updated during the implementation of &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-251&quot; title=&quot;improving static factory methods for static importability, conistency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-251&quot;&gt;&lt;del&gt;COLLECTIONS-251&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Attached patch file includes the necessary changes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518222">COLLECTIONS-378</key>
            <summary>Incorrect links in JavaDoc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10">Implemented</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kdombeck">Ken Dombeck</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Aug 2011 16:54:24 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:39 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:17:47 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13250015" author="tn" created="Mon, 9 Apr 2012 18:09:43 +0000"  >&lt;p&gt;Thanks for the report. This has already been fixed in r1300075.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12368514">COLLECTIONS-251</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12489711" name="COLLECTIONS-378_javadoc_fixes.patch" size="5002" author="kdombeck" created="Mon, 8 Aug 2011 16:55:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Apr 2012 18:09:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18625</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164376</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-377] CollatingIterator throws NullPointerException when constructor is given null (or no) Comparator</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-377</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;CollatingIterator&apos;s javadoc (&lt;a href=&quot;http://commons.apache.org/collections/api-release/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/collections/api-release/index.html&lt;/a&gt;) states that natural sort ordering will be used when null is passed as the Comparator argument to any of the constructors accepting one (and for the nullary constructor).  The following stack is thrown from the subsequent unit test.  The implementation of least() does not appear to account for the natural sort order case.&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.commons.collections.iterators.CollatingIterator.least(CollatingIterator.java:334)&lt;br/&gt;
	at org.apache.commons.collections.iterators.CollatingIterator.next(CollatingIterator.java:230)&lt;br/&gt;
	at mil.af.statistics.jutl.collection.MutableDataSeriesTest...&lt;/p&gt;


&lt;p&gt;    @SuppressWarnings(&quot;unchecked&quot;)&lt;br/&gt;
    @Test&lt;br/&gt;
    public void testCollatingIteratorNaturalOrdering() throws Exception&lt;br/&gt;
    {&lt;br/&gt;
        Integer[] expected =&lt;br/&gt;
        &lt;/p&gt;
{ Integer.valueOf(1), Integer.valueOf(2), Integer.valueOf(3), Integer.valueOf(4), Integer.valueOf(5),
            Integer.valueOf(6) }
&lt;p&gt;;&lt;br/&gt;
        List&amp;lt;Integer&amp;gt; evens = Arrays.asList(new Integer[]&lt;br/&gt;
        &lt;/p&gt;
{ Integer.valueOf(2), Integer.valueOf(4), Integer.valueOf(6) }
&lt;p&gt;);&lt;br/&gt;
        List&amp;lt;Integer&amp;gt; odds = Arrays.asList(new Integer[]&lt;br/&gt;
        &lt;/p&gt;
{ Integer.valueOf(1), Integer.valueOf(3), Integer.valueOf(5) }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;        Iterator&amp;lt;Integer&amp;gt; collatingIter = new CollatingIterator(null, evens.iterator(), odds.iterator());&lt;/p&gt;

&lt;p&gt;        for (Integer expectedInt : expected)&lt;/p&gt;
        {
            assertTrue(collatingIter.hasNext());
            assertEquals(expectedInt, collatingIter.next());
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;Workaround: provide a Comparator that implements the natural ordering contract.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.6.0_26&lt;/p&gt;</environment>
        <key id="12514494">COLLECTIONS-377</key>
            <summary>CollatingIterator throws NullPointerException when constructor is given null (or no) Comparator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ryanhos">Ryan Hochstetler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jul 2011 19:51:32 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:29 +0000</updated>
                            <resolved>Sun, 3 Jun 2012 11:19:51 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Iterator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13067249" author="ryanhos" created="Mon, 18 Jul 2011 19:56:26 +0000"  >&lt;p&gt;Setting priority, as I forgot to set it originally, and it defaulted to Major.&lt;/p&gt;</comment>
                            <comment id="13131537" author="jxcoder" created="Thu, 20 Oct 2011 12:00:49 +0000"  >&lt;p&gt;I fixed. &lt;/p&gt;</comment>
                            <comment id="13131564" author="jxcoder" created="Thu, 20 Oct 2011 12:41:59 +0000"  >&lt;p&gt;How to commit my changes?&lt;br/&gt;
I&apos;ve got message: &lt;/p&gt;

&lt;p&gt;svn commit --username jxcoder -m &quot;fixed 377&quot;&lt;/p&gt;


&lt;p&gt;&quot;Access to &apos;/repos/asf/!svn/me&apos; forbidden&quot;&lt;/p&gt;

&lt;p&gt;what&apos;s wrong?&lt;/p&gt;</comment>
                            <comment id="13288144" author="tn" created="Sun, 3 Jun 2012 11:19:51 +0000"  >&lt;p&gt;This has been fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-331&quot; title=&quot;CollatingIterator NPE when Comparator is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-331&quot;&gt;&lt;del&gt;COLLECTIONS-331&lt;/del&gt;&lt;/a&gt;. Now the javadoc states that a comparator &lt;b&gt;must&lt;/b&gt; be provided (either via constructor or by calling setComparator afterwards) before using the iterator.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Oct 2011 12:00:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18626</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164377</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-376]  CollectionUtils.removeAll return retainAll - 3.2.1</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-376</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The code of removeAll method isn&apos;t correct&lt;/p&gt;

&lt;p&gt;ligne 1121 of CollectionUtils&lt;br/&gt;
public static Collection removeAll(Collection collection, Collection remove) &lt;/p&gt;
{
        return ListUtils.retainAll(collection, remove);
    }</description>
                <environment></environment>
        <key id="12512488">COLLECTIONS-376</key>
            <summary> CollectionUtils.removeAll return retainAll - 3.2.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="patrick sauts">Patrick Sauts</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Jul 2011 17:15:32 +0000</created>
                <updated>Fri, 1 Jul 2011 23:03:37 +0000</updated>
                            <resolved>Fri, 1 Jul 2011 23:03:37 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13058852" author="joehni" created="Fri, 1 Jul 2011 23:03:37 +0000"  >&lt;p&gt;See linked issue&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12467833">COLLECTIONS-357</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Jul 2011 23:03:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18627</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-374] Bug in class#BeanMap and TransformedBuffer with reproducible JUnit test</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-374</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi all:&lt;/p&gt;

&lt;p&gt;(as in the previous post)&lt;/p&gt;

&lt;p&gt;I am writing an automated bug finding tool, and using&lt;br/&gt;
Apache Commons Collections as an experimental subject&lt;br/&gt;
for evaluation.&lt;/p&gt;

&lt;p&gt;The tool creates executable JUnit tests as well as&lt;br/&gt;
explanatory code comments. I attached one bug-revealing&lt;br/&gt;
test as follows. Could you please kindly check it, to&lt;br/&gt;
see if it is a real bug or not?&lt;/p&gt;

&lt;p&gt;Also, it would be tremendous helpful if you could give&lt;br/&gt;
some feedback and suggestion on the generated code comments?&lt;br/&gt;
From the perspective of developers who are relatively familiar&lt;br/&gt;
with the code,&lt;br/&gt;
is the automatically-inferred comment useful in understanding&lt;br/&gt;
the generated test? is the comment helpful in bug fixing?&lt;/p&gt;

&lt;p&gt;Your suggestion will help us improve the tool.&lt;/p&gt;

&lt;p&gt;Please see attachment for the failed test. &lt;/p&gt;

&lt;p&gt;The comment appears in the form of:&lt;br/&gt;
//Tests pass if .... (it gives some small change to the test which can make the failed test pass)&lt;/p&gt;</description>
                <environment>&lt;p&gt;jdk 1.6.0&lt;/p&gt;</environment>
        <key id="12503219">COLLECTIONS-374</key>
            <summary>Bug in class#BeanMap and TransformedBuffer with reproducible JUnit test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="saizhang">Sai Zhang</reporter>
                        <labels>
                    </labels>
                <created>Sun, 3 Apr 2011 08:02:24 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:20 +0000</updated>
                            <resolved>Thu, 18 Apr 2013 19:09:57 +0000</resolved>
                                    <version>3.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13015125" author="sebb@apache.org" created="Sun, 3 Apr 2011 10:22:06 +0000"  >&lt;p&gt;The tool sounds interesting, but at present it is difficult to check what is happening. The comments on the asserts are OK, but otherwise the tests are hard to understand.&lt;/p&gt;

&lt;p&gt;Every class name is given in full, even java.lang.Integer. The testing tool should generate the necessary imports.&lt;/p&gt;

&lt;p&gt;There should be a package clause with the same package as the class under test, and the test class name should relate to the class under test, e.g. BeanMapAutoTest. Each test class should only test one target class.&lt;/p&gt;

&lt;p&gt;The throws clauses should be &quot;throws Exception&quot; rather than Throwable.&lt;/p&gt;

&lt;p&gt;In the test0() method, there appear to be lots of unused variables, and the test target (BeanMap) has been deprecated (and in fact has since been removed).&lt;/p&gt;

&lt;p&gt;In the test1() method, again there are a lot of unused variables. It also looks like the tool failed to add a test part way through, as there is a comment, but no assertion. This might explain the unused variables. Ideally every assertion should be in a different method.&lt;/p&gt;</comment>
                            <comment id="13015127" author="sebb@apache.org" created="Sun, 3 Apr 2011 10:49:03 +0000"  >&lt;p&gt;I should have added - test1() does seem to be valid. &lt;/p&gt;

&lt;p&gt;Not sure whether test0() is useful, given that the class is deprecated, but it does seem to expose a failure, as the hashCode is not stable.&lt;/p&gt;</comment>
                            <comment id="13015165" author="saizhang" created="Sun, 3 Apr 2011 16:00:09 +0000"  >&lt;p&gt;Thank you very much, Sebb, for all your good suggestion!&lt;/p&gt;

&lt;p&gt;We really appreciate your response.&lt;/p&gt;





&lt;p&gt;Thanks. We should implement this feature.&lt;/p&gt;





&lt;p&gt;Thanks. We should improve the readability of class name&lt;/p&gt;



&lt;p&gt;Actually, all you have mentioned above reflect the fact that:&lt;br/&gt;
automatically-generated test, though&lt;br/&gt;
can reveal previously-unknown bugs, is hard to interpret. From the viewpoint&lt;br/&gt;
of developing new fully-automatic testing techniques, that is an inherent&lt;br/&gt;
problem, because to reveal bugs: the test created need to be&lt;br/&gt;
behaviorally-diverse (e.g., covering as many program states as possible).&lt;br/&gt;
Therefore, in my tool, we use several heuristic and randomized algorithms to&lt;br/&gt;
achieve this (since doing exhaustive program state search is infeasible,&lt;br/&gt;
given the huge space of possible method invocations).&lt;/p&gt;

&lt;p&gt;The comments the tool generates aim to alleviate (we can not say it solves)&lt;br/&gt;
the above problem (poor readability). As you may find, the generated test is&lt;br/&gt;
long, and often has many unused variables. Even developers who are&lt;br/&gt;
already familiar with the code can not easily have ideas on which test code&lt;br/&gt;
part should they inspect. The comments provide an alternative way to&lt;br/&gt;
&quot;correct&quot; a failed test, which we hope to given additional debugging clues.&lt;br/&gt;
We add this &quot;comment &quot; feature based on our own (limited) experience: when&lt;br/&gt;
given a long/hard-to-read failed test, a common practice for programmers to&lt;br/&gt;
start debugging is try to make some minimal edit,  making the failed test&lt;br/&gt;
pass. Then, observe the difference between a failed and passing execution.&lt;/p&gt;

&lt;p&gt;We agree that the tool itself is still far from perfect (due to the&lt;br/&gt;
randomized algorithm it uses). Compared with the long test without comments,&lt;br/&gt;
 do you think the test with comments can somehow give certain debugging&lt;br/&gt;
clues, and help to guide programmers to inspect the right place more&lt;br/&gt;
efficiently? (we know the automatically-generated test is still much worse&lt;br/&gt;
than human written one)&lt;/p&gt;

&lt;p&gt;Thanks a lot.&lt;/p&gt;

&lt;p&gt;-Sai&lt;/p&gt;




</comment>
                            <comment id="13015191" author="sebb@apache.org" created="Sun, 3 Apr 2011 18:46:19 +0000"  >&lt;p&gt;The assertion itself is easy to understand, it&apos;s just that all the redundant assignments make it hard to read (and may generate warnings from some IDEs).&lt;/p&gt;</comment>
                            <comment id="13015194" author="saizhang" created="Sun, 3 Apr 2011 19:04:05 +0000"  >&lt;p&gt;Thanks Sebb. What about the comments in the middle of the long test. Do you&lt;br/&gt;
think such kind of comments useful for debugging?&lt;/p&gt;

&lt;p&gt;-Sai&lt;/p&gt;





&lt;p&gt;&amp;#8211;&lt;/p&gt;</comment>
                            <comment id="13573750" author="tn" created="Thu, 7 Feb 2013 18:25:34 +0000"  >&lt;p&gt;The first test is not relevant anymore, as BeanMap has been removed.&lt;/p&gt;

&lt;p&gt;The second test checks symmetry of equals for the following scenario:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; v1 = BoundedFifoBuffer
 v2 = TransformedBuffer(v1)
 v3 = UnmodifiableBuffer(v2)

 v2 == v3 &amp;amp;&amp;amp; v3 == v2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this fails because of AbstractCollectionDecorate#equals:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; return object == this || decorated().equals(object);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;now v3.equals(v2) evaluates to true, as v3.decorated() == v2&lt;br/&gt;
the other way round, v2.equals(v3) if false, as v2.decorated() == v1, and v1 does not implement equals, thus the default Object.equals() is used, which just compares references.&lt;/p&gt;</comment>
                            <comment id="13635544" author="tn" created="Thu, 18 Apr 2013 19:09:57 +0000"  >&lt;p&gt;The respective classes (Buffer, and BeanMap) have been removed for 4.0 so this is not going to be fixed anymore.&lt;/p&gt;

&lt;p&gt;The same problem may be still present with the Queue implementations, though the Queue interface states:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Queue implementations generally do not define element-based versions of methods equals and hashCode but instead inherit the identity based versions from class Object, because element-based equality is not always well-defined for queues with the same elements but different ordering properties. 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thus we should keep it as it is atm, imho.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475302" name="ApacheCommons_Documented_Test.java" size="3940" author="saizhang" created="Sun, 3 Apr 2011 08:02:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 3 Apr 2011 10:22:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18629</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ftcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-373] Bug in class#ListOrderedSet with reproducible JUnit test</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-373</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi all:&lt;/p&gt;

&lt;p&gt;I am writing an automated bug finding tool, and using&lt;br/&gt;
Apache Commons Collections as an experimental subject&lt;br/&gt;
for evaluation.&lt;/p&gt;

&lt;p&gt;The tool creates executable JUnit tests as well as&lt;br/&gt;
explanatory code comments. I attached one bug-revealing&lt;br/&gt;
test as follows. Could you please kindly check it, to&lt;br/&gt;
see if it is a real bug or not? &lt;/p&gt;

&lt;p&gt;Also, it would be tremendous helpful if you could give&lt;br/&gt;
some feedback and suggestion on the generated code comments?&lt;br/&gt;
From the perspective of developers who are relatively familiar&lt;br/&gt;
with the code,&lt;br/&gt;
is the automatically-inferred comment useful in understanding&lt;br/&gt;
the generated test? is the comment helpful in bug fixing?&lt;/p&gt;

&lt;p&gt;Your suggestion will help us improve the tool.&lt;/p&gt;

&lt;p&gt;Please see attachment for the failed test. A little explaination&lt;br/&gt;
on the generated code comments in the failed test&lt;/p&gt;

&lt;p&gt;//explaination:&lt;br/&gt;
//Test passes if var53 is: (java.lang.Boolean)false  ===&amp;gt; means: &lt;br/&gt;
//     test passes if var52 is not added to var28 (only in that case, var53 is false)&lt;br/&gt;
boolean var53 = var28.add((java.lang.Object)var52);&lt;/p&gt;</description>
                <environment>&lt;p&gt;jdk 1.6.x&lt;/p&gt;</environment>
        <key id="12503218">COLLECTIONS-373</key>
            <summary>Bug in class#ListOrderedSet with reproducible JUnit test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="saizhang">Sai Zhang</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Sun, 3 Apr 2011 07:43:42 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:18 +0000</updated>
                            <resolved>Wed, 23 Jan 2013 17:05:11 +0000</resolved>
                                    <version>3.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13086724" author="saizhang" created="Thu, 18 Aug 2011 01:19:30 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Here is the latest output of our documentation inference tool. It renames all&lt;br/&gt;
variable names and (hopefully) makes the test easier to read.&lt;/p&gt;

&lt;p&gt;The comments generated by our research tool are shown in the form of:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;//Test passes &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;:  xxxx (it indicates changes that will make a failed test pass)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Each piece of comments (not the combination of them) provides a way to correct the failed test.&lt;br/&gt;
We hope such additional information will help developers understand/fix the test faster/better.&lt;/p&gt;

&lt;p&gt;So, it would be great if anyone can take a look at the reported bug to:&lt;br/&gt;
(1) confirm is it a real bug?&lt;br/&gt;
(2) is such comment information useful? If not, please give us feedback so we can do our best&lt;br/&gt;
     to improve our tool!&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;

&lt;p&gt;-Sai&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test0() {
    ListOrderedSet listOrderedSet0 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list0 = listOrderedSet0.asList();
    List list1 = listOrderedSet0.asList();
    listOrderedSet0.clear();
    &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; i0 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;((-1));
    ListOrderedSet listOrderedSet1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; i1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;((-1));
    ListOrderedSet listOrderedSet2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list2 = listOrderedSet2.asList();
    ListOrderedSet listOrderedSet3 = ListOrderedSet.decorate((Set)listOrderedSet2);
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b0 = listOrderedSet1.addAll(i1, (Collection)listOrderedSet2);
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b1 = listOrderedSet0.addAll(i0, (Collection)listOrderedSet2);
    ListOrderedSet listOrderedSet4 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list3 = listOrderedSet4.asList();
    List list4 = listOrderedSet4.asList();
    ListOrderedSet listOrderedSet5 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list5 = listOrderedSet5.asList();
    ListOrderedSet listOrderedSet6 = ListOrderedSet.decorate((Set)listOrderedSet5);
    ListOrderedSet listOrderedSet7 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list6 = listOrderedSet7.asList();
    ListOrderedSet listOrderedSet8 = ListOrderedSet.decorate((Set)listOrderedSet5, list6);
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b2 = listOrderedSet4.containsAll((Collection)list6);
    ListOrderedSet listOrderedSet9 = ListOrderedSet.decorate((Set)listOrderedSet0, list6);
    ListOrderedSet listOrderedSet10 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i2 = listOrderedSet10.size();
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b3 = listOrderedSet0.add((&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)i2);
    &lt;span class=&quot;code-comment&quot;&gt;//Test passes &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; line is: &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; s0 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(0)
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt; s0 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt;((&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;)1);
    &lt;span class=&quot;code-comment&quot;&gt;//Test passes &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; s0 is not added to listOrderedSet0
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b4 = listOrderedSet0.add((&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)s0);
    ListOrderedSet listOrderedSet11 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list7 = listOrderedSet11.asList();
    List list8 = listOrderedSet11.asList();
    listOrderedSet11.clear();
    &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; i3 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;((-1));
    ListOrderedSet listOrderedSet12 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; i4 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;((-1));
    ListOrderedSet listOrderedSet13 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list9 = listOrderedSet13.asList();
    ListOrderedSet listOrderedSet14 = ListOrderedSet.decorate((Set)listOrderedSet13);
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b5 = listOrderedSet12.addAll(i4, (Collection)listOrderedSet13);
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b6 = listOrderedSet11.addAll(i3, (Collection)listOrderedSet13);
    ListOrderedSet listOrderedSet15 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list10 = listOrderedSet15.asList();
    List list11 = listOrderedSet15.asList();
    ListOrderedSet listOrderedSet16 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list12 = listOrderedSet16.asList();
    ListOrderedSet listOrderedSet17 = ListOrderedSet.decorate((Set)listOrderedSet16);
    ListOrderedSet listOrderedSet18 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    List list13 = listOrderedSet18.asList();
    ListOrderedSet listOrderedSet19 = ListOrderedSet.decorate((Set)listOrderedSet16, list13);
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b7 = listOrderedSet15.containsAll((Collection)list13);
    ListOrderedSet listOrderedSet20 = ListOrderedSet.decorate((Set)listOrderedSet11, list13);
    ListOrderedSet listOrderedSet21 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ListOrderedSet();
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i5 = listOrderedSet21.size();
    &lt;span class=&quot;code-comment&quot;&gt;//Test passes &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; i5 is not added to listOrderedSet11
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b8 = listOrderedSet11.add((&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)i5);
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; b9 = listOrderedSet0.removeAll((Collection)listOrderedSet11);
    
    &lt;span class=&quot;code-comment&quot;&gt;// Checks the contract:  equals-hashcode on listOrderedSet0 and listOrderedSet20
&lt;/span&gt;    assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Contract failed: equals-hashcode on listOrderedSet0 and listOrderedSet20&quot;&lt;/span&gt;, listOrderedSet0.equals(listOrderedSet20) ? listOrderedSet0.hashCode() == listOrderedSet20.hashCode() : &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    
    &lt;span class=&quot;code-comment&quot;&gt;// Checks the contract:  equals-hashcode on listOrderedSet9 and listOrderedSet20
&lt;/span&gt;    assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Contract failed: equals-hashcode on listOrderedSet9 and listOrderedSet20&quot;&lt;/span&gt;, listOrderedSet9.equals(listOrderedSet20) ? listOrderedSet9.hashCode() == listOrderedSet20.hashCode() : &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    
    &lt;span class=&quot;code-comment&quot;&gt;// Checks the contract:  equals-hashcode on listOrderedSet11 and listOrderedSet9
&lt;/span&gt;    assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Contract failed: equals-hashcode on listOrderedSet11 and listOrderedSet9&quot;&lt;/span&gt;, listOrderedSet11.equals(listOrderedSet9) ? listOrderedSet11.hashCode() == listOrderedSet9.hashCode() : &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    
    &lt;span class=&quot;code-comment&quot;&gt;// Checks the contract:  equals-hashcode on listOrderedSet20 and listOrderedSet9
&lt;/span&gt;    assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Contract failed: equals-hashcode on listOrderedSet20 and listOrderedSet9&quot;&lt;/span&gt;, listOrderedSet20.equals(listOrderedSet9) ? listOrderedSet20.hashCode() == listOrderedSet9.hashCode() : &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    
    &lt;span class=&quot;code-comment&quot;&gt;// Checks the contract:  equals-symmetric on listOrderedSet0 and listOrderedSet20.
&lt;/span&gt;    assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Contract failed: equals-symmetric on listOrderedSet0 and listOrderedSet20.&quot;&lt;/span&gt;, listOrderedSet0.equals(listOrderedSet20) == listOrderedSet20.equals(listOrderedSet0));
    
    &lt;span class=&quot;code-comment&quot;&gt;// Checks the contract:  equals-symmetric on listOrderedSet11 and listOrderedSet9.
&lt;/span&gt;    assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Contract failed: equals-symmetric on listOrderedSet11 and listOrderedSet9.&quot;&lt;/span&gt;, listOrderedSet11.equals(listOrderedSet9) == listOrderedSet9.equals(listOrderedSet11));
  }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13560827" author="tn" created="Wed, 23 Jan 2013 17:04:49 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;thanks for the bug report. Such automated test generation tools can be really helpful and interesting, but I do have a hard time trying to understand this testcase. Has there been any improvement to your test tool wrt to understanding the tested scenario?&lt;/p&gt;

&lt;p&gt;I adapted the testcase for the latest trunk (4.0-SNAPSHOT) by simply changing the decorate methods with the corresponding listOrderedSet.&lt;br/&gt;
The test fails here:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        assertTrue(&quot;Contract failed: equals-hashcode on var0 and var50&quot;, var0.equals(var50) ? var0.hashCode() == var50.hashCode() : true);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When looking at the testcase, var50 is initialized as follows:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        org.apache.commons.collections.set.ListOrderedSet var50 = org.apache.commons.collections.set.ListOrderedSet.listOrderedSet((java.util.Set)var28, var47);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;according to the contract of the decorate/listOrderedSet static factory method, the provided List and Set have to be empty and not null. This is not true for your testcase, as the provided argument var28 is not empty.&lt;/p&gt;

&lt;p&gt;So I have to reject this testcase as invalid, but would be interested to see advancements in this field.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475301" name="ApacheListOrderSet_Documented_Test.java" size="6334" author="saizhang" created="Sun, 3 Apr 2011 07:51:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Jan 2013 17:04:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18630</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ftd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-372] ComparatorUtils.transformedComparator wrongly typed (generics)</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-372</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;ComparatorUtils.transformedComparator is currently typed as follows :&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;public static &amp;lt;I,O&amp;gt; Comparator&amp;lt;O&amp;gt; transformedComparator(Comparator&amp;lt;I&amp;gt; comparator, Transformer&amp;lt;I, O&amp;gt; transformer)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;It should be typed as follows so that is can be used without removing generics typing:&lt;br/&gt;
&lt;tt&gt;public static &amp;lt;I,O&amp;gt; Comparator&amp;lt;I&amp;gt; transformedComparator(Comparator&amp;lt;O&amp;gt; comparator, Transformer&amp;lt;I, O&amp;gt; transformer)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Here is a unit test for it : &lt;br/&gt;
Transformer&amp;lt;Integer, String&amp;gt; itosTransformer = TransformerUtils.stringValueTransformer();&lt;br/&gt;
		Comparator&amp;lt;Integer&amp;gt; c = new Comparator&amp;lt;Integer&amp;gt;() {&lt;/p&gt;

&lt;p&gt;			@Override&lt;br/&gt;
			public int compare(Integer o1, Integer o2) &lt;/p&gt;
{
				return o1.compareTo(o2);
			}
&lt;p&gt;		};&lt;br/&gt;
		Comparator&amp;lt;String&amp;gt; stringComparator = ComparatorUtils.transformedComparator(c, itosTransformer);&lt;/p&gt;

&lt;p&gt;		stringComparator.compare(&quot;string1&quot;, &quot;string2&quot;);&lt;/p&gt;</description>
                <environment>&lt;p&gt;n/a&lt;/p&gt;</environment>
        <key id="12501783">COLLECTIONS-372</key>
            <summary>ComparatorUtils.transformedComparator wrongly typed (generics)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pilotmi80">HaveNone</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Fri, 18 Mar 2011 12:45:26 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:43 +0000</updated>
                            <resolved>Wed, 6 Mar 2013 19:52:38 +0000</resolved>
                                    <version>4.x</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Comparator</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13595036" author="tn" created="Wed, 6 Mar 2013 19:52:38 +0000"  >&lt;p&gt;Made change in r1453516.&lt;/p&gt;

&lt;p&gt;Makes sense for a TransformingComparator imho, not always possible for other occurrences.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12435448">COLLECTIONS-333</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 Mar 2013 19:52:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18631</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ftdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-371] BUG in org.apache.commons.collections.CollectionUtils.removeAll(Collection, Collection)   </title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-371</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;line: 1121&lt;br/&gt;
public static Collection removeAll(Collection collection, Collection remove) &lt;/p&gt;
{
    return ListUtils.retainAll(collection, remove); //&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;-------- here absolutely wrong!

}
</description>
                <environment></environment>
        <key id="12497242">COLLECTIONS-371</key>
            <summary>BUG in org.apache.commons.collections.CollectionUtils.removeAll(Collection, Collection)   </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="li.gui@idealo.de">li gui</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Jan 2011 19:17:45 +0000</created>
                <updated>Tue, 1 Feb 2011 07:19:10 +0000</updated>
                            <resolved>Tue, 1 Feb 2011 07:19:10 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12467833">COLLECTIONS-357</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164379</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-369] CollectionUtils#removeAll is broken</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-369</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;method calls into ListUtils#retainAll instead of ListUtils#removeAll.  Should be easy fix for someone with commit rights.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12494808">COLLECTIONS-369</key>
            <summary>CollectionUtils#removeAll is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mjharris">Michael Harris</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Jan 2011 05:52:17 +0000</created>
                <updated>Thu, 6 Jan 2011 07:29:23 +0000</updated>
                            <resolved>Thu, 6 Jan 2011 07:29:24 +0000</resolved>
                                    <version>3.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12467833">COLLECTIONS-357</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18634</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164380</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-364] DualTreeBidiMap.readObject() uses wrong comparator to create reverseMap</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-364</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;DualTreeBidiMap.readObject() uses the wrong comparator to create reverseMap. The code reads:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;reverseMap = new TreeMap(comparator);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;it should read:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;reverseMap = new TreeMap(valueComparator);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Note: this was found when trying to fix generics warnings.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12477662">COLLECTIONS-364</key>
            <summary>DualTreeBidiMap.readObject() uses wrong comparator to create reverseMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sebb@apache.org">Sebb</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Oct 2010 18:51:11 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:17 +0000</updated>
                            <resolved>Mon, 18 Oct 2010 19:17:13 +0000</resolved>
                                                                    <component>BidiMap</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18639</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-363] TransformedMap is Serializable but its superclass doesn&apos;t define an accessible void constructor</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-363</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;TransformedMap is Serializable but its superclass doesn&apos;t define an accessible void constructor.&lt;br/&gt;
For example, the following test fails:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSerialisation() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    TransformedMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; map = TransformedMap.decorate(
            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;(),  NOPTransformer.&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getInstance(), NOPTransformer.&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getInstance());
    ByteArrayOutputStream bytes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
    ObjectOutputStream out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectOutputStream(bytes);
    out.writeObject(map); &lt;span class=&quot;code-comment&quot;&gt;// fails with java.io.InvalidClassException: org.apache.commons.collections.splitmap.TransformedMap; no valid constructor
&lt;/span&gt;    out.close();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12477526">COLLECTIONS-363</key>
            <summary>TransformedMap is Serializable but its superclass doesn&apos;t define an accessible void constructor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 Oct 2010 01:39:44 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:28 +0000</updated>
                            <resolved>Mon, 20 Dec 2010 19:25:03 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12970728" author="isaprykin" created="Mon, 13 Dec 2010 07:50:05 +0000"  >&lt;p&gt;Hello.&lt;br/&gt;
It seems to me that addition of constructor really solves the problem. (look &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-363&quot; title=&quot;TransformedMap is Serializable but its superclass doesn&amp;#39;t define an accessible void constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-363&quot;&gt;&lt;del&gt;COLLECTIONS-363&lt;/del&gt;&lt;/a&gt;.patch attached)&lt;/p&gt;</comment>
                            <comment id="12973162" author="scolebourne" created="Mon, 20 Dec 2010 10:40:32 +0000"  >&lt;p&gt;All the serializable collections are supposed to have a serialization test, with a .obj file checked into the repo (see the data folder). If you could upload a second patch with the obj file and test that uses it, that would be useful.&lt;/p&gt;</comment>
                            <comment id="12973281" author="isaprykin" created="Mon, 20 Dec 2010 18:01:10 +0000"  >&lt;p&gt;I attempted to follow your instructions and done a test case which use .obj files (see patch &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-363&quot; title=&quot;TransformedMap is Serializable but its superclass doesn&amp;#39;t define an accessible void constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-363&quot;&gt;&lt;del&gt;COLLECTIONS-363&lt;/del&gt;&lt;/a&gt;-obj-test-fix.patch attached). I&apos;m also open for any suggestions about making it better.&lt;/p&gt;

&lt;p&gt;I wonder why splitmap.TestTransformedMap extends BulkTest, but not a AbstractTestObject like all other containers.&lt;/p&gt;</comment>
                            <comment id="12973319" author="sebb@apache.org" created="Mon, 20 Dec 2010 19:25:03 +0000"  >&lt;p&gt;Thanks, second patch and obj files applied to SVN&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12466647" name="COLLECTIONS-363-obj-test-fix.patch" size="4421" author="isaprykin" created="Mon, 20 Dec 2010 18:17:38 +0000"/>
                            <attachment id="12466121" name="COLLECTIONS-363.patch" size="1975" author="isaprykin" created="Mon, 13 Dec 2010 07:52:00 +0000"/>
                            <attachment id="12466648" name="TransformedMap.emptyCollection.version3.2.obj" size="318" author="isaprykin" created="Mon, 20 Dec 2010 18:20:06 +0000"/>
                            <attachment id="12466649" name="TransformedMap.fullCollection.version3.2.obj" size="350" author="isaprykin" created="Mon, 20 Dec 2010 18:20:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Dec 2010 07:50:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164385</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-360] FilterListIterator#hasNext throws exception (associate with JUnit tests)</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-360</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I found the some of the iterator classes does not fulfill the iterator specification of JDK.&lt;/p&gt;

&lt;p&gt;e.g. hasNext() should never throw exception.&lt;/p&gt;

&lt;p&gt;Here is an automatically generated junit test (I am now writing a tool)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test233() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Throwable {
    java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; var6 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(0);
    org.apache.commons.collections.list.GrowthList var7 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.commons.collections.list.GrowthList(var6);
    org.apache.commons.collections.Predicate var9 = org.apache.commons.collections.PredicateUtils.anyPredicate((java.util.Collection)var7);
    java.lang.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; var10 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;(10L);
    org.apache.commons.collections.iterators.FilterListIterator var13 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.commons.collections.iterators.FilterListIterator(var9);
    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; exception!
&lt;/span&gt;    var13.hasNext();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;could you please check it to confirm whether it is bug or I misunderstand the specification of apache common collections?&lt;/p&gt;

&lt;p&gt;thanks,&lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu&lt;/p&gt;</environment>
        <key id="12472288">COLLECTIONS-360</key>
            <summary>FilterListIterator#hasNext throws exception (associate with JUnit tests)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jochen@apache.org">Jochen Wiedmann</assignee>
                                    <reporter username="saizhang">Sai Zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Aug 2010 19:29:56 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:45 +0000</updated>
                            <resolved>Tue, 1 Mar 2011 22:17:27 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12970749" author="isaprykin" created="Mon, 13 Dec 2010 08:56:42 +0000"  >&lt;p&gt;As far as I understand expression &quot;&lt;tt&gt;FilterListIterator(var9)&lt;/tt&gt;&quot; resolves into &lt;tt&gt;FilterListIterator(Predicate&amp;lt;? super E&amp;gt; predicate)&lt;/tt&gt; constructor. Here&apos;s what it&apos;s javadoc is saying:&lt;/p&gt;
&lt;blockquote&gt;&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Constructs a new &amp;lt;code&amp;gt;FilterListIterator&amp;lt;/code&amp;gt; that will not function
until {@link #setListIterator(ListIterator) setListIterator} is invoked.

@param predicate  the predicate to use.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;So if a &lt;tt&gt;ListIterator&lt;/tt&gt; isn&apos;t specified than &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/lang/NullPointerException.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;NullPointerException&lt;/a&gt;(your case) is thrown.&lt;br/&gt;
I think, you&apos;re partialy right - &lt;tt&gt;FilterListIterator&lt;/tt&gt; implements &lt;tt&gt;Iterator&lt;/tt&gt; interface and &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/util/Iterator.html#hasNext()&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Iterator.hasNext()&lt;/a&gt; doesn&apos;t specify any exceptions to be thrown.&lt;/p&gt;

&lt;p&gt;If it&apos;s really an issue maybe these two constructors  - &lt;tt&gt;FilterListIterator(Predicate&amp;lt;? super E&amp;gt; predicate)&lt;/tt&gt; and &lt;tt&gt;FilterListIterator(ListIterator&amp;lt;? extends E&amp;gt; iterator )&lt;/tt&gt; should be deprecated?&lt;/p&gt;</comment>
                            <comment id="12975276" author="miccagiann" created="Mon, 27 Dec 2010 16:09:27 +0000"  >&lt;p&gt;I can confirm that the line &quot;var13.hasNext();&quot; from the above unitTest throws a NullPointerException and that&apos;s because iterator has the value NULL. So in order to fix this bug wouldn&apos;t it be a good idea before we checked the private variable iterator if is null in the functions of FilterListIterator where it is called? &lt;/p&gt;</comment>
                            <comment id="12975754" author="miccagiann" created="Wed, 29 Dec 2010 10:26:37 +0000"  >&lt;p&gt;Functions that have been modified: setNextObject(), setPreviousObject().&lt;/p&gt;</comment>
                            <comment id="12975986" author="miccagiann" created="Thu, 30 Dec 2010 08:46:01 +0000"  >&lt;p&gt;I would like to ask if anyone who has worked with this issue has any unit Tests so as to be sure that this implementation work 100%... Thanks!&lt;/p&gt;</comment>
                            <comment id="13001149" author="jochen@apache.org" created="Tue, 1 Mar 2011 22:17:27 +0000"  >&lt;p&gt;Diagnosis: Agreed that the contract of hasNext() forbids throwing an NPE and this is a bug.&lt;br/&gt;
Also agreeing with Igor that the constructors allowing such behaviour are essentially broken. Nevertheless we have them and so we must support them for binary compatibility.&lt;br/&gt;
Hence eliminating the NPE for the FilterListIterator.&lt;/p&gt;

&lt;p&gt;Zhang writes that &quot;some of the iterator classes&quot; have this problem. OTOH, this is nowhere made clear. Feel free to reopen, should you find any more classes in question.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12467106" name="FilterListIterator.java" size="8806" author="miccagiann" created="Wed, 29 Dec 2010 10:26:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Dec 2010 08:56:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18643</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-359] A  &#8745; B  !=  B  &#8745; A when duplicates are present in a list</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-359</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When duplicates are present in a list, ListUtils.intersection doesn&apos;t behave as expected. The intersection of two lists should give the same result regardless of which list comes first. ListUtils.intersection(A,B) should equal ListUtils.intersection(B,A).  This is not the case when the list contains duplicates.&lt;/p&gt;

&lt;p&gt;Right now:&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;a, b&amp;#93;&lt;/span&gt;  &#8745;  &lt;span class=&quot;error&quot;&gt;&amp;#91;a, a, b, b&amp;#93;&lt;/span&gt; =  &lt;span class=&quot;error&quot;&gt;&amp;#91;a, a, b, b&amp;#93;&lt;/span&gt;&lt;br/&gt;
and&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;a, a, b, b&amp;#93;&lt;/span&gt;  &#8745;  &lt;span class=&quot;error&quot;&gt;&amp;#91;a, b&amp;#93;&lt;/span&gt; =  &lt;span class=&quot;error&quot;&gt;&amp;#91;a, b&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Expected behavior:&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;a, a, b, b&amp;#93;&lt;/span&gt;  &#8745;  &lt;span class=&quot;error&quot;&gt;&amp;#91;a, b&amp;#93;&lt;/span&gt; =  &lt;span class=&quot;error&quot;&gt;&amp;#91;a, b&amp;#93;&lt;/span&gt;&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;a, b&amp;#93;&lt;/span&gt;  &#8745;  &lt;span class=&quot;error&quot;&gt;&amp;#91;a, a, b, b&amp;#93;&lt;/span&gt; =  &lt;span class=&quot;error&quot;&gt;&amp;#91;a, b&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;Code demonstrating the problem.&lt;/p&gt;

&lt;p&gt;		List A = new ArrayList();&lt;br/&gt;
		List B = new ArrayList();&lt;br/&gt;
		A.add(&quot;a&quot;);&lt;br/&gt;
		A.add(&quot;b&quot;);&lt;br/&gt;
		B.add(&quot;a&quot;);&lt;br/&gt;
		B.add(&quot;a&quot;);&lt;br/&gt;
		B.add(&quot;b&quot;);&lt;br/&gt;
		B.add(&quot;b&quot;);&lt;br/&gt;
		System.out.println(&quot;List A: &quot; + A);&lt;br/&gt;
		System.out.println(&quot;List B: &quot; + B);&lt;br/&gt;
		System.out.println(&quot;A &#8745; B = &quot; + ListUtils.intersection(A,B));&lt;br/&gt;
		System.out.println(&quot;B &#8745; A = &quot; +ListUtils.intersection(B,A));&lt;/p&gt;

&lt;p&gt;output:&lt;/p&gt;

&lt;p&gt;List A: &lt;span class=&quot;error&quot;&gt;&amp;#91;a, b&amp;#93;&lt;/span&gt;&lt;br/&gt;
List B: &lt;span class=&quot;error&quot;&gt;&amp;#91;a, a, b, b&amp;#93;&lt;/span&gt;&lt;br/&gt;
A &#8745; B = &lt;span class=&quot;error&quot;&gt;&amp;#91;a, a, b, b&amp;#93;&lt;/span&gt;&lt;br/&gt;
B &#8745; A = &lt;span class=&quot;error&quot;&gt;&amp;#91;a, b&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12468568">COLLECTIONS-359</key>
            <summary>A  &#8745; B  !=  B  &#8745; A when duplicates are present in a list</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mwshead">Mark Shead</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Jul 2010 14:58:59 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:28 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:37:12 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12885264" author="mwshead" created="Mon, 5 Jul 2010 15:48:13 +0000"  >&lt;p&gt;This patch fixes the problem and adds a unit test that will fail when the problem remains.&lt;/p&gt;</comment>
                            <comment id="12889584" author="bayard" created="Sun, 18 Jul 2010 07:43:55 +0000"  >&lt;p&gt;Thanks Mark. Patch applied.&lt;/p&gt;

&lt;p&gt;svn ci -m &quot;Applying Mark Shead&apos;s patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-359&quot; title=&quot;A  &#8745; B  !=  B  &#8745; A when duplicates are present in a list&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-359&quot;&gt;&lt;del&gt;COLLECTIONS-359&lt;/del&gt;&lt;/a&gt;. The intersection method was not handling duplicates correctly. &quot;&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/ListUtils.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestListUtils.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 965173.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12448709" name="COLLECTIONS-359.patch" size="1714" author="mwshead" created="Mon, 5 Jul 2010 15:48:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 18 Jul 2010 07:43:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18644</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164388</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-358] CollectionUtils.removeAll(Collection collection, Collection remove) calls ListUtils.retainAll(collection, remove)</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-358</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Inside CollectionUtils.removeAll(Collection collection, Collection remove) the retainAll() method of ListUtils is called in line 1122.&lt;br/&gt;
It should read ListUtils.removeAll(collection, remove) instead.&lt;/p&gt;

&lt;p&gt;Workaround: use ListUtils.removeAll(Collection collection, Collection remove) instead.&lt;/p&gt;</description>
                <environment>&lt;p&gt;any&lt;/p&gt;</environment>
        <key id="12468204">COLLECTIONS-358</key>
            <summary>CollectionUtils.removeAll(Collection collection, Collection remove) calls ListUtils.retainAll(collection, remove)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rasenderhase">Andreas Knees</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jun 2010 21:35:09 +0000</created>
                <updated>Tue, 29 Jun 2010 23:38:16 +0000</updated>
                            <resolved>Tue, 29 Jun 2010 23:38:16 +0000</resolved>
                                    <version>3.1</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12467833">COLLECTIONS-357</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164389</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-357] CollectionUtils.removeAll invokes wrong Listutils method</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-357</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Collection removeAll(Collection collection, Collection remove) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ListUtils.retainAll(collection, remove);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12467833">COLLECTIONS-357</key>
            <summary>CollectionUtils.removeAll invokes wrong Listutils method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fabianlange">Fabian Lange</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Jun 2010 20:03:19 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:51 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:25:31 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12889582" author="bayard" created="Sun, 18 Jul 2010 07:40:45 +0000"  >&lt;p&gt;Fixed in trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12347178">COLLECTIONS-219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12497242">COLLECTIONS-371</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12530050">COLLECTIONS-386</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12468204">COLLECTIONS-358</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12494808">COLLECTIONS-369</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12512488">COLLECTIONS-376</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 18 Jul 2010 07:40:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18646</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164390</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-355] class cast exception in common collection-3.2  jar</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-355</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Recently I have upgraded common collection jar to 3.2 version. After that I got a class cast exception in the following code java code &lt;br/&gt;
String checkedInStation = (String)(((HashMap)lstQueuedPsgrs.get(startIndex))&lt;br/&gt;
                        .get(&quot;PSGRCHECKEDINSTATION&quot;));&lt;/p&gt;

&lt;p&gt;The exception detail as below&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastException: org.apache.commons.collections.map.ListOrderedMap&lt;br/&gt;
at sun.reflect.GeneratedMethodAccessor279.invoke(Unknown Source)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:585) &lt;br/&gt;
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:287)&lt;br/&gt;
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:181) &lt;br/&gt;
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation&lt;/p&gt;</description>
                <environment>&lt;p&gt;Unix, jdk 1.5.0.06&lt;/p&gt;</environment>
        <key id="12465455">COLLECTIONS-355</key>
            <summary>class cast exception in common collection-3.2  jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manu004">maneesh</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 May 2010 13:18:40 +0000</created>
                <updated>Sat, 19 Jun 2010 19:37:29 +0000</updated>
                            <resolved>Sat, 19 Jun 2010 19:37:29 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12871739" author="julien.ayme@gmail.com" created="Wed, 26 May 2010 13:25:59 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I think the ClassCastException is thrown because the lstQueuedPsgrs object you have is not an HashMap but a ListOrderedMap.&lt;br/&gt;
Did you try to cast your object to a Map instead?&lt;/p&gt;

&lt;p&gt;It is generally better to use the Map interface rather than a specific implementation in case of the implementation changes, just as the error you appears to have.&lt;/p&gt;

&lt;p&gt;HTH,&lt;br/&gt;
Regards,&lt;/p&gt;

&lt;p&gt;Julien&lt;/p&gt;</comment>
                            <comment id="12871754" author="sebb@apache.org" created="Wed, 26 May 2010 14:34:20 +0000"  >&lt;p&gt;Reformat to make stacktrace easier to read&lt;/p&gt;</comment>
                            <comment id="12873960" author="manu004" created="Tue, 1 Jun 2010 11:40:23 +0000"  >
&lt;p&gt;Hi Julien, &lt;br/&gt;
Thanks for your support...... When i changed HashMap to Map it is working.&lt;br/&gt;
Still I am confused about the listOrderedMap&lt;/p&gt;

&lt;p&gt;In the following code snippet :&lt;/p&gt;

&lt;p&gt;List&amp;lt;HashMap&amp;gt; objList =null;       //Create a list and it is  using the Data Access layer to fetch the data .&lt;br/&gt;
objList = XDA.getInfo(threadId);     //in XDA,we fetch the data using the hibernate jdbc templete: &lt;/p&gt;

&lt;p&gt;list = YDAO.getListByQuery(sqlStr.toString(), arr); &lt;br/&gt;
return list; // So the return list will be  a List of Maps. This value will be stored in the objList  variable.&lt;/p&gt;

&lt;p&gt;//set the list objList  in a model object called psgrModel&lt;br/&gt;
   psgrModel.setPassengers(objList); &lt;br/&gt;
//pass the model into another method in the same class and fetch the same data processXInfo(psgrModel);&lt;/p&gt;

&lt;p&gt;//in processXInfo(psgrModel) method we are delclaring a list called lstQueuedPsgrs and stored the queued passengers&lt;br/&gt;
    List lstQueuedPsgrs = psgrModel.getQueuedPassengers(); &lt;br/&gt;
Int startIndex=0; &lt;br/&gt;
//get the data from the list into the HashMap and then get the value from it using the key XYZ as set DA layer while &lt;br/&gt;
//fetching from the database &lt;br/&gt;
     String xyz = (String)(((HashMap)lstQueuedPsgrs.get(startIndex)).get(&quot;XYZ&quot;));&lt;/p&gt;

&lt;p&gt;It was working fine in the appache common-collection version 1.1 but as we upgraded it to 3.2 version, its giving the following exception. &lt;br/&gt;
java.lang.ClassCastException: org.apache.commons.collections.map.ListOrderedMap &lt;/p&gt;

&lt;p&gt;And in this particular class we are importing the java.util package. not common collection.&lt;br/&gt;
Although it is working fine with Map, but can anyone please tell us the reason why is it getting ListOrderedMap instead of HaspMap???&lt;/p&gt;</comment>
                            <comment id="12880534" author="bayard" created="Sat, 19 Jun 2010 19:37:29 +0000"  >&lt;p&gt;Resolving - please take to the user list.&lt;/p&gt;

&lt;p&gt;Note that you don&apos;t identify the entry point into Commons; this could (by the look of your comments) be a change in Hibernate or could be a change in whatever the part of Commons is that you&apos;re calling to get the Map.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 May 2010 13:25:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164391</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-353] AbstractLinkedMap firstKey/lastKey JavaDoc reversed</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-353</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;According to the Javadoc on AbstractLinkedMap#firstKey and AbstractLinkedMap#lastKey the following test shouldn&apos;t fail:&lt;/p&gt;

&lt;p&gt;    LinkedMap map = new LinkedMap();&lt;br/&gt;
    map.put(&quot;one&quot;, &quot;one&quot;);&lt;br/&gt;
    map.put(&quot;two&quot;, &quot;two&quot;);&lt;br/&gt;
    assertEquals(&quot;one&quot;, map.lastKey());&lt;br/&gt;
    assertEquals(&quot;two&quot;, map.firstKey());&lt;/p&gt;</description>
                <environment></environment>
        <key id="12457133">COLLECTIONS-353</key>
            <summary>AbstractLinkedMap firstKey/lastKey JavaDoc reversed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mduerig">Michael D&#252;rig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2010 10:15:31 +0000</created>
                <updated>Sat, 27 Apr 2013 21:26:24 +0000</updated>
                            <resolved>Sat, 19 Jun 2010 19:28:28 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12880533" author="bayard" created="Sat, 19 Jun 2010 19:28:28 +0000"  >&lt;p&gt;Closing as a duplicate of a fixed issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12377055">COLLECTIONS-262</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 19 Jun 2010 19:28:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164392</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-352] AbstractCollectionDecorator is inconsistent with AbstractListDecorator. Uses private member variable instead of protected getter</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-352</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;AbstractListDecorator uses getList() to access its private member variable for its methods:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; indexOf(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; object) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getList().indexOf(object);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which allows me to almost do something like this (notice I&apos;m taking some liberties here with the no-arg serialization constructor):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FutureList&amp;lt;T&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AbstractListDecorator {

        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Future&amp;lt;List&amp;lt;T&amp;gt;&amp;gt; futureList;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; FutureList(Future&amp;lt;List&amp;lt;T&amp;gt;&amp;gt; futureList)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;();
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.futureList = futureList;
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Collection&amp;lt;T&amp;gt; getCollection()
        {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
            {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; futureList.get();
            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e)
            {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(e);
            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecutionException e)
            {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(e);
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But AbstractCollectionDecorator uses its private member variable&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; add(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; object) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; collection.add(object);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When it should be IMHO:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; add(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; object) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getCollection().add(object);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Of course most everybody has an armpit and an opinion &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="12455936">COLLECTIONS-352</key>
            <summary>AbstractCollectionDecorator is inconsistent with AbstractListDecorator. Uses private member variable instead of protected getter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="agent">Adam Gent</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Feb 2010 20:34:37 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:30 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:05:10 +0000</resolved>
                                    <version>3.0</version>
                    <version>3.1</version>
                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12880532" author="bayard" created="Sat, 19 Jun 2010 19:25:59 +0000"  >&lt;p&gt;4.0 uses decorated() and both classes are using it instead of the private variable.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 19 Jun 2010 19:25:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164393</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-350] MapUtils.getNumber sends output to System.out</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-350</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;MapUtils.getNumber calls &quot;logInfo&quot; on a ParseException and it produces output on the System.out, instead of just returning &quot;null&quot; as the documentation states.&lt;/p&gt;

&lt;p&gt;Since the expected behavior is to return null, &lt;b&gt;not&lt;/b&gt; print to System.out.  I recommend we remove the call to logInfo and/or remove the System.out.println inside it.&lt;/p&gt;

&lt;p&gt;At minimum, if that&apos;s not agreed upon, the &quot;side-effect&quot; of writing to System.out should be documented.&lt;/p&gt;

&lt;p&gt;I&apos;m happy to offer code for either of these fixes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445640">COLLECTIONS-350</key>
            <summary>MapUtils.getNumber sends output to System.out</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eakerma">Michael Akerman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 16:35:06 +0000</created>
                <updated>Sat, 7 Nov 2015 20:59:22 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:07:58 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="12800751" author="bayard" created="Fri, 15 Jan 2010 16:48:53 +0000"  >&lt;p&gt;logInfo removed. Thanks Michael.&lt;/p&gt;

&lt;p&gt;I looked for other System.out instances in the main java tree and the only other one was intended.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Jan 2010 16:48:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164394</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-349] The method CollectionUtils.removeAll() call wrongly ListUtils.retainAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-349</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The method CollectionUtils.removeAll() calls wrongly ListUtils.retainAll() instead of ListUtils.removeAll().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12444891">COLLECTIONS-349</key>
            <summary>The method CollectionUtils.removeAll() call wrongly ListUtils.retainAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mat.apache">Mathieu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jan 2010 10:47:37 +0000</created>
                <updated>Sat, 27 Apr 2013 21:26:34 +0000</updated>
                            <resolved>Sat, 19 Jun 2010 19:21:34 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12828355" author="bishiboosh" created="Tue, 2 Feb 2010 00:11:02 +0000"  >&lt;p&gt;In the last trunk, it seems to be fixed.&lt;/p&gt;</comment>
                            <comment id="12880530" author="bayard" created="Sat, 19 Jun 2010 19:21:33 +0000"  >&lt;p&gt;Closing as dupe.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12347178">COLLECTIONS-219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Feb 2010 00:11:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18654</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164395</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-348] Javadoc: incorrect behavior explained for XXXUtils.transformedXXX</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-348</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;As a sequel to &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-288&quot; title=&quot;Javadoc: incorrect behavior explained for ListUtils.transformedList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-288&quot;&gt;&lt;del&gt;COLLECTIONS-288&lt;/del&gt;&lt;/a&gt;, any utility method that &quot;transformed&quot; needs to document that the incoming collection is not immediately transformed &amp;#8211; future additions are.&lt;/p&gt;

&lt;p&gt;Candidate methods:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;BagUtils.transformedBag&lt;/li&gt;
	&lt;li&gt;BagUtils.transformedSortedBag&lt;/li&gt;
	&lt;li&gt;CollectionUtils.transform&lt;/li&gt;
	&lt;li&gt;CollectionUtils.transformedCollection&lt;/li&gt;
	&lt;li&gt;ListUtils.transformedList &lt;b&gt;done&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;MapUtils.transformedMap&lt;/li&gt;
	&lt;li&gt;MapUtils.transformedSortedMap&lt;/li&gt;
	&lt;li&gt;SetUtils.transformedSet&lt;/li&gt;
	&lt;li&gt;SetUtils.transformedSortedSet&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12443858">COLLECTIONS-348</key>
            <summary>Javadoc: incorrect behavior explained for XXXUtils.transformedXXX</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pbenedict">Paul Benedict</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 Dec 2009 03:58:09 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:28 +0000</updated>
                            <resolved>Fri, 15 Oct 2010 19:39:57 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Bag</component>
                    <component>Collection</component>
                    <component>List</component>
                    <component>Map</component>
                    <component>Set</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12921513" author="brentworden" created="Fri, 15 Oct 2010 19:39:57 +0000"  >&lt;p&gt;all changes have been made.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12391638">COLLECTIONS-288</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Oct 2010 19:39:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18655</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164396</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-346] SetUniqueList.decorate throws exceptions that is not documented</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-346</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;public static void main(String[] args) &lt;/p&gt;
{
        List&amp;lt;String&amp;gt; testList=Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;e&quot;);
        SetUniqueList decoratedList = SetUniqueList.decorate(testList);
        System.out.println(decoratedList);
    }

&lt;p&gt;throws below exception:&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException&lt;br/&gt;
	at java.util.AbstractList.remove(AbstractList.java:172)&lt;br/&gt;
	at java.util.AbstractList$Itr.remove(AbstractList.java:437)&lt;br/&gt;
	at java.util.AbstractList.removeRange(AbstractList.java:662)&lt;br/&gt;
	at java.util.AbstractList.clear(AbstractList.java:258)&lt;br/&gt;
	at org.apache.commons.collections.list.SetUniqueList.decorate(SetUniqueList.java:80)&lt;/p&gt;

&lt;p&gt;caused by the list to decorate is unmodifiable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12441619">COLLECTIONS-346</key>
            <summary>SetUniqueList.decorate throws exceptions that is not documented</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="justfly">Jimmy Shi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2009 23:18:38 +0000</created>
                <updated>Sat, 19 Jun 2010 19:41:43 +0000</updated>
                            <resolved>Sat, 19 Jun 2010 19:41:44 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12828357" author="bishiboosh" created="Tue, 2 Feb 2010 00:13:02 +0000"  >&lt;p&gt;I think a simple add in the javadoc would prevent this issue, as the comportement seems legal (but not documented)&lt;/p&gt;</comment>
                            <comment id="12880535" author="bayard" created="Sat, 19 Jun 2010 19:41:43 +0000"  >&lt;p&gt;Agreed, but it should be javadoc&apos;d in java.util.Arrays.asList as that&apos;s the location that is throwing the UnsupportedOperationException.&lt;/p&gt;

&lt;p&gt;SetUniqueList.decorate() isn&apos;t the one making the decision here; the coder is as they&apos;ve chosen to pass in an unmodifiable list (though Arrays.asList doesn&apos;t make that clear, at least in the 1.5 javadoc).&lt;/p&gt;

&lt;p&gt;Resolving as nothing for us to do.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Feb 2010 00:13:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18657</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-343] Functor singleton classes do not implement singleton pattern correctly</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-343</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;All classes in package &quot;org.apache.commons.collections.functors&quot; that advertise that they have singleton instance actually cannot guarantee that.  Because of serialization support multiple instances of those classes can exist at runtime.&lt;/p&gt;

&lt;p&gt;Following classes are making this false claim:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;CloneTransformer&lt;/li&gt;
	&lt;li&gt;ExceptionClosure&lt;/li&gt;
	&lt;li&gt;ExceptionFactory&lt;/li&gt;
	&lt;li&gt;ExceptionPredicate&lt;/li&gt;
	&lt;li&gt;ExceptionTransformer&lt;/li&gt;
	&lt;li&gt;FalsePredicate&lt;/li&gt;
	&lt;li&gt;NOPClosure&lt;/li&gt;
	&lt;li&gt;NOPTransformer&lt;/li&gt;
	&lt;li&gt;NotNullPredicate&lt;/li&gt;
	&lt;li&gt;NullPredicate&lt;/li&gt;
	&lt;li&gt;StringValueTransformer&lt;/li&gt;
	&lt;li&gt;TruePredicate&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12438201">COLLECTIONS-343</key>
            <summary>Functor singleton classes do not implement singleton pattern correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ghacek">Goran Hacek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Oct 2009 12:15:28 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:35 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:37:48 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Functor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12766039" author="ghacek" created="Thu, 15 Oct 2009 12:20:53 +0000"  >&lt;p&gt;Fix for this issue is simple, all of these classes should implement readResolve() in the following way:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;private Object readResolve() {
    return INSTANCE;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This also makes default equals() and hashCode() methods behave correctly for this classes.&lt;/p&gt;

&lt;p&gt;I am providing a patch for this issue with tests, so can someone, please, review it.&lt;/p&gt;</comment>
                            <comment id="12795187" author="mbenson" created="Tue, 29 Dec 2009 23:12:50 +0000"  >&lt;p&gt;! /Users/mbenson/oss/asf/commons/trunks-proper/collections&amp;gt; svn commit -m &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-343&quot; title=&quot;Functor singleton classes do not implement singleton pattern correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-343&quot;&gt;&lt;del&gt;COLLECTIONS-343&lt;/del&gt;&lt;/a&gt; applied patch to preserve singleton integrity with readResolve&quot; src pom.xml &lt;br/&gt;
Sending        pom.xml&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/CloneTransformer.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/ExceptionClosure.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/ExceptionFactory.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/ExceptionPredicate.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/ExceptionTransformer.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/FalsePredicate.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/NOPClosure.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/NOPTransformer.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/NotNullPredicate.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/NullPredicate.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/StringValueTransformer.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/functors/TruePredicate.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestClosureUtils.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestFactoryUtils.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestPredicateUtils.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestTransformerUtils.java&lt;br/&gt;
Adding         src/test/org/apache/commons/collections/TestUtils.java&lt;br/&gt;
Transmitting file data ..................&lt;br/&gt;
Committed revision 894507.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12422223" name="fix_functor_singletones.patch" size="15848" author="ghacek" created="Thu, 15 Oct 2009 12:20:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Dec 2009 23:12:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18660</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164400</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-340] NOPClosure has a broken equals method</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-340</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Equals method of NOPClosure class doesn&apos;t follow objects equals contract. It isn&apos;t symmetric nor transitive and it is just plain wrong.&lt;/p&gt;

&lt;p&gt;Following code evaluates to true on most (if not all) JVM implementations:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; NOPClosure.INSTANCE.equals(new Integer(System.identityHashCode(NOPClosure.INSTANCE))) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </description>
                <environment></environment>
        <key id="12438076">COLLECTIONS-340</key>
            <summary>NOPClosure has a broken equals method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ghacek">Goran Hacek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Oct 2009 11:45:28 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:25 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:55:45 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Functor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12765525" author="ghacek" created="Wed, 14 Oct 2009 11:48:34 +0000"  >&lt;p&gt;None of the classes in &quot;org.apache.commons.collections.functors&quot; package implement equals() or hashCode() so why should NOPClosure be any different.&lt;/p&gt;

&lt;p&gt;I suggest removal of both equals() and hashCode()  from NOPClosure.&lt;/p&gt;</comment>
                            <comment id="12765577" author="mbenson" created="Wed, 14 Oct 2009 14:18:37 +0000"  >&lt;p&gt;Rather than remove it &amp;#8211; any NOPClosure, after all, &lt;em&gt;should&lt;/em&gt; be equal to any other &amp;#8211; I fixed it.  Committed revision 825148.&lt;/p&gt;</comment>
                            <comment id="13639470" author="tn" created="Tue, 23 Apr 2013 19:35:59 +0000"  >&lt;p&gt;It looks like this change has been lost during the generics_branch merge.&lt;br/&gt;
I think we can keep it as is and highlight it in the release notes.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Oct 2009 14:18:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164402</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-337] BasicPredicateTestBase.assertFalse &amp; BasicPredicateTestBase.assertTrue methods have confusing names</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-337</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;BasicPredicateTestBase.assertFalse &amp;amp; BasicPredicateTestBase.assertTrue methods have confusing names - they are the same as the JUnit names, but don&apos;t override them.&lt;/p&gt;

&lt;p&gt;Of course it&apos;s still possible to use the JUnit versions of the methods, but the code is harder to understand.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12435750">COLLECTIONS-337</key>
            <summary>BasicPredicateTestBase.assertFalse &amp; BasicPredicateTestBase.assertTrue methods have confusing names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Sep 2009 19:32:11 +0000</created>
                <updated>Sat, 19 Jun 2010 19:43:45 +0000</updated>
                            <resolved>Sat, 19 Jun 2010 19:43:45 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12880536" author="bayard" created="Sat, 19 Jun 2010 19:43:45 +0000"  >&lt;p&gt;I don&apos;t see why they would have to override the method signatures in the JUnit superclass. Method overloading is not abnormal.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 19 Jun 2010 19:43:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18666</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-335] bidimap.TreeBidiMap.entrySet is never written</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-335</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The field bidimap.TreeBidiMap.entrySet is never written.&lt;/p&gt;

&lt;p&gt;Looks like it was perhaps intended to be used as a cache, but the cache value is not written.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12435485">COLLECTIONS-335</key>
            <summary>bidimap.TreeBidiMap.entrySet is never written</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jochen@apache.org">Jochen Wiedmann</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Sep 2009 22:17:34 +0000</created>
                <updated>Sat, 7 Nov 2015 20:31:18 +0000</updated>
                            <resolved>Tue, 1 Mar 2011 22:28:44 +0000</resolved>
                                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12828361" author="bishiboosh" created="Tue, 2 Feb 2010 00:14:05 +0000"  >&lt;p&gt;entrySet is used by public Set&amp;lt;Map.Entry&amp;lt;K, V&amp;gt;&amp;gt; entrySet()&lt;/p&gt;</comment>
                            <comment id="12828369" author="sebb@apache.org" created="Tue, 2 Feb 2010 00:29:07 +0000"  >&lt;p&gt;Yes, but the &lt;b&gt;only code&lt;/b&gt; that accesses entrySet is the following, which does not write the value:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Set&amp;lt;Map.Entry&amp;lt;K, V&amp;gt;&amp;gt; entrySet() {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entrySet == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; EntryView();
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; entrySet;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thus entrySet will remain null, and a new EntryView() will always be created.&lt;/p&gt;</comment>
                            <comment id="13001154" author="jochen@apache.org" created="Tue, 1 Mar 2011 22:28:44 +0000"  >&lt;p&gt;Following the behaviour in the trunk and assigning entrySet now when entrySet() is invoked for the first time.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Feb 2010 00:14:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18668</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164407</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-334] map.StaticBucketMap.size() needs to synchronize access to lock</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-334</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The field Lock.size is updated using synchronization, however the StaticBucketMap.size() method reads the values without synch.&lt;/p&gt;

&lt;p&gt;If the read is done in a different thread from the updates, there is no guarantee that the reading thread will see the most recent value.&lt;/p&gt;</description>
                <environment>&lt;p&gt;collections_jdk5_branch&lt;/p&gt;</environment>
        <key id="12435451">COLLECTIONS-334</key>
            <summary>map.StaticBucketMap.size() needs to synchronize access to lock</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jochen@apache.org">Jochen Wiedmann</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Sep 2009 17:46:05 +0000</created>
                <updated>Sun, 8 Nov 2015 21:07:19 +0000</updated>
                            <resolved>Tue, 1 Mar 2011 22:36:02 +0000</resolved>
                                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13001156" author="jochen@apache.org" created="Tue, 1 Mar 2011 22:36:02 +0000"  >&lt;p&gt;Sebb is right: The size() method is the only place not synchronizing access to the locks. Fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Mar 2011 22:36:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164408</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-332] ListOrderedMap not respecting underlying list</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-332</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When decorating either CaseInsensitiveMap or IdentityMap (and I believe this will impact any java.util.TreeMap built with a non-.equals() Comparator), ListOrderedMap responds inconsistently with the underlying map.  The ordering seems to be operating off .equals() rather than the actual contents of the underlying map. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12430014">COLLECTIONS-332</key>
            <summary>ListOrderedMap not respecting underlying list</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="thpr">Tom Parker</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jul 2009 02:24:18 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:48 +0000</updated>
                            <resolved>Tue, 8 Mar 2011 21:34:21 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12729497" author="thpr" created="Fri, 10 Jul 2009 02:26:35 +0000"  >&lt;p&gt;Test that demonstrates the issue with both CaseInsensitiveMap or IdentityMap as the underlying map.&lt;/p&gt;

&lt;p&gt;Note that this set of tests is not comprehensive (other methods than .firstKey() can demonstrate the issue)&lt;/p&gt;</comment>
                            <comment id="12735420" author="curtjohn" created="Sun, 26 Jul 2009 20:13:01 +0000"  >&lt;p&gt;When you remove an object from a ListOrderedMap there are two main steps:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; remove(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; key) {
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = getMap().remove(key);
        insertOrder.remove(key);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Firstly, the removal of the object from the underlying map is delegated to the map instance. Since in your case this will be an Identity map, the removal method will search by &apos;==&apos; rather than &apos;.equals()&apos; as with a standard Map implementation.&lt;/p&gt;

&lt;p&gt;Secondly, the ListOrderedMap decorator needs to remove this key from its own internal list which is charged with maintaining order. To do this it will use the standard &apos;.remove()&apos; from the ArrayList class, which will search using equality rather than identity.&lt;/p&gt;

&lt;p&gt;These two different implementations cause problems when used together. In my opinion the IdentityMap (knowingly) breaks the Map interface by searching on identity rather than equality (see Map.remove() javadoc: &quot;if this map contains a mapping from key k to value v such that (key==null ? k==null : key.equals(k)), that mapping is removed.&quot;). This causes problems for any classes using an instance of this class expecting it to strictly adhere to the Map interface.&lt;/p&gt;

&lt;p&gt;Therefore the bug isn&apos;t really in the ListOrderedMap class but rather in the usage of the two together. I would suggest improving documentation in the IdentityMap javadoc to clarify this problem. Otherwise we would need to introduce a less-than-elegant &apos;instance of&apos; check in the ListOrderedMap class which would not be ideal.&lt;/p&gt;</comment>
                            <comment id="12743065" author="thpr" created="Fri, 14 Aug 2009 03:41:28 +0000"  >&lt;p&gt;Per my note to the commons user list, I was hoping for either updated docs or a code change, but I think one of the two would be good.&lt;/p&gt;

&lt;p&gt;Looking for a code change, I agree casting is nasty and would recommend against it... it&apos;s very ugly to get all cases correct.  For example, a TreeMap sorted in case insensitive order also breaks ListOrderedMap because it also fails to use .equals().  &lt;/p&gt;

&lt;p&gt;Before this is turned into a documentation bug or feature request, I&apos;d like to note a potential solution simply depends upon how much of a performance hit one is willing to take.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; result = getMap().remove(key);
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Iterator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; it = insertOrder.iterator(); it.hasNext();) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!getMap().containsKey(it.next())) { &lt;span class=&quot;code-comment&quot;&gt;//This respects equality as defined by the underlying map
&lt;/span&gt;    it.remove();
  }
}
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...would seem to be universal (if slower since it effectively trades a .equals() for a .containsKey() call) &lt;span class=&quot;error&quot;&gt;&amp;#91;and yes, getMap() should be extracted to a local variable&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13004230" author="jochen@apache.org" created="Tue, 8 Mar 2011 21:34:21 +0000"  >&lt;p&gt;Added the following comment on ListOrderedMap:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note&lt;/b&gt; that ListOrderedMap doesn&apos;t work with &lt;tt&gt;IdentityMap&lt;/tt&gt;,&lt;br/&gt;
&lt;tt&gt;CaseInsensitiveMap&lt;/tt&gt;, or similar maps that violate the general&lt;br/&gt;
contract of &lt;tt&gt;Map&lt;/tt&gt;. The &lt;tt&gt;ListOrderedMap&lt;/tt&gt; (or, more precisely,&lt;br/&gt;
the underlying &lt;tt&gt;List&lt;/tt&gt;) is relying on &lt;tt&gt;equals()&lt;/tt&gt;. This is&lt;br/&gt;
fine, as long as the decorated &lt;tt&gt;Map&lt;/tt&gt; is also based on&lt;br/&gt;
&lt;tt&gt;equals()&lt;/tt&gt;, and &lt;tt&gt;hashCode()&lt;/tt&gt;, which &lt;tt&gt;IdentityMap&lt;/tt&gt;, and&lt;br/&gt;
&lt;tt&gt;CaseInsensitiveMap&lt;/tt&gt; don&apos;t: The former uses &lt;tt&gt;==&lt;/tt&gt;, and&lt;br/&gt;
the latter uses &lt;tt&gt;equals()&lt;/tt&gt; on a lowercased key.&lt;/p&gt;

&lt;p&gt;Added the following to IdentityMap, and CaseInsensitiveMap:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note&lt;/b&gt; This map will violate the detail of various Map and map view&lt;br/&gt;
contracts. As a general rule, don&apos;t compare this map to other&lt;br/&gt;
maps. In particular, you can&apos;t use decorators like&lt;br/&gt;
&lt;tt&gt;ListOrderedMap&lt;/tt&gt; on it, which silently assume that these&lt;br/&gt;
contracts are fulfilled.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12413071" name="ListOrderedMapTest.java" size="1164" author="thpr" created="Fri, 10 Jul 2009 02:26:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Jul 2009 20:13:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18671</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164409</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-331] CollatingIterator NPE when Comparator is null</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-331</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Run the attached Test against commons-collections-3.2.1. While the JavaDoc for CollatingIterator claims &lt;/p&gt;

&lt;p&gt;&lt;tt&gt;@param comp  the comparator to use to sort, or null to use natural sort order&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;the test fails, because the comparator is null.&lt;/p&gt;

&lt;p&gt;Fixing this requires a change in &lt;tt&gt;org.apache.commons.collections.iterators.CollatingIterator.least()&lt;/tt&gt;: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (comparator.compare(curObject,leastObject) &amp;lt; 0) { ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;could be replaced with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; c = comparator==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;?((Comparable)curObject).compareTo(leastObject):comparator.compare(curObject,leastObject);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (c &amp;lt; 0) { ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The workaround is to provide a comparator, of course.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428785">COLLECTIONS-331</key>
            <summary>CollatingIterator NPE when Comparator is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jochen@apache.org">Jochen Wiedmann</assignee>
                                    <reporter username="krkoska">Michael Krkoska</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2009 14:32:05 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:31 +0000</updated>
                            <resolved>Tue, 8 Mar 2011 22:33:02 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Iterator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="12723579" author="krkoska" created="Wed, 24 Jun 2009 14:33:41 +0000"  >&lt;p&gt;JUnit4 Testcase showing bug&lt;/p&gt;</comment>
                            <comment id="12723952" author="krkoska" created="Thu, 25 Jun 2009 08:44:04 +0000"  >&lt;p&gt;This patch fixes the bug by using ComparableComparator if the comparator is null. &lt;br/&gt;
Testcase is adapted as well.&lt;/p&gt;</comment>
                            <comment id="12850022" author="bayard" created="Fri, 26 Mar 2010 06:35:52 +0000"  >&lt;p&gt;Confirm on the bug. &lt;/p&gt;

&lt;p&gt;Issue is that ComparableComparator can&apos;t be used if the objects aren&apos;t Comparable.&lt;/p&gt;

&lt;p&gt;Now that things are generified this won&apos;t even compile. Specifically this is that CollatingIterator&amp;lt;E&amp;gt; and ComparableComparator&amp;lt;E extends Comparable&amp;lt;? super E&amp;gt;&amp;gt; don&apos;t match.&lt;/p&gt;

&lt;p&gt;One option would be to throw exception if not comparable, but use comparable comparator if E is comparable.&lt;/p&gt;</comment>
                            <comment id="13004265" author="jochen@apache.org" created="Tue, 8 Mar 2011 22:33:02 +0000"  >&lt;p&gt;Agree with Hen&apos;s assessment that the use of Comparable.compareTo might likely cause a bunch of other problems.&lt;/p&gt;

&lt;p&gt;I have verified, that this bug exists in every revision since CollatingIterator was verified. In other words, we don&apos;t need to care for upwards compatibility, there can&apos;t be any code floating around that depends on the use of &quot;natural sort order&quot;.&lt;/p&gt;

&lt;p&gt;Consequently I decided to&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;throw an NPE in least() with a message describing the problem, if no Comparator is present. (This meets the current behaviour, so it is upwards compatible.)&lt;/li&gt;
	&lt;li&gt;change the documentation of the default constructor to require a call to setComparator&lt;/li&gt;
	&lt;li&gt;remove all references to &quot;natural sort order&quot; and replace them with the recommendation to use ComparableComparator, if required&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13423542" author="hudson" created="Thu, 26 Jul 2012 23:07:49 +0000"  >&lt;p&gt;Integrated in commons-collections #69 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/69/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/69/&lt;/a&gt;)&lt;br/&gt;
    Add change for 3.2.2 also for 4.0 release, fix javadoc for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-331&quot; title=&quot;CollatingIterator NPE when Comparator is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-331&quot;&gt;&lt;del&gt;COLLECTIONS-331&lt;/del&gt;&lt;/a&gt;. (Revision 1366195)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366195&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366195&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/changes/changes.xml&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/iterators/CollatingIterator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12411771" name="COLLECTIONS-331.patch" size="2859" author="krkoska" created="Thu, 25 Jun 2009 08:44:04 +0000"/>
                            <attachment id="12411653" name="CollatingIteratorTest.java" size="751" author="krkoska" created="Wed, 24 Jun 2009 14:33:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 26 Mar 2010 06:35:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18672</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-330] ConcurrentModificationException using remove from the keySet the LRUMap</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-330</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Even if the access to a LRUMap is synced and the remove method of the iterator is used that has been returned from the keySet of the LRUMap, it is possible to get a ConcurrentModificationException. This does not happen for remove of the iterators returned by the entrySet or values of the LRUMap. See currently not executed unit test in TestLRUMap (marked as TODO for COLLECTION-3).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428092">COLLECTIONS-330</key>
            <summary>ConcurrentModificationException using remove from the keySet the LRUMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joehni">Joerg Schaible</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jun 2009 09:52:58 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:38 +0000</updated>
                            <resolved>Mon, 21 Feb 2011 19:17:52 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12720960" author="joehni" created="Wed, 17 Jun 2009 22:41:25 +0000"  >&lt;p&gt;Actually &quot;remove&quot; from the MapIterator does not work either.&lt;/p&gt;</comment>
                            <comment id="12720974" author="sebb@apache.org" created="Wed, 17 Jun 2009 23:07:00 +0000"  >&lt;p&gt;It works for me - but there needs to be an iter.next() before the map.get(iter.getValue()).&lt;/p&gt;</comment>
                            <comment id="12721091" author="joehni" created="Thu, 18 Jun 2009 06:37:41 +0000"  >&lt;p&gt;Thanks for heads-up. I &quot;fixed&quot; the invalid test, but it fails for me still. You did recognize that you have to rename the two tests with the TODO comment to get them running as unit test?&lt;/p&gt;</comment>
                            <comment id="12721177" author="sebb@apache.org" created="Thu, 18 Jun 2009 10:46:40 +0000"  >&lt;p&gt;Your fix was different from mine - I just added iter.next(), so the code became:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;iter.next();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (map.get(iter.getValue()) == &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;) {
     iter.remove();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which works fine.&lt;/p&gt;

&lt;p&gt;However the current code is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)iter.next();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (map.get(name) == &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;) {
    iter.remove();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which fails.&lt;/p&gt;</comment>
                            <comment id="12721235" author="sebb@apache.org" created="Thu, 18 Jun 2009 12:50:50 +0000"  >&lt;p&gt;Note that this does not appear to be a threading issue - the testSynchronizedRemoveFromMapIterator test fails even with only one thread. Similarly for testSynchronizedRemoveFromKeySet.&lt;/p&gt;

&lt;p&gt;Perhaps there should be separate single-threaded tests - or at least, the tests should check a single thread first before attempting multiple threads.&lt;/p&gt;

&lt;p&gt;BTW, I added some detail to the ConcurrentModificationException, this shows that the check that is failing is 1001!=1000 (single thread test)&lt;br/&gt;
i.e. the expectedModCount is one less than the parent.modCount. Looks like one of the methods is not updating expectedModCount correctly.&lt;/p&gt;</comment>
                            <comment id="12721254" author="sebb@apache.org" created="Thu, 18 Jun 2009 13:20:18 +0000"  >&lt;p&gt;Also, the tests both still fail even if the iter.remove() call is commented out, but they then fail on the iter.next().&lt;/p&gt;

&lt;p&gt;If the map.get() call is commented out, leaving just iter.remove(), the test works fine in single-threaded and multi-threaded mode.&lt;/p&gt;

&lt;p&gt;Looks like the get() is not maintaining expectedModCount.&lt;/p&gt;</comment>
                            <comment id="12721287" author="sebb@apache.org" created="Thu, 18 Jun 2009 14:57:26 +0000"  >&lt;p&gt;The test testSynchronizedRemoveFromEntrySet also fails if one adds the following to the iterator loop:&lt;/p&gt;

&lt;p&gt;map.get(entry.getKey());&lt;/p&gt;

&lt;p&gt;The problem is that get() has side effects.&lt;/p&gt;</comment>
                            <comment id="12993271" author="mbenson" created="Thu, 10 Feb 2011 23:46:16 +0000"  >&lt;p&gt;Correct, but the contract of the map permits this, as iteration order is based on RU concerns.  Calling &lt;tt&gt;get()&lt;/tt&gt; restructures the underlying data because the current entry becomes the LRU entry and so the map is modified.  The answer, therefore, is not to call get() when testing iterator behavior per the contract of the map.  Commit forthcoming.&lt;/p&gt;</comment>
                            <comment id="12997588" author="mbenson" created="Mon, 21 Feb 2011 22:16:33 +0000"  >&lt;p&gt;resolved with svn r#1069618&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12341922">COLLECTIONS-3</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Jun 2009 23:07:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-323] Behavior of constructors CaseInsensitiveMap inconsistent with standard Java HashMap</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-323</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The constructor CaseInsensitiveMap(int initialCapacity) throws an IllegalArgumentException if &quot;the initial capacity is less than one&quot;. This is inconsistent with the standard Java HashMap constructor HashMap(int initialCapacity), which throws an if IllegalArgumentException if &quot;the initial capacity is negative&quot;.&lt;/p&gt;

&lt;p&gt;Thus:&lt;br/&gt;
new HashMap(0) ==&amp;gt; no exception&lt;br/&gt;
new CaseInsensitiveMap(0) ==&amp;gt; IllegalArgumentException.&lt;/p&gt;

&lt;p&gt;This inconsistency is confusing.&lt;/p&gt;


&lt;p&gt;Actions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Change Javadoc (this shouldn&apos;t be a problem in practice since surely there is no code around depending on the fact that the constructor throws an IllegalArgumentException &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/li&gt;
	&lt;li&gt;Change code.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Any&lt;/p&gt;</environment>
        <key id="12423444">COLLECTIONS-323</key>
            <summary>Behavior of constructors CaseInsensitiveMap inconsistent with standard Java HashMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jochen@apache.org">Jochen Wiedmann</assignee>
                                    <reporter username="mbrak">Maarten Brak</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Apr 2009 08:43:38 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:54 +0000</updated>
                            <resolved>Tue, 8 Mar 2011 23:39:03 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="12711001" author="bayard" created="Wed, 20 May 2009 04:32:12 +0000"  >&lt;p&gt;Same holds true of:&lt;/p&gt;

&lt;p&gt;AbstractHashedMap&lt;br/&gt;
AbstractLinkedMap&lt;br/&gt;
CaseInsensitiveMap&lt;br/&gt;
HashedMap&lt;br/&gt;
IdentityMap&lt;br/&gt;
LinkedMap&lt;br/&gt;
LRUMap&lt;/p&gt;</comment>
                            <comment id="12978475" author="miccagiann" created="Thu, 6 Jan 2011 19:51:00 +0000"  >&lt;p&gt;I&apos;m on this one...&lt;/p&gt;</comment>
                            <comment id="12978485" author="miccagiann" created="Thu, 6 Jan 2011 20:03:22 +0000"  >&lt;p&gt;A quick question: IllegalArgumentException as far as the capacity of the hash map is concerned should be changed or the load factor should be treated the same since it throws the same exception? What i mean is if we are only interested in capacity or if the load factor should throw the same exception if is a negative number?&lt;/p&gt;</comment>
                            <comment id="12978736" author="scolebourne" created="Fri, 7 Jan 2011 10:57:36 +0000"  >&lt;p&gt;The behaviour should match the JDK classes, whatever that is.&lt;/p&gt;</comment>
                            <comment id="12979169" author="miccagiann" created="Sat, 8 Jan 2011 18:18:11 +0000"  >&lt;p&gt;Hope that this patch should solve the problem... Please check it and report any inconsistency or thought that may emerge! Thanks in advance! &lt;/p&gt;</comment>
                            <comment id="13004287" author="jochen@apache.org" created="Tue, 8 Mar 2011 23:39:03 +0000"  >&lt;p&gt;Applied for all classes mentioned by Hen, except for LRUMap, In the case of LRUMap, this would mean to silently increase the capacity, which is most likely not what the user would expect.&lt;/p&gt;</comment>
                            <comment id="13005786" author="julien.ayme@gmail.com" created="Fri, 11 Mar 2011 19:02:57 +0000"  >&lt;p&gt;Why not for the LRUMap?&lt;br/&gt;
If I use the map like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;Bean&amp;gt; list = ...; &lt;span class=&quot;code-comment&quot;&gt;// Load list from db
&lt;/span&gt;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Bean&amp;gt; map = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LRUMap(list.size());
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Bean bean : list) {
    map.put(bean.getUserKey(), bean);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I wouldn&apos;t want this code to throw an IAE if the list is empty.&lt;br/&gt;
The initial capacity is a hint, not the real initial capacity for the map (see HashMap constructor doc comment).&lt;/p&gt;</comment>
                            <comment id="13005998" author="jochen@apache.org" created="Sat, 12 Mar 2011 07:03:18 +0000"  >&lt;p&gt;The solution used for java.util.HashMap as well as for the others now is to silently increase the map size by 1. This is fine for these maps, where the size doesn&apos;t really matter.&lt;/p&gt;

&lt;p&gt;In the case of the LRUMap, size is important and the user is explicitly choosing a particular size. Silent increment would imply to violate these explicit wishes. IMO, that&apos;s not an option.&lt;/p&gt;</comment>
                            <comment id="13006056" author="julien.ayme@gmail.com" created="Sat, 12 Mar 2011 15:39:30 +0000"  >&lt;p&gt;I understand that the size is important for this map. But why couldn&apos;t one create a map of size 0? I agree, it is not very useful, but the use case I described above would not put anything in the map anyway.&lt;/p&gt;</comment>
                            <comment id="13006073" author="jochen@apache.org" created="Sat, 12 Mar 2011 18:29:19 +0000"  >&lt;p&gt;Quoting from the initial bug report: &quot;This is inconsistent with the standard Java HashMap constructor HashMap(int initialCapacity),&quot;&lt;/p&gt;

&lt;p&gt;I had to choose between consistency (incrementing the size by one) and the current behaviour. The latter made much more sense to me and I can think of no reason why one would intentionally create an LRUMap of size 0. The IllegalArgumentException makes perfect sense to me.&lt;/p&gt;</comment>
                            <comment id="13423417" author="hudson" created="Thu, 26 Jul 2012 20:11:49 +0000"  >&lt;p&gt;Integrated in commons-collections #68 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/68/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/68/&lt;/a&gt;)&lt;br/&gt;
    Add change for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-323&quot; title=&quot;Behavior of constructors CaseInsensitiveMap inconsistent with standard Java HashMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-323&quot;&gt;&lt;del&gt;COLLECTIONS-323&lt;/del&gt;&lt;/a&gt; to changes.xml. (Revision 1366178)&lt;/p&gt;

&lt;p&gt;     Result = UNSTABLE&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366178&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366178&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/changes/changes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12467797" name="patch.tar.gz" size="14400" author="miccagiann" created="Sat, 8 Jan 2011 18:18:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 May 2009 04:32:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-321] ComparableComparator.getInstance() not compilable with jdk-compiler</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-321</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Comparator&amp;lt;Integer&amp;gt; c = ComparableComparator.getInstance();&lt;/p&gt;

&lt;p&gt;This line is valid with eclipse (3.4) compiler, but the jdk 1.5.0 compiler returns this error:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; J:\workspace\ndt\cobolclipse-TRUNK\collections_jdk5_branch\src\java\org\apache\commons\collections\comparators\ComparableComparatorTest.java:23: incompatible types; no instance(s) of type variable(s) E exist so that org.apache.commons.collections.comparators.ComparableComparator&amp;lt;E&amp;gt; conforms to java.util.Comparator&amp;lt;java.lang.Integer&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; found   : &amp;lt;E&amp;gt;org.apache.commons.collections.comparators.ComparableComparator&amp;lt;E&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; required: java.util.Comparator&amp;lt;java.lang.Integer&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 		Comparator&amp;lt;Integer&amp;gt; c = ComparableComparator.getInstance();&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                                         ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 1 error&lt;/p&gt;</description>
                <environment></environment>
        <key id="12415464">COLLECTIONS-321</key>
            <summary>ComparableComparator.getInstance() not compilable with jdk-compiler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="daniel.golesny">Daniel Golesny</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Feb 2009 11:10:08 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:36 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:24:53 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Comparator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12754192" author="mbenson" created="Fri, 11 Sep 2009 16:14:54 +0000"  >&lt;p&gt;In the generics branch you&apos;d use &lt;tt&gt;ComparableComparator.&amp;lt;Integer&amp;gt; getInstance()&lt;/tt&gt;.  svn rev 738956&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 Sep 2009 16:14:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18680</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164416</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-320] StaticBucketMap#putall() uses inefficient keySet() iterator when it could use entrySet() iterator</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-320</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;StaticBucketMap#putall()  uses inefficient keySet() iterator when it could use entrySet() iterator.&lt;/p&gt;

&lt;p&gt;Patch to follow.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12414898">COLLECTIONS-320</key>
            <summary>StaticBucketMap#putall() uses inefficient keySet() iterator when it could use entrySet() iterator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2009 21:58:12 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:44 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:58:30 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12701788" author="bayard" created="Thu, 23 Apr 2009 02:45:51 +0000"  >&lt;p&gt;svn ci -m &quot;Improving effiency of StaticBucketMap.putAll as per &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-320&quot; title=&quot;StaticBucketMap#putall() uses inefficient keySet() iterator when it could use entrySet() iterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-320&quot;&gt;&lt;del&gt;COLLECTIONS-320&lt;/del&gt;&lt;/a&gt;&quot; src/java/org/apache/commons/collections/map/StaticBucketMap.java &lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/map/StaticBucketMap.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 767768.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12400300" name="StaticBucketMap.patch" size="765" author="sebb@apache.org" created="Mon, 16 Feb 2009 21:58:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Apr 2009 02:45:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18681</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164417</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-319] IteratorUtils.getIterator(Object obj) performs redundant null check</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-319</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;IteratorUtils.getIterator(Object obj) performs redundant null check:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (obj == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; emptyIterator();            
...
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (obj != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; obj.getClass().isArray()) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayIterator(obj);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;obj cannot be null at that point, so the check can be removed. &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;This will also prevent a false positive in Eclipse which later says tha obj may be null&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12414891">COLLECTIONS-319</key>
            <summary>IteratorUtils.getIterator(Object obj) performs redundant null check</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2009 19:35:08 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:53 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:24:42 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12701785" author="bayard" created="Thu, 23 Apr 2009 02:37:18 +0000"  >&lt;p&gt;svn ci -m &quot;Fixing unnecessary null check in IteratorUtils per &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-319&quot; title=&quot;IteratorUtils.getIterator(Object obj) performs redundant null check&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-319&quot;&gt;&lt;del&gt;COLLECTIONS-319&lt;/del&gt;&lt;/a&gt;&quot; src&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/IteratorUtils.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 767766.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Apr 2009 02:37:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-318] CollectionUtils.size(Object object) has impossible null check</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-318</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;CollectionUtils.size(Object object) has impossible null check:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; size(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; object) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (object == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 0;
        }
...
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (object == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unsupported object type: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;);
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Javadoc specifically says that null is allowed, so I think the object == null clause needs to be removed - it can never be true, and is just confusing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12414889">COLLECTIONS-318</key>
            <summary>CollectionUtils.size(Object object) has impossible null check</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2009 19:28:08 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:31 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:58:40 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12701786" author="bayard" created="Thu, 23 Apr 2009 02:39:07 +0000"  >&lt;p&gt;svn ci -m &quot;Removing unnecessary null check per &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-318&quot; title=&quot;CollectionUtils.size(Object object) has impossible null check&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-318&quot;&gt;&lt;del&gt;COLLECTIONS-318&lt;/del&gt;&lt;/a&gt;&quot; src&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/CollectionUtils.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 767767.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Apr 2009 02:39:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164419</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-317] AbstractHashedMap(Map map) constructor calls overridable non-final method</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-317</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The constructor AbstractHashedMap(Map map) calls the public non-final method putAll() from the same class.&lt;/p&gt;

&lt;p&gt;This is likely to cause problems if the method is ever overridden, as the parent may not have been completely initialised when the sub-class method is invoked. &lt;/p&gt;

&lt;p&gt;Possible solution: extract the code into a common private method. Or make the method final.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12414881">COLLECTIONS-317</key>
            <summary>AbstractHashedMap(Map map) constructor calls overridable non-final method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2009 16:18:08 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:50 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:04:44 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12673933" author="mbenson" created="Mon, 16 Feb 2009 16:47:57 +0000"  >&lt;p&gt;Another, albeit somewhat--different, option would be to expose the implementation detail of putAll() being called in the javadoc specification of the method.  Then a subclass implementor could simply choose to call a different super constructor if appropriate.&lt;/p&gt;</comment>
                            <comment id="12674040" author="sebb@apache.org" created="Mon, 16 Feb 2009 19:22:21 +0000"  >&lt;p&gt;That would be better than nothing, but I would prefer to make it impossible for the user to accidentally mess things up.&lt;/p&gt;</comment>
                            <comment id="12711000" author="bayard" created="Wed, 20 May 2009 04:30:21 +0000"  >&lt;p&gt;svn ci -m &quot;Refactoring putAll to _putAll so the constructor can call the copying in code without running through a subclass&apos; implementation of putAll. Reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-317&quot; title=&quot;AbstractHashedMap(Map map) constructor calls overridable non-final method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-317&quot;&gt;&lt;del&gt;COLLECTIONS-317&lt;/del&gt;&lt;/a&gt;&quot; src/&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/map/AbstractHashedMap.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 776542.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Feb 2009 16:47:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18684</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-316] LRUMap constructor javadoc and behavior are inconsistent (maxSize cannot be less than 0)</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-316</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The LRUMap constructor specifies &quot;@param maxSize  the maximum size of the map, -1 for no limit&quot;&lt;/p&gt;

&lt;p&gt;The first line is then:&lt;/p&gt;

&lt;p&gt;        if (maxSize &amp;lt; 1) &lt;/p&gt;
{
            throw new IllegalArgumentException(&quot;LRUMap max size must be greater than 0&quot;);
        }

&lt;p&gt;There is nothing wrong with allowing a negative maxSize. This way the map can be used to order elements relative to access time. I think the above code should be remove and the javadoc should stay the same.&lt;/p&gt;</description>
                <environment>&lt;p&gt;n/a&lt;/p&gt;</environment>
        <key id="12414517">COLLECTIONS-316</key>
            <summary>LRUMap constructor javadoc and behavior are inconsistent (maxSize cannot be less than 0)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="os111">ori</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Feb 2009 21:55:15 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:34 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:04:53 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="60">1m</timeoriginalestimate>
                            <timeestimate seconds="60">1m</timeestimate>
                                        <comments>
                            <comment id="12710997" author="bayard" created="Wed, 20 May 2009 04:22:33 +0000"  >&lt;p&gt;Two of the javadocs say it will throw the exception. One of them is the one you quote.&lt;/p&gt;

&lt;p&gt;The code before the exception tries to make maxSize be DEFAULT_CAPACITY, so the no limit part would also be wrong.&lt;/p&gt;

&lt;p&gt;I&apos;ve removed the &quot;-1 means no limit&quot; from the Javadoc in r776538.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 May 2009 04:22:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18685</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-315] CollectionUtils.removeAll calls the wrong ListUtils method</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-315</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Using version 3.2.1 as downloaded from maven&apos;s public repository.&lt;/p&gt;

&lt;p&gt;CollectionUtils.removeAll should call ListUtils.removeAll instead of ListUtils.retainAll.&lt;/p&gt;

&lt;p&gt;Currently&lt;br/&gt;
{{public static Collection removeAll(Collection collection, Collection remove) &lt;/p&gt;
{
        return ListUtils.retainAll(collection, remove);
    }
&lt;p&gt;}}&lt;/p&gt;

&lt;p&gt;Suggested&lt;br/&gt;
{{public static Collection removeAll(Collection collection, Collection remove) &lt;/p&gt;
{
        return ListUtils.*removeAll*(collection, remove);
    }
&lt;p&gt;}}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12413928">COLLECTIONS-315</key>
            <summary>CollectionUtils.removeAll calls the wrong ListUtils method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cheriot">Christopher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Feb 2009 19:30:04 +0000</created>
                <updated>Tue, 1 May 2012 12:03:19 +0000</updated>
                            <resolved>Tue, 3 Feb 2009 20:40:57 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13265752" author="barisacar" created="Tue, 1 May 2012 12:03:19 +0000"  >&lt;p&gt;Is there any plan for when this will be released? The latest version, 3.2.1, still contains this bug.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12347178">COLLECTIONS-219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 May 2012 12:03:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18686</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164422</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-310] Modifications of a SetUniqueList.subList() invalidate the parent list</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-310</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The List returned by SetUniqueList.subList() is again a SetUniqueList. The contract for List.subList() says that the returned list supports all the operations of the parent list, and it is backed by the parent list.&lt;/p&gt;

&lt;p&gt;We have a SetUniqueList uniqueList equal to &lt;/p&gt;
{&quot;Hello&quot;, &quot;World&quot;}
&lt;p&gt;. We get a subList containing the last element. Now we add the element &quot;Hello&quot;, contained in the uniqueList but not in the subList, to the subList.&lt;/p&gt;

&lt;p&gt;What should happen?&lt;/p&gt;

&lt;p&gt;Should the subList behave like a SetUniqueList and add the element - meaning that it changes position in the uniqueList because at the old place it gets removed, so now uniqueList equals &lt;/p&gt;
{&quot;World&quot;, &quot;Hello&quot;}
&lt;p&gt; (which fails)?&lt;br/&gt;
Or should the element not be added, because it is already contained in the parent list, thereby violating the SetUniqueList-ness of the subList (which fails)?&lt;br/&gt;
I prefer the former behaviour, because modifications should only be made through the subList and not through the parent list (as explained in List.subList()).&lt;/p&gt;

&lt;p&gt;What should happen if we replace (using set) the subList element &quot;World&quot; with &quot;Hello&quot; instead of adding an element?&lt;/p&gt;

&lt;p&gt;The subList should contain only &quot;Hello&quot;, and for the parent list, the old element 0 (now a duplicate of the just set element 1) should be removed (which fails).&lt;/p&gt;

&lt;p&gt;And of course the parent list should know what happens to it (specifically, its uniqueness Set) (which fails in the current snapshot).&lt;/p&gt;


&lt;p&gt;	public void testSubListAddNew() {&lt;br/&gt;
		List uniqueList = SetUniqueList.decorate(new ArrayList());&lt;br/&gt;
		uniqueList.add(&quot;Hello&quot;);&lt;br/&gt;
		uniqueList.add(&quot;World&quot;);&lt;br/&gt;
		List subList = uniqueList.subList(1, 2);&lt;/p&gt;

&lt;p&gt;		subList.add(&quot;Goodbye&quot;);&lt;/p&gt;

&lt;p&gt;		List expectedSubList = Arrays.asList(new Object[] &lt;/p&gt;
{ &quot;World&quot;, &quot;Goodbye&quot; }
&lt;p&gt;);&lt;br/&gt;
		List expectedParentList = Arrays.asList(new Object[] &lt;/p&gt;
{ &quot;Hello&quot;, &quot;World&quot;, &quot;Goodbye&quot; }
&lt;p&gt;);&lt;br/&gt;
		assertEquals(expectedSubList, subList);&lt;br/&gt;
		assertEquals(expectedParentList, uniqueList);&lt;br/&gt;
		assertTrue(uniqueList.contains(&quot;Goodbye&quot;)); // fails&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;	public void testSubListAddDuplicate() {&lt;br/&gt;
		List uniqueList = SetUniqueList.decorate(new ArrayList());&lt;br/&gt;
		uniqueList.add(&quot;Hello&quot;);&lt;br/&gt;
		uniqueList.add(&quot;World&quot;);&lt;br/&gt;
		List subList = uniqueList.subList(1, 2);&lt;/p&gt;

&lt;p&gt;		subList.add(&quot;Hello&quot;);&lt;/p&gt;

&lt;p&gt;		List expectedSubList = Arrays.asList(new Object[] &lt;/p&gt;
{ &quot;World&quot;, &quot;Hello&quot; });&lt;br/&gt;
		List expectedParentList = Arrays.asList(new Object[] { &quot;World&quot;, &quot;Hello&quot; }
&lt;p&gt;);&lt;br/&gt;
		assertEquals(expectedSubList, subList);&lt;br/&gt;
		assertEquals(expectedParentList, uniqueList); // fails&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;	public void testSubListSetDuplicate() {&lt;br/&gt;
		List uniqueList = SetUniqueList.decorate(new ArrayList());&lt;br/&gt;
		uniqueList.add(&quot;Hello&quot;);&lt;br/&gt;
		uniqueList.add(&quot;World&quot;);&lt;br/&gt;
		List subList = uniqueList.subList(1, 2);&lt;/p&gt;

&lt;p&gt;		subList.set(0, &quot;Hello&quot;);&lt;/p&gt;

&lt;p&gt;		List expectedSubList = Arrays.asList(new Object[] &lt;/p&gt;
{ &quot;Hello&quot; });&lt;br/&gt;
		List expectedParentList = Arrays.asList(new Object[] { &quot;Hello&quot; }
&lt;p&gt;);&lt;br/&gt;
		assertEquals(expectedSubList, subList);&lt;br/&gt;
		assertEquals(expectedParentList, uniqueList); // fails&lt;br/&gt;
	}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412112">COLLECTIONS-310</key>
            <summary>Modifications of a SetUniqueList.subList() invalidate the parent list</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chsemrau">Christian Semrau</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Jan 2009 13:58:28 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:26 +0000</updated>
                            <resolved>Sat, 27 Apr 2013 11:57:35 +0000</resolved>
                                    <version>3.2</version>
                    <version>Nightly Builds</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12662689" author="chsemrau" created="Sat, 10 Jan 2009 20:25:58 +0000"  >&lt;p&gt;It seems that properties of the SetUniqueList.subList are currently not tested: The bulk tests for TestSetUniqueList are disabled.&lt;/p&gt;

&lt;p&gt;I managed to enable them by using a copy of BulkTestSubList which is subclassed from TestSetUniqueList instead of AbstractTestList, and which disables extraVerify for itself and the outer test. For the bulkTestListIterator, TestListIterator.supportsSet() must return false (but then still one test fails).&lt;/p&gt;

&lt;p&gt;But maybe this should be subject of a different jira issue.&lt;/p&gt;</comment>
                            <comment id="13563537" author="t.vahrst" created="Sat, 26 Jan 2013 16:30:52 +0000"  >&lt;p&gt;As already stated in the javadoc of SetUniqueList, this class does not adhere to the api contract of java.util.List. The class name as well as the implemented interface (java.util.List) implies the behavior of a List, but that is not true. Several methods violate the List contract and state this in its javadocs. &lt;/p&gt;

&lt;p&gt;Furthermore: some javadocs are not clear enough about the contract violation. For example the javadoc of the &apos;add()&apos; method states a &apos;violation&apos; of the api because the method may return &apos;false&apos;. But this method also violates the java.util.List &lt;b&gt;semantics&lt;/b&gt;, because the specified element is not only added, an other element is possibly removed during the invocation. &lt;/p&gt;

&lt;p&gt;Imagine a generic sort algorithm for lists, which internal moves elements in the list by &lt;b&gt;first&lt;/b&gt; adding the element at the new position and then removing the element at the old position. This algorithm would probably remove most of the elements in the list... (Btw: this test fails with an UnsupportedOperationException:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; list = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;();
  list.addAll( Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;three&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;four&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;five&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;six&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;seven&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;eight&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;nine&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ten&quot;&lt;/span&gt;));
  SetUniqueList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; uniquelist = SetUniqueList.setUniqueList(list);

  Collections.sort(uniquelist);

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In my opinion this jira issue concerning the subList() behavior cannot be solved in a way that makes the behavior expectable for the user. So instead of providing an implementation which may work in most cases but sometimes fails and describing this strange behavior (it took some time to understand the issue...) in the method&apos;s javadoc, I would suggest to throw an UnsupportedOperationException.&lt;/p&gt;

&lt;p&gt;I personally would consider removing the whole class. Many developers use the apache commons classes as code reference for their own concrete coding problems and SetUniqueList isn&apos;t a good example of the decorator pattern - as stated above. (And in addition violates the liskov substitution principle). The better solution is already described in SetUniqueList&apos;s javadoc:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; * The {@link org.apache.commons.collections.set.ListOrderedSet ListOrderedSet}
 * &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;provides an alternative approach, by wrapping an existing Set and
 * retaining insertion order in the iterator.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What do yout think? Any comments?&lt;/p&gt;</comment>
                            <comment id="13566631" author="tn" created="Wed, 30 Jan 2013 17:09:20 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;I agree in general with your observation, but I do not understand your statement &apos;because the specified element is not only added, an other element is possibly removed during the invocation&apos;.&lt;/p&gt;

&lt;p&gt;Looking at the add method, I fail to see how this may happen. The use-case you describe does explicitly call remove, so I wonder how this is related to the previous statement.&lt;/p&gt;

&lt;p&gt;This class in general should be used with a lot of care, and only if you know exactly what you are doing, which is probably not very convincing either. I would prefer to keep the class for now, but improve the javadoc wrt the current limitations, which may never be fully resolved.&lt;/p&gt;</comment>
                            <comment id="13566703" author="t.vahrst" created="Wed, 30 Jan 2013 18:07:38 +0000"  >&lt;p&gt;Mmmh, I don&apos;t understand my own comment any more... Must have been tired. So you are right: the sorting example is nonsense, please ignore it. &lt;/p&gt;

&lt;p&gt;I agree to keep the class - I&apos;ll try to write some additions to the javadoc comment for the subList() method to clarify the behavior... &lt;/p&gt;</comment>
                            <comment id="13569532" author="t.vahrst" created="Sat, 2 Feb 2013 12:47:35 +0000"  >&lt;p&gt;I took a deeper look on this issue and the suggested behavior/junit tests and tried to understand the problem(s). It seems, there a two issues with the current implementation regarding modifications of sublists:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Modifications of sublist items are delegated to the underlying backing list (which is the default sublist implementation) but &lt;b&gt;not&lt;/b&gt; to the internal set of the parent SetUniqueList.  So a new entry is added to the list, but the contains() method of the parent SetUniqueList returns false&lt;/li&gt;
	&lt;li&gt;Modifications of the sublist may result in changes &lt;b&gt;outside&lt;/b&gt; the range of the sublist. For example adding an element which is not in the sublist but somewhere in the backing list should result in &lt;b&gt;moving&lt;/b&gt; the item from its current position to the new position defined by the subset. This move may corrupt the internal range offsets of the sublist.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The first issue seems easy to solve, for example by holding a reference of the parent set in the subset. But if another subset is created based on the first subset, we have to maintain a collections of parent sets.&lt;/p&gt;

&lt;p&gt;The second issue is similar to a direct modification of a backing list - which is not supported. The javadoc of sublist states&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The semantics of the list returned by this method become undefined if the backing list (i.e., this list) is structurally modified in any way other than via the returned list. (Structural modifications are those that change the size of this list, or otherwise perturb it in such a fashion that iterations in progress may yield incorrect results.)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To solve this problem, the subList implementation has to track all modifications of the backing list and adjust it&apos;s internal range offsets accordingly. For example adding a duplicate item to a sublist, which exists  &apos;in front&apos; of the sublist will result &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;moving the item to the new sublist position&lt;/li&gt;
	&lt;li&gt;decrement the range offsets of the sublist.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So first of all I wrote a short javadoc comment for the sublist method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Returns a view of the portion of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; list between the specified 
     * fromIndex, inclusive, and toIndex, exclusive.
     * &amp;lt;p&amp;gt;
     * &amp;lt;i&amp;gt;(Violation)&amp;lt;/i&amp;gt; According to the &amp;lt;code&amp;gt;List&amp;lt;/code&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; the returned
     * sublist has to be backed by the original list. Because a &amp;lt;code&amp;gt;SetUniqueList&amp;lt;/code&amp;gt;
     * requires both a defined ordering of the list items &amp;lt;i&amp;gt;and&amp;lt;/i&amp;gt; uniqueness of
     * all list items, modifications cannot garantee consistant behavior of both
     * the backing list and the sub list. It is strongly recommended not to modify
     * the sublist. 
     * &amp;lt;p&amp;gt;
     * 
     * @param fromIndex
     * @param toIndex
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 
     */

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should we perhaps return the sublist as a UnmodifiableList?&lt;/p&gt;


</comment>
                            <comment id="13573550" author="tn" created="Thu, 7 Feb 2013 14:48:57 +0000"  >&lt;p&gt;Right now, when calling subList, a new, independent SetUniqueList is created which is filled with elements from the backing list of the specified range.&lt;/p&gt;

&lt;p&gt;The problem comes from the fact that this new SetUniqueList does not check for uniqueness in the backing list, but only in the sublist. If we would create an inner class (see for example ListOrderedMap), which would delegate the calls (after properly adjusting some arguments, e.g. calculate real index) to the backing SeUniqueList we could support the sublist contract.&lt;/p&gt;

&lt;p&gt;The order is maintained and the uniqueness is validated by the backing list.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="13580278" author="t.vahrst" created="Sun, 17 Feb 2013 20:39:19 +0000"  >&lt;p&gt;Many new testcases for sublists.&lt;/p&gt;</comment>
                            <comment id="13580284" author="t.vahrst" created="Sun, 17 Feb 2013 20:51:40 +0000"  >&lt;p&gt;I am trying to create a sublist implementation which conforms to the required functions. The first attachement (SetUniqueListTest.patch) contains many new testcases for sublist, checking this functions. &lt;/p&gt;

&lt;p&gt;I implemented two possible solutions, more of that in the following posts (in the next days). During the coding I realized a further problem concerning ListIterator. ListIterator supports add/set/remove functionality, which means, that a ListIterator based on a sublist needs the corresponding sublist behavior. And ListIterator may start at a specified index, so this  means, that a ListIterator with index &amp;gt; 0 based on a SetUniqueList itself is a subList of the underlying SetUniqueList - with all the necessary behavior. &lt;/p&gt;

&lt;p&gt;So for the first iteration on this issue, I ommited these tests. I will provided them later...&lt;/p&gt;</comment>
                            <comment id="13580821" author="t.vahrst" created="Mon, 18 Feb 2013 20:36:29 +0000"  >&lt;p&gt;SetUniqueList.patch contains JUnit Tests and Variant No. 1 for SetUniqueList. I am not sure whether the patch has a correct format (I am not able to re-apply the patch in Netbeans...) so I attached the corresponding java files as well.&lt;/p&gt;

&lt;p&gt;Some comment to this solution: &lt;br/&gt;
1. During the implementation I recognized, that the existing implementation of subList() uses the subList() method on the decorated list and then creates a new Set and fills all elements of the sublist into the set. &lt;/p&gt;

&lt;p&gt;Now this issue requires, that a parent list has to be modified on certain invocations on a sublist - for example when adding an element to the sublist which exists in the parent list somewhere outside the range of the sublist. With the current sublist implementation, any attempt to modify a parent list fails with a ConcurrentModifiationException. So we have to reimplement the sublist functionality inside SetUniqueList and can not reuse the service of AbstractListDecorator.&lt;/p&gt;

&lt;p&gt;2. When we create a subList on a SetUniqueList, this sublist has to obbey the SetUniqueList contracts. The original parent list will have slightly different behavior when adding or setting values. When we create a second sublist based on the first sublist, this top most list has to provide SetUniqueList semantics.&lt;/p&gt;

&lt;p&gt;Example (from JUnit Tests)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
 subList2                    ! e ! f ! g !              offset = 2
 subList1            ! c ! d ! e ! f ! g ! h !          offset = 2
 list        ! a ! b ! c ! d ! e ! f ! g ! h ! i ! j !  offset = 0
             -----------------------------------------
 Index         0   1   2   3   4   5   6   7   8   9

 Adds a &apos;d&apos; to subList2. This should move the &apos;d&apos; in subList1 and list in the range of subList2
 Expected result:

 subList2                ! e ! f ! g ! d !              offset = 1
 subList1            ! c ! e ! f ! g ! d ! h !          offset = 2
 list        ! a ! b ! c ! e ! f ! g ! d ! h ! i ! j !  offset = 0
             -----------------------------------------
 Index         0   1   2   3   4   5   6   7   8   9
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;(The &apos;movement&apos; of &apos;d&apos; causes the ConcurrentModificationException mentioned above.)&lt;/p&gt;

&lt;p&gt;Because of this requirements I decided for Variant No. 1, that every SetUniqueList holds its own list and set and maintains a reference to it&apos;s parent SetUniqueList and an offset value. The SetUniqueList garantees, that all parent lists are updated according to the required functionality and that all offset values are adjusted if necessary. This solution does not use the sublist functionality of the decorated list but creates allway a new Set &lt;b&gt;and&lt;/b&gt; List.&lt;/p&gt;

&lt;p&gt;I copied the existing code for creating a new Set to also create a new List based on the existing list. &lt;/p&gt;

&lt;p&gt;At this time, there are two things missing:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;a very details javadoc comment for the subList() method, explaining the behavior.&lt;/li&gt;
	&lt;li&gt;the implementation for listIterator().&lt;/li&gt;
&lt;/ol&gt;



&lt;p&gt;... to be continued with variant no. 2 ...&lt;/p&gt;





</comment>
                            <comment id="13592609" author="t.vahrst" created="Mon, 4 Mar 2013 20:35:53 +0000"  >&lt;p&gt;2nd variant of modified SetUniqueList and even more Testcases f&#252;r sublist.&lt;/p&gt;</comment>
                            <comment id="13592633" author="t.vahrst" created="Mon, 4 Mar 2013 21:02:33 +0000"  >&lt;p&gt;SetUniqueListTest.java now contains some new testcases to test the behavior of listiterators of sublists. &lt;/p&gt;

&lt;p&gt;SetUniqueList.v2.java is the 2nd variant I implemented. In contrast to the first attempt, this class does not inherit from AbstractListDecorator but inherits from java.util.AbstractList. It holds a reference to a underlying list which is &lt;b&gt;shared&lt;/b&gt; with all sublists. So every sublist holds the reference to the underlying list and maintains it&apos;s own set and a offset of its element range in the underlying list.&lt;/p&gt;

&lt;p&gt;This variant contains support for iterators and listiterators on sublists.&lt;/p&gt;

&lt;p&gt;I personally found this solution a bit more elegant than the first variant. &lt;/p&gt;
</comment>
                            <comment id="13604567" author="tn" created="Sun, 17 Mar 2013 10:22:33 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;I have looked through both variants, but am still undecided.&lt;br/&gt;
Generally, I think we should keep the inheritance to AbstractSerializableListDecorator, as the class should remain a decorator. Adding more fields to the actual class also has the down-side that we need to make sure that serialization still works correctly, so I would prefer to create an inner static View class, which is returned when calling subList.&lt;/p&gt;

&lt;p&gt;I will further play with your patch, and give you more feedback.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13642120" author="tn" created="Thu, 25 Apr 2013 19:33:43 +0000"  >&lt;p&gt;I did take another look at your provided test-cases and I do not agree with the following behavior:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;adding an element in a subList that is contained in the backing list results in moving the element to the new location&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is not what I would expect, and also the backing list does not do this, e.g. when calling add(obj) where obj is already contained in the list will result in no change at all. I think we should make it clear, that the returned subList is &lt;b&gt;backed&lt;/b&gt; by a SetUniqueList, thus adding elements that are in the backing list but not in the subList should not be added at all, as they are already present, just not visible in this view.&lt;/p&gt;</comment>
                            <comment id="13642987" author="t.vahrst" created="Fri, 26 Apr 2013 16:14:30 +0000"  >&lt;p&gt;Hi Thomas,&lt;br/&gt;
Christian Semrau, who reported this issue, provides in the issue description two possible solutions to the inconsistency of sublist. In a nutshell:&lt;br/&gt;
When adding a value to a SubList and this value exists in the underlying SetUniqueList,&lt;br/&gt;
1. the subList behaves like a SetUniqueList and the existing value is &lt;b&gt;moved&lt;/b&gt; to the new position - thus breaking the contract of the underlying SetUniqueList.&lt;br/&gt;
2. nothing happens because the value already exists - which means that the &lt;b&gt;sublist&lt;/b&gt; does not behave like a SetUniqueList.&lt;/p&gt;

&lt;p&gt;Christian preferred the first solution, so I implemented all JUnit tests (and the proposed changes of SetUniqueList) according to solution no. 1&lt;/p&gt;


&lt;p&gt;If we decide to switch to solution no. 2, I would at first change all unit tests according to this solution. Ok?&lt;/p&gt;

&lt;p&gt;btw: invoking set() method with a value that exists outside the sublist will move the value to the new position, right? And also: removing a value in a sublist which exists outside the sublist range will remove this value in the underlying SEtUnqiqueList?&lt;/p&gt;

&lt;p&gt;(btw 2: did I allready mention that I am not happy at all with our attempt to solve a obviously inconsistent construct? Whether solution No. 1 or 2: I wonder how to write a good javadoc comment for sublist() which describes the behavior in a clear manner... The possibly most simple javadoc could read: &quot;This method returns a sublist which is umodifiable.&quot; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13643093" author="tn" created="Fri, 26 Apr 2013 18:16:33 +0000"  >&lt;p&gt;Hi Thomas,&lt;/p&gt;

&lt;p&gt;I did not mean to criticize your outstanding effort (and your choice was perfectly reasonable).&lt;br/&gt;
Maybe we should really do as you suggest and return an unmodifiable list for 4.0 to be on the safe side (although you put so much effort into this issue).&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="13643603" author="t.vahrst" created="Sat, 27 Apr 2013 08:38:17 +0000"  >&lt;p&gt;Hi Thomas,&lt;br/&gt;
oops, I definitly do not feel criticized - I am sorry if my comment sounds this way. In fact this issue is a interesting programming challenge. Regardless of the efforts: I am convinced that SetUniqueList&apos;s &apos;mixture&apos; of List API and Set behavior makes it very difficult to provide a simple, intuitive and consistent implementation of the sublist() method.&lt;/p&gt;

&lt;p&gt;So I would appreciate the decision to let sublist() return an unmodifiable list. &lt;/p&gt;</comment>
                            <comment id="13643637" author="tn" created="Sat, 27 Apr 2013 11:57:35 +0000"  >&lt;p&gt;Applied change in r1476557.&lt;/p&gt;

&lt;p&gt;Thanks for all the effort so far!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12633927">COLLECTIONS-444</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12569854" name="SetUniqueList.java" size="18862" author="t.vahrst" created="Mon, 18 Feb 2013 20:34:05 +0000"/>
                            <attachment id="12569853" name="SetUniqueList.patch" size="51590" author="t.vahrst" created="Mon, 18 Feb 2013 20:34:05 +0000"/>
                            <attachment id="12571946" name="SetUniqueList.v2.java" size="20855" author="t.vahrst" created="Mon, 4 Mar 2013 20:35:53 +0000"/>
                            <attachment id="12571947" name="SetUniqueListTest.java" size="79006" author="t.vahrst" created="Mon, 4 Mar 2013 20:35:53 +0000"/>
                            <attachment id="12569855" name="SetUniqueListTest.java" size="59847" author="t.vahrst" created="Mon, 18 Feb 2013 20:34:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 26 Jan 2013 16:30:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18691</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fth3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90373</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-308] CollectionUtils.transform fails when collection is HashMap$Values</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-308</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I&apos;m trying to apply a transformation to all values in a map :&lt;/p&gt;

&lt;p&gt;		Collection values = map.values();&lt;br/&gt;
		CollectionUtils.transform(values, transformer);&lt;/p&gt;

&lt;p&gt;Gives a java.lang.UnsupportedOperationException in CollectionUtils line 439.&lt;/p&gt;

&lt;p&gt;According to Javadoc the method values of Hashmap &quot;does not support the add or addAll operations.&quot;.&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Ubuntu&lt;/p&gt;</environment>
        <key id="12411275">COLLECTIONS-308</key>
            <summary>CollectionUtils.transform fails when collection is HashMap$Values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lluismf">Llu&#237;s Mart&#237;nez</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Dec 2008 23:32:00 +0000</created>
                <updated>Wed, 24 Dec 2008 14:19:57 +0000</updated>
                            <resolved>Wed, 24 Dec 2008 14:19:57 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12659012" author="jwcarman" created="Wed, 24 Dec 2008 00:47:31 +0000"  >&lt;p&gt;Do you need the transformation to be visible via the map?  Or, are you just looking to take the values from the map, transform them in some way, and then do something with them?  If so, then try:&lt;/p&gt;

&lt;p&gt;Collection values = new HashSet(map.values());&lt;/p&gt;

&lt;p&gt;and play around with that values collection.  Of course, you can use whatever type of collection you wish (LinkedList, ArrayList, TreeSet, etc.).&lt;/p&gt;</comment>
                            <comment id="12659074" author="scolebourne" created="Wed, 24 Dec 2008 09:24:46 +0000"  >&lt;p&gt;There is no way to &apos;fix&apos; this in commons-collections - its the nature of transform() to alter the input collection.&lt;/p&gt;

&lt;p&gt;The only change to make is to add some javadoc.&lt;/p&gt;</comment>
                            <comment id="12659100" author="lluismf" created="Wed, 24 Dec 2008 14:19:57 +0000"  >&lt;p&gt;I agree with Stephen&apos;s explanation, proceeding to close.&lt;br/&gt;
James: I need the map updated as well. I will iterate the keyset, get the value, transform and put.&lt;br/&gt;
Thanks for your comments.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Dec 2008 00:47:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164426</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-307] SetUniqueList.subList().contains() method checks against full parent list, not sublist range</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-307</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The view returned by the subList() method of a SetUniqueList checks contains() against the set of the original list.&lt;/p&gt;

&lt;p&gt;As shown by the following test snippet.&lt;/p&gt;

&lt;p&gt;		List list = new ArrayList();&lt;br/&gt;
		List uniqueList = SetUniqueList.decorate(list);&lt;br/&gt;
		uniqueList.add(&quot;Hello&quot;);&lt;br/&gt;
		uniqueList.add(&quot;World&quot;);&lt;br/&gt;
		List subList = list.subList(0, 0);&lt;br/&gt;
		List subUniqueList = uniqueList.subList(0, 0);&lt;br/&gt;
		assertFalse(subList.contains(&quot;World&quot;)); // passes&lt;br/&gt;
		assertFalse(subUniqueList.contains(&quot;World&quot;)); // fails&lt;/p&gt;</description>
                <environment></environment>
        <key id="12408351">COLLECTIONS-307</key>
            <summary>SetUniqueList.subList().contains() method checks against full parent list, not sublist range</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chsemrau">Christian Semrau</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Nov 2008 16:59:19 +0000</created>
                <updated>Sun, 8 Nov 2015 21:12:34 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:03:15 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12646952" author="chsemrau" created="Wed, 12 Nov 2008 17:01:03 +0000"  >&lt;p&gt;The same problem occurs with containsAll().&lt;/p&gt;</comment>
                            <comment id="12659497" author="bayard" created="Mon, 29 Dec 2008 05:10:43 +0000"  >&lt;p&gt;Thanks for the report Christian. The bug is because the subList call doesn&apos;t create a new set to represent uniqueness but instead uses the parent list&apos;s set. Easy enough to fix if we hardcode the type of set. Harder to do if we want to use the same Set as originally passed in as there&apos;s no guaranteed cloning method.&lt;/p&gt;

&lt;p&gt;Tempted to do a helper method of:&lt;/p&gt;

&lt;p&gt;if instanceof Cloneable&lt;br/&gt;
  clone&lt;br/&gt;
else if empty Constructor&lt;br/&gt;
  construct and use addAll&lt;br/&gt;
else use defaultValue (ie: HashSet)&lt;/p&gt;</comment>
                            <comment id="12659522" author="bayard" created="Mon, 29 Dec 2008 07:54:34 +0000"  >&lt;p&gt;(Forgot how lame clone is in Java... so that becomes:&lt;/p&gt;

&lt;p&gt;if empty Constructor&lt;br/&gt;
  create empty instance&lt;br/&gt;
else use HashSet&lt;br/&gt;
fill either case with addAll&lt;/p&gt;</comment>
                            <comment id="12660053" author="bayard" created="Wed, 31 Dec 2008 09:40:38 +0000"  >&lt;p&gt;Two tests and the suggested patch attached.&lt;/p&gt;</comment>
                            <comment id="12660692" author="bayard" created="Mon, 5 Jan 2009 09:10:18 +0000"  >&lt;p&gt;svn ci -m &quot;Applying my patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-307&quot; title=&quot;SetUniqueList.subList().contains() method checks against full parent list, not sublist range&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-307&quot;&gt;&lt;del&gt;COLLECTIONS-307&lt;/del&gt;&lt;/a&gt;. Fixes the bug raised by Christian Semrau that SetUniqueList.subList() was not redefining the uniqueness set when creating the sublist. &quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/list/SetUniqueList.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/list/TestSetUniqueList.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 731498.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12396964" name="COLLECTIONS-307.patch" size="3485" author="bayard" created="Wed, 31 Dec 2008 09:40:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Dec 2008 05:10:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18694</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164427</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-304] SetUniqueList set method use corrupts uniqness</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-304</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When set method is used to put element (Strawberry) on list, then it is possible to add the same element (Strawberry) with add method. Also you cannot add element (Lemon) that has been once removed with set method. Reproduction code below:&lt;/p&gt;


&lt;p&gt;List&amp;lt;String&amp;gt; list = new LinkedList&amp;lt;String&amp;gt;();&lt;br/&gt;
SetUniqueList decoratedList = SetUniqueList.decorate(list);&lt;/p&gt;

&lt;p&gt;decoratedList.add(&quot;Apple&quot;);&lt;br/&gt;
decoratedList.add(&quot;Lemon&quot;);&lt;br/&gt;
decoratedList.add(&quot;Orange&quot;);&lt;/p&gt;

&lt;p&gt;System.out.println(decoratedList.toString());&lt;/p&gt;

&lt;p&gt;decoratedList.set(1, &quot;Strawberry&quot;);&lt;/p&gt;

&lt;p&gt;System.out.println(decoratedList.toString());&lt;/p&gt;

&lt;p&gt;decoratedList.add(1, &quot;Strawberry&quot;);&lt;/p&gt;

&lt;p&gt;System.out.println(decoratedList.toString());&lt;/p&gt;

&lt;p&gt;decoratedList.add(1, &quot;Lemon&quot;);&lt;/p&gt;

&lt;p&gt;System.out.println(decoratedList.toString());&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 1.6/Windows/Eclipse Ganymede&lt;/p&gt;</environment>
        <key id="12403741">COLLECTIONS-304</key>
            <summary>SetUniqueList set method use corrupts uniqness</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="raffig">Rafa&#322; Figas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Sep 2008 10:43:47 +0000</created>
                <updated>Sun, 8 Nov 2015 21:27:42 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:38:05 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12644861" author="bjorn" created="Tue, 4 Nov 2008 00:23:28 +0000"  >&lt;p&gt;Here&apos;s a JUnit test reproducing this. Nice catch. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12645148" author="bayard" created="Wed, 5 Nov 2008 03:56:41 +0000"  >&lt;p&gt;Adding a fix for this issue, with a slight tweak on Bjorn&apos;s unit test. &lt;/p&gt;</comment>
                            <comment id="12645246" author="bayard" created="Wed, 5 Nov 2008 15:48:03 +0000"  >&lt;p&gt;svn ci -m &quot;Applying Bjorn Townsend&apos;s unit test and my fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-304&quot; title=&quot;SetUniqueList set method use corrupts uniqness&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-304&quot;&gt;&lt;del&gt;COLLECTIONS-304&lt;/del&gt;&lt;/a&gt; - fixing SetUniqueList so the set method doesn&apos;t let the uniqueness get out of sync&quot;&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/list/SetUniqueList.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/list/TestSetUniqueList.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 711591.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393351" name="COLLECTIONS-304.patch" size="2358" author="bayard" created="Wed, 5 Nov 2008 03:56:41 +0000"/>
                            <attachment id="12393274" name="Commons-304-test.diff" size="1094" author="bjorn" created="Tue, 4 Nov 2008 00:23:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Nov 2008 00:23:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18697</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164429</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-299] ExtendedProperties.convertProperties loses non-String values</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-299</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;A Properties object normally has Strings as its values. But it does partially support non-String-typed values via the raw put and get methods inherited from Hashtable. And other Properties methods are aware that the value might not be a String; see documentation for methods propertyNames() and stringPropertyNames() for example.&lt;/p&gt;

&lt;p&gt;ExtendedProperties.convertProperties does this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Enumeration e = props.propertyNames(); e.hasMoreElements();) {
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s = (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) e.nextElement();
      c.setProperty(s, props.getProperty(s));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Properties.propertyNames() returns the names of all keys in the set, regardless of the associated value&apos;s type. But Properties.getProperty(key) returns null if the value type is not a String. The call to c.setProperty invokes setPropertyInternal, which can pass this null value to Hashtable.put, which then throws a NullPointerException.&lt;/p&gt;

&lt;p&gt;It&apos;s rather puzzling to have a valid (string-key, non-string-value) entry in the Properties object and get a NullPointerException.&lt;/p&gt;

&lt;p&gt;Perhaps the call&lt;br/&gt;
  props.getProperty(s)&lt;br/&gt;
can be changed to&lt;br/&gt;
  props.get(s)&lt;/p&gt;

&lt;p&gt;Alternately, at least documenting that this method does not support non-string values in the input Properties object would be useful.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12398319">COLLECTIONS-299</key>
            <summary>ExtendedProperties.convertProperties loses non-String values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="skitching">Simon Kitching</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Jun 2008 11:13:26 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:10 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:37:57 +0000</resolved>
                                                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12605265" author="sebb@apache.org" created="Mon, 16 Jun 2008 11:46:34 +0000"  >&lt;p&gt;Add code markers to stop reformatting of code section - and conversion of ;&amp;#41; to &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12644858" author="bayard" created="Tue, 4 Nov 2008 00:10:16 +0000"  >&lt;p&gt;Interestingly this mimics the same issue in java.util.Properties. If you pass a value into its Properties(Properties) constructor then any non-String values are lost. I think the javadoc route is probably best here - especially as the getProperty to get change makes tests fail.&lt;/p&gt;</comment>
                            <comment id="12644860" author="bayard" created="Tue, 4 Nov 2008 00:16:00 +0000"  >&lt;p&gt;I added null-protection to stop the NPE.&lt;/p&gt;

&lt;p&gt;svn ci -m &quot;Adding a test for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-299&quot; title=&quot;ExtendedProperties.convertProperties loses non-String values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-299&quot;&gt;&lt;del&gt;COLLECTIONS-299&lt;/del&gt;&lt;/a&gt; and a fix. Fixes by not adding any non-String values as per java.util.Properties; also adding to the javadoc&quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/ExtendedProperties.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestExtendedProperties.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 711140.&lt;/p&gt;</comment>
                            <comment id="13639415" author="tn" created="Tue, 23 Apr 2013 18:57:38 +0000"  >&lt;p&gt;Obsolete fix as class ExtendedProperties has been removed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12445725">COLLECTIONS-351</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Jun 2008 11:46:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18702</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164434</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-294] Fix case-insensitive string handling</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-294</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;For example, the behavior of the &lt;tt&gt;CaseInsensitiveMap&lt;/tt&gt; is currently platform-dependent, please see &lt;a href=&quot;http://www.nabble.com/Re%3A-Common-Bugs-p14931921s177.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Common Bug #3&lt;/a&gt; for details.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12394809">COLLECTIONS-294</key>
            <summary>Fix case-insensitive string handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bentmann">Benjamin Bentmann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Apr 2008 14:31:23 +0000</created>
                <updated>Sat, 7 Nov 2015 21:17:13 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:38:34 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12595862" author="bayard" created="Sat, 10 May 2008 22:46:01 +0000"  >&lt;p&gt;Definitely for the ExtendedProperties, it&apos;s obviously using English as a Locale.&lt;/p&gt;

&lt;p&gt;I&apos;m less convinced by CaseInsensitiveMap. Instead it seems that either:&lt;/p&gt;

&lt;p&gt;a) It should have a Locale parameter to the constructor&lt;br/&gt;
b) It should be rewritten to be a CaseInsensitiveMap &lt;span class=&quot;error&quot;&gt;&amp;#91;ie: depend on equalsIgnoreCase&amp;#93;&lt;/span&gt;, and not a ToLowerCaseMap as it currently is.&lt;/p&gt;</comment>
                            <comment id="12595898" author="bentmann" created="Sun, 11 May 2008 09:30:58 +0000"  >&lt;p&gt;Yes, you&apos;re right, the map thing is trickier than I realized. Attached is a new patch that makes key comparisons behave as &lt;tt&gt;equalsIgnoreCase()&lt;/tt&gt; would do (watch out for the extended unit test that fails when using &lt;tt&gt;String.toLowerCase()&lt;/tt&gt; in &lt;tt&gt;convertKey()&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;A question that pops up is whether &lt;tt&gt;CaseInsensitiveMap&lt;/tt&gt; should have been case-preserving for keys, i.e. store keys in their original case but compare case-insensitively. I mean, there seem to be two different use cases involved here:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;case-insentive key lookup, i.e. &lt;tt&gt;map.get(&quot;key&quot;) == map.get(&quot;KEY&quot;)&lt;/tt&gt; but possibly &lt;tt&gt;map.keySet().contains(&quot;Key&quot;)&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;automatic key normalization to lower/upper case to provide a specific key set view&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12609451" author="bayard" created="Tue, 1 Jul 2008 04:48:57 +0000"  >&lt;p&gt;Note: ExtendedProperties patch applied (r655204). I typo&apos;d the key in the comment so it doesn&apos;t appear here.&lt;/p&gt;</comment>
                            <comment id="12644888" author="bayard" created="Tue, 4 Nov 2008 03:58:49 +0000"  >&lt;p&gt;svn ci -m &quot;Applying Benjamin Bentmann&apos;s second patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-294&quot; title=&quot;Fix case-insensitive string handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-294&quot;&gt;&lt;del&gt;COLLECTIONS-294&lt;/del&gt;&lt;/a&gt;, fixing the locale issue in CaseInsensitiveMap by converting each character individually and not using toLowerCase&quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/map/CaseInsensitiveMap.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/map/TestCaseInsensitiveMap.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 711168.&lt;/p&gt;</comment>
                            <comment id="12673928" author="sebb@apache.org" created="Mon, 16 Feb 2009 16:39:07 +0000"  >&lt;p&gt;Unfortunately, Locale(String) is Java 1.4+ only, and Collections still targets 1.3.&lt;/p&gt;

&lt;p&gt;Replaced with Locale(&quot;tr&quot;,&quot;&quot;,&quot;&quot;) - which is what Java 1.4 does anyway&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=744957&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?rev=744957&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-294&quot; title=&quot;Fix case-insensitive string handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-294&quot;&gt;&lt;del&gt;COLLECTIONS-294&lt;/del&gt;&lt;/a&gt;: Replace Locale(&quot;tr&quot;) with Locale(&quot;tr&quot;,&quot;&quot;,&quot;&quot;) to be Java 1.3 compliant&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12381836" name="COLLECTIONS-294-CaseInsensitiveMap.patch" size="3334" author="bentmann" created="Sun, 11 May 2008 09:30:58 +0000"/>
                            <attachment id="12380945" name="COLLECTIONS-294.patch" size="3147" author="bentmann" created="Fri, 25 Apr 2008 14:31:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 10 May 2008 22:46:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18707</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0si9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-288] Javadoc: incorrect behavior explained for ListUtils.transformedList</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-288</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The contract stated for ListUtils.transformedList is wrong. The list is not transformed &amp;#8211; it decorates the existing list and transforms NEW objects &amp;#8211; EXISTING objects are not transformed. &lt;/p&gt;

&lt;p&gt;Compare this to the javadoc found in MapUtils.transformedMap:&lt;br/&gt;
&quot;This method returns a new map (decorating the specified map) that will transform any new entries added to it. Existing entries in the specified map will not be transformed. &quot;&lt;/p&gt;

&lt;p&gt;That little missing piece of information messed me up. Just replace &quot;map&quot; with &quot;list&quot; and append it to the existing LilstUtils javadoc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12391638">COLLECTIONS-288</key>
            <summary>Javadoc: incorrect behavior explained for ListUtils.transformedList</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pbenedict">Paul Benedict</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Mar 2008 16:34:24 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:22 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:38:25 +0000</resolved>
                                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12579742" author="bayard" created="Tue, 18 Mar 2008 06:10:03 +0000"  >&lt;p&gt;svn ci -m &quot;Stressing that existing objects are not transformed as per Paul&apos;s request in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-288&quot; title=&quot;Javadoc: incorrect behavior explained for ListUtils.transformedList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-288&quot;&gt;&lt;del&gt;COLLECTIONS-288&lt;/del&gt;&lt;/a&gt;&quot; src/java/org/apache/commons/collections/ListUtils.java &lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/ListUtils.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 638227.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12371294">COLLECTIONS-256</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12443858">COLLECTIONS-348</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Mar 2008 06:10:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18712</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0siav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164442</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-284] CollectionUtils.removeAll() calls ListUtils.retainAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-284</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;CollectionUtils.removeAll() calls ListUtils.retainAll().  I believe it should actually be &lt;/p&gt;

&lt;p&gt;public static Collection removeAll(Collection collection, Collection remove) {&lt;br/&gt;
        return ListUtils.removeAll(collection, remove);&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12387501">COLLECTIONS-284</key>
            <summary>CollectionUtils.removeAll() calls ListUtils.retainAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cdeal">Chuck Deal</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jan 2008 21:01:51 +0000</created>
                <updated>Tue, 5 Feb 2008 05:47:52 +0000</updated>
                            <resolved>Tue, 5 Feb 2008 05:47:36 +0000</resolved>
                                    <version>3.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12565650" author="bayard" created="Tue, 5 Feb 2008 05:47:36 +0000"  >&lt;p&gt;Thanks Chuck, this is already fixed in trunk (&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-219&quot; title=&quot;The CollectionUtils.removeAll method calls the ListUtils.retainAll method instead of the ListUtils.removeAll method.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-219&quot;&gt;&lt;del&gt;COLLECTIONS-219&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12347178">COLLECTIONS-219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Feb 2008 05:47:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sibj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164445</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-279] LRUMap: moveToMRU is not invoked for new entry</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-279</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>
&lt;p&gt;	@Test&lt;br/&gt;
	public void testFirst() &lt;/p&gt;
{
		LRUMap map = new LRUMap();

		String key = &quot;key1&quot;;
		String value = &quot;value1&quot;;

		map.put(key, value);
		Assert.assertEquals(map.get(key), value);
		Assert.assertEquals(map.get(map.firstKey()), value);
		
		key = &quot;key2&quot;;
		value = &quot;value2&quot;;
		map.put(key, value);
		// here it fails
		Assert.assertEquals(map.get(map.firstKey()), value);
	}</description>
                <environment></environment>
        <key id="12383383">COLLECTIONS-279</key>
            <summary>LRUMap: moveToMRU is not invoked for new entry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="someone">Andrey Andreev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Nov 2007 07:12:49 +0000</created>
                <updated>Fri, 27 Nov 2015 21:47:12 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:29:02 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Map</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12554728" author="cc_benny" created="Fri, 28 Dec 2007 13:29:59 +0000"  >&lt;p&gt;It seems to me that the implementations of&lt;br/&gt;
AbstractLinkedMap.firstKey and AbstractLinkedMap.lastKey are&lt;br/&gt;
switched.&lt;/p&gt;

&lt;p&gt;AbstractLinkedMap.addEntry adds new entries at header.before, so&lt;br/&gt;
firstKey should look there for the last entry that was added, not&lt;br/&gt;
in header.after.&lt;/p&gt;

&lt;p&gt;When I switch the implementations of firstKey and lastKey,&lt;br/&gt;
AjaxStateManager from the RichFaces project works (see&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://jira.jboss.org/jira/browse/RF-1460&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jira.jboss.org/jira/browse/RF-1460&lt;/a&gt;&amp;gt;).&lt;/p&gt;

&lt;p&gt;Of course I don&apos;t know if any users of firstKey/lastKey use them&lt;br/&gt;
according to the current implementation instead of by the docs.&lt;/p&gt;</comment>
                            <comment id="12555330" author="liujf2k" created="Wed, 2 Jan 2008 15:51:53 +0000"  >&lt;p&gt;The fix of &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-262&quot; title=&quot;probably apidoc error: firstKey() and lastKey() in AbstractLinkedMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-262&quot;&gt;&lt;del&gt;COLLECTIONS-262&lt;/del&gt;&lt;/a&gt; just switches firstKey() and lastKey()&apos;s Java Doc&lt;/p&gt;</comment>
                            <comment id="12579106" author="bayard" created="Sun, 16 Mar 2008 01:15:33 +0000"  >&lt;p&gt;As Jifeng points out - we&apos;re going with the javadoc being in error rather than the implementation. &lt;/p&gt;

&lt;p&gt;getFirstKey returns the first one to be added etc.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12377055">COLLECTIONS-262</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12372293" name="AbstractLinkedMap.java.diff" size="632" author="cc_benny" created="Fri, 28 Dec 2007 13:33:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Dec 2007 13:29:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18721</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sicf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164449</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-278] put() and putAll() don&apos;t update the getKeys() map</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-278</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;If you use the put() or putAll() methods of the ExtendedProperties class, it will  not update the contents of the internal keysAsListed map which in turn will return a different list of keys using the getKeys() method than the keySet() method does.&lt;/p&gt;

&lt;p&gt;The attached patchs fix this behaviour and add test cases. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12382455">COLLECTIONS-278</key>
            <summary>put() and putAll() don&apos;t update the getKeys() map</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="henning">Henning Schmiedehausen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Nov 2007 21:24:36 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:14 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:05:19 +0000</resolved>
                                    <version>3.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12555478" author="bayard" created="Thu, 3 Jan 2008 03:49:18 +0000"  >&lt;p&gt;Henning&apos;s patch had a lot of whitespace diffs, so here&apos;s a version without those changes.&lt;/p&gt;</comment>
                            <comment id="12555481" author="bayard" created="Thu, 3 Jan 2008 04:12:50 +0000"  >&lt;p&gt;Henning&apos;s patch looks good. I&apos;ve added javadoc in one last patch, and I&apos;ve implemented remove(Object);Object as well because it appears to me that this is another area for the same type of bug. &lt;/p&gt;</comment>
                            <comment id="12579100" author="bayard" created="Sat, 15 Mar 2008 23:22:47 +0000"  >&lt;p&gt; svn ci -m &quot;Applying the latest patch from Henning&apos;s report in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-278&quot; title=&quot;put() and putAll() don&amp;#39;t update the getKeys() map&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-278&quot;&gt;&lt;del&gt;COLLECTIONS-278&lt;/del&gt;&lt;/a&gt; that put() and putAll() don&apos;t update the getKeys() map on ExtendedProperties&quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/ExtendedProperties.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestExtendedProperties.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 637489.&lt;/p&gt;</comment>
                            <comment id="13638369" author="tn" created="Mon, 22 Apr 2013 19:47:21 +0000"  >&lt;p&gt;Obsolete fix as the class has been removed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12445725">COLLECTIONS-351</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12372439" name="COLLECTIONS-278.patch" size="8215" author="bayard" created="Thu, 3 Jan 2008 04:12:50 +0000"/>
                            <attachment id="12372437" name="COLLECTIONS-278.patch" size="6781" author="bayard" created="Thu, 3 Jan 2008 03:49:18 +0000"/>
                            <attachment id="12369450" name="putall-test-patch" size="7680" author="henning" created="Tue, 13 Nov 2007 21:25:27 +0000"/>
                            <attachment id="12369449" name="putall.patch" size="11854" author="henning" created="Tue, 13 Nov 2007 21:25:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Jan 2008 03:49:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18722</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sicn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-271] org.apache.commons.collections.ExtendedProperties#combine don&apos;t import string properly</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-271</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When we set property with escaped characters, after combine propertySets we got them unescaped.&lt;/p&gt;

&lt;p&gt;Simple Example&lt;/p&gt;

&lt;p&gt;ExtendedProperties props = new ExtendedProperties();&lt;br/&gt;
props.setProperty(&quot;test&quot;, &quot;\\\\\\\\192.168.1.91\\\\test&quot;);&lt;br/&gt;
props.getProperty(&quot;test&quot;); // =&amp;gt; \\192.168.1.91\test&lt;/p&gt;

&lt;p&gt;ExtendedProperties props2 = new ExtendedProperties();&lt;br/&gt;
props2.combine(props);&lt;br/&gt;
props.getProperty(&quot;test&quot;); // =&amp;gt; \192.168.1.91\test &amp;#8211; Wrong!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12380528">COLLECTIONS-271</key>
            <summary>org.apache.commons.collections.ExtendedProperties#combine don&apos;t import string properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="partizan">Alexander Borovsky</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Oct 2007 12:40:42 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:15 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:56:39 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12535242" author="partizan" created="Tue, 16 Oct 2007 12:47:46 +0000"  >&lt;p&gt;Possible fix attached&lt;/p&gt;</comment>
                            <comment id="12579107" author="bayard" created="Sun, 16 Mar 2008 01:33:22 +0000"  >&lt;p&gt;Bug confirmed - but the fix doesn&apos;t pass the unit test so might need something more.&lt;/p&gt;</comment>
                            <comment id="12579109" author="bayard" created="Sun, 16 Mar 2008 01:37:14 +0000"  >&lt;p&gt;Unit test and fix attached. Needed to make it super.put and not put in the fix.&lt;/p&gt;</comment>
                            <comment id="12579110" author="bayard" created="Sun, 16 Mar 2008 01:38:07 +0000"  >&lt;p&gt;svn ci -m &quot;Applying the patch from Alexander Borovsky for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-271&quot; title=&quot;org.apache.commons.collections.ExtendedProperties#combine don&amp;#39;t import string properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-271&quot;&gt;&lt;del&gt;COLLECTIONS-271&lt;/del&gt;&lt;/a&gt;&quot; src&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/ExtendedProperties.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestExtendedProperties.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 637503.&lt;/p&gt;</comment>
                            <comment id="12628816" author="nbubna" created="Sat, 6 Sep 2008 01:14:31 +0000"  >&lt;p&gt;I think your patch for this breaks getKeys() after a combine() call.  It appears to make combine() not track new keys, which breaks both getKeys() and subset().  Because combine() then subset() is broken, Velocity has been experiencing frustratingly mysterious failures for months now.  For more on the symptoms, see:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://tinyurl.com/5hjxrq&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://tinyurl.com/5hjxrq&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I suspect instead of super.put(), the patch for this should have used clearProperty() followed by addPropertyDirect().  Of course, i haven&apos;t tested that...&lt;/p&gt;</comment>
                            <comment id="12641453" author="nbubna" created="Tue, 21 Oct 2008 17:39:40 +0000"  >&lt;p&gt;here&apos;s a patch that fixes the previous bad patch so that subset() works again.&lt;/p&gt;</comment>
                            <comment id="12641454" author="jwcarman" created="Tue, 21 Oct 2008 17:45:12 +0000"  >&lt;p&gt;Is there a test case that shows that subset() is broken as a result of the previously-applied patch?&lt;/p&gt;</comment>
                            <comment id="12641462" author="nbubna" created="Tue, 21 Oct 2008 18:02:39 +0000"  >&lt;p&gt;Yep.  That&apos;s the first part of the patch i just attached.&lt;/p&gt;</comment>
                            <comment id="12644838" author="bayard" created="Mon, 3 Nov 2008 22:41:28 +0000"  >&lt;p&gt;svn ci -m &quot;Applying Nathan Bubna&apos;s patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-271&quot; title=&quot;org.apache.commons.collections.ExtendedProperties#combine don&amp;#39;t import string properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-271&quot;&gt;&lt;del&gt;COLLECTIONS-271&lt;/del&gt;&lt;/a&gt; to fix the bug introduced in the last patch where getKeys() breaks after a combine() or subset() call. &quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/ExtendedProperties.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestExtendedProperties.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 710200.&lt;/p&gt;</comment>
                            <comment id="13638368" author="tn" created="Mon, 22 Apr 2013 19:45:05 +0000"  >&lt;p&gt;Obsolete fix as the class has been removed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12445725">COLLECTIONS-351</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12392590" name="COLLECTIONS-271.patch" size="1580" author="nbubna" created="Tue, 21 Oct 2008 17:39:39 +0000"/>
                            <attachment id="12377984" name="COLLECTIONS-271.patch" size="1463" author="bayard" created="Sun, 16 Mar 2008 01:37:14 +0000"/>
                            <attachment id="12367814" name="fix.patch" size="730" author="partizan" created="Tue, 16 Oct 2007 12:47:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 16 Mar 2008 01:33:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18729</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sidr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164455</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-266] Issue with MultiKey when serialized/deserialized via RMI</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-266</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;This is because the hash code of MultiKey is calculated only once. &lt;/p&gt;

&lt;p&gt;So if the MultiKey is deserialized in an other jvm, and if one at least of the subkeys defines its hash code with System.identityHashCode() (for example all the enums does), then the hash code of the MultiKey is no longer valid, and you can&apos;t retreive the key in your Map.&lt;/p&gt;

&lt;p&gt;I fixed it by making the cached hash code field transient, and by recalculating the hash code during deserialization. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12378004">COLLECTIONS-266</key>
            <summary>Issue with MultiKey when serialized/deserialized via RMI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jburet">Julien Buret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Sep 2007 21:02:35 +0000</created>
                <updated>Sat, 7 Nov 2015 20:54:12 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:57:14 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>KeyValue</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12526604" author="jburet" created="Tue, 11 Sep 2007 21:04:39 +0000"  >&lt;p&gt;Here is the updated source file.&lt;br/&gt;
Hope this help.&lt;/p&gt;</comment>
                            <comment id="12526860" author="bayard" created="Wed, 12 Sep 2007 17:21:09 +0000"  >&lt;p&gt;Julien&apos;s fix as a patch.&lt;/p&gt;</comment>
                            <comment id="12526862" author="bayard" created="Wed, 12 Sep 2007 17:24:02 +0000"  >&lt;p&gt;The patch seems good to me. Need to make a unit test and then apply.&lt;/p&gt;</comment>
                            <comment id="12526945" author="bayard" created="Wed, 12 Sep 2007 23:44:13 +0000"  >&lt;p&gt;While creating the test I realized that the use case that found this problem seems quite rare.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;MultiKey goes into Map.&lt;/li&gt;
	&lt;li&gt;Map gets sent through serialize/deserialize.&lt;/li&gt;
	&lt;li&gt;We have a new map, with a new multikey inside, with a new object inside that, and the multikey has based its hashCode on the old address of the object and not the new one.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If you dig that object out of the map, and then use it to try and get itself back out of the map; then you&apos;ve got a problem. So definitely a bug of sorts.&lt;/p&gt;

&lt;p&gt;But how did you get access to the object in the first place? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;In my unit test, I transfer the Map, then have to get the key back out of the map to then use in a get request. ie:&lt;/p&gt;

&lt;p&gt;        MultiKey mk2 = (MultiKey) map2.keySet().iterator().next();&lt;br/&gt;
        assertEquals(TWO, map2.get(mk2));&lt;/p&gt;

&lt;p&gt;I find that the test passes for both the old code and your new code. Any idea what I&apos;m doing differently?&lt;/p&gt;</comment>
                            <comment id="12526946" author="bayard" created="Wed, 12 Sep 2007 23:44:57 +0000"  >&lt;p&gt;Attaching the unit test.&lt;/p&gt;</comment>
                            <comment id="12527009" author="jburet" created="Thu, 13 Sep 2007 07:56:21 +0000"  >&lt;p&gt;I have updated the test and now it fails before the patch and is successful after.&lt;/p&gt;

&lt;p&gt;In the test, the hash code of KEY_266 depends of the current (simulated) JVM (like System.identityHashCode() ).  &lt;/p&gt;

&lt;p&gt;HTH&lt;/p&gt;</comment>
                            <comment id="12527307" author="bayard" created="Thu, 13 Sep 2007 23:15:35 +0000"  >&lt;p&gt;Thanks Julien.&lt;/p&gt;

&lt;p&gt;Digging into it, I was a bit confused by the isJVM1 flag as it makes both the deserialized object and the TEST_266 object have the same hashCode. Then I realized that&apos;s probably how enums work, so fits your use case above.&lt;/p&gt;

&lt;p&gt;I think this is a special case of a bigger and simpler unit test that uses the natural hashCode of the object (ie: same as System.identityHashCode). The current patch fails for that unit test. I&apos;ll attach the test for your thoughts.&lt;/p&gt;</comment>
                            <comment id="12527365" author="joehni" created="Fri, 14 Sep 2007 06:14:09 +0000"  >&lt;p&gt;IMHO the key simply violates the contract. Extract from Javadoc to Object.hashCode:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If two objects are equal according to the equals(Object)  method, then calling the hashCode method on each of the two objects must produce the same integer result&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It also states:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Whenever it is invoked on the same object more than once during an execution of a Java application, the hashCode method must consistently return the same integer, provided no information used in equals comparisons on the object is modified. This integer need not remain consistent from one execution of an application to another execution of the same application.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Without testing it, but if you use this key not as part of a MultiKey, but of a HashMap directly, you might get the same results.&lt;/p&gt;</comment>
                            <comment id="12527381" author="jburet" created="Fri, 14 Sep 2007 07:20:45 +0000"  >&lt;p&gt;For Joerg: Here is the code of equals() and hashCode() methods of class Enum in the sun 1.5 jvm:&lt;/p&gt;


&lt;p&gt;    public final boolean equals(Object other) &lt;/p&gt;
{ 
        return this==other;
    }

&lt;p&gt;    public final int hashCode() &lt;/p&gt;
{
        return System.identityHashCode(this);
    }

&lt;p&gt;I think (and I hope &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ) that the class Enum does not violate the hashCode contract - but you can see that the same enum will not have the same hashCode in two different jvms. The conclusion is : never serialize the hashCode (at least for a  modular class like MultiKey).&lt;/p&gt;

&lt;p&gt; And the HashMap will work fine in this case, because in its writeObject() and readObject() methods, the hashCode of each key is not serialized/deserialized: only the key, the value and the size of the map are serialized: It works, I have tested it.&lt;/p&gt;

&lt;p&gt;Sorry for the multiple edits, but what I would like is to underline this sentence of the hashCode contract :  &quot;This integer need not remain consistent from one execution of an application to another execution of the same application.&quot;&lt;/p&gt;
</comment>
                            <comment id="12527413" author="joehni" created="Fri, 14 Sep 2007 08:51:39 +0000"  >&lt;p&gt;Well, this problem with Enums has a history:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6421053&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6421053&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6373406&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6373406&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, in the end you&apos;re right and the hashCode should not have been stored in the MultiKey in this way. We might solve this by adding a readResolve method:&lt;/p&gt;

&lt;p&gt;  private Object readResolve() &lt;/p&gt;
{
      return new MultiKey(keys, false);
  }

&lt;p&gt;that way we create a new MultiKey with the correct hashCode. Your solution with the transient member will break the serialization compatibility, since you changed the binary layout. Therefore the hashCode member &lt;b&gt;must&lt;/b&gt; be serialized - otherwise you have to change also the serialVersionUID. But with a private calculateHashCode method and setting the hashCode member not to final, we can implement readResolve different:&lt;/p&gt;

&lt;p&gt;  private Object readResolve() &lt;/p&gt;
{
      calculateHashCode();
      return this;
  }

&lt;p&gt;But our clirr report may still choke about the final.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;J&#246;rg&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12527429" author="jburet" created="Fri, 14 Sep 2007 09:49:36 +0000"  >&lt;p&gt;If the final modifier is a problem, an other solution could be to add a transient field &quot;hashCode2&quot; and no longer use the old field &quot;hashCode &quot; in the class (just keep it for compatibility). &lt;/p&gt;

&lt;p&gt;There is no mention of the final keyword in the serialization spec about compatible or incompatible changes:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://java.sun.com/javase/6/docs/platform/serialization/spec/version.html#5172&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/javase/6/docs/platform/serialization/spec/version.html#5172&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="12527432" author="joehni" created="Fri, 14 Sep 2007 09:57:16 +0000"  >&lt;p&gt;Ah, well, the &quot;final&quot; modifier was meant as problem for binary compatibility itself, not for binary serialization compatibility &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12527440" author="jburet" created="Fri, 14 Sep 2007 10:12:51 +0000"  >&lt;p&gt;Ah ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Well then it should be ok: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://java.sun.com/docs/books/jls/second_edition/html/binaryComp.doc.html#45154&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/docs/books/jls/second_edition/html/binaryComp.doc.html#45154&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12527984" author="scolebourne" created="Mon, 17 Sep 2007 08:30:42 +0000"  >&lt;p&gt;Serialization is actually quite clever. You can change a field to transient, and keep the same serialVersionUID without a problem IIRC. And in this case, it doesn&apos;t matter if the serialVersionUID is changed, as the current code is broken.&lt;/p&gt;</comment>
                            <comment id="12528508" author="bayard" created="Tue, 18 Sep 2007 18:56:00 +0000"  >&lt;p&gt;So... summarizing:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;We want it to remain broken for normal natural hashCodes, as not keeping those in line with the spec is broken.&lt;/li&gt;
	&lt;li&gt;We want to fix it for enums though, as they are special - and Julien&apos;s test case is good there because it models the specialness with the isJVM1 flag.&lt;/li&gt;
	&lt;li&gt;Use Julien&apos;s fix because the move to transient doesn&apos;t break compat.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Stephen/Joerg???&lt;/p&gt;</comment>
                            <comment id="12528687" author="joehni" created="Wed, 19 Sep 2007 08:10:05 +0000"  >&lt;p&gt;Patch to improve test case by simulating Enum behaviour.&lt;/p&gt;</comment>
                            <comment id="12528688" author="joehni" created="Wed, 19 Sep 2007 08:21:51 +0000"  >&lt;p&gt;1/ You cannot fix natural hash codes in general. It works for Enums since they use always the same instance in the same VM.&lt;br/&gt;
2/ I&apos;ve added a test case that does something similar ... I missed Julian&apos;s TC, but yes, that test would be sufficient also&lt;br/&gt;
3/ I had complaints against adding the &quot;transient&quot;. I can run the TestAllPackages suite though and I assume (although I did not find where) that it also contains compatibility tests for serialization, since there are such objects in the data/test directory. This would prove Stephen&apos;s comment right that Java serialization can deal with the situation  - at least in one direction. But I doubt it will work in the other direction i.e. an old version of CC can read such a serialized object. Therefore I&apos;d simply remove the final. And IMHO it matters if the serialVersionUID changes, since the current code is only broken for a special use case &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12596312" author="bayard" created="Tue, 13 May 2008 07:22:52 +0000"  >&lt;p&gt;Joerg - do you remember enough of this issue to put together a patch for your alternative fix?&lt;/p&gt;</comment>
                            <comment id="12596353" author="joehni" created="Tue, 13 May 2008 11:01:54 +0000"  >&lt;p&gt;I&apos;ve added a new patch that combines all changes for the main source and the test case.&lt;/p&gt;</comment>
                            <comment id="12601026" author="bayard" created="Fri, 30 May 2008 06:24:13 +0000"  >&lt;p&gt; svn ci -m &quot;Applying Joerg&apos;s final patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-266&quot; title=&quot;Issue with MultiKey when serialized/deserialized via RMI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-266&quot;&gt;&lt;del&gt;COLLECTIONS-266&lt;/del&gt;&lt;/a&gt;, including the unit test that shows the problem and fixes the problem by making the hashcode transient, and moving the hashcode implementation such that it can be called from the deserialization as well as the hashcode method&quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/keyvalue/MultiKey.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/keyvalue/TestMultiKey.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 661577.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12861500">COLLECTIONS-576</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12381946" name="CC-266-final.patch" size="4495" author="joehni" created="Tue, 13 May 2008 11:01:54 +0000"/>
                            <attachment id="12365649" name="COLLECTIONS-266.patch" size="1910" author="bayard" created="Wed, 12 Sep 2007 17:21:09 +0000"/>
                            <attachment id="12365597" name="MultiKey.java" size="8952" author="jburet" created="Tue, 11 Sep 2007 21:04:39 +0000"/>
                            <attachment id="12365781" name="TestCollections266.java" size="2507" author="bayard" created="Thu, 13 Sep 2007 23:16:00 +0000"/>
                            <attachment id="12365700" name="TestCollections266.java" size="2842" author="jburet" created="Thu, 13 Sep 2007 07:56:21 +0000"/>
                            <attachment id="12365680" name="TestCollections266.java" size="2125" author="bayard" created="Wed, 12 Sep 2007 23:44:57 +0000"/>
                            <attachment id="12366160" name="collections-testcase-266.diff" size="2686" author="joehni" created="Wed, 19 Sep 2007 08:10:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Sep 2007 17:21:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18734</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sien:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-265] TreeBag allows uncomparable item to be added, breaking toString</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-265</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The following code throws an exception not when the Object is added, but when toString is called:&lt;/p&gt;

&lt;p&gt;		TreeBag bag = new TreeBag();&lt;br/&gt;
		bag.add(new Object());&lt;br/&gt;
		bag.toString();&lt;/p&gt;

&lt;p&gt;Trace:&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastException: java.lang.Object&lt;br/&gt;
	at java.util.TreeMap.compare(TreeMap.java:1093)&lt;br/&gt;
	at java.util.TreeMap.getEntry(TreeMap.java:347)&lt;br/&gt;
	at java.util.TreeMap.get(TreeMap.java:265)&lt;br/&gt;
	at org.apache.commons.collections.bag.AbstractMapBag.getCount(AbstractMapBag.java:116)&lt;br/&gt;
	at org.apache.commons.collections.bag.AbstractMapBag.toString(AbstractMapBag.java:581)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;In a client program, toString should never throw an exception--it makes debugging much harder, for one thing.  I believe that TreeBag should defend against the addition of uncomparable objects, so that toString will never throw an exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12377915">COLLECTIONS-265</key>
            <summary>TreeBag allows uncomparable item to be added, breaking toString</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dsaff">David Saff</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Sep 2007 19:38:09 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:37 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:04:25 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Bag</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12526455" author="bayard" created="Tue, 11 Sep 2007 13:35:34 +0000"  >&lt;p&gt;Maybe the solution is to change the toString so it doesn&apos;t try to get the count of the object if not comparable.&lt;/p&gt;

&lt;p&gt;How would that be?&lt;/p&gt;

&lt;p&gt;Could just be &quot;Not a Comparable:java.lang.Object@47b480&quot; or something.&lt;/p&gt;</comment>
                            <comment id="12526543" author="dsaff" created="Tue, 11 Sep 2007 18:09:44 +0000"  >&lt;p&gt;It would prevent the exception, but I can think of two other possibilities that seem more orthogonal to existing functionality:&lt;/p&gt;

&lt;p&gt;1) A java.util.TreeSet will hold a single uncomparable element, and treat it the same as a single comparable element, until a second element is added.  TreeBag could do the same.  &lt;br/&gt;
2) Or, TreeBag could gripe on add, just like both TreeBag and TreeSet do on the addition of a second incomparable object:&lt;/p&gt;

&lt;p&gt;		TreeBag bag = new TreeBag();&lt;br/&gt;
		Object object = new Object();&lt;br/&gt;
		bag.add(object);&lt;br/&gt;
		bag.add(object);  // exception thrown here&lt;/p&gt;
</comment>
                            <comment id="12528607" author="bayard" created="Tue, 18 Sep 2007 23:19:56 +0000"  >&lt;p&gt;Sorry for the delay David.&lt;/p&gt;

&lt;p&gt;For 2) doesn&apos;t seem like it would stop the exception - toString dies when one object is added, not two?&lt;/p&gt;

&lt;p&gt;For 1), the idea is to have a TreeMap with the comparable data, and a single Object with the uncomparable? Then all methods would need to include the uncomparable object with the comparable when returning? &lt;/p&gt;</comment>
                            <comment id="12528762" author="dsaff" created="Wed, 19 Sep 2007 13:32:30 +0000"  >&lt;p&gt;I prefer #2, but stated it poorly.  I would prefer if the first add of an uncomparable Object raised an exception.  The example code above is the current, somewhat odd behavior: add accepts the object the first time, but rejects it the second.  I think it should reject it the first time for consistency.&lt;/p&gt;

&lt;p&gt;I agree that #1 is odd.  It is the de facto behavior of java.util.TreeSet: that&apos;s not terribly important to me, but if it is to the maintainers, TreeBag could follow the example.&lt;/p&gt;</comment>
                            <comment id="12529173" author="scolebourne" created="Thu, 20 Sep 2007 17:59:03 +0000"  >&lt;p&gt;I would prefer an &quot;instanceof Comparable&quot; check on each add().&lt;/p&gt;</comment>
                            <comment id="12557059" author="hdiwan" created="Tue, 8 Jan 2008 22:41:07 +0000"  >&lt;p&gt;adds the add method with the following semantics:&lt;/p&gt;

&lt;p&gt;public boolean add(Object o) {&lt;br/&gt;
   if (o instanceof Comparable) &lt;/p&gt;
{
      return super.add(o);
  }
&lt;p&gt;  else return false;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;can this be committed asap as well?&lt;/p&gt;</comment>
                            <comment id="12579114" author="bayard" created="Sun, 16 Mar 2008 02:07:11 +0000"  >&lt;p&gt;Returning false because the object was not comparable is not the contract agreed on in the javadoc: &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;@return &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt; if the object was not already in the &amp;lt;code&amp;gt;uniqueSet&amp;lt;/code&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Stephen - were you implying an Exception be thrown? ie) TreeBag will not allow any class that is not Comparable?&lt;/p&gt;</comment>
                            <comment id="12579182" author="scolebourne" created="Sun, 16 Mar 2008 10:38:57 +0000"  >&lt;p&gt;Yes, an exception on add() makes most sense. However, if there is a Comparator then the instanceof check should not happen.&lt;/p&gt;</comment>
                            <comment id="12579293" author="bayard" created="Mon, 17 Mar 2008 04:06:21 +0000"  >&lt;p&gt;Attaching a test/patch for comments.&lt;/p&gt;

&lt;p&gt;Throws an IllegalArgumentException if comparator() returns null and the object is not Comparable.&lt;/p&gt;</comment>
                            <comment id="12582135" author="bayard" created="Wed, 26 Mar 2008 06:07:20 +0000"  >&lt;p&gt;svn ci -m &quot;Applying my patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-265&quot; title=&quot;TreeBag allows uncomparable item to be added, breaking toString&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-265&quot;&gt;&lt;del&gt;COLLECTIONS-265&lt;/del&gt;&lt;/a&gt;. TreeBag no longer accepts non-Comparable classes when it naturally ordered (ie: no comparator has been set)&quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/TreeBag.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/bag/TreeBag.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/TestTreeBag.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/bag/TestTreeBag.java&lt;br/&gt;
Transmitting file data ....&lt;br/&gt;
Committed revision 641166.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12378017" name="COLLECTIONS-265.patch" size="3166" author="bayard" created="Mon, 17 Mar 2008 04:06:21 +0000"/>
                            <attachment id="12372744" name="TreeBag.pat" size="610" author="hdiwan" created="Tue, 8 Jan 2008 22:41:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Sep 2007 13:35:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0siev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164460</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-264] FastTreeMap forgets the comparator</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-264</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In line 359 and 582 of the current 3.2 release you should replace&lt;br/&gt;
                map = new TreeMap()&lt;br/&gt;
with&lt;br/&gt;
                map = new TreeMap(map.comparator());&lt;/p&gt;

&lt;p&gt;Otherwise the underlaying TreeMap looses ist comparator.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12377171">COLLECTIONS-264</key>
            <summary>FastTreeMap forgets the comparator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hergaty">Thomas Louis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Aug 2007 16:24:29 +0000</created>
                <updated>Thu, 28 Feb 2013 19:31:58 +0000</updated>
                            <resolved>Fri, 31 Aug 2007 09:39:59 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12524045" author="bayard" created="Fri, 31 Aug 2007 09:39:59 +0000"  >&lt;p&gt;svn ci -m &quot;Applying suggested fix from Thomas Louis in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-264&quot; title=&quot;FastTreeMap forgets the comparator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-264&quot;&gt;&lt;del&gt;COLLECTIONS-264&lt;/del&gt;&lt;/a&gt; - the clear() and CollectionView.clear() methods were losing the TreeMap&apos;s comparator&quot; src/&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/FastTreeMap.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 571412.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 31 Aug 2007 09:39:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sif3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164461</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-262] probably apidoc error: firstKey() and lastKey() in AbstractLinkedMap</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-262</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In the apidoc or source of org.apache.commons.collections.map.AbstractLinkedMap.firstKey(), it is said that this method &quot;Gets the first key in the map, which is the most recently inserted.&quot;, which is exactly the actual behavior of lastKey(), and vice versa. &lt;/p&gt;

&lt;p&gt;So I think there is a typo with this class&apos; javadoc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12377055">COLLECTIONS-262</key>
            <summary>probably apidoc error: firstKey() and lastKey() in AbstractLinkedMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="immars">Lisen Mu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Aug 2007 04:10:32 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:54 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:28:11 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12555261" author="bayard" created="Wed, 2 Jan 2008 07:23:52 +0000"  >&lt;p&gt;I agree (even wrote a quick test to make sure). I&apos;ve committed the change to the javadoc.&lt;/p&gt;

&lt;p&gt;svn ci -m &quot;Updating javadoc as per &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-262&quot; title=&quot;probably apidoc error: firstKey() and lastKey() in AbstractLinkedMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-262&quot;&gt;&lt;del&gt;COLLECTIONS-262&lt;/del&gt;&lt;/a&gt; - the firstKey and lastKey javadoc methods were back to front for parts of their description&quot; src/java/org/apache/commons/collections/map/AbstractLinkedMap.java&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/map/AbstractLinkedMap.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 608030.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12383383">COLLECTIONS-279</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12457133">COLLECTIONS-353</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Jan 2008 07:23:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sifb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164462</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-261] Flat3Map.remove() does not return the correct value when size &lt;= 3</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-261</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;        final Flat3Map m = new Flat3Map();&lt;br/&gt;
        m.put( new Integer( 1 ), new Integer( 1 ) );&lt;br/&gt;
        m.put( new Integer( 0 ), new Integer( 0 ) );&lt;br/&gt;
        System.out.println( m.remove( new Integer( 1 ) ) );&lt;/p&gt;

&lt;p&gt;The above code will print &quot;0&quot; when it should print &quot;1&quot;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP, SUN JDK 1.5.0_06&lt;/p&gt;</environment>
        <key id="12376338">COLLECTIONS-261</key>
            <summary>Flat3Map.remove() does not return the correct value when size &lt;= 3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="os111">ori</reporter>
                        <labels>
                    </labels>
                <created>Sat, 18 Aug 2007 14:12:49 +0000</created>
                <updated>Sun, 8 Nov 2015 21:04:49 +0000</updated>
                            <resolved>Mon, 20 Aug 2007 14:11:54 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12521095" author="bayard" created="Mon, 20 Aug 2007 14:11:11 +0000"  >&lt;p&gt;Attaching unit test and fix. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12364150" name="COLLECTIONS-261.patch" size="3615" author="bayard" created="Mon, 20 Aug 2007 14:11:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Aug 2007 14:11:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18739</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sifj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-257] CollectionUtils.removeAll() calls ListUtils.retainAll()</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-257</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns a collection containing all the elements in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;that are also in &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt;. The cardinality of an element &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in the returned collection is the same as the cardinality of &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; unless &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt; does not contain &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;, in which&lt;/li&gt;
	&lt;li&gt;case the cardinality is zero. This method is useful if you do not wish to modify&lt;/li&gt;
	&lt;li&gt;the collection &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt; and thus cannot call &amp;lt;code&amp;gt;c.retainAll(retain);&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param collection  the collection whose contents are the target of the #retailAll operation&lt;/li&gt;
	&lt;li&gt;@param retain  the collection containing the elements to be retained in the returned collection&lt;/li&gt;
	&lt;li&gt;@return a &amp;lt;code&amp;gt;Collection&amp;lt;/code&amp;gt; containing all the elements of &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;that occur at least once in &amp;lt;code&amp;gt;retain&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if either parameter is null&lt;/li&gt;
	&lt;li&gt;@since Commons Collections 3.2&lt;br/&gt;
     */&lt;br/&gt;
    public static Collection retainAll(Collection collection, Collection retain) 
{
        return ListUtils.retainAll(collection, retain);
    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removes the elements in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; from &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;. That is, this&lt;/li&gt;
	&lt;li&gt;method returns a collection containing all the elements in &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;that are not in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;. The cardinality of an element &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in the returned collection is the same as the cardinality of &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;in &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; unless &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt; contains &amp;lt;code&amp;gt;e&amp;lt;/code&amp;gt;, in which&lt;/li&gt;
	&lt;li&gt;case the cardinality is zero. This method is useful if you do not wish to modify&lt;/li&gt;
	&lt;li&gt;the collection &amp;lt;code&amp;gt;c&amp;lt;/code&amp;gt; and thus cannot call &amp;lt;code&amp;gt;collection.removeAll(remove);&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param collection  the collection from which items are removed (in the returned collection)&lt;/li&gt;
	&lt;li&gt;@param remove  the items to be removed from the returned &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;@return a &amp;lt;code&amp;gt;Collection&amp;lt;/code&amp;gt; containing all the elements of &amp;lt;code&amp;gt;collection&amp;lt;/code&amp;gt; except&lt;/li&gt;
	&lt;li&gt;any elements that also occur in &amp;lt;code&amp;gt;remove&amp;lt;/code&amp;gt;.&lt;/li&gt;
	&lt;li&gt;@throws NullPointerException if either parameter is null&lt;/li&gt;
	&lt;li&gt;@since Commons Collections 3.2&lt;br/&gt;
     */&lt;br/&gt;
    public static Collection removeAll(Collection collection, Collection remove) 
{
        return ListUtils.retainAll(collection, remove);
    }&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;I guess the later method shoud be:&lt;br/&gt;
    public static Collection removeAll(Collection collection, Collection remove) &lt;/p&gt;
{
        return ListUtils.removeAll(collection, remove);
    }</description>
                <environment></environment>
        <key id="12372326">COLLECTIONS-257</key>
            <summary>CollectionUtils.removeAll() calls ListUtils.retainAll()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sjk">Sami Kallio</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jun 2007 10:53:01 +0000</created>
                <updated>Sat, 27 Apr 2013 21:26:13 +0000</updated>
                            <resolved>Tue, 26 Jun 2007 15:40:18 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12508220" author="bayard" created="Tue, 26 Jun 2007 15:40:18 +0000"  >&lt;p&gt;Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-219&quot; title=&quot;The CollectionUtils.removeAll method calls the ListUtils.retainAll method instead of the ListUtils.removeAll method.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-219&quot;&gt;&lt;del&gt;COLLECTIONS-219&lt;/del&gt;&lt;/a&gt;, which has been fixed in trunk. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Jun 2007 15:40:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18743</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sig7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-256] ListUtils.transformedList(list, transformer) doesn&apos;t transform</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-256</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The static method ListUtils.transformedList(List list, Transformer trans) does not apply the transformer before returning the list.  I&apos;ve traced into the code and it falls all the way through to the TransformedCollection constructor which has documentation that states that items existing in the list are NOT transformed.  This yields bizarre unexpected behavior for this method.&lt;/p&gt;

&lt;p&gt;Conversely, the ListUtils.predicatedList(List list, Predicate pred) DOES apply the predicate.  These methods are very similar but behave inconsistently.&lt;/p&gt;

&lt;p&gt;If the transformer is not applied to the list, the method&apos;s usefulness is somewhat limited and causes the user to create an extra unwanted list in some circumstances:&lt;/p&gt;

&lt;p&gt;// To transform an existing list&lt;br/&gt;
List myList = ... some list to be transformed ...&lt;br/&gt;
List transformed = ListUtils.transformedList(new ArrayList(), myTransformer);&lt;br/&gt;
transformed.addAll(myList);&lt;/p&gt;

&lt;p&gt;I would expect a much shorter implementation such as:&lt;/p&gt;

&lt;p&gt;List transformed = ListUtils.transformedList(myList, myTransformer)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.5&lt;/p&gt;</environment>
        <key id="12371294">COLLECTIONS-256</key>
            <summary>ListUtils.transformedList(list, transformer) doesn&apos;t transform</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cardsharp">Kurtis Williams</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jun 2007 22:43:11 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:49 +0000</updated>
                            <resolved>Sat, 27 Apr 2013 21:42:26 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12519856" author="bayard" created="Wed, 15 Aug 2007 05:22:30 +0000"  >&lt;p&gt;Given that javadoc states:&lt;/p&gt;

&lt;p&gt;&quot;Returns a transformed list backed by the given list.&quot;&lt;/p&gt;

&lt;p&gt;Then this seems like a definite bug that needs fixing.&lt;/p&gt;</comment>
                            <comment id="12520542" author="scolebourne" created="Fri, 17 Aug 2007 12:47:58 +0000"  >&lt;p&gt;I think we added another similar factory method to get around this issue IIRC.&lt;/p&gt;</comment>
                            <comment id="12525061" author="bayard" created="Wed, 5 Sep 2007 10:43:47 +0000"  >&lt;p&gt;Yep - MapUtils.transform has the same bug and it was solved by adding TransformedMap.decorateTransform(..).&lt;/p&gt;

&lt;p&gt;I&apos;ll go ahead and repeat that pattern for List, Collection, Set and Bag. &lt;/p&gt;</comment>
                            <comment id="12525091" author="bayard" created="Wed, 5 Sep 2007 13:37:51 +0000"  >&lt;p&gt;Patch with tests and new methods for:&lt;/p&gt;

&lt;p&gt;Buffer&lt;br/&gt;
Set&lt;br/&gt;
SortedSet&lt;br/&gt;
SortedBag&lt;br/&gt;
Bag&lt;br/&gt;
Collection&lt;br/&gt;
List&lt;/p&gt;</comment>
                            <comment id="12525092" author="bayard" created="Wed, 5 Sep 2007 13:38:49 +0000"  >&lt;p&gt;Patch applied.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12391638">COLLECTIONS-288</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12365172" name="COLLECTIONS-256.patch" size="29686" author="bayard" created="Wed, 5 Sep 2007 13:37:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Aug 2007 05:22:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18744</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sigf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-255] Unused variable in TreeBidiMap.java</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-255</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Twice in TreeBidiMap there is an entrySet variable that is not used. Rather the entrySet() method returns a new TreeView every time.&lt;/p&gt;

&lt;p&gt;We should either:&lt;/p&gt;

&lt;p&gt;a) Delete the variable.&lt;br/&gt;
b) Use the variable and always return the same TreeView.&lt;/p&gt;

&lt;p&gt;I&apos;m thinking a).&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Found via http://opensource.fortifysoftware.com/ &amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12371193">COLLECTIONS-255</key>
            <summary>Unused variable in TreeBidiMap.java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bayard">Henri Yandell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jun 2007 00:32:35 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:53 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 19:55:59 +0000</resolved>
                                    <version>Nightly Builds</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>BidiMap</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12502770" author="scolebourne" created="Fri, 8 Jun 2007 12:36:53 +0000"  >&lt;p&gt;As a general rule, collections implementations use (b).&lt;/p&gt;</comment>
                            <comment id="12526978" author="bayard" created="Thu, 13 Sep 2007 03:45:48 +0000"  >&lt;p&gt;svn ci -m &quot;Removing the unused variable as mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-255&quot; title=&quot;Unused variable in TreeBidiMap.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-255&quot;&gt;&lt;del&gt;COLLECTIONS-255&lt;/del&gt;&lt;/a&gt; by caching the TreeView object&quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/bidimap/TreeBidiMap.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 575154.&lt;/p&gt;</comment>
                            <comment id="12755371" author="bayard" created="Tue, 15 Sep 2009 06:01:00 +0000"  >&lt;p&gt;During the merge of the generics branch, I had to revert this fix. It needs to be refactored/reapplied in the new generics modified code.&lt;/p&gt;</comment>
                            <comment id="12795175" author="mbenson" created="Tue, 29 Dec 2009 22:36:58 +0000"  >&lt;p&gt;! /Users/mbenson/oss/asf/commons/trunks-proper/collections&amp;gt; svn commit -m &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-255&quot; title=&quot;Unused variable in TreeBidiMap.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-255&quot;&gt;&lt;del&gt;COLLECTIONS-255&lt;/del&gt;&lt;/a&gt; re-address unused cache variable in TreeBidiMap&quot; src/java/org/apache/commons/collections/bidimap/TreeBidiMap.java &lt;br/&gt;
Sending        src/java/org/apache/commons/collections/bidimap/TreeBidiMap.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 894500.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12365681" name="COLLECTIONS-255.patch" size="853" author="bayard" created="Thu, 13 Sep 2007 00:07:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 8 Jun 2007 12:36:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18745</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sign:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164468</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-250] containsKey on MultiHashMap seems incorrect</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-250</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>
&lt;p&gt;MultiHashMap m = new MultiHashMap();&lt;br/&gt;
m.putAll(&quot;key&quot;, Collections.EMPTY_LIST);&lt;br/&gt;
System.out.println(m.containsKey(&quot;key&quot;)) &lt;/p&gt;

&lt;p&gt;It says false, when it should have printed true. &lt;/p&gt;

&lt;p&gt;The problem is that the code in MultiHashMap and even MultiValueMap has in putAll():&lt;/p&gt;

&lt;p&gt;if (values == null || values.size() == 0) &lt;br/&gt;
{&lt;br/&gt;
            return false;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;This means that they key is never being entered into the Map. This is causing a huge problem because the behaviour has changed.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12368186">COLLECTIONS-250</key>
            <summary>containsKey on MultiHashMap seems incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="jwcarman">James Carman</assignee>
                                    <reporter username="ngd">Nikhil G. Daddikar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Apr 2007 10:24:44 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:06 +0000</updated>
                            <resolved>Mon, 30 Apr 2007 10:56:30 +0000</resolved>
                                    <version>3.1</version>
                    <version>3.2</version>
                                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12492379" author="jwcarman" created="Fri, 27 Apr 2007 19:39:51 +0000"  >&lt;p&gt;The behavior has changed from what?  The Map API?&lt;/p&gt;</comment>
                            <comment id="12492595" author="bayard" created="Sun, 29 Apr 2007 20:10:55 +0000"  >&lt;p&gt;It seems very correct to me - putAll(key, EMPTY_LIST) is a no-op. I&apos;m not sure what behaviour has changed here - these methods haven&apos;t changed since they were added in r131607.&lt;/p&gt;</comment>
                            <comment id="12492649" author="ngd" created="Mon, 30 Apr 2007 10:36:38 +0000"  >&lt;p&gt;It&apos;s not changed, my mistake. &lt;/p&gt;

&lt;p&gt;Just as in a regular map that containsKey(key) is not equivalent to getValue(key) != null, i.e. after doing a put(key, null), containsKey(key), still returns true, I am expecting something similar. I find it wierd that after doing a putAll(key, LIST), containsKey(key) returns FALSE, it should return an empty list. &lt;/p&gt;

&lt;p&gt;My problem is this (maybe this is not to be discussed here, but I think it is appropriate at least to put the problem forward): I use MultiHashMap (MHM) for caching database results of 1-to-many relationships. Let&apos;s say its is a PERSON borrowed BOOKS relation. So, I do one SQL query to fetch all the books for many (not all) persons and then populate the MHM cache (SELECT book_id from BorrowedBooks where person_id in (id1, id2, id3...)). After populating, the MHM has person1-&amp;gt;books borrowed by person1, person2-&amp;gt;books borrwed by person2 etc. Now, a query comes asking for books borrowed by personX. Since there is no way of asking the MHM whether &quot;this key has no entries&quot;, if I don&apos;t find the personX&apos;s key in the MHM, it is unclear if the caching query had fetched personX&apos;s id in the original query. If there was a way, of maintaining empty collections in the MHM, then this problem can be solved. &lt;/p&gt;

&lt;p&gt;Also there is no way to put an empty list for a key which I could have used as  workaround.&lt;/p&gt;</comment>
                            <comment id="12492652" author="jwcarman" created="Mon, 30 Apr 2007 10:54:57 +0000"  >&lt;p&gt;Just use a set along side the map to keep track of which persons have had their books cached.&lt;/p&gt;</comment>
                            <comment id="12492654" author="jwcarman" created="Mon, 30 Apr 2007 10:56:30 +0000"  >&lt;p&gt;I believe we have established that this is the desired functionality.  Changing it now would break other code which relies upon the existing behavior.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Apr 2007 19:39:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sihj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164472</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-249] SetUniqueList.addAll(int index, Collection coll) adds to end of list instead of at specified index</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-249</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When you call SetUniqueList.addAll(int index, Collection coll), it incorrectly adds the new elements to the end of the list instead of at the specified index.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12367704">COLLECTIONS-249</key>
            <summary>SetUniqueList.addAll(int index, Collection coll) adds to end of list instead of at specified index</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cyboc">Joe Kelly</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Apr 2007 19:10:59 +0000</created>
                <updated>Sat, 7 Nov 2015 20:26:40 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:05:02 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>List</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12490433" author="cyboc" created="Fri, 20 Apr 2007 19:30:11 +0000"  >&lt;p&gt;Here is a patch to TestSetUniqueList, which shows the bug. When you run it, the test fails with the following message &quot;First new element should be at index 0 expected:&amp;lt;2&amp;gt; but was:&amp;lt;1&amp;gt;&quot;. The new unique element was added but it was added in the wrong place.&lt;/p&gt;</comment>
                            <comment id="12490434" author="cyboc" created="Fri, 20 Apr 2007 19:37:50 +0000"  >&lt;p&gt;Here is a patch to SetUniqueList, which fixes the bug. In addition, it also includes suggested fixes to the Javadoc comments for addAll(Collection coll) and addAll(int index, Collection coll), which seemed to be incorrect.&lt;/p&gt;

&lt;p&gt;After applying the patch, the patched test (see previous attachment) passes.&lt;/p&gt;</comment>
                            <comment id="12490618" author="bayard" created="Sat, 21 Apr 2007 13:45:25 +0000"  >
&lt;p&gt;Nice find Joe, patches applied to trunk.&lt;/p&gt;

&lt;p&gt;svn ci -m &quot;Applying Joe Kelly&apos;s fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-249&quot; title=&quot;SetUniqueList.addAll(int index, Collection coll) adds to end of list instead of at specified index&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-249&quot;&gt;&lt;del&gt;COLLECTIONS-249&lt;/del&gt;&lt;/a&gt; - SetUniqueList.addAll(int, Collection&amp;gt; ) was always inserting at the end of the list&quot; &lt;/p&gt;

&lt;p&gt;Sending        RELEASE-NOTES.html&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/list/SetUniqueList.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/list/TestSetUniqueList.java&lt;br/&gt;
Transmitting file data ...&lt;br/&gt;
Committed revision 531027.&lt;/p&gt;</comment>
                            <comment id="12554020" author="cyboc" created="Fri, 21 Dec 2007 20:06:40 +0000"  >&lt;p&gt;FYI, I was just browsing collections_jdk5_branch and this bug seems to still exist in that branch. I guess the branch was created before this patch was committed (Oct 16, 2006 vs Apr 21, 2007). I&apos;m not sure if this was the right place to put this comment or if I should have created a new issue &amp;#8211; sorry in advance, if this is the wrong place.&lt;/p&gt;</comment>
                            <comment id="12560873" author="shammah" created="Sun, 20 Jan 2008 20:53:56 +0000"  >&lt;p&gt;No worries about the generics branch.  At some point, the changes to the trunk will be merged into the branch.  I will most likely do this after each trunk release, to make tracking and merging easier.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12355949" name="SetUniqueList.patch" size="2403" author="cyboc" created="Fri, 20 Apr 2007 19:37:50 +0000"/>
                            <attachment id="12355948" name="TestSetUniqueList.patch" size="2174" author="cyboc" created="Fri, 20 Apr 2007 19:30:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 21 Apr 2007 13:45:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18750</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sihr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-246] LoopingListIterator behaves unexpected on next and previous mixed</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-246</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Using ArrayList as the backing list. &lt;br/&gt;
This combination at least returns unexpected results as you can see in the testcase below.&lt;br/&gt;
I used this for a list navigator in a web frontend and had trouble with users.&lt;br/&gt;
I suspect java.util.AbstrList$ListItr (role of &quot;cursor&quot; var seems to be wrong implemented ) to cause this problem. If so maybe we have to implement it in a different way.&lt;/p&gt;

&lt;p&gt;Testcase (it runs without hassle but the comments show whats wrong):&lt;br/&gt;
-------------------------------------------&lt;br/&gt;
import java.util.ArrayList;&lt;br/&gt;
import junit.framework.TestCase;&lt;br/&gt;
import org.apache.commons.collections.iterators.LoopingListIterator;&lt;/p&gt;

&lt;p&gt;public class SelectionControllerTest extends TestCase {&lt;br/&gt;
    public void testSelectorForApache() &lt;/p&gt;
{
        ArrayList al = new ArrayList();
        al.add(&quot;0&quot;); al.add(&quot;1&quot;); al.add(&quot;2&quot;);
        LoopingListIterator it = new  LoopingListIterator(al);
        assertEquals(&quot;0&quot;, it.next()); // This is OK
        // here I am on &quot;0&quot;
        assertEquals(&quot;0&quot;, it.previous()); // Wrong ! This should be 2!
        //      here I am on &quot;0&quot; too! This is wrong.
        assertEquals(&quot;2&quot;, it.previous());
        assertEquals(&quot;1&quot;, it.previous());
        assertEquals(&quot;0&quot;, it.previous());
        assertEquals(&quot;2&quot;, it.previous());
        // here I am on &quot;2&quot; 
        assertEquals(&quot;2&quot;, it.next()); // Wrong ! This should be 0!
        // here I am on &quot;2&quot; too! This is wrong.
        assertEquals(&quot;0&quot;, it.next()); 
        assertEquals(&quot;1&quot;, it.next());
        // here I am on &quot;1&quot;         
        assertEquals(&quot;1&quot;, it.previous()); // Wrong ! This should be 0!
    }
&lt;p&gt;}&lt;br/&gt;
-------------------------------------------&lt;/p&gt;

&lt;p&gt;Thanks for your help.&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 1.4.2_12 &lt;br/&gt;
Common Collections 3.2&lt;/p&gt;</environment>
        <key id="12365343">COLLECTIONS-246</key>
            <summary>LoopingListIterator behaves unexpected on next and previous mixed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fhefter">Frank Hefter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2007 09:07:21 +0000</created>
                <updated>Thu, 28 Feb 2013 19:52:53 +0000</updated>
                            <resolved>Sat, 26 Apr 2008 15:17:51 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Iterator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12482585" author="shammah" created="Tue, 20 Mar 2007 23:12:03 +0000"  >&lt;p&gt;This ticket makes sense - it&apos;s similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-239&quot; title=&quot;In LinkIterator hasPrevious() is not working properly for the first entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-239&quot;&gt;&lt;del&gt;COLLECTIONS-239&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12489419" author="bayard" created="Tue, 17 Apr 2007 14:56:54 +0000"  >&lt;p&gt;Yeah, this one is interesting. In &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-239&quot; title=&quot;In LinkIterator hasPrevious() is not working properly for the first entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-239&quot;&gt;&lt;del&gt;COLLECTIONS-239&lt;/del&gt;&lt;/a&gt;, the way it works is (afaik) by design and so that one should be a WONTFIX.&lt;/p&gt;

&lt;p&gt;In this case, I think the same kind of problem exists. The statement of &apos;here I am on &quot;0&quot;&apos; in inaccurate, instead &apos;here&apos; is the space between &quot;0&quot; and &quot;1&quot;, not one of the elements. If we think of things as existing at an element and not the space between, then the example above begins pointing at &quot;2&quot;, and in the non looping case it begins pointing at a null value that is prior to the list. That feels very odd.&lt;/p&gt;

&lt;p&gt;I can see why these semantics don&apos;t give people what they want. Pointing at elements, while confusing at the boundaries, does make more sense in their use cases. I wonder if it would all be simpler if we didn&apos;t have the bad two-in-one next() previous() methods but used getNext() and moveToNext() semantics.&lt;/p&gt;
</comment>
                            <comment id="12541723" author="fhefter" created="Mon, 12 Nov 2007 09:55:13 +0000"  >&lt;p&gt;Testcase for the expected result&lt;/p&gt;</comment>
                            <comment id="12541725" author="fhefter" created="Mon, 12 Nov 2007 09:58:11 +0000"  >&lt;p&gt;After I made the new test cases I found some problems with Daves implementation.&lt;br/&gt;
Please test my changes and report to me.&lt;br/&gt;
It would be the best if you show me failing test cases that I can fix then.&lt;/p&gt;</comment>
                            <comment id="12541746" author="fhefter" created="Mon, 12 Nov 2007 11:27:48 +0000"  >&lt;p&gt;I don&apos;t want to make a new attachment for a small but useful addition. Maybe the next editor can add these lines then:&lt;br/&gt;
---------------------------------------------------------------------------------------------------&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Just indicates the selection of the first entry in the list.&lt;/li&gt;
	&lt;li&gt;This is good to indicate that the start of the list has been reached.&lt;/li&gt;
	&lt;li&gt;@return&lt;/li&gt;
	&lt;li&gt;@version initial Frank Hefter 2007-11-12&lt;br/&gt;
     */&lt;br/&gt;
    public boolean isFirst() 
{
        return currentIndex&amp;lt;=0;
    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Just indicates the selection of the last entry in the list.&lt;/li&gt;
	&lt;li&gt;This is good to indicate that the end of the list has been reached.&lt;/li&gt;
	&lt;li&gt;@return&lt;/li&gt;
	&lt;li&gt;@version initial Frank Hefter 2007-11-12&lt;br/&gt;
     */&lt;br/&gt;
    public boolean isLast() 
{
        return currentIndex&amp;gt;=list.size()-1;
    }
&lt;p&gt;---------------------------------------------------------------------------------------------------&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12579362" author="fhefter" created="Mon, 17 Mar 2008 09:35:33 +0000"  >&lt;p&gt;This is the bug free version with the additional methods.&lt;/p&gt;</comment>
                            <comment id="12579364" author="fhefter" created="Mon, 17 Mar 2008 09:38:19 +0000"  >&lt;p&gt;The attached version is working and has been tested.&lt;/p&gt;</comment>
                            <comment id="12579473" author="bayard" created="Mon, 17 Mar 2008 15:09:44 +0000"  >&lt;p&gt;Reopening as the suggested fix hasn&apos;t been applied to SVN.&lt;/p&gt;</comment>
                            <comment id="12579838" author="fhefter" created="Tue, 18 Mar 2008 13:29:25 +0000"  >&lt;p&gt;Hallo Henri,&lt;/p&gt;

&lt;p&gt;I&apos;m not able to check in the changes into SVN since my connections here at work are very restrictive and at home I have no computer with a dev system set up.&lt;br/&gt;
Could you or someone else check in the changes for me?&lt;/p&gt;

&lt;p&gt;Just copy all and past.&lt;/p&gt;

&lt;p&gt;Thanks, &lt;br/&gt;
  Frank&lt;/p&gt;





</comment>
                            <comment id="12582133" author="bayard" created="Wed, 26 Mar 2008 05:57:58 +0000"  >&lt;p&gt;I don&apos;t see us changing LoopingListIterator itself. The question is whether we add a different type of Iterator. It would also mean a different kind of OrderedIterator.&lt;/p&gt;

&lt;p&gt;I&apos;m suspecting this is a WONTFIX, accepting it as a facet of the design.&lt;/p&gt;</comment>
                            <comment id="12584429" author="bayard" created="Wed, 2 Apr 2008 06:28:17 +0000"  >
&lt;p&gt;The basic case that I think that has to be expected is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o1 = it.next();
&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o2 = it.previous();

assertTrue(o1 == o2) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;.next()&quot; moves the current position. So it&apos;s right for the it.previous() to return &quot;0&quot; and not &quot;2&quot;. &lt;/p&gt;

&lt;p&gt;Previously I suggested that a different approach of getNext and moveToNext might be useful, but that would a) confuse by adding a duplicate layer and b) would not match the Collections API java.util.Iterator pattern. So I don&apos;t think there&apos;s anything to do here - the iterators work to the same pattern as the JDK&apos;s Iterator.&lt;/p&gt;</comment>
                            <comment id="12584459" author="fhefter" created="Wed, 2 Apr 2008 08:34:06 +0000"  >&lt;p&gt;For my opinion this test case is to simple and can&apos;t be compared with the more complex swap over at the beginning and the end of this LoopingList (thats the error I ment btw. !).&lt;/p&gt;

&lt;p&gt;You simply take a java.util.Iterator test. But this ignores the abilities of this class comletely.&lt;/p&gt;

&lt;p&gt;Again, please give me test cases that are better than mine. &lt;/p&gt;

&lt;p&gt;Also your test works with this fix, too. So it is an iterator? Right?&lt;/p&gt;

&lt;p&gt;Just for the case: I don&apos;t care about the implementation. Just my tests have to apply.&lt;br/&gt;
So we can focus on the tests and make them more complexe. &lt;/p&gt;

&lt;p&gt;Is there a LoopIterator pattern somewhere? If not: Let&apos;s create it !&lt;/p&gt;</comment>
                            <comment id="12586084" author="bayard" created="Sun, 6 Apr 2008 02:40:26 +0000"  >&lt;p&gt;Can you restate your failing test? Looking at the description, I was taking it as:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ArrayList al = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList(); 
al.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;); 
al.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;); 
al.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;); 
LoopingListIterator it = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LoopingListIterator(al); 
assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, it.next()); &lt;span class=&quot;code-comment&quot;&gt;// This is OK 
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// here I am on &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; 
&lt;/span&gt;assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, it.previous()); &lt;span class=&quot;code-comment&quot;&gt;// Wrong ! This should be 2! &lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Your statement here is incorrect - the answer should be 0 not 2. This is the base of your misunderstanding - you are not &quot;on 0&quot;, you are &quot;before 0&quot;. I think that&apos;s a part of the java.util.Iterator concept; and that we shouldn&apos;t implement an alternative to java.util.Iterator as it would lead to having to write lots of code.&lt;/p&gt;</comment>
                            <comment id="12588547" author="fhefter" created="Mon, 14 Apr 2008 11:55:31 +0000"  >&lt;p&gt;1. it.next() returns &quot;0&quot; this means the iterator is ON (not before or after) &quot;0&quot;&lt;br/&gt;
2. it.previous() should return the value before &quot;0&quot; - this is &quot;2&quot;&lt;/p&gt;

&lt;p&gt;There is no before or after! What for ?&lt;/p&gt;

&lt;p&gt;Following you opinion a  &lt;br/&gt;
it.next() &lt;br/&gt;
it.previous &lt;br/&gt;
it.next() &lt;br/&gt;
it.previous &lt;br/&gt;
it.next() &lt;br/&gt;
a.s.o. &lt;br/&gt;
should always return the same value. I would like to see these commands as buttons that navigate through a list. Would a user that presses these buttons expect to stay at the same place? For sure not.&lt;/p&gt;

&lt;p&gt;I think thats the mistake of your thinking. A command has to move the iterator. The former error was that I was not able to predict that.&lt;/p&gt;</comment>
                            <comment id="12589041" author="scolebourne" created="Tue, 15 Apr 2008 11:31:26 +0000"  >&lt;p&gt;Could everyone please read the javadoc for ListIterator.&lt;br/&gt;
&lt;a href=&quot;http://java.sun.com/javase/6/docs/api/java/util/ListIterator.html#previous(&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/javase/6/docs/api/java/util/ListIterator.html#previous(&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;next() followed by previous() return the same value.&lt;/p&gt;</comment>
                            <comment id="12592574" author="bayard" created="Sat, 26 Apr 2008 15:17:51 +0000"  >&lt;p&gt;Thanks Stephen, closing this as the current behaviour matches ListIterator.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12360661">COLLECTIONS-239</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12378024" name="LoopingListIterator.java" size="8788" author="fhefter" created="Mon, 17 Mar 2008 09:35:33 +0000"/>
                            <attachment id="12369333" name="LoopingListIterator.java" size="7711" author="davemeikle" created="Sun, 11 Nov 2007 22:12:26 +0000"/>
                            <attachment id="12369355" name="LoopingListIteratorTest.java" size="3824" author="fhefter" created="Mon, 12 Nov 2007 09:55:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Mar 2007 23:12:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18753</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sii7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164475</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-240] MultiValueMap should implement Serializable</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-240</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Collection classes should be serializable as they are frequently used in model classes which need to be serializable, for example in a HttpSession object within a servlet container cluster.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12360935">COLLECTIONS-240</key>
            <summary>MultiValueMap should implement Serializable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wouterv">Wouter de Vaal</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Jan 2007 14:09:02 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:24 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:04:15 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>11</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12493478" author="bayard" created="Thu, 3 May 2007 19:38:28 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12493647" author="joerg.heinicke@gmx.de" created="Fri, 4 May 2007 11:15:00 +0000"  >&lt;p&gt;I second this since I use the deprecated MultiHashMap and can&apos;t migrate my code since I need the serialization.&lt;/p&gt;</comment>
                            <comment id="12522194" author="bayard" created="Thu, 23 Aug 2007 16:53:50 +0000"  >&lt;p&gt;An easy change to make (obviously); but TestMultiHashMap doesn&apos;t extend AbstractTestMap and get the automatic Serialization testing, so need to either a) duplicate said testing or b) figure out how to make MultiHashMap fit the TestMap contract. 12 Failures and 4 errors for a simple try.&lt;/p&gt;</comment>
                            <comment id="12528351" author="alanmehio" created="Tue, 18 Sep 2007 11:02:15 +0000"  >&lt;p&gt;I found a bug in the in the method below from a related  test class; however, this has been fixed in the latest svn at &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/collections/trunk/src/java/org/apache/commons/collections/map/MultiValueMap.java?revision=560660&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/commons/proper/collections/trunk/src/java/org/apache/commons/collections/map/MultiValueMap.java?revision=560660&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;public boolean putAll(Object key, Collection values) {&lt;/p&gt;

&lt;p&gt;   if (coll.size() &amp;gt; 0) &lt;/p&gt;
{

                 coll = createCollection(values.size()); 
                 boolean result = coll.addAll(values);
                // only add if non-zero size to maintain class state
                getMap().put(key, coll);
                result = false;  // here  should be true since collection has been changed 
                // returns true for a none zero one 
            }
&lt;p&gt;            return result;&lt;br/&gt;
}&lt;/p&gt;


&lt;p&gt;Another issue which  I have noticed is the code line &lt;br/&gt;
 coll = createCollection(values.size());  &lt;/p&gt;

&lt;p&gt;the method  &lt;br/&gt;
 protected Collection createCollection(int size) &lt;/p&gt;
{
        return (Collection) collectionFactory.create();
    }

&lt;p&gt;does not use the  &quot;size&quot;;  I am guessing the method signature is left because of backward compatibility&lt;/p&gt;

&lt;p&gt;It would be nice it we can create the correct size for the ArrayList instead of the default one which is 10 &lt;br/&gt;
when we add the collection to the newly created ArrrayList  as below&lt;/p&gt;

&lt;p&gt;coll = createCollection(values.size()); &lt;br/&gt;
                 boolean result = coll.addAll(values);&lt;/p&gt;

&lt;p&gt;this will give better code optimization &lt;/p&gt;




&lt;p&gt;I think MultiValueMap should implement Serializable ( can be serialized)&lt;/p&gt;


&lt;p&gt;Regards,&lt;br/&gt;
Alan Mehio&lt;/p&gt;
</comment>
                            <comment id="12529387" author="alanmehio" created="Fri, 21 Sep 2007 11:29:08 +0000"  >&lt;p&gt;&amp;lt;quoted-statemen&amp;gt;&lt;br/&gt;
It would be nice it we can create the correct size for the ArrayList instead of the default one which is 10 &lt;br/&gt;
&amp;lt;/quoted-statement&amp;gt;&lt;/p&gt;


&lt;p&gt;This will not optimize the code since the ArrayList ; please refere to the below methods in the ArrayList based on &lt;br/&gt;
the constructor with empty array size i.e new ArrayList();&lt;/p&gt;

&lt;p&gt; public boolean addAll(Collection&amp;lt;? extends E&amp;gt; c) &lt;/p&gt;
{
	Object[] a = c.toArray();
        int numNew = a.length;
	ensureCapacity(size + numNew);  // Increments modCount
        System.arraycopy(a, 0, elementData, size, numNew);
        size += numNew;
	return numNew != 0;
    }
&lt;p&gt; &lt;/p&gt;


&lt;p&gt;public boolean add(E o) &lt;/p&gt;
{
	ensureCapacity(size + 1);  // Increments modCount!!
	elementData[size++] = o;
	return true;
    }


&lt;p&gt; public void ensureCapacity(int minCapacity) {&lt;br/&gt;
	modCount++;&lt;br/&gt;
	int oldCapacity = elementData.length;&lt;br/&gt;
	if (minCapacity &amp;gt; oldCapacity) &lt;/p&gt;
{ 
	    Object oldData[] = elementData;
	    int newCapacity = (oldCapacity * 3)/2 + 1;
    	    if (newCapacity &amp;lt; minCapacity)
		newCapacity = minCapacity;
	    elementData = (E[])new Object[newCapacity];
	    System.arraycopy(oldData, 0, elementData, 0, size);
	}
&lt;p&gt;    }&lt;/p&gt;



&lt;p&gt;Cheers&lt;br/&gt;
Alan Mehio&lt;br/&gt;
London, UK&lt;/p&gt;
</comment>
                            <comment id="12545686" author="joerg.heinicke@gmx.de" created="Tue, 27 Nov 2007 02:20:30 +0000"  >&lt;p&gt;The Cocoon team had to revert back code changes to MultiHashMap due to missing serializability as mentioned in the linked issue. This issue seems to bug a lot of people &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;PS: Alan, please write up new logs for your findings instead of reusing this one since it is really only about implementing Serializable.&lt;/p&gt;</comment>
                            <comment id="12545731" author="wouterv" created="Tue, 27 Nov 2007 07:01:04 +0000"  >&lt;p&gt;I think it is time this bug receives the attention it needs (see the cocoon issues) &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12579309" author="bayard" created="Mon, 17 Mar 2008 05:28:43 +0000"  >&lt;p&gt;I&apos;ve started work on this. Here is the current state.&lt;/p&gt;

&lt;p&gt;The fullCollection obj file is presumably bad as I&apos;m making no effort to fill it. There are 11 failures and 3 errors. &lt;/p&gt;

&lt;p&gt;The failures are generally due to hashCodes not matching before and after serialization - I think. The errors are NullPointerExceptions.&lt;/p&gt;

&lt;p&gt;It&apos;s a start &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12587756" author="davemeikle" created="Thu, 10 Apr 2008 19:14:21 +0000"  >&lt;p&gt;Most of the errors are down to the hashCode being different. This is because the MultiValueMap in the test is wrapping values up in an ArrayList where as the comparison map is expecting the raw value.&lt;/p&gt;

&lt;p&gt;I am trying to use the existing base test to correct this by means of overriding some methods to some success but have been hit by a laptop screen failure! Will get the code of and see where I get too.&lt;/p&gt;

&lt;p&gt;Dave&lt;/p&gt;</comment>
                            <comment id="12597369" author="bayard" created="Fri, 16 May 2008 07:28:42 +0000"  >&lt;p&gt;Right. First step is getting MultiValueMap on the test structure. That has 11 errors; regardless of serialization being used. So either a) that gets fixed, or b) just write a different bit of serialization testing. Very tempted by the latter by this stage.&lt;/p&gt;</comment>
                            <comment id="12597378" author="bayard" created="Fri, 16 May 2008 08:11:23 +0000"  >&lt;p&gt;I&apos;ve gone ahead and made MultiValueMap serializable:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=656960&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=656960&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Any review would be very welcome. &lt;/p&gt;</comment>
                            <comment id="12599288" author="bayard" created="Fri, 23 May 2008 06:45:21 +0000"  >&lt;p&gt;No comments - closing as fixed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12383280">COCOON-2151</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12382216">COCOON-2146</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12378019" name="COLLECTIONS-240.patch" size="3609" author="bayard" created="Mon, 17 Mar 2008 05:28:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 May 2007 19:38:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18759</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0seq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163862</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-239] In LinkIterator hasPrevious() is not working properly for the first entry</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-239</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In hasPrevious() method of LinkIterator &apos;next&apos; field is used, that is not correct  - method returns &apos;true&apos; for the first entry. &apos;last&apos; field should be used insted.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP, jdk-1.5.0_02&lt;/p&gt;</environment>
        <key id="12360661">COLLECTIONS-239</key>
            <summary>In LinkIterator hasPrevious() is not working properly for the first entry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mic">Michael Pavlov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jan 2007 09:26:36 +0000</created>
                <updated>Sat, 27 Apr 2013 21:25:47 +0000</updated>
                            <resolved>Wed, 26 Mar 2008 05:36:22 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Iterator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12468439" author="bayard" created="Mon, 29 Jan 2007 23:18:32 +0000"  >&lt;p&gt;Looking at trunk, the actual code is:&lt;/p&gt;

&lt;p&gt;            return (next.before != parent.header);&lt;/p&gt;

&lt;p&gt;Not the most semantically clear, but the following test appears to pass quite happily:&lt;/p&gt;

&lt;p&gt;    // &lt;a href=&quot;http://issues.apache.org/jira/browse/COLLECTIONS-239&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/COLLECTIONS-239&lt;/a&gt;&lt;br/&gt;
    public void testCollections239() {&lt;br/&gt;
        LinkedMap map = new LinkedMap();&lt;br/&gt;
        map.put(&quot;1&quot;, &quot;1&quot;);&lt;br/&gt;
        map.put(&quot;2&quot;, &quot;2&quot;);&lt;br/&gt;
        map.put(&quot;3&quot;, &quot;3&quot;);&lt;br/&gt;
        map.put(&quot;4&quot;, &quot;4&quot;);&lt;/p&gt;

&lt;p&gt;        OrderedIterator itr = (OrderedIterator) map.values().iterator();&lt;br/&gt;
        assertFalse( itr.hasPrevious() );&lt;br/&gt;
        for( int i=0; i &amp;lt; 4; i++) &lt;/p&gt;
{
            assertTrue( itr.hasNext() );
            Object ignore = itr.next();
            assertTrue( itr.hasPrevious() );
        }

&lt;p&gt;        assertFalse( itr.hasNext() );&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;So I think this is resolvable as &quot;cannot reproduce&quot;. Do you have a test case that fails?&lt;/p&gt;</comment>
                            <comment id="12470280" author="bayard" created="Mon, 5 Feb 2007 17:12:17 +0000"  >&lt;p&gt;Going ahead with the &apos;cannot reproduce&apos;. Please feel free to reopen the issue.&lt;/p&gt;</comment>
                            <comment id="12470528" author="mic" created="Tue, 6 Feb 2007 11:33:13 +0000"  >&lt;p&gt;Why OrderedIterator should rely on &apos;next&apos; field? Current(last returned) entry is in &apos;last&apos; field. &lt;br/&gt;
Semantically in java.util.Iterator hasNext() referes to last returned value.&lt;br/&gt;
My use case is: I need to iterate through map values in JSP and construct a table with command to move up &amp;amp;down. My code is:&lt;br/&gt;
  for (OrderedIterator I = (OrderedIterator)map.values().iterator(); I.hasNext()&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
  {&lt;br/&gt;
     /* next() is the only method that can return current value, but it moves iterator cursor to the next entry&lt;br/&gt;
     so hasPrevious returns true. In order to get it right i need to remember it first in separate field like these*/&lt;br/&gt;
   // boolean hasPrevious = I.hasPrevious();&lt;br/&gt;
     String s = (String) I.next();%&amp;gt;&lt;br/&gt;
     &amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;&amp;lt;%=s%&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;&amp;lt;%if(I.hasPrevious())&lt;/p&gt;
{%&amp;gt;&amp;lt;input type=&quot;button&quot; value=&quot;UP&quot; onClick=&quot;...&quot;/&amp;gt;&amp;lt;%}
&lt;p&gt;%&amp;gt;&amp;lt;/td&amp;gt;...&amp;lt;/tr&amp;gt;&amp;lt;%&lt;/p&gt;

&lt;p&gt;  }&lt;/p&gt;</comment>
                            <comment id="12470534" author="mic" created="Tue, 6 Feb 2007 11:51:41 +0000"  >&lt;p&gt;Semantically hasNext() referes to last returned value (&apos;last&apos; field) (in java.util.Iterator ). &lt;br/&gt;
Why hasPrevious() should use &apos;next&apos; field (in LinkIterator)?&lt;/p&gt;</comment>
                            <comment id="12470725" author="bayard" created="Tue, 6 Feb 2007 20:12:33 +0000"  >&lt;p&gt;I think I see. Your report is that hasPrevious() should still return false after the first element.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a unit test that shows that this is a problem. Thanks for reopening.&lt;/p&gt;</comment>
                            <comment id="12470730" author="bayard" created="Tue, 6 Feb 2007 20:27:16 +0000"  >&lt;p&gt;(grr&apos;s at firefox 2 for losing a long reply).&lt;/p&gt;

&lt;p&gt;I&apos;m still thinking we should resolve this as not to be fixed. Here&apos;s why:&lt;/p&gt;

&lt;p&gt;OrderedIterator oi = ...;&lt;br/&gt;
oi.next();&lt;br/&gt;
oi.previous();&lt;br/&gt;
oi.next();&lt;br/&gt;
oi.previous();&lt;br/&gt;
// back at the start&lt;/p&gt;

&lt;p&gt;If hasPrevious() was to return false after moving passed the first element, then the above would not be possible. Looking at the Javadoc for OrderedIterator, the previous() method does need to indicate that movement happens, and the class Javadoc could do with a note on this subject - that hasPrevious() returns true after calling the first next().&lt;/p&gt;</comment>
                            <comment id="12582131" author="bayard" created="Wed, 26 Mar 2008 05:36:22 +0000"  >&lt;p&gt;Closing this as WONTFIX. I think it&apos;s burnt into the semantics of how the class works and this is a side-effect.&lt;/p&gt;</comment>
                            <comment id="13423416" author="hudson" created="Thu, 26 Jul 2012 20:11:49 +0000"  >&lt;p&gt;Integrated in commons-collections #68 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/68/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/68/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-239&quot; title=&quot;In LinkIterator hasPrevious() is not working properly for the first entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-239&quot;&gt;&lt;del&gt;COLLECTIONS-239&lt;/del&gt;&lt;/a&gt; Use of generic Equator in EqualPredicate. (Revision 1366174)&lt;/p&gt;

&lt;p&gt;     Result = UNSTABLE&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366174&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366174&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/changes/changes.xml&lt;/li&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/EqualPredicate.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13423541" author="hudson" created="Thu, 26 Jul 2012 23:07:49 +0000"  >&lt;p&gt;Integrated in commons-collections #69 (See &lt;a href=&quot;https://builds.apache.org/job/commons-collections/69/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/commons-collections/69/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-239&quot; title=&quot;In LinkIterator hasPrevious() is not working properly for the first entry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-239&quot;&gt;&lt;del&gt;COLLECTIONS-239&lt;/del&gt;&lt;/a&gt; to keep backwards compatibility, do not use DefaultEquator in case no equator is specific, but rather use the original equals method. (Revision 1366185)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tn : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366185&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1366185&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/commons/proper/collections/trunk/src/main/java/org/apache/commons/collections/functors/EqualPredicate.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12365343">COLLECTIONS-246</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12350491" name="COLLECTIONS-239-test.patch" size="1568" author="bayard" created="Tue, 6 Feb 2007 20:12:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Jan 2007 23:18:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sijb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164480</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-237] MultiValueMap: behavior of entrySet().iterator() is not the expected one</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-237</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The entrySet() method of the MultiValueMap delegates the entrySet() call to the decorated map, which is HashMap by default. The default hashmap iterator is used, which causes the iterator to return one Map.Entry for every key. The value returned for the key is an ArrayList, and not the value of the entry which was put into the map.&lt;/p&gt;

&lt;p&gt;The expected behavior would be the iterator to return the whole set of entries in the map, which requires iteration over the different array lists contained in the decorated map.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12358457">COLLECTIONS-237</key>
            <summary>MultiValueMap: behavior of entrySet().iterator() is not the expected one</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nika">Nils Kaiser</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Dec 2006 18:09:44 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:42 +0000</updated>
                            <resolved>Sat, 27 Apr 2013 11:09:45 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12457899" author="bayard" created="Tue, 12 Dec 2006 21:57:18 +0000"  >
&lt;p&gt;Given that we flatten values(), it makes a lot of sense to return a flattened entrySet() and not an unflattened one; however entrySet() returns a Set which to me implies that there should not be a duplicated key,value pair. MultiValueMap doesn&apos;t stop the value having dupes so it&apos;s entirely possible.&lt;/p&gt;

&lt;p&gt;So, that seems that either:&lt;/p&gt;

&lt;p&gt;1/ We define entrySet as matching keySet and mark this issue WONTFIX.&lt;br/&gt;
2/ We define entrySet as matching values and make sure our Map.Entry classes do not equal each other.&lt;br/&gt;
3/ We define entrySet as matching unique key-values pairs - so that:&lt;/p&gt;

&lt;p&gt;keySet().size() &amp;lt;= entrySet().size() &amp;lt;= values().size()&lt;/p&gt;

&lt;p&gt;Anyone have thoughts on which should be done?&lt;/p&gt;

&lt;p&gt;Bear in mind that 2+3 both involve backwards compat issues if people are expecting 1.&lt;/p&gt;</comment>
                            <comment id="12529378" author="alanmehio" created="Fri, 21 Sep 2007 11:10:25 +0000"  >&lt;p&gt;&amp;lt;quoted-statement&amp;gt;&lt;br/&gt;
The value returned for the key is an ArrayList, and not the value of the entry which was put into the map&lt;br/&gt;
&amp;lt;/quoted-statement&amp;gt;&lt;br/&gt;
What if we overload the method below &lt;/p&gt;

&lt;p&gt;public Iterator iterator(Object key) &lt;/p&gt;

&lt;p&gt;with &lt;/p&gt;

&lt;p&gt;   public Iterator iterator() &lt;/p&gt;
{
       return getMap().entrySet().iterator();
    }


&lt;p&gt;otherwise I am in favour of point one &lt;br/&gt;
&amp;lt;point-one&amp;gt;&lt;br/&gt;
1/ We define entrySet as matching keySet and mark this issue WONTFIX.&lt;br/&gt;
&amp;lt;/point-one&amp;gt;&lt;/p&gt;


&lt;p&gt;Regards,&lt;br/&gt;
Alan Mehio&lt;br/&gt;
London, UK&lt;/p&gt;


</comment>
                            <comment id="12580251" author="bayard" created="Wed, 19 Mar 2008 06:49:42 +0000"  >&lt;p&gt;+1 to the iterator() idea. Needs to be coded up with unit test for anyone that wants to dive in.&lt;/p&gt;</comment>
                            <comment id="12596280" author="bayard" created="Tue, 13 May 2008 05:12:24 +0000"  >&lt;p&gt;#1 gets the vote. On iterator....&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t the iterator() be returning a flattened iteration of values from all of the contained ArrayLists; and also be generating ConcurrentModificationException in some fun way?&lt;/p&gt;

&lt;p&gt;I don&apos;t think this will be simple to implement, so pushing up to 3.4.&lt;/p&gt;</comment>
                            <comment id="12597364" author="bayard" created="Fri, 16 May 2008 06:22:04 +0000"  >&lt;p&gt;Ironically, this is the same bug that causes errors with the serialization tests in &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-240&quot; title=&quot;MultiValueMap should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-240&quot;&gt;&lt;del&gt;COLLECTIONS-240&lt;/del&gt;&lt;/a&gt;. containsAll fails because the elements are now all inside arraylists.&lt;/p&gt;</comment>
                            <comment id="12928440" author="modsiw" created="Fri, 5 Nov 2010 00:46:52 +0000"  >&lt;p&gt;I have a possible solution (perhaps unacceptable) that was coded for in-house use.&lt;/p&gt;

&lt;p&gt;In this solution, MultiMap.entrySet returns a flattened &quot;set&quot; that violates the general contract of set by allowing two Entry that are .equals . It behaves as an IdentitySet, similar to th keys of java.util.IdentityHashMap .&lt;/p&gt;

&lt;p&gt;Another note is that the set supports .remove and if all values for a key are removed, the key is also removed. I&apos;m unsure if the removal of the key is desired. It would be trivial to change.&lt;/p&gt;

&lt;p&gt;If this solution is desired for the library, I&apos;ll work it up as a proper patch.&lt;/p&gt;</comment>
                            <comment id="13643628" author="tn" created="Sat, 27 Apr 2013 11:09:45 +0000"  >&lt;p&gt;In r1476553, I have implemented the #iterator() method as suggested and clarified the javadoc for #entrySet().&lt;/p&gt;

&lt;p&gt;The Map.Entry objects returned by iterator() do not support setValue(Object), but I guess this is ok for now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Dec 2006 21:57:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18762</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ftk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-236] CollectionUtils.filter filters the inverse of what it is documented to filter</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-236</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The documentation states that when the predicate returns &lt;b&gt;false&lt;/b&gt; the item will be removed.&lt;br/&gt;
The implementation removes those items that return true.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12356271">COLLECTIONS-236</key>
            <summary>CollectionUtils.filter filters the inverse of what it is documented to filter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lwexler">Lee Wexler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Nov 2006 14:12:40 +0000</created>
                <updated>Wed, 22 Nov 2006 16:26:12 +0000</updated>
                            <resolved>Wed, 22 Nov 2006 16:26:12 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12451660" author="lwexler" created="Tue, 21 Nov 2006 14:25:05 +0000"  >&lt;p&gt;Please close this bug as incorrect.  My sincere apologies for being too hasty.&lt;/p&gt;</comment>
                            <comment id="12451984" author="bayard" created="Wed, 22 Nov 2006 16:26:12 +0000"  >&lt;p&gt;Reporter requested this bug be closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Nov 2006 16:26:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18763</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sijr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-228] MultiValueMap put and putAll do not return the correct values</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-228</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;MultiValueMap put and putAll do not return the correct values.&lt;/p&gt;

&lt;p&gt;putAll(Object, Collection) should return true if the map is changed. But if the key is new then this behaviour fails.&lt;/p&gt;

&lt;p&gt;put(Object, Object) should return the added value if the map is changed. But if the key is new then this behaviour fails.&lt;/p&gt;

&lt;p&gt;This was hidden because the test case referred to MultiHashMap and not MultValueMap.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12354197">COLLECTIONS-228</key>
            <summary>MultiValueMap put and putAll do not return the correct values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scolebourne">Stephen Colebourne</assignee>
                                    <reporter username="scolebourne">Stephen Colebourne</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Oct 2006 12:14:56 +0000</created>
                <updated>Sat, 7 Nov 2015 20:47:14 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:25:10 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0silj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164490</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-222] CollectionUtils removeAll is actually retainAll</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-222</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The removeAll(Collection collection, Collection remove) method calls ListUtils.retainAll(collection, remove)&lt;br/&gt;
instead of ListUtils.removeAll(Collection collection, Collection remove)&lt;/p&gt;

&lt;p&gt;Should be an easy fix&lt;/p&gt;</description>
                <environment></environment>
        <key id="12348239">COLLECTIONS-222</key>
            <summary>CollectionUtils removeAll is actually retainAll</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="seabamirum">Tim Lenz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Aug 2006 17:43:04 +0000</created>
                <updated>Fri, 18 Aug 2006 19:01:22 +0000</updated>
                            <resolved>Fri, 18 Aug 2006 19:01:22 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12429071" author="mbenson" created="Fri, 18 Aug 2006 18:08:48 +0000"  >&lt;p&gt;duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-219&quot; title=&quot;The CollectionUtils.removeAll method calls the ListUtils.retainAll method instead of the ListUtils.removeAll method.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-219&quot;&gt;&lt;del&gt;COLLECTIONS-219&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12347178">COLLECTIONS-219</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 18 Aug 2006 18:08:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18777</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 30 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sim7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-221] CompositeCollection, CompositeMap, CompositeSet should implement Serializable</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-221</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;These classes should implement Serializable as usually all generial collection classes do. (At least I cannot think of a reason why they shouldn&apos;t and currently their usage is quite limited, like in RMI or http-sessions.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12347852">COLLECTIONS-221</key>
            <summary>CompositeCollection, CompositeMap, CompositeSet should implement Serializable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="denespal">Pal Denes</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Aug 2006 17:10:01 +0000</created>
                <updated>Sun, 9 Nov 2014 14:31:55 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:08:07 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Collection</component>
                    <component>Map</component>
                    <component>Set</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12493479" author="bayard" created="Thu, 3 May 2007 19:39:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12531258" author="alanmehio" created="Sat, 29 Sep 2007 17:07:33 +0000"  >&lt;p&gt;+1&lt;br/&gt;
Can somebody mention one reason why these classes( CompLsiteCollection, CompositeMap, CompositeSet) should not be Serializabel if the  ArrayList, HashSet, LinkedHashSet, HashMap, TreeMap and so on ... &lt;br/&gt;
are Serializable.&lt;/p&gt;


&lt;p&gt;Regards,&lt;br/&gt;
Alan Mehio&lt;br/&gt;
London, UK&lt;/p&gt;</comment>
                            <comment id="12596301" author="bayard" created="Tue, 13 May 2008 06:52:06 +0000"  >&lt;p&gt;Patch to make these serializable. Patch doesn&apos;t include the binary .obj files as it only supports text.&lt;/p&gt;</comment>
                            <comment id="12596302" author="bayard" created="Tue, 13 May 2008 06:53:50 +0000"  >&lt;p&gt;svn ci -m &quot;Applying my patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-221&quot; title=&quot;CompositeCollection, CompositeMap, CompositeSet should implement Serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-221&quot;&gt;&lt;del&gt;COLLECTIONS-221&lt;/del&gt;&lt;/a&gt; - making the CompositeMap, CompositeSet and CompositeCollection serializable. The only difference from the patch is that the creation of the obj files in TestCompositeMap is commented out&quot;&lt;/p&gt;

&lt;p&gt;Adding  (bin)  data/test/CompositeCollection.emptyCollection.version3.3.obj&lt;br/&gt;
Adding  (bin)  data/test/CompositeCollection.fullCollection.version3.3.obj&lt;br/&gt;
Adding  (bin)  data/test/CompositeMap.emptyCollection.version3.3.obj&lt;br/&gt;
Adding  (bin)  data/test/CompositeMap.fullCollection.version3.3.obj&lt;br/&gt;
Adding  (bin)  data/test/CompositeSet.emptyCollection.version3.3.obj&lt;br/&gt;
Adding  (bin)  data/test/CompositeSet.fullCollection.version3.3.obj&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/collection/CompositeCollection.java&lt;br/&gt;
Sending        src/java/org/apache/commons/collections/map/CompositeMap.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/collection/TestCompositeCollection.java&lt;br/&gt;
Adding         src/test/org/apache/commons/collections/map/EmptyMapMutator.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/map/TestCompositeMap.java&lt;br/&gt;
Adding         src/test/org/apache/commons/collections/set/EmptySetMutator.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/set/TestCompositeSet.java&lt;br/&gt;
Transmitting file data .............&lt;br/&gt;
Committed revision 655751.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12381931" name="COLLECTIONS-221.patch" size="13850" author="bayard" created="Tue, 13 May 2008 06:52:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 May 2007 19:39:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18778</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0simf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-220] Serialization/Deserialization doesn&apos;t work well with empty buffers.</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-220</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When I serialize the queue to disk an it has elements, all works ok, but when I serialize an empty queue I have some problems when I create a new object using the serialized file.&lt;/p&gt;

&lt;p&gt;When I deserialize the queue it has a &apos;buffer&apos; with size 1 (with null content), &apos;tail&apos; and &apos;head&apos; fields are 0 (they are declared transient). So, when I try to add a new object to the queue, the sentence:&lt;/p&gt;

&lt;p&gt; Object[] tmp = new Object&lt;span class=&quot;error&quot;&gt;&amp;#91;((buffer.length - 1) * 2) + 1&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;Is executed in the add() method to increase the buffer length, but the buffer remains with the same size! (buffer.length = 1 --&amp;gt; (1 - 1) * 2 + 1 = 1). So, the object is added and when the tail is going to be incremented, it is reset to 0!! &lt;/p&gt;

&lt;p&gt;    private int increment(int index) {&lt;br/&gt;
        index++;&lt;br/&gt;
        if (index &amp;gt;= buffer.length) &lt;/p&gt;
{
            index = 0;
        }
&lt;p&gt;        return index;&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;So it is impossible to add new elements after an empty queue has been serialized / deserialized.&lt;/p&gt;

&lt;p&gt;I attach a simple TestCase where this is proved. The example works when you use XMLEncoder to serialize the buffer but doesn&apos;t work if you use ObjectOutputStream or XStream.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12347430">COLLECTIONS-220</key>
            <summary>Serialization/Deserialization doesn&apos;t work well with empty buffers.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jlhuertas">Jose Luis Huertas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Aug 2006 13:53:14 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:15 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:08:17 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Buffer</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12461280" author="davemeikle" created="Fri, 29 Dec 2006 00:27:02 +0000"  >&lt;p&gt;Proposed Patch to fix Object Serialization Problem&lt;/p&gt;</comment>
                            <comment id="12493484" author="bayard" created="Thu, 3 May 2007 19:43:59 +0000"  >&lt;p&gt;Nice simple patch. +1. &lt;/p&gt;</comment>
                            <comment id="12579104" author="bayard" created="Sun, 16 Mar 2008 00:24:31 +0000"  >&lt;p&gt;Attaching a unit test for this, along with Dave&apos;s previously attached fix.&lt;/p&gt;</comment>
                            <comment id="12579105" author="bayard" created="Sun, 16 Mar 2008 00:25:45 +0000"  >&lt;p&gt;svn ci -m &quot;Applying a unit test for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-220&quot; title=&quot;Serialization/Deserialization doesn&amp;#39;t work well with empty buffers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-220&quot;&gt;&lt;del&gt;COLLECTIONS-220&lt;/del&gt;&lt;/a&gt;. AbstractTestObject is refactored to provide a utility method that serializes and then deserializes. Dave Meikle&apos;s fix for said unit test is also applied. &quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/buffer/UnboundedFifoBuffer.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/AbstractTestObject.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/buffer/TestUnboundedFifoBuffer.java&lt;br/&gt;
Transmitting file data ...&lt;br/&gt;
Committed revision 637495.&lt;/p&gt;</comment>
                            <comment id="13638330" author="tn" created="Mon, 22 Apr 2013 19:07:49 +0000"  >&lt;p&gt;The Buffer interface/implementations have been removed, thus this fix is obsolete.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12605031">COLLECTIONS-432</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12338277" name="ASF.LICENSE.NOT.GRANTED--SerializationTest.java" size="4034" author="jlhuertas" created="Mon, 7 Aug 2006 13:53:14 +0000"/>
                            <attachment id="12348027" name="COLLECTIONS-200.patch" size="1140" author="davemeikle" created="Fri, 29 Dec 2006 00:27:02 +0000"/>
                            <attachment id="12377983" name="COLLECTIONS-220.patch" size="3531" author="bayard" created="Sun, 16 Mar 2008 00:24:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Dec 2006 00:27:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0simn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164495</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-219] The CollectionUtils.removeAll method calls the ListUtils.retainAll method instead of the ListUtils.removeAll method.</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-219</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The CollectionUtils.removeAll method calls the ListUtils.retainAll method instead of the ListUtils.removeAll method.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12347178">COLLECTIONS-219</key>
            <summary>The CollectionUtils.removeAll method calls the ListUtils.retainAll method instead of the ListUtils.removeAll method.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scolebourne">Stephen Colebourne</assignee>
                                    <reporter username="toml">Tom Leccese</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Aug 2006 17:37:52 +0000</created>
                <updated>Sat, 7 Nov 2015 19:51:56 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:25:30 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0-alpha1</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12425372" author="scolebourne" created="Wed, 2 Aug 2006 20:23:07 +0000"  >&lt;p&gt;Fixed in svn 348013, thanks&lt;/p&gt;</comment>
                            <comment id="13100202" author="szczerb" created="Thu, 8 Sep 2011 10:26:37 +0000"  >&lt;p&gt;Is there any hope for a 3.2.2 bugfix release?&lt;/p&gt;</comment>
                            <comment id="13825288" author="strug" created="Mon, 18 Nov 2013 12:28:29 +0000"  >&lt;p&gt;I question myself why there is no 3.2.2. bugfix release?&lt;/p&gt;</comment>
                            <comment id="13825296" author="tn" created="Mon, 18 Nov 2013 12:55:21 +0000"  >&lt;p&gt;There are plans to actually do this, but the priority is currently on releasing 4.0&lt;/p&gt;</comment>
                            <comment id="14995382" author="jochen@apache.org" created="Sat, 7 Nov 2015 19:51:56 +0000"  >&lt;p&gt;The actual problem seems to me to be a gap in the test suite.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12674741">COLLECTIONS-487</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12467833">COLLECTIONS-357</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12625235">COLLECTIONS-437</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12348239">COLLECTIONS-222</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12387501">COLLECTIONS-284</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12413928">COLLECTIONS-315</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12444891">COLLECTIONS-349</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12616040">COLLECTIONS-435</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Aug 2006 20:23:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18780</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k3uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>115442</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-217] Flat3Map.Entry.setValue() overwrites other Entry values</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-217</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Flat3Map&apos;s Entry objects will overwrite other Entry&apos;s values if Entry.setValue() is called on one.  It should only overwrite the Entry at hand.&lt;/p&gt;

&lt;p&gt;I&apos;ve looked at the source, and the case statement incorrectly falls through, rather than returning like it should:&lt;/p&gt;

&lt;p&gt;Flat3Map.java, lines 646-660:&lt;/p&gt;

&lt;p&gt;        public Object setValue(Object value) {&lt;br/&gt;
            if (canRemove == false) &lt;/p&gt;
{
                throw new IllegalStateException(AbstractHashedMap.SETVALUE_INVALID);
            }
&lt;p&gt;            Object old = getValue();&lt;br/&gt;
            switch (nextIndex) &lt;/p&gt;
{
                case 3: 
                    parent.value3 = value;
                case 2:
                    parent.value2 = value;
                case 1:
                    parent.value1 = value;
            }
&lt;p&gt;            return old;&lt;br/&gt;
        }&lt;/p&gt;

&lt;p&gt;With this code, if I set the value of the third item in the EntrySet, then all three values are set to the new value.&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 1.4, WinXP&lt;/p&gt;</environment>
        <key id="12346193">COLLECTIONS-217</key>
            <summary>Flat3Map.Entry.setValue() overwrites other Entry values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scolebourne">Stephen Colebourne</assignee>
                                    <reporter username="mattbishop">Matt Bishop</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jul 2006 17:42:56 +0000</created>
                <updated>Sun, 8 Nov 2015 20:21:37 +0000</updated>
                            <resolved>Tue, 18 Jul 2006 22:02:11 +0000</resolved>
                                    <version>3.2</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>Map</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12421938" author="matt@thebishops.org" created="Tue, 18 Jul 2006 20:20:47 +0000"  >&lt;p&gt;This should really be the Map component, but I don&apos;t have edit rights.&lt;/p&gt;</comment>
                            <comment id="12421983" author="scolebourne" created="Tue, 18 Jul 2006 22:02:11 +0000"  >&lt;p&gt;Fixed in revision 423264&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jul 2006 20:20:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sin3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164497</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-214] ExtendedProperties - field include should be non-static and private</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-214</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The field &quot;include&quot; in ExtendedProperties is currently static and protected, yet has instance get/set accessors.&lt;/p&gt;

&lt;p&gt;Given that there are accessors, it seems unnecessary for the field to be protected - it could be private.&lt;/p&gt;

&lt;p&gt;The field should also surely be non-static - or the accessors should be made static, if the field really is supposed to be shared among instances.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12344554">COLLECTIONS-214</key>
            <summary>ExtendedProperties - field include should be non-static and private</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scolebourne">Stephen Colebourne</assignee>
                                    <reporter username="sebb@apache.org">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 18 Jun 2006 18:54:06 +0000</created>
                <updated>Sat, 27 Apr 2013 21:32:50 +0000</updated>
                            <resolved>Tue, 18 Jul 2006 22:44:33 +0000</resolved>
                                    <version>3.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12421991" author="scolebourne" created="Tue, 18 Jul 2006 22:44:33 +0000"  >&lt;p&gt;Fixed in rv 423272&lt;/p&gt;

&lt;p&gt;Added a private instance variable and deprecated the static variable.&lt;br/&gt;
Altered the get and set methods to use the instance variable falling back to the static variable as a default.&lt;/p&gt;</comment>
                            <comment id="13643802" author="tn" created="Sat, 27 Apr 2013 21:32:50 +0000"  >&lt;p&gt;Fix obsolete as the class has been removed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12445725">COLLECTIONS-351</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jul 2006 22:44:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18785</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sinr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-136] [collections][PATCH] CollectionUtils.getFreq optimization</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-136</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The attached patch improves the performance of CollectionUtils.getFreq(Object,&lt;br/&gt;
Map) by using a test in place of a thrown exception.&lt;/p&gt;

&lt;p&gt;The effect of the change was measured with the class below. These are the times&lt;br/&gt;
for the Sun JDK 1.4.1_03 on Red Hat Linux 8.0&lt;/p&gt;

&lt;p&gt;pre-optimization:   122534&lt;br/&gt;
post-optimization:  104637&lt;/p&gt;

&lt;p&gt;The patch reduced the time to run the test to 85% of the original.&lt;/p&gt;

&lt;p&gt;The also patch removes a catch of NoSuchElementException which, as far as I can&lt;br/&gt;
tell, was unnecessary in the original code.&lt;/p&gt;

&lt;p&gt;This is the test class:&lt;/p&gt;

&lt;p&gt;import org.apache.commons.collections.CollectionUtils ;&lt;/p&gt;

&lt;p&gt;import java.util.*;&lt;/p&gt;

&lt;p&gt;public class CollectionUtilsTest {&lt;/p&gt;


&lt;p&gt;    Set a ;&lt;br/&gt;
    Set b ;&lt;br/&gt;
    Set c ;&lt;/p&gt;

&lt;p&gt;    Collection cols []  ;&lt;/p&gt;

&lt;p&gt;    long startMillis ;&lt;br/&gt;
    void init () {&lt;/p&gt;

&lt;p&gt;	a = new HashSet () ;&lt;br/&gt;
	for ( int i = 1 ; i &amp;lt;= 10000 ; i++ ) &lt;/p&gt;
{
	    a.add ( new Integer ( i ) ) ;
	}

&lt;p&gt;	b = new HashSet () ;&lt;br/&gt;
	for ( int i = 5001 ; i &amp;lt;= 15000 ; i++ ) &lt;/p&gt;
{
	    b.add ( new Integer ( i ) ) ;
	}

&lt;p&gt;	c = new HashSet () ;&lt;br/&gt;
	for ( int i = 10001 ; i &amp;lt;= 20000 ; i++ ) &lt;/p&gt;
{
	    c.add ( new Integer ( i ) ) ;
	}

&lt;p&gt;	cols = new Collection [] &lt;/p&gt;
{ a, b, c }
&lt;p&gt; ;&lt;/p&gt;

&lt;p&gt;	startMillis = System.currentTimeMillis () ;&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;    void run () {&lt;/p&gt;

&lt;p&gt;	for ( int i = 0 ; i &amp;lt; 3 ; i++ ) {&lt;br/&gt;
	    for ( int j = 0 ; j &amp;lt; 3 ; j++ ) &lt;/p&gt;
{
		CollectionUtils.union ( cols [ i ], cols [ j ] ) ;
		CollectionUtils.intersection ( cols [ i ], cols [ j ] ) ;
		CollectionUtils.disjunction ( cols [ i ], cols [ j ] ) ;
		CollectionUtils.subtract ( cols [ i ], cols [ j ] ) ;
	    }
&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;    }&lt;/p&gt;


&lt;p&gt;    void report () &lt;/p&gt;
{

	System.out.println ( &quot;Elapsed millis: &quot; + ( System.currentTimeMillis () -
startMillis ) ) ;
    }



&lt;p&gt;    public static void main ( String  [] arg ) &lt;/p&gt;
{

	CollectionUtilsTest t = new CollectionUtilsTest () ;

	t.init () ;
	t.run () ;
	t.report () ;

    }
&lt;p&gt;}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12340950">COLLECTIONS-136</key>
            <summary>[collections][PATCH] CollectionUtils.getFreq optimization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="janekdb@yahoo.co.uk">Janek Bogucki</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Sep 2003 03:59:07 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:02 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:02 +0000</resolved>
                                    <version>Nightly Builds</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12405016" author="janekdb@yahoo.co.uk" created="Tue, 9 Sep 2003 04:00:55 +0000"  >&lt;p&gt;Created an attachment (id=8106)&lt;br/&gt;
Patch to improve the performance of CollectionUtils.getFreq&lt;/p&gt;</comment>
                            <comment id="12405017" author="scolebourne@joda.org" created="Wed, 10 Sep 2003 04:56:13 +0000"  >&lt;p&gt;patch applied, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12332511" name="ASF.LICENSE.NOT.GRANTED--CollectionUtils-replace-try-catch-with-test.path" size="860" author="janekdb@yahoo.co.uk" created="Tue, 9 Sep 2003 04:00:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23004</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Sep 2003 04:56:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18862</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sj3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-135] [PATCH] SwitchTransformer doc/impl inconsistent</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-135</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;TransformerUtils says that a null defaultTransformer will return null; this is&lt;br/&gt;
consistent with the switchTransformer tests under TestTransformerUtils. &lt;br/&gt;
However, the SwitchTransformer constructor&apos;s javadoc says that a null&lt;br/&gt;
defaultTransformer means nop, which is incorrect.  Not that it matters, but NOP&lt;br/&gt;
would have been more intuitive IMHO, but what&apos;s done is done and passing&lt;br/&gt;
NOPTransformer.INSTANCE or TransformerUtils.nopTransformer() is no big deal.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12343009">COLLECTIONS-135</key>
            <summary>[PATCH] SwitchTransformer doc/impl inconsistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gudnabrsam@yahoo.com">Matt Benson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Apr 2006 05:38:52 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:02 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:02 +0000</resolved>
                                    <version>Nightly Builds</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12411702" author="gudnabrsam@yahoo.com" created="Wed, 5 Apr 2006 05:41:16 +0000"  >&lt;p&gt;Same goes for getInstance(.,.,.)&lt;/p&gt;</comment>
                            <comment id="12411703" author="gudnabrsam@yahoo.com" created="Wed, 5 Apr 2006 05:41:44 +0000"  >&lt;p&gt;Created an attachment (id=18024)&lt;br/&gt;
suggested javadoc patch&lt;/p&gt;</comment>
                            <comment id="12411704" author="scolebourne@joda.org" created="Tue, 11 Apr 2006 06:23:41 +0000"  >&lt;p&gt;Patch applied, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12334099" name="ASF.LICENSE.NOT.GRANTED--switchxform.patch.txt" size="1379" author="gudnabrsam@yahoo.com" created="Wed, 5 Apr 2006 05:41:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39207</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Apr 2006 06:23:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18863</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sj3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164573</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-134] [collections] Error in deserialization of full BoundedFifoBuffer</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-134</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;If a BoundedFifoBuffer is serialized and then deserialized the value of the end&lt;br/&gt;
attribute is set to the max size of the Buffer which is a fault and causes an&lt;br/&gt;
ArrayIndexOutOfBoundException during add(object). In this case the value of end&lt;br/&gt;
must be set to 0 in the deserialization.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12342722">COLLECTIONS-134</key>
            <summary>[collections] Error in deserialization of full BoundedFifoBuffer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apachebugz@tkuhn.de">Tilmann Kuhn</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Nov 2005 07:52:46 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:02 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:02 +0000</resolved>
                                    <version>3.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12410895" author="apachebugz@tkuhn.de" created="Thu, 17 Nov 2005 08:11:09 +0000"  >&lt;p&gt;Actually the exception thrown is not an ArrayIndexOutOfBoundsException as statet&lt;br/&gt;
in my report but an BufferOverflowException as expected. The problem with the&lt;br/&gt;
faulty ArrayIndexOutOfBoundsException occours if you first call remove() and&lt;br/&gt;
then add(object) on the deserialized Buffer. (I never used BoundedFifoBuffer by&lt;br/&gt;
itself but had the problem with a CircularFifoBuffer wich first calls a remove()&lt;br/&gt;
on the full Buffer during add.)&lt;/p&gt;</comment>
                            <comment id="12410896" author="scolebourne@joda.org" created="Tue, 22 Nov 2005 08:43:45 +0000"  >

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;This bug has been marked as a duplicate of 31433 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37539</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 Nov 2005 08:43:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18864</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sj47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164574</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-133] JavaDoc for ListUtils and FactoryUtils missing</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-133</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;ListUtils and FactoryUtils are missing from the currently accessable commons &lt;br/&gt;
collection javadoc.&lt;br/&gt;
Maybe there are other classes missing?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12340347">COLLECTIONS-133</key>
            <summary>JavaDoc for ListUtils and FactoryUtils missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cob@atp.dk">Colin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Oct 2002 20:16:52 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:02 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:02 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12403022" author="scolebourne@joda.org" created="Mon, 25 Nov 2002 04:35:33 +0000"  >&lt;p&gt;ListUtils is available on-line at &lt;br/&gt;
&lt;a href=&quot;http://jakarta.apache.org/commons/collections/api/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jakarta.apache.org/commons/collections/api/index.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;FactoryUtils no longer exists.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13288</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Nov 2002 04:35:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18865</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sj4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164575</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-132] Input streams are never closed in ExtendedProperties</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-132</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;If I read a file with ExtendedProperties the OS cannot remove this file as long&lt;br/&gt;
as my JVM is running because it has still a handle on that file.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12341343">COLLECTIONS-132</key>
            <summary>Input streams are never closed in ExtendedProperties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lbe.tech@spree.de">Lars Beuster</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Mar 2004 20:59:05 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:02 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:02 +0000</resolved>
                                    <version>3.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12406259" author="scolebourne@joda.org" created="Thu, 18 Mar 2004 05:12:01 +0000"  >&lt;p&gt;Change made to CVS, to close the file handle opened in the constructor. &lt;br/&gt;
Hopefully this should solve your problem.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Mar 2004 05:12:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sj4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164576</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-131] performing get(Object) operations inside of an iteration produces an infinite loop</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-131</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I just &quot;fixed&quot; LRUMap, which was not promoting get(Object) operations correctly.&lt;br/&gt;
However, now if you perform a get(Object) within an iteration of the &lt;br/&gt;
keySet(), it will keep promoting values to the top and producing an&lt;br/&gt;
infinite loop.  This needs to be fixed, by making the collection throw a&lt;br/&gt;
ConcurrentModificationException, or by fixing the behaviour in some other way.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12340220">COLLECTIONS-131</key>
            <summary>performing get(Object) operations inside of an iteration produces an infinite loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="morgand@apache.org">Morgan Delagrange</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 May 2002 01:03:45 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:02 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:02 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12402635" author="mas@apache.org" created="Mon, 10 Jun 2002 06:16:22 +0000"  >&lt;p&gt;SequencedHashMap now has fail-fast iterators which LRUMap picks up because it is&lt;br/&gt;
a subclass.  So, I believe this bug is fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Jun 2002 06:16:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18867</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sj4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>


<item>
            <title>[COLLECTIONS-130] [collections] CollectionUtils.cardinality should be made smarter about Bag</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-130</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;I see that Bag implementations have a getCount() method that one would presume&lt;br/&gt;
is more efficient than iterating over the objects in the Collection.  Why&lt;br/&gt;
doesn&apos;t CollectionUtils.cardinality() take advantage of this?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12341423">COLLECTIONS-130</key>
            <summary>[collections] CollectionUtils.cardinality should be made smarter about Bag</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jon.schewe@honeywell.com">Jon Schewe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Apr 2004 21:37:02 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:02 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:02 +0000</resolved>
                                    <version>3.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12406521" author="jon.schewe@honeywell.com" created="Tue, 27 Apr 2004 21:38:07 +0000"  >&lt;p&gt;The simple change for this would be:&lt;br/&gt;
public static int cardinality(Object obj, final Collection col) {&lt;br/&gt;
  if(col instanceof Bag) &lt;/p&gt;
{
    return ((Bag)col).getCount(obj);
   }
&lt;p&gt; else &lt;/p&gt;
{
     //put the current body here
   }
&lt;p&gt;}&lt;/p&gt;</comment>
                            <comment id="12406522" author="scolebourne@joda.org" created="Wed, 28 Apr 2004 03:03:28 +0000"  >&lt;p&gt;Not done previously because no-one thought of it.&lt;/p&gt;

&lt;p&gt;Special cases for Set and Bag have been added.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28629</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Apr 2004 03:03:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18868</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sj53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164578</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>